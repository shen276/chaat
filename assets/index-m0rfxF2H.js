var fy=Object.defineProperty;var dy=(n,e,t)=>e in n?fy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Fr=(n,e,t)=>dy(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const py="modulepreload",hy=function(n){return"/chaat/"+n},If={},Bo=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(t.map(d=>{if(d=hy(d),d in If)return;If[d]=!0;const p=d.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":py,p||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),p)return new Promise((_,A)=>{v.addEventListener("load",_),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};var Af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ih={exports:{}},Al={},sh={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=Symbol.for("react.element"),my=Symbol.for("react.portal"),gy=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),vy=Symbol.for("react.profiler"),_y=Symbol.for("react.provider"),Cy=Symbol.for("react.context"),Ty=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Sy=Symbol.for("react.memo"),wy=Symbol.for("react.lazy"),kf=Symbol.iterator;function Iy(n){return n===null||typeof n!="object"?null:(n=kf&&n[kf]||n["@@iterator"],typeof n=="function"?n:null)}var lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uh=Object.assign,ah={};function Go(n,e,t){this.props=n,this.context=e,this.refs=ah,this.updater=t||lh}Go.prototype.isReactComponent={};Go.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Go.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function ch(){}ch.prototype=Go.prototype;function Qa(n,e,t){this.props=n,this.context=e,this.refs=ah,this.updater=t||lh}var Xa=Qa.prototype=new ch;Xa.constructor=Qa;uh(Xa,Go.prototype);Xa.isPureReactComponent=!0;var Pf=Array.isArray,fh=Object.prototype.hasOwnProperty,Za={current:null},dh={key:!0,ref:!0,__self:!0,__source:!0};function ph(n,e,t){var r,o={},i=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)fh.call(e,r)&&!dh.hasOwnProperty(r)&&(o[r]=e[r]);var c=arguments.length-2;if(c===1)o.children=t;else if(1<c){for(var d=Array(c),p=0;p<c;p++)d[p]=arguments[p+2];o.children=d}if(n&&n.defaultProps)for(r in c=n.defaultProps,c)o[r]===void 0&&(o[r]=c[r]);return{$$typeof:bi,type:n,key:i,ref:l,props:o,_owner:Za.current}}function Ay(n,e){return{$$typeof:bi,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ja(n){return typeof n=="object"&&n!==null&&n.$$typeof===bi}function ky(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var xf=/\/+/g;function Tu(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ky(""+n.key):e.toString(36)}function qs(n,e,t,r,o){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case bi:case my:l=!0}}if(l)return l=n,o=o(l),n=r===""?"."+Tu(l,0):r,Pf(o)?(t="",n!=null&&(t=n.replace(xf,"$&/")+"/"),qs(o,e,t,"",function(p){return p})):o!=null&&(ja(o)&&(o=Ay(o,t+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(xf,"$&/")+"/")+n)),e.push(o)),1;if(l=0,r=r===""?".":r+":",Pf(n))for(var c=0;c<n.length;c++){i=n[c];var d=r+Tu(i,c);l+=qs(i,e,t,d,o)}else if(d=Iy(n),typeof d=="function")for(n=d.call(n),c=0;!(i=n.next()).done;)i=i.value,d=r+Tu(i,c++),l+=qs(i,e,t,d,o);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Cs(n,e,t){if(n==null)return n;var r=[],o=0;return qs(n,r,"","",function(i){return e.call(t,i,o++)}),r}function Py(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Fn={current:null},Bs={transition:null},xy={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:Bs,ReactCurrentOwner:Za};function hh(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Cs,forEach:function(n,e,t){Cs(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Cs(n,function(){e++}),e},toArray:function(n){return Cs(n,function(e){return e})||[]},only:function(n){if(!ja(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Re.Component=Go;Re.Fragment=gy;Re.Profiler=vy;Re.PureComponent=Qa;Re.StrictMode=yy;Re.Suspense=Ey;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xy;Re.act=hh;Re.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=uh({},n.props),o=n.key,i=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Za.current),e.key!==void 0&&(o=""+e.key),n.type&&n.type.defaultProps)var c=n.type.defaultProps;for(d in e)fh.call(e,d)&&!dh.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=t;else if(1<d){c=Array(d);for(var p=0;p<d;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:bi,type:n.type,key:o,ref:i,props:r,_owner:l}};Re.createContext=function(n){return n={$$typeof:Cy,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:_y,_context:n},n.Consumer=n};Re.createElement=ph;Re.createFactory=function(n){var e=ph.bind(null,n);return e.type=n,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(n){return{$$typeof:Ty,render:n}};Re.isValidElement=ja;Re.lazy=function(n){return{$$typeof:wy,_payload:{_status:-1,_result:n},_init:Py}};Re.memo=function(n,e){return{$$typeof:Sy,type:n,compare:e===void 0?null:e}};Re.startTransition=function(n){var e=Bs.transition;Bs.transition={};try{n()}finally{Bs.transition=e}};Re.unstable_act=hh;Re.useCallback=function(n,e){return Fn.current.useCallback(n,e)};Re.useContext=function(n){return Fn.current.useContext(n)};Re.useDebugValue=function(){};Re.useDeferredValue=function(n){return Fn.current.useDeferredValue(n)};Re.useEffect=function(n,e){return Fn.current.useEffect(n,e)};Re.useId=function(){return Fn.current.useId()};Re.useImperativeHandle=function(n,e,t){return Fn.current.useImperativeHandle(n,e,t)};Re.useInsertionEffect=function(n,e){return Fn.current.useInsertionEffect(n,e)};Re.useLayoutEffect=function(n,e){return Fn.current.useLayoutEffect(n,e)};Re.useMemo=function(n,e){return Fn.current.useMemo(n,e)};Re.useReducer=function(n,e,t){return Fn.current.useReducer(n,e,t)};Re.useRef=function(n){return Fn.current.useRef(n)};Re.useState=function(n){return Fn.current.useState(n)};Re.useSyncExternalStore=function(n,e,t){return Fn.current.useSyncExternalStore(n,e,t)};Re.useTransition=function(){return Fn.current.useTransition()};Re.version="18.3.1";sh.exports=Re;var Ce=sh.exports;const bw=oh(Ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry=Ce,My=Symbol.for("react.element"),Ny=Symbol.for("react.fragment"),Dy=Object.prototype.hasOwnProperty,Ly=Ry.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uy={key:!0,ref:!0,__self:!0,__source:!0};function mh(n,e,t){var r,o={},i=null,l=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Dy.call(e,r)&&!Uy.hasOwnProperty(r)&&(o[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:My,type:n,key:i,ref:l,props:o,_owner:Ly.current}}Al.Fragment=Ny;Al.jsx=mh;Al.jsxs=mh;ih.exports=Al;var G=ih.exports,gh={exports:{}},jn={},yh={exports:{}},vh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ie,Te){var Ee=ie.length;ie.push(Te);e:for(;0<Ee;){var ze=Ee-1>>>1,on=ie[ze];if(0<o(on,Te))ie[ze]=Te,ie[Ee]=on,Ee=ze;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var Te=ie[0],Ee=ie.pop();if(Ee!==Te){ie[0]=Ee;e:for(var ze=0,on=ie.length,zn=on>>>1;ze<zn;){var sn=2*(ze+1)-1,rt=ie[sn],vn=sn+1,ht=ie[vn];if(0>o(rt,Ee))vn<on&&0>o(ht,rt)?(ie[ze]=ht,ie[vn]=Ee,ze=vn):(ie[ze]=rt,ie[sn]=Ee,ze=sn);else if(vn<on&&0>o(ht,Ee))ie[ze]=ht,ie[vn]=Ee,ze=vn;else break e}}return Te}function o(ie,Te){var Ee=ie.sortIndex-Te.sortIndex;return Ee!==0?Ee:ie.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],p=[],m=1,v=null,_=3,A=!1,V=!1,B=!1,Y=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ie){for(var Te=t(p);Te!==null;){if(Te.callback===null)r(p);else if(Te.startTime<=ie)r(p),Te.sortIndex=Te.expirationTime,e(d,Te);else break;Te=t(p)}}function K(ie){if(B=!1,w(ie),!V)if(t(d)!==null)V=!0,be(O);else{var Te=t(p);Te!==null&&tt(K,Te.startTime-ie)}}function O(ie,Te){V=!1,B&&(B=!1,I(oe),oe=-1),A=!0;var Ee=_;try{for(w(Te),v=t(d);v!==null&&(!(v.expirationTime>Te)||ie&&!Ne());){var ze=v.callback;if(typeof ze=="function"){v.callback=null,_=v.priorityLevel;var on=ze(v.expirationTime<=Te);Te=n.unstable_now(),typeof on=="function"?v.callback=on:v===t(d)&&r(d),w(Te)}else r(d);v=t(d)}if(v!==null)var zn=!0;else{var sn=t(p);sn!==null&&tt(K,sn.startTime-Te),zn=!1}return zn}finally{v=null,_=Ee,A=!1}}var J=!1,b=null,oe=-1,le=5,ce=-1;function Ne(){return!(n.unstable_now()-ce<le)}function Me(){if(b!==null){var ie=n.unstable_now();ce=ie;var Te=!0;try{Te=b(!0,ie)}finally{Te?$e():(J=!1,b=null)}}else J=!1}var $e;if(typeof E=="function")$e=function(){E(Me)};else if(typeof MessageChannel<"u"){var Ut=new MessageChannel,nt=Ut.port2;Ut.port1.onmessage=Me,$e=function(){nt.postMessage(null)}}else $e=function(){Y(Me,0)};function be(ie){b=ie,J||(J=!0,$e())}function tt(ie,Te){oe=Y(function(){ie(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){V||A||(V=!0,be(O))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(_){case 1:case 2:case 3:var Te=3;break;default:Te=_}var Ee=_;_=Te;try{return ie()}finally{_=Ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,Te){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Ee=_;_=ie;try{return Te()}finally{_=Ee}},n.unstable_scheduleCallback=function(ie,Te,Ee){var ze=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ze+Ee:ze):Ee=ze,ie){case 1:var on=-1;break;case 2:on=250;break;case 5:on=1073741823;break;case 4:on=1e4;break;default:on=5e3}return on=Ee+on,ie={id:m++,callback:Te,priorityLevel:ie,startTime:Ee,expirationTime:on,sortIndex:-1},Ee>ze?(ie.sortIndex=Ee,e(p,ie),t(d)===null&&ie===t(p)&&(B?(I(oe),oe=-1):B=!0,tt(K,Ee-ze))):(ie.sortIndex=on,e(d,ie),V||A||(V=!0,be(O))),ie},n.unstable_shouldYield=Ne,n.unstable_wrapCallback=function(ie){var Te=_;return function(){var Ee=_;_=Te;try{return ie.apply(this,arguments)}finally{_=Ee}}}})(vh);yh.exports=vh;var Fy=yh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy=Ce,Zn=Fy;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _h=new Set,xi={};function Qr(n,e){No(n,e),No(n+"Capture",e)}function No(n,e){for(xi[n]=e,n=0;n<e.length;n++)_h.add(e[n])}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=Object.prototype.hasOwnProperty,qy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rf={},Mf={};function By(n){return Wu.call(Mf,n)?!0:Wu.call(Rf,n)?!1:qy.test(n)?Mf[n]=!0:(Rf[n]=!0,!1)}function Gy(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Hy(n,e,t,r){if(e===null||typeof e>"u"||Gy(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(n,e,t,r,o,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var En={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){En[n]=new Vn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];En[e]=new Vn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){En[n]=new Vn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){En[n]=new Vn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){En[n]=new Vn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){En[n]=new Vn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){En[n]=new Vn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){En[n]=new Vn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){En[n]=new Vn(n,5,!1,n.toLowerCase(),null,!1,!1)});var ec=/[\-:]([a-z])/g;function nc(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ec,nc);En[e]=new Vn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ec,nc);En[e]=new Vn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ec,nc);En[e]=new Vn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){En[n]=new Vn(n,1,!1,n.toLowerCase(),null,!1,!1)});En.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){En[n]=new Vn(n,1,!1,n.toLowerCase(),null,!0,!0)});function tc(n,e,t,r){var o=En.hasOwnProperty(e)?En[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hy(e,t,o,r)&&(t=null),r||o===null?By(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):o.mustUseProperty?n[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,r=o.attributeNamespace,t===null?n.removeAttribute(e):(o=o.type,t=o===3||o===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var jt=Vy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=Symbol.for("react.element"),ao=Symbol.for("react.portal"),co=Symbol.for("react.fragment"),rc=Symbol.for("react.strict_mode"),Yu=Symbol.for("react.profiler"),Ch=Symbol.for("react.provider"),Th=Symbol.for("react.context"),oc=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Xu=Symbol.for("react.suspense_list"),ic=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Eh=Symbol.for("react.offscreen"),Nf=Symbol.iterator;function ii(n){return n===null||typeof n!="object"?null:(n=Nf&&n[Nf]||n["@@iterator"],typeof n=="function"?n:null)}var rn=Object.assign,Eu;function mi(n){if(Eu===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Eu=e&&e[1]||""}return`
`+Eu+n}var Su=!1;function wu(n,e){if(!n||Su)return"";Su=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(n,[],e)}else{try{e.call()}catch(p){r=p}n.call(e.prototype)}else{try{throw Error()}catch(p){r=p}n()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),i=r.stack.split(`
`),l=o.length-1,c=i.length-1;1<=l&&0<=c&&o[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(o[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||o[l]!==i[c]){var d=`
`+o[l].replace(" at new "," at ");return n.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",n.displayName)),d}while(1<=l&&0<=c);break}}}finally{Su=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?mi(n):""}function Ky(n){switch(n.tag){case 5:return mi(n.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 2:case 15:return n=wu(n.type,!1),n;case 11:return n=wu(n.type.render,!1),n;case 1:return n=wu(n.type,!0),n;default:return""}}function Zu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case co:return"Fragment";case ao:return"Portal";case Yu:return"Profiler";case rc:return"StrictMode";case Qu:return"Suspense";case Xu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Th:return(n.displayName||"Context")+".Consumer";case Ch:return(n._context.displayName||"Context")+".Provider";case oc:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ic:return e=n.displayName||null,e!==null?e:Zu(n.type)||"Memo";case sr:e=n._payload,n=n._init;try{return Zu(n(e))}catch{}}return null}function $y(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zu(e);case 8:return e===rc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sh(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zy(n){var e=Sh(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var o=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return o.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Es(n){n._valueTracker||(n._valueTracker=zy(n))}function wh(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Sh(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Zs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ju(n,e){var t=e.checked;return rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Df(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Tr(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ih(n,e){e=e.checked,e!=null&&tc(n,"checked",e,!1)}function ea(n,e){Ih(n,e);var t=Tr(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?na(n,e.type,t):e.hasOwnProperty("defaultValue")&&na(n,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Lf(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function na(n,e,t){(e!=="number"||Zs(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var gi=Array.isArray;function So(n,e,t,r){if(n=n.options,e){e={};for(var o=0;o<t.length;o++)e["$"+t[o]]=!0;for(t=0;t<n.length;t++)o=e.hasOwnProperty("$"+n[t].value),n[t].selected!==o&&(n[t].selected=o),o&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Tr(t),e=null,o=0;o<n.length;o++){if(n[o].value===t){n[o].selected=!0,r&&(n[o].defaultSelected=!0);return}e!==null||n[o].disabled||(e=n[o])}e!==null&&(e.selected=!0)}}function ta(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return rn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Uf(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(gi(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Tr(t)}}function Ah(n,e){var t=Tr(e.value),r=Tr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ff(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function kh(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ra(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?kh(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ss,Ph=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,o)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ss=Ss||document.createElement("div"),Ss.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ss.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ri(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oy=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(n){Oy.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),_i[e]=_i[n]})});function xh(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_i.hasOwnProperty(n)&&_i[n]?(""+e).trim():e+"px"}function Rh(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,o=xh(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,o):n[t]=o}}var by=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oa(n,e){if(e){if(by[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function ia(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sa=null;function sc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var la=null,wo=null,Io=null;function Vf(n){if(n=Yi(n)){if(typeof la!="function")throw Error(W(280));var e=n.stateNode;e&&(e=Ml(e),la(n.stateNode,n.type,e))}}function Mh(n){wo?Io?Io.push(n):Io=[n]:wo=n}function Nh(){if(wo){var n=wo,e=Io;if(Io=wo=null,Vf(n),e)for(n=0;n<e.length;n++)Vf(e[n])}}function Dh(n,e){return n(e)}function Lh(){}var Iu=!1;function Uh(n,e,t){if(Iu)return n(e,t);Iu=!0;try{return Dh(n,e,t)}finally{Iu=!1,(wo!==null||Io!==null)&&(Lh(),Nh())}}function Mi(n,e){var t=n.stateNode;if(t===null)return null;var r=Ml(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var ua=!1;if(Yt)try{var si={};Object.defineProperty(si,"passive",{get:function(){ua=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{ua=!1}function Jy(n,e,t,r,o,i,l,c,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(t,p)}catch(m){this.onError(m)}}var Ci=!1,js=null,el=!1,aa=null,Wy={onError:function(n){Ci=!0,js=n}};function Yy(n,e,t,r,o,i,l,c,d){Ci=!1,js=null,Jy.apply(Wy,arguments)}function Qy(n,e,t,r,o,i,l,c,d){if(Yy.apply(this,arguments),Ci){if(Ci){var p=js;Ci=!1,js=null}else throw Error(W(198));el||(el=!0,aa=p)}}function Xr(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Fh(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function qf(n){if(Xr(n)!==n)throw Error(W(188))}function Xy(n){var e=n.alternate;if(!e){if(e=Xr(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var o=t.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){t=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===t)return qf(o),n;if(i===r)return qf(o),e;i=i.sibling}throw Error(W(188))}if(t.return!==r.return)t=o,r=i;else{for(var l=!1,c=o.child;c;){if(c===t){l=!0,t=o,r=i;break}if(c===r){l=!0,r=o,t=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===t){l=!0,t=i,r=o;break}if(c===r){l=!0,r=i,t=o;break}c=c.sibling}if(!l)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function Vh(n){return n=Xy(n),n!==null?qh(n):null}function qh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qh(n);if(e!==null)return e;n=n.sibling}return null}var Bh=Zn.unstable_scheduleCallback,Bf=Zn.unstable_cancelCallback,Zy=Zn.unstable_shouldYield,jy=Zn.unstable_requestPaint,cn=Zn.unstable_now,ev=Zn.unstable_getCurrentPriorityLevel,lc=Zn.unstable_ImmediatePriority,Gh=Zn.unstable_UserBlockingPriority,nl=Zn.unstable_NormalPriority,nv=Zn.unstable_LowPriority,Hh=Zn.unstable_IdlePriority,kl=null,Dt=null;function tv(n){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(kl,n,void 0,(n.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:iv,rv=Math.log,ov=Math.LN2;function iv(n){return n>>>=0,n===0?32:31-(rv(n)/ov|0)|0}var ws=64,Is=4194304;function yi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function tl(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,o=n.suspendedLanes,i=n.pingedLanes,l=t&268435455;if(l!==0){var c=l&~o;c!==0?r=yi(c):(i&=l,i!==0&&(r=yi(i)))}else l=t&~o,l!==0?r=yi(l):i!==0&&(r=yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Tt(e),o=1<<t,r|=n[t],e&=~o;return r}function sv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lv(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,o=n.expirationTimes,i=n.pendingLanes;0<i;){var l=31-Tt(i),c=1<<l,d=o[l];d===-1?(!(c&t)||c&r)&&(o[l]=sv(c,e)):d<=e&&(n.expiredLanes|=c),i&=~c}}function ca(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Kh(){var n=ws;return ws<<=1,!(ws&4194240)&&(ws=64),n}function Au(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ji(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Tt(e),n[e]=t}function uv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var o=31-Tt(t),i=1<<o;e[o]=0,r[o]=-1,n[o]=-1,t&=~i}}function uc(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Tt(t),o=1<<r;o&e|n[r]&e&&(n[r]|=e),t&=~o}}var Ke=0;function $h(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var zh,ac,Oh,bh,Jh,fa=!1,As=[],pr=null,hr=null,mr=null,Ni=new Map,Di=new Map,ur=[],av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gf(n,e){switch(n){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ni.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Di.delete(e.pointerId)}}function li(n,e,t,r,o,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Yi(e),e!==null&&ac(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),n)}function cv(n,e,t,r,o){switch(e){case"focusin":return pr=li(pr,n,e,t,r,o),!0;case"dragenter":return hr=li(hr,n,e,t,r,o),!0;case"mouseover":return mr=li(mr,n,e,t,r,o),!0;case"pointerover":var i=o.pointerId;return Ni.set(i,li(Ni.get(i)||null,n,e,t,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Di.set(i,li(Di.get(i)||null,n,e,t,r,o)),!0}return!1}function Wh(n){var e=Br(n.target);if(e!==null){var t=Xr(e);if(t!==null){if(e=t.tag,e===13){if(e=Fh(t),e!==null){n.blockedOn=e,Jh(n.priority,function(){Oh(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Gs(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=da(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);sa=r,t.target.dispatchEvent(r),sa=null}else return e=Yi(t),e!==null&&ac(e),n.blockedOn=t,!1;e.shift()}return!0}function Hf(n,e,t){Gs(n)&&t.delete(e)}function fv(){fa=!1,pr!==null&&Gs(pr)&&(pr=null),hr!==null&&Gs(hr)&&(hr=null),mr!==null&&Gs(mr)&&(mr=null),Ni.forEach(Hf),Di.forEach(Hf)}function ui(n,e){n.blockedOn===e&&(n.blockedOn=null,fa||(fa=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,fv)))}function Li(n){function e(o){return ui(o,n)}if(0<As.length){ui(As[0],n);for(var t=1;t<As.length;t++){var r=As[t];r.blockedOn===n&&(r.blockedOn=null)}}for(pr!==null&&ui(pr,n),hr!==null&&ui(hr,n),mr!==null&&ui(mr,n),Ni.forEach(e),Di.forEach(e),t=0;t<ur.length;t++)r=ur[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ur.length&&(t=ur[0],t.blockedOn===null);)Wh(t),t.blockedOn===null&&ur.shift()}var Ao=jt.ReactCurrentBatchConfig,rl=!0;function dv(n,e,t,r){var o=Ke,i=Ao.transition;Ao.transition=null;try{Ke=1,cc(n,e,t,r)}finally{Ke=o,Ao.transition=i}}function pv(n,e,t,r){var o=Ke,i=Ao.transition;Ao.transition=null;try{Ke=4,cc(n,e,t,r)}finally{Ke=o,Ao.transition=i}}function cc(n,e,t,r){if(rl){var o=da(n,e,t,r);if(o===null)Fu(n,e,r,ol,t),Gf(n,r);else if(cv(o,n,e,t,r))r.stopPropagation();else if(Gf(n,r),e&4&&-1<av.indexOf(n)){for(;o!==null;){var i=Yi(o);if(i!==null&&zh(i),i=da(n,e,t,r),i===null&&Fu(n,e,r,ol,t),i===o)break;o=i}o!==null&&r.stopPropagation()}else Fu(n,e,r,null,t)}}var ol=null;function da(n,e,t,r){if(ol=null,n=sc(r),n=Br(n),n!==null)if(e=Xr(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Fh(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ol=n,null}function Yh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ev()){case lc:return 1;case Gh:return 4;case nl:case nv:return 16;case Hh:return 536870912;default:return 16}default:return 16}}var cr=null,fc=null,Hs=null;function Qh(){if(Hs)return Hs;var n,e=fc,t=e.length,r,o="value"in cr?cr.value:cr.textContent,i=o.length;for(n=0;n<t&&e[n]===o[n];n++);var l=t-n;for(r=1;r<=l&&e[t-r]===o[i-r];r++);return Hs=o.slice(n,1<r?1-r:void 0)}function Ks(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ks(){return!0}function Kf(){return!1}function et(n){function e(t,r,o,i,l){this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in n)n.hasOwnProperty(c)&&(t=n[c],this[c]=t?t(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ks:Kf,this.isPropagationStopped=Kf,this}return rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),e}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=et(Ho),Wi=rn({},Ho,{view:0,detail:0}),hv=et(Wi),ku,Pu,ai,Pl=rn({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ai&&(ai&&n.type==="mousemove"?(ku=n.screenX-ai.screenX,Pu=n.screenY-ai.screenY):Pu=ku=0,ai=n),ku)},movementY:function(n){return"movementY"in n?n.movementY:Pu}}),$f=et(Pl),mv=rn({},Pl,{dataTransfer:0}),gv=et(mv),yv=rn({},Wi,{relatedTarget:0}),xu=et(yv),vv=rn({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),_v=et(vv),Cv=rn({},Ho,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tv=et(Cv),Ev=rn({},Ho,{data:0}),zf=et(Ev),Sv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Av(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Iv[n])?!!e[n]:!1}function pc(){return Av}var kv=rn({},Wi,{key:function(n){if(n.key){var e=Sv[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(n){return n.type==="keypress"?Ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pv=et(kv),xv=rn({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=et(xv),Rv=rn({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),Mv=et(Rv),Nv=rn({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dv=et(Nv),Lv=rn({},Pl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Uv=et(Lv),Fv=[9,13,27,32],hc=Yt&&"CompositionEvent"in window,Ti=null;Yt&&"documentMode"in document&&(Ti=document.documentMode);var Vv=Yt&&"TextEvent"in window&&!Ti,Xh=Yt&&(!hc||Ti&&8<Ti&&11>=Ti),bf=" ",Jf=!1;function Zh(n,e){switch(n){case"keyup":return Fv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fo=!1;function qv(n,e){switch(n){case"compositionend":return jh(e);case"keypress":return e.which!==32?null:(Jf=!0,bf);case"textInput":return n=e.data,n===bf&&Jf?null:n;default:return null}}function Bv(n,e){if(fo)return n==="compositionend"||!hc&&Zh(n,e)?(n=Qh(),Hs=fc=cr=null,fo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xh&&e.locale!=="ko"?null:e.data;default:return null}}var Gv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Gv[n.type]:e==="textarea"}function em(n,e,t,r){Mh(r),e=il(e,"onChange"),0<e.length&&(t=new dc("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Ei=null,Ui=null;function Hv(n){fm(n,0)}function xl(n){var e=mo(n);if(wh(e))return n}function Kv(n,e){if(n==="change")return e}var nm=!1;if(Yt){var Ru;if(Yt){var Mu="oninput"in document;if(!Mu){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),Mu=typeof Yf.oninput=="function"}Ru=Mu}else Ru=!1;nm=Ru&&(!document.documentMode||9<document.documentMode)}function Qf(){Ei&&(Ei.detachEvent("onpropertychange",tm),Ui=Ei=null)}function tm(n){if(n.propertyName==="value"&&xl(Ui)){var e=[];em(e,Ui,n,sc(n)),Uh(Hv,e)}}function $v(n,e,t){n==="focusin"?(Qf(),Ei=e,Ui=t,Ei.attachEvent("onpropertychange",tm)):n==="focusout"&&Qf()}function zv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xl(Ui)}function Ov(n,e){if(n==="click")return xl(e)}function bv(n,e){if(n==="input"||n==="change")return xl(e)}function Jv(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var St=typeof Object.is=="function"?Object.is:Jv;function Fi(n,e){if(St(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var o=t[r];if(!Wu.call(e,o)||!St(n[o],e[o]))return!1}return!0}function Xf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zf(n,e){var t=Xf(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Xf(t)}}function rm(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?rm(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function om(){for(var n=window,e=Zs();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Zs(n.document)}return e}function mc(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Wv(n){var e=om(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&rm(t.ownerDocument.documentElement,t)){if(r!==null&&mc(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=t.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!n.extend&&i>r&&(o=r,r=i,i=o),o=Zf(t,i);var l=Zf(t,r);o&&l&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Yv=Yt&&"documentMode"in document&&11>=document.documentMode,po=null,pa=null,Si=null,ha=!1;function jf(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ha||po==null||po!==Zs(r)||(r=po,"selectionStart"in r&&mc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Si&&Fi(Si,r)||(Si=r,r=il(pa,"onSelect"),0<r.length&&(e=new dc("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=po)))}function Ps(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ho={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionend:Ps("Transition","TransitionEnd")},Nu={},im={};Yt&&(im=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Rl(n){if(Nu[n])return Nu[n];if(!ho[n])return n;var e=ho[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in im)return Nu[n]=e[t];return n}var sm=Rl("animationend"),lm=Rl("animationiteration"),um=Rl("animationstart"),am=Rl("transitionend"),cm=new Map,ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(n,e){cm.set(n,e),Qr(e,[n])}for(var Du=0;Du<ed.length;Du++){var Lu=ed[Du],Qv=Lu.toLowerCase(),Xv=Lu[0].toUpperCase()+Lu.slice(1);Sr(Qv,"on"+Xv)}Sr(sm,"onAnimationEnd");Sr(lm,"onAnimationIteration");Sr(um,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(am,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zv=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function nd(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Qy(r,e,void 0,n),n.currentTarget=null}function fm(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,p=c.currentTarget;if(c=c.listener,d!==i&&o.isPropagationStopped())break e;nd(o,c,p),i=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,p=c.currentTarget,c=c.listener,d!==i&&o.isPropagationStopped())break e;nd(o,c,p),i=d}}}if(el)throw n=aa,el=!1,aa=null,n}function Qe(n,e){var t=e[_a];t===void 0&&(t=e[_a]=new Set);var r=n+"__bubble";t.has(r)||(dm(e,n,2,!1),t.add(r))}function Uu(n,e,t){var r=0;e&&(r|=4),dm(t,n,r,e)}var xs="_reactListening"+Math.random().toString(36).slice(2);function Vi(n){if(!n[xs]){n[xs]=!0,_h.forEach(function(t){t!=="selectionchange"&&(Zv.has(t)||Uu(t,!1,n),Uu(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[xs]||(e[xs]=!0,Uu("selectionchange",!1,e))}}function dm(n,e,t,r){switch(Yh(e)){case 1:var o=dv;break;case 4:o=pv;break;default:o=cc}t=o.bind(null,e,t,n),o=void 0,!ua||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?n.addEventListener(e,t,{capture:!0,passive:o}):n.addEventListener(e,t,!0):o!==void 0?n.addEventListener(e,t,{passive:o}):n.addEventListener(e,t,!1)}function Fu(n,e,t,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;l=l.return}for(;c!==null;){if(l=Br(c),l===null)return;if(d=l.tag,d===5||d===6){r=i=l;continue e}c=c.parentNode}}r=r.return}Uh(function(){var p=i,m=sc(t),v=[];e:{var _=cm.get(n);if(_!==void 0){var A=dc,V=n;switch(n){case"keypress":if(Ks(t)===0)break e;case"keydown":case"keyup":A=Pv;break;case"focusin":V="focus",A=xu;break;case"focusout":V="blur",A=xu;break;case"beforeblur":case"afterblur":A=xu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=$f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=gv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Mv;break;case sm:case lm:case um:A=_v;break;case am:A=Dv;break;case"scroll":A=hv;break;case"wheel":A=Uv;break;case"copy":case"cut":case"paste":A=Tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Of}var B=(e&4)!==0,Y=!B&&n==="scroll",I=B?_!==null?_+"Capture":null:_;B=[];for(var E=p,w;E!==null;){w=E;var K=w.stateNode;if(w.tag===5&&K!==null&&(w=K,I!==null&&(K=Mi(E,I),K!=null&&B.push(qi(E,K,w)))),Y)break;E=E.return}0<B.length&&(_=new A(_,V,null,t,m),v.push({event:_,listeners:B}))}}if(!(e&7)){e:{if(_=n==="mouseover"||n==="pointerover",A=n==="mouseout"||n==="pointerout",_&&t!==sa&&(V=t.relatedTarget||t.fromElement)&&(Br(V)||V[Qt]))break e;if((A||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,A?(V=t.relatedTarget||t.toElement,A=p,V=V?Br(V):null,V!==null&&(Y=Xr(V),V!==Y||V.tag!==5&&V.tag!==6)&&(V=null)):(A=null,V=p),A!==V)){if(B=$f,K="onMouseLeave",I="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(B=Of,K="onPointerLeave",I="onPointerEnter",E="pointer"),Y=A==null?_:mo(A),w=V==null?_:mo(V),_=new B(K,E+"leave",A,t,m),_.target=Y,_.relatedTarget=w,K=null,Br(m)===p&&(B=new B(I,E+"enter",V,t,m),B.target=w,B.relatedTarget=Y,K=B),Y=K,A&&V)n:{for(B=A,I=V,E=0,w=B;w;w=uo(w))E++;for(w=0,K=I;K;K=uo(K))w++;for(;0<E-w;)B=uo(B),E--;for(;0<w-E;)I=uo(I),w--;for(;E--;){if(B===I||I!==null&&B===I.alternate)break n;B=uo(B),I=uo(I)}B=null}else B=null;A!==null&&td(v,_,A,B,!1),V!==null&&Y!==null&&td(v,Y,V,B,!0)}}e:{if(_=p?mo(p):window,A=_.nodeName&&_.nodeName.toLowerCase(),A==="select"||A==="input"&&_.type==="file")var O=Kv;else if(Wf(_))if(nm)O=bv;else{O=zv;var J=$v}else(A=_.nodeName)&&A.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(O=Ov);if(O&&(O=O(n,p))){em(v,O,t,m);break e}J&&J(n,_,p),n==="focusout"&&(J=_._wrapperState)&&J.controlled&&_.type==="number"&&na(_,"number",_.value)}switch(J=p?mo(p):window,n){case"focusin":(Wf(J)||J.contentEditable==="true")&&(po=J,pa=p,Si=null);break;case"focusout":Si=pa=po=null;break;case"mousedown":ha=!0;break;case"contextmenu":case"mouseup":case"dragend":ha=!1,jf(v,t,m);break;case"selectionchange":if(Yv)break;case"keydown":case"keyup":jf(v,t,m)}var b;if(hc)e:{switch(n){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else fo?Zh(n,t)&&(oe="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(oe="onCompositionStart");oe&&(Xh&&t.locale!=="ko"&&(fo||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&fo&&(b=Qh()):(cr=m,fc="value"in cr?cr.value:cr.textContent,fo=!0)),J=il(p,oe),0<J.length&&(oe=new zf(oe,n,null,t,m),v.push({event:oe,listeners:J}),b?oe.data=b:(b=jh(t),b!==null&&(oe.data=b)))),(b=Vv?qv(n,t):Bv(n,t))&&(p=il(p,"onBeforeInput"),0<p.length&&(m=new zf("onBeforeInput","beforeinput",null,t,m),v.push({event:m,listeners:p}),m.data=b))}fm(v,e)})}function qi(n,e,t){return{instance:n,listener:e,currentTarget:t}}function il(n,e){for(var t=e+"Capture",r=[];n!==null;){var o=n,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Mi(n,t),i!=null&&r.unshift(qi(n,i,o)),i=Mi(n,e),i!=null&&r.push(qi(n,i,o))),n=n.return}return r}function uo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function td(n,e,t,r,o){for(var i=e._reactName,l=[];t!==null&&t!==r;){var c=t,d=c.alternate,p=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&p!==null&&(c=p,o?(d=Mi(t,i),d!=null&&l.unshift(qi(t,d,c))):o||(d=Mi(t,i),d!=null&&l.push(qi(t,d,c)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var jv=/\r\n?/g,e_=/\u0000|\uFFFD/g;function rd(n){return(typeof n=="string"?n:""+n).replace(jv,`
`).replace(e_,"")}function Rs(n,e,t){if(e=rd(e),rd(n)!==e&&t)throw Error(W(425))}function sl(){}var ma=null,ga=null;function ya(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var va=typeof setTimeout=="function"?setTimeout:void 0,n_=typeof clearTimeout=="function"?clearTimeout:void 0,od=typeof Promise=="function"?Promise:void 0,t_=typeof queueMicrotask=="function"?queueMicrotask:typeof od<"u"?function(n){return od.resolve(null).then(n).catch(r_)}:va;function r_(n){setTimeout(function(){throw n})}function Vu(n,e){var t=e,r=0;do{var o=t.nextSibling;if(n.removeChild(t),o&&o.nodeType===8)if(t=o.data,t==="/$"){if(r===0){n.removeChild(o),Li(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=o}while(t);Li(e)}function gr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function id(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Ko,Bi="__reactProps$"+Ko,Qt="__reactContainer$"+Ko,_a="__reactEvents$"+Ko,o_="__reactListeners$"+Ko,i_="__reactHandles$"+Ko;function Br(n){var e=n[Nt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qt]||t[Nt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=id(n);n!==null;){if(t=n[Nt])return t;n=id(n)}return e}n=t,t=n.parentNode}return null}function Yi(n){return n=n[Nt]||n[Qt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function Ml(n){return n[Bi]||null}var Ca=[],go=-1;function wr(n){return{current:n}}function Ze(n){0>go||(n.current=Ca[go],Ca[go]=null,go--)}function We(n,e){go++,Ca[go]=n.current,n.current=e}var Er={},Mn=wr(Er),Hn=wr(!1),zr=Er;function Do(n,e){var t=n.type.contextTypes;if(!t)return Er;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in t)o[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),o}function Kn(n){return n=n.childContextTypes,n!=null}function ll(){Ze(Hn),Ze(Mn)}function sd(n,e,t){if(Mn.current!==Er)throw Error(W(168));We(Mn,e),We(Hn,t)}function pm(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(W(108,$y(n)||"Unknown",o));return rn({},t,r)}function ul(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Er,zr=Mn.current,We(Mn,n),We(Hn,Hn.current),!0}function ld(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=pm(n,e,zr),r.__reactInternalMemoizedMergedChildContext=n,Ze(Hn),Ze(Mn),We(Mn,n)):Ze(Hn),We(Hn,t)}var Ot=null,Nl=!1,qu=!1;function hm(n){Ot===null?Ot=[n]:Ot.push(n)}function s_(n){Nl=!0,hm(n)}function Ir(){if(!qu&&Ot!==null){qu=!0;var n=0,e=Ke;try{var t=Ot;for(Ke=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ot=null,Nl=!1}catch(o){throw Ot!==null&&(Ot=Ot.slice(n+1)),Bh(lc,Ir),o}finally{Ke=e,qu=!1}}return null}var yo=[],vo=0,al=null,cl=0,lt=[],ut=0,Or=null,bt=1,Jt="";function Vr(n,e){yo[vo++]=cl,yo[vo++]=al,al=n,cl=e}function mm(n,e,t){lt[ut++]=bt,lt[ut++]=Jt,lt[ut++]=Or,Or=n;var r=bt;n=Jt;var o=32-Tt(r)-1;r&=~(1<<o),t+=1;var i=32-Tt(e)+o;if(30<i){var l=o-o%5;i=(r&(1<<l)-1).toString(32),r>>=l,o-=l,bt=1<<32-Tt(e)+o|t<<o|r,Jt=i+n}else bt=1<<i|t<<o|r,Jt=n}function gc(n){n.return!==null&&(Vr(n,1),mm(n,1,0))}function yc(n){for(;n===al;)al=yo[--vo],yo[vo]=null,cl=yo[--vo],yo[vo]=null;for(;n===Or;)Or=lt[--ut],lt[ut]=null,Jt=lt[--ut],lt[ut]=null,bt=lt[--ut],lt[ut]=null}var Xn=null,Qn=null,je=!1,Ct=null;function gm(n,e){var t=at(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ud(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Xn=n,Qn=gr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Xn=n,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Or!==null?{id:bt,overflow:Jt}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=at(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Xn=n,Qn=null,!0):!1;default:return!1}}function Ta(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ea(n){if(je){var e=Qn;if(e){var t=e;if(!ud(n,e)){if(Ta(n))throw Error(W(418));e=gr(t.nextSibling);var r=Xn;e&&ud(n,e)?gm(r,t):(n.flags=n.flags&-4097|2,je=!1,Xn=n)}}else{if(Ta(n))throw Error(W(418));n.flags=n.flags&-4097|2,je=!1,Xn=n}}}function ad(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Xn=n}function Ms(n){if(n!==Xn)return!1;if(!je)return ad(n),je=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!ya(n.type,n.memoizedProps)),e&&(e=Qn)){if(Ta(n))throw ym(),Error(W(418));for(;e;)gm(n,e),e=gr(e.nextSibling)}if(ad(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Qn=gr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Qn=null}}else Qn=Xn?gr(n.stateNode.nextSibling):null;return!0}function ym(){for(var n=Qn;n;)n=gr(n.nextSibling)}function Lo(){Qn=Xn=null,je=!1}function vc(n){Ct===null?Ct=[n]:Ct.push(n)}var l_=jt.ReactCurrentBatchConfig;function ci(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var o=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var c=o.refs;l===null?delete c[i]:c[i]=l},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function Ns(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function cd(n){var e=n._init;return e(n._payload)}function vm(n){function e(I,E){if(n){var w=I.deletions;w===null?(I.deletions=[E],I.flags|=16):w.push(E)}}function t(I,E){if(!n)return null;for(;E!==null;)e(I,E),E=E.sibling;return null}function r(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function o(I,E){return I=Cr(I,E),I.index=0,I.sibling=null,I}function i(I,E,w){return I.index=w,n?(w=I.alternate,w!==null?(w=w.index,w<E?(I.flags|=2,E):w):(I.flags|=2,E)):(I.flags|=1048576,E)}function l(I){return n&&I.alternate===null&&(I.flags|=2),I}function c(I,E,w,K){return E===null||E.tag!==6?(E=Ou(w,I.mode,K),E.return=I,E):(E=o(E,w),E.return=I,E)}function d(I,E,w,K){var O=w.type;return O===co?m(I,E,w.props.children,K,w.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===sr&&cd(O)===E.type)?(K=o(E,w.props),K.ref=ci(I,E,w),K.return=I,K):(K=Ys(w.type,w.key,w.props,null,I.mode,K),K.ref=ci(I,E,w),K.return=I,K)}function p(I,E,w,K){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=bu(w,I.mode,K),E.return=I,E):(E=o(E,w.children||[]),E.return=I,E)}function m(I,E,w,K,O){return E===null||E.tag!==7?(E=$r(w,I.mode,K,O),E.return=I,E):(E=o(E,w),E.return=I,E)}function v(I,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ou(""+E,I.mode,w),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ts:return w=Ys(E.type,E.key,E.props,null,I.mode,w),w.ref=ci(I,null,E),w.return=I,w;case ao:return E=bu(E,I.mode,w),E.return=I,E;case sr:var K=E._init;return v(I,K(E._payload),w)}if(gi(E)||ii(E))return E=$r(E,I.mode,w,null),E.return=I,E;Ns(I,E)}return null}function _(I,E,w,K){var O=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:c(I,E,""+w,K);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ts:return w.key===O?d(I,E,w,K):null;case ao:return w.key===O?p(I,E,w,K):null;case sr:return O=w._init,_(I,E,O(w._payload),K)}if(gi(w)||ii(w))return O!==null?null:m(I,E,w,K,null);Ns(I,w)}return null}function A(I,E,w,K,O){if(typeof K=="string"&&K!==""||typeof K=="number")return I=I.get(w)||null,c(E,I,""+K,O);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Ts:return I=I.get(K.key===null?w:K.key)||null,d(E,I,K,O);case ao:return I=I.get(K.key===null?w:K.key)||null,p(E,I,K,O);case sr:var J=K._init;return A(I,E,w,J(K._payload),O)}if(gi(K)||ii(K))return I=I.get(w)||null,m(E,I,K,O,null);Ns(E,K)}return null}function V(I,E,w,K){for(var O=null,J=null,b=E,oe=E=0,le=null;b!==null&&oe<w.length;oe++){b.index>oe?(le=b,b=null):le=b.sibling;var ce=_(I,b,w[oe],K);if(ce===null){b===null&&(b=le);break}n&&b&&ce.alternate===null&&e(I,b),E=i(ce,E,oe),J===null?O=ce:J.sibling=ce,J=ce,b=le}if(oe===w.length)return t(I,b),je&&Vr(I,oe),O;if(b===null){for(;oe<w.length;oe++)b=v(I,w[oe],K),b!==null&&(E=i(b,E,oe),J===null?O=b:J.sibling=b,J=b);return je&&Vr(I,oe),O}for(b=r(I,b);oe<w.length;oe++)le=A(b,I,oe,w[oe],K),le!==null&&(n&&le.alternate!==null&&b.delete(le.key===null?oe:le.key),E=i(le,E,oe),J===null?O=le:J.sibling=le,J=le);return n&&b.forEach(function(Ne){return e(I,Ne)}),je&&Vr(I,oe),O}function B(I,E,w,K){var O=ii(w);if(typeof O!="function")throw Error(W(150));if(w=O.call(w),w==null)throw Error(W(151));for(var J=O=null,b=E,oe=E=0,le=null,ce=w.next();b!==null&&!ce.done;oe++,ce=w.next()){b.index>oe?(le=b,b=null):le=b.sibling;var Ne=_(I,b,ce.value,K);if(Ne===null){b===null&&(b=le);break}n&&b&&Ne.alternate===null&&e(I,b),E=i(Ne,E,oe),J===null?O=Ne:J.sibling=Ne,J=Ne,b=le}if(ce.done)return t(I,b),je&&Vr(I,oe),O;if(b===null){for(;!ce.done;oe++,ce=w.next())ce=v(I,ce.value,K),ce!==null&&(E=i(ce,E,oe),J===null?O=ce:J.sibling=ce,J=ce);return je&&Vr(I,oe),O}for(b=r(I,b);!ce.done;oe++,ce=w.next())ce=A(b,I,oe,ce.value,K),ce!==null&&(n&&ce.alternate!==null&&b.delete(ce.key===null?oe:ce.key),E=i(ce,E,oe),J===null?O=ce:J.sibling=ce,J=ce);return n&&b.forEach(function(Me){return e(I,Me)}),je&&Vr(I,oe),O}function Y(I,E,w,K){if(typeof w=="object"&&w!==null&&w.type===co&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ts:e:{for(var O=w.key,J=E;J!==null;){if(J.key===O){if(O=w.type,O===co){if(J.tag===7){t(I,J.sibling),E=o(J,w.props.children),E.return=I,I=E;break e}}else if(J.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===sr&&cd(O)===J.type){t(I,J.sibling),E=o(J,w.props),E.ref=ci(I,J,w),E.return=I,I=E;break e}t(I,J);break}else e(I,J);J=J.sibling}w.type===co?(E=$r(w.props.children,I.mode,K,w.key),E.return=I,I=E):(K=Ys(w.type,w.key,w.props,null,I.mode,K),K.ref=ci(I,E,w),K.return=I,I=K)}return l(I);case ao:e:{for(J=w.key;E!==null;){if(E.key===J)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){t(I,E.sibling),E=o(E,w.children||[]),E.return=I,I=E;break e}else{t(I,E);break}else e(I,E);E=E.sibling}E=bu(w,I.mode,K),E.return=I,I=E}return l(I);case sr:return J=w._init,Y(I,E,J(w._payload),K)}if(gi(w))return V(I,E,w,K);if(ii(w))return B(I,E,w,K);Ns(I,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(t(I,E.sibling),E=o(E,w),E.return=I,I=E):(t(I,E),E=Ou(w,I.mode,K),E.return=I,I=E),l(I)):t(I,E)}return Y}var Uo=vm(!0),_m=vm(!1),fl=wr(null),dl=null,_o=null,_c=null;function Cc(){_c=_o=dl=null}function Tc(n){var e=fl.current;Ze(fl),n._currentValue=e}function Sa(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ko(n,e){dl=n,_c=_o=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Gn=!0),n.firstContext=null)}function dt(n){var e=n._currentValue;if(_c!==n)if(n={context:n,memoizedValue:e,next:null},_o===null){if(dl===null)throw Error(W(308));_o=n,dl.dependencies={lanes:0,firstContext:n}}else _o=_o.next=n;return e}var Gr=null;function Ec(n){Gr===null?Gr=[n]:Gr.push(n)}function Cm(n,e,t,r){var o=e.interleaved;return o===null?(t.next=t,Ec(e)):(t.next=o.next,o.next=t),e.interleaved=t,Xt(n,r)}function Xt(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var lr=!1;function Sc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tm(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wt(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Xt(n,t)}return o=r.interleaved,o===null?(e.next=e,Ec(r)):(e.next=o.next,o.next=e),r.interleaved=e,Xt(n,t)}function $s(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uc(n,t)}}function fd(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var o=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?o=i=l:i=i.next=l,t=t.next}while(t!==null);i===null?o=i=e:i=i.next=e}else o=i=e;t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function pl(n,e,t,r){var o=n.updateQueue;lr=!1;var i=o.firstBaseUpdate,l=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var d=c,p=d.next;d.next=null,l===null?i=p:l.next=p,l=d;var m=n.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==l&&(c===null?m.firstBaseUpdate=p:c.next=p,m.lastBaseUpdate=d))}if(i!==null){var v=o.baseState;l=0,m=p=d=null,c=i;do{var _=c.lane,A=c.eventTime;if((r&_)===_){m!==null&&(m=m.next={eventTime:A,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var V=n,B=c;switch(_=e,A=t,B.tag){case 1:if(V=B.payload,typeof V=="function"){v=V.call(A,v,_);break e}v=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=B.payload,_=typeof V=="function"?V.call(A,v,_):V,_==null)break e;v=rn({},v,_);break e;case 2:lr=!0}}c.callback!==null&&c.lane!==0&&(n.flags|=64,_=o.effects,_===null?o.effects=[c]:_.push(c))}else A={eventTime:A,lane:_,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(p=m=A,d=v):m=m.next=A,l|=_;if(c=c.next,c===null){if(c=o.shared.pending,c===null)break;_=c,c=_.next,_.next=null,o.lastBaseUpdate=_,o.shared.pending=null}}while(!0);if(m===null&&(d=v),o.baseState=d,o.firstBaseUpdate=p,o.lastBaseUpdate=m,e=o.shared.interleaved,e!==null){o=e;do l|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);Jr|=l,n.lanes=l,n.memoizedState=v}}function dd(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],o=r.callback;if(o!==null){if(r.callback=null,r=t,typeof o!="function")throw Error(W(191,o));o.call(r)}}}var Qi={},Lt=wr(Qi),Gi=wr(Qi),Hi=wr(Qi);function Hr(n){if(n===Qi)throw Error(W(174));return n}function wc(n,e){switch(We(Hi,e),We(Gi,n),We(Lt,Qi),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ra(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ra(e,n)}Ze(Lt),We(Lt,e)}function Fo(){Ze(Lt),Ze(Gi),Ze(Hi)}function Em(n){Hr(Hi.current);var e=Hr(Lt.current),t=ra(e,n.type);e!==t&&(We(Gi,n),We(Lt,t))}function Ic(n){Gi.current===n&&(Ze(Lt),Ze(Gi))}var nn=wr(0);function hl(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bu=[];function Ac(){for(var n=0;n<Bu.length;n++)Bu[n]._workInProgressVersionPrimary=null;Bu.length=0}var zs=jt.ReactCurrentDispatcher,Gu=jt.ReactCurrentBatchConfig,br=0,tn=null,pn=null,gn=null,ml=!1,wi=!1,Ki=0,u_=0;function kn(){throw Error(W(321))}function kc(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!St(n[t],e[t]))return!1;return!0}function Pc(n,e,t,r,o,i){if(br=i,tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zs.current=n===null||n.memoizedState===null?d_:p_,n=t(r,o),wi){i=0;do{if(wi=!1,Ki=0,25<=i)throw Error(W(301));i+=1,gn=pn=null,e.updateQueue=null,zs.current=h_,n=t(r,o)}while(wi)}if(zs.current=gl,e=pn!==null&&pn.next!==null,br=0,gn=pn=tn=null,ml=!1,e)throw Error(W(300));return n}function xc(){var n=Ki!==0;return Ki=0,n}function Mt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?tn.memoizedState=gn=n:gn=gn.next=n,gn}function pt(){if(pn===null){var n=tn.alternate;n=n!==null?n.memoizedState:null}else n=pn.next;var e=gn===null?tn.memoizedState:gn.next;if(e!==null)gn=e,pn=n;else{if(n===null)throw Error(W(310));pn=n,n={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},gn===null?tn.memoizedState=gn=n:gn=gn.next=n}return gn}function $i(n,e){return typeof e=="function"?e(n):e}function Hu(n){var e=pt(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=pn,o=r.baseQueue,i=t.pending;if(i!==null){if(o!==null){var l=o.next;o.next=i.next,i.next=l}r.baseQueue=o=i,t.pending=null}if(o!==null){i=o.next,r=r.baseState;var c=l=null,d=null,p=i;do{var m=p.lane;if((br&m)===m)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:n(r,p.action);else{var v={lane:m,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(c=d=v,l=r):d=d.next=v,tn.lanes|=m,Jr|=m}p=p.next}while(p!==null&&p!==i);d===null?l=r:d.next=c,St(r,e.memoizedState)||(Gn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=d,t.lastRenderedState=r}if(n=t.interleaved,n!==null){o=n;do i=o.lane,tn.lanes|=i,Jr|=i,o=o.next;while(o!==n)}else o===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ku(n){var e=pt(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,o=t.pending,i=e.memoizedState;if(o!==null){t.pending=null;var l=o=o.next;do i=n(i,l.action),l=l.next;while(l!==o);St(i,e.memoizedState)||(Gn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function Sm(){}function wm(n,e){var t=tn,r=pt(),o=e(),i=!St(r.memoizedState,o);if(i&&(r.memoizedState=o,Gn=!0),r=r.queue,Rc(km.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||gn!==null&&gn.memoizedState.tag&1){if(t.flags|=2048,zi(9,Am.bind(null,t,r,o,e),void 0,null),yn===null)throw Error(W(349));br&30||Im(t,e,o)}return o}function Im(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=tn.updateQueue,e===null?(e={lastEffect:null,stores:null},tn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Am(n,e,t,r){e.value=t,e.getSnapshot=r,Pm(e)&&xm(n)}function km(n,e,t){return t(function(){Pm(e)&&xm(n)})}function Pm(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!St(n,t)}catch{return!0}}function xm(n){var e=Xt(n,1);e!==null&&Et(e,n,1,-1)}function pd(n){var e=Mt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:n},e.queue=n,n=n.dispatch=f_.bind(null,tn,n),[e.memoizedState,n]}function zi(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=tn.updateQueue,e===null?(e={lastEffect:null,stores:null},tn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Rm(){return pt().memoizedState}function Os(n,e,t,r){var o=Mt();tn.flags|=n,o.memoizedState=zi(1|e,t,void 0,r===void 0?null:r)}function Dl(n,e,t,r){var o=pt();r=r===void 0?null:r;var i=void 0;if(pn!==null){var l=pn.memoizedState;if(i=l.destroy,r!==null&&kc(r,l.deps)){o.memoizedState=zi(e,t,i,r);return}}tn.flags|=n,o.memoizedState=zi(1|e,t,i,r)}function hd(n,e){return Os(8390656,8,n,e)}function Rc(n,e){return Dl(2048,8,n,e)}function Mm(n,e){return Dl(4,2,n,e)}function Nm(n,e){return Dl(4,4,n,e)}function Dm(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Lm(n,e,t){return t=t!=null?t.concat([n]):null,Dl(4,4,Dm.bind(null,e,n),t)}function Mc(){}function Um(n,e){var t=pt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&kc(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Fm(n,e){var t=pt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&kc(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Vm(n,e,t){return br&21?(St(t,e)||(t=Kh(),tn.lanes|=t,Jr|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Gn=!0),n.memoizedState=t)}function a_(n,e){var t=Ke;Ke=t!==0&&4>t?t:4,n(!0);var r=Gu.transition;Gu.transition={};try{n(!1),e()}finally{Ke=t,Gu.transition=r}}function qm(){return pt().memoizedState}function c_(n,e,t){var r=_r(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Bm(n))Gm(e,t);else if(t=Cm(n,e,t,r),t!==null){var o=Un();Et(t,n,r,o),Hm(t,e,r)}}function f_(n,e,t){var r=_r(n),o={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Bm(n))Gm(e,o);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,c=i(l,t);if(o.hasEagerState=!0,o.eagerState=c,St(c,l)){var d=e.interleaved;d===null?(o.next=o,Ec(e)):(o.next=d.next,d.next=o),e.interleaved=o;return}}catch{}finally{}t=Cm(n,e,o,r),t!==null&&(o=Un(),Et(t,n,r,o),Hm(t,e,r))}}function Bm(n){var e=n.alternate;return n===tn||e!==null&&e===tn}function Gm(n,e){wi=ml=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Hm(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uc(n,t)}}var gl={readContext:dt,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},d_={readContext:dt,useCallback:function(n,e){return Mt().memoizedState=[n,e===void 0?null:e],n},useContext:dt,useEffect:hd,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Os(4194308,4,Dm.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Os(4194308,4,n,e)},useInsertionEffect:function(n,e){return Os(4,2,n,e)},useMemo:function(n,e){var t=Mt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Mt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=c_.bind(null,tn,n),[r.memoizedState,n]},useRef:function(n){var e=Mt();return n={current:n},e.memoizedState=n},useState:pd,useDebugValue:Mc,useDeferredValue:function(n){return Mt().memoizedState=n},useTransition:function(){var n=pd(!1),e=n[0];return n=a_.bind(null,n[1]),Mt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=tn,o=Mt();if(je){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),yn===null)throw Error(W(349));br&30||Im(r,e,t)}o.memoizedState=t;var i={value:t,getSnapshot:e};return o.queue=i,hd(km.bind(null,r,i,n),[n]),r.flags|=2048,zi(9,Am.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Mt(),e=yn.identifierPrefix;if(je){var t=Jt,r=bt;t=(r&~(1<<32-Tt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ki++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=u_++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},p_={readContext:dt,useCallback:Um,useContext:dt,useEffect:Rc,useImperativeHandle:Lm,useInsertionEffect:Mm,useLayoutEffect:Nm,useMemo:Fm,useReducer:Hu,useRef:Rm,useState:function(){return Hu($i)},useDebugValue:Mc,useDeferredValue:function(n){var e=pt();return Vm(e,pn.memoizedState,n)},useTransition:function(){var n=Hu($i)[0],e=pt().memoizedState;return[n,e]},useMutableSource:Sm,useSyncExternalStore:wm,useId:qm,unstable_isNewReconciler:!1},h_={readContext:dt,useCallback:Um,useContext:dt,useEffect:Rc,useImperativeHandle:Lm,useInsertionEffect:Mm,useLayoutEffect:Nm,useMemo:Fm,useReducer:Ku,useRef:Rm,useState:function(){return Ku($i)},useDebugValue:Mc,useDeferredValue:function(n){var e=pt();return pn===null?e.memoizedState=n:Vm(e,pn.memoizedState,n)},useTransition:function(){var n=Ku($i)[0],e=pt().memoizedState;return[n,e]},useMutableSource:Sm,useSyncExternalStore:wm,useId:qm,unstable_isNewReconciler:!1};function vt(n,e){if(n&&n.defaultProps){e=rn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function wa(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:rn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ll={isMounted:function(n){return(n=n._reactInternals)?Xr(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Un(),o=_r(n),i=Wt(r,o);i.payload=e,t!=null&&(i.callback=t),e=yr(n,i,o),e!==null&&(Et(e,n,o,r),$s(e,n,o))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Un(),o=_r(n),i=Wt(r,o);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=yr(n,i,o),e!==null&&(Et(e,n,o,r),$s(e,n,o))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Un(),r=_r(n),o=Wt(t,r);o.tag=2,e!=null&&(o.callback=e),e=yr(n,o,r),e!==null&&(Et(e,n,r,t),$s(e,n,r))}};function md(n,e,t,r,o,i,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,l):e.prototype&&e.prototype.isPureReactComponent?!Fi(t,r)||!Fi(o,i):!0}function Km(n,e,t){var r=!1,o=Er,i=e.contextType;return typeof i=="object"&&i!==null?i=dt(i):(o=Kn(e)?zr:Mn.current,r=e.contextTypes,i=(r=r!=null)?Do(n,o):Er),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ll,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=i),e}function gd(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ll.enqueueReplaceState(e,e.state,null)}function Ia(n,e,t,r){var o=n.stateNode;o.props=t,o.state=n.memoizedState,o.refs={},Sc(n);var i=e.contextType;typeof i=="object"&&i!==null?o.context=dt(i):(i=Kn(e)?zr:Mn.current,o.context=Do(n,i)),o.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wa(n,e,i,t),o.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ll.enqueueReplaceState(o,o.state,null),pl(n,t,o,r),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308)}function Vo(n,e){try{var t="",r=e;do t+=Ky(r),r=r.return;while(r);var o=t}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:o,digest:null}}function $u(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Aa(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var m_=typeof WeakMap=="function"?WeakMap:Map;function $m(n,e,t){t=Wt(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){vl||(vl=!0,Fa=r),Aa(n,e)},t}function zm(n,e,t){t=Wt(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;t.payload=function(){return r(o)},t.callback=function(){Aa(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Aa(n,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function yd(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new m_;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(t)||(o.add(t),n=x_.bind(null,n,e,t),e.then(n,n))}function vd(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function _d(n,e,t,r,o){return n.mode&1?(n.flags|=65536,n.lanes=o,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Wt(-1,1),e.tag=2,yr(t,e,1))),t.lanes|=1),n)}var g_=jt.ReactCurrentOwner,Gn=!1;function Ln(n,e,t,r){e.child=n===null?_m(e,null,t,r):Uo(e,n.child,t,r)}function Cd(n,e,t,r,o){t=t.render;var i=e.ref;return ko(e,o),r=Pc(n,e,t,r,i,o),t=xc(),n!==null&&!Gn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Zt(n,e,o)):(je&&t&&gc(e),e.flags|=1,Ln(n,e,r,o),e.child)}function Td(n,e,t,r,o){if(n===null){var i=t.type;return typeof i=="function"&&!Bc(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,Om(n,e,i,r,o)):(n=Ys(t.type,null,r,e,e.mode,o),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&o)){var l=i.memoizedProps;if(t=t.compare,t=t!==null?t:Fi,t(l,r)&&n.ref===e.ref)return Zt(n,e,o)}return e.flags|=1,n=Cr(i,r),n.ref=e.ref,n.return=e,e.child=n}function Om(n,e,t,r,o){if(n!==null){var i=n.memoizedProps;if(Fi(i,r)&&n.ref===e.ref)if(Gn=!1,e.pendingProps=r=i,(n.lanes&o)!==0)n.flags&131072&&(Gn=!0);else return e.lanes=n.lanes,Zt(n,e,o)}return ka(n,e,t,r,o)}function bm(n,e,t){var r=e.pendingProps,o=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(To,Yn),Yn|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,We(To,Yn),Yn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,We(To,Yn),Yn|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,We(To,Yn),Yn|=r;return Ln(n,e,o,t),e.child}function Jm(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function ka(n,e,t,r,o){var i=Kn(t)?zr:Mn.current;return i=Do(e,i),ko(e,o),t=Pc(n,e,t,r,i,o),r=xc(),n!==null&&!Gn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Zt(n,e,o)):(je&&r&&gc(e),e.flags|=1,Ln(n,e,t,o),e.child)}function Ed(n,e,t,r,o){if(Kn(t)){var i=!0;ul(e)}else i=!1;if(ko(e,o),e.stateNode===null)bs(n,e),Km(e,t,r),Ia(e,t,r,o),r=!0;else if(n===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var d=l.context,p=t.contextType;typeof p=="object"&&p!==null?p=dt(p):(p=Kn(t)?zr:Mn.current,p=Do(e,p));var m=t.getDerivedStateFromProps,v=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==p)&&gd(e,l,r,p),lr=!1;var _=e.memoizedState;l.state=_,pl(e,r,l,o),d=e.memoizedState,c!==r||_!==d||Hn.current||lr?(typeof m=="function"&&(wa(e,t,m,r),d=e.memoizedState),(c=lr||md(e,t,c,r,_,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),l.props=r,l.state=d,l.context=p,r=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Tm(n,e),c=e.memoizedProps,p=e.type===e.elementType?c:vt(e.type,c),l.props=p,v=e.pendingProps,_=l.context,d=t.contextType,typeof d=="object"&&d!==null?d=dt(d):(d=Kn(t)?zr:Mn.current,d=Do(e,d));var A=t.getDerivedStateFromProps;(m=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==v||_!==d)&&gd(e,l,r,d),lr=!1,_=e.memoizedState,l.state=_,pl(e,r,l,o);var V=e.memoizedState;c!==v||_!==V||Hn.current||lr?(typeof A=="function"&&(wa(e,t,A,r),V=e.memoizedState),(p=lr||md(e,t,p,r,_,V,d)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,V,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,V,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===n.memoizedProps&&_===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===n.memoizedProps&&_===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=V),l.props=r,l.state=V,l.context=d,r=p):(typeof l.componentDidUpdate!="function"||c===n.memoizedProps&&_===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===n.memoizedProps&&_===n.memoizedState||(e.flags|=1024),r=!1)}return Pa(n,e,t,r,i,o)}function Pa(n,e,t,r,o,i){Jm(n,e);var l=(e.flags&128)!==0;if(!r&&!l)return o&&ld(e,t,!1),Zt(n,e,i);r=e.stateNode,g_.current=e;var c=l&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&l?(e.child=Uo(e,n.child,null,i),e.child=Uo(e,null,c,i)):Ln(n,e,c,i),e.memoizedState=r.state,o&&ld(e,t,!0),e.child}function Wm(n){var e=n.stateNode;e.pendingContext?sd(n,e.pendingContext,e.pendingContext!==e.context):e.context&&sd(n,e.context,!1),wc(n,e.containerInfo)}function Sd(n,e,t,r,o){return Lo(),vc(o),e.flags|=256,Ln(n,e,t,r),e.child}var xa={dehydrated:null,treeContext:null,retryLane:0};function Ra(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ym(n,e,t){var r=e.pendingProps,o=nn.current,i=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=n!==null&&n.memoizedState===null?!1:(o&2)!==0),c?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(o|=1),We(nn,o&1),n===null)return Ea(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,n=r.fallback,i?(r=e.mode,i=e.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Vl(l,r,0,null),n=$r(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Ra(t),e.memoizedState=xa,n):Nc(e,l));if(o=n.memoizedState,o!==null&&(c=o.dehydrated,c!==null))return y_(n,e,l,r,c,o,t);if(i){i=r.fallback,l=e.mode,o=n.child,c=o.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Cr(o,d),r.subtreeFlags=o.subtreeFlags&14680064),c!==null?i=Cr(c,i):(i=$r(i,l,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=n.child.memoizedState,l=l===null?Ra(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=n.childLanes&~t,e.memoizedState=xa,r}return i=n.child,n=i.sibling,r=Cr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Nc(n,e){return e=Vl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ds(n,e,t,r){return r!==null&&vc(r),Uo(e,n.child,null,t),n=Nc(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function y_(n,e,t,r,o,i,l){if(t)return e.flags&256?(e.flags&=-257,r=$u(Error(W(422))),Ds(n,e,l,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=Vl({mode:"visible",children:r.children},o,0,null),i=$r(i,o,l,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Uo(e,n.child,null,l),e.child.memoizedState=Ra(l),e.memoizedState=xa,i);if(!(e.mode&1))return Ds(n,e,l,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(W(419)),r=$u(i,r,void 0),Ds(n,e,l,r)}if(c=(l&n.childLanes)!==0,Gn||c){if(r=yn,r!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|l)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Xt(n,o),Et(r,n,o,-1))}return qc(),r=$u(Error(W(421))),Ds(n,e,l,r)}return o.data==="$?"?(e.flags|=128,e.child=n.child,e=R_.bind(null,n),o._reactRetry=e,null):(n=i.treeContext,Qn=gr(o.nextSibling),Xn=e,je=!0,Ct=null,n!==null&&(lt[ut++]=bt,lt[ut++]=Jt,lt[ut++]=Or,bt=n.id,Jt=n.overflow,Or=e),e=Nc(e,r.children),e.flags|=4096,e)}function wd(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Sa(n.return,e,t)}function zu(n,e,t,r,o){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=o)}function Qm(n,e,t){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Ln(n,e,r.children,t),r=nn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wd(n,t,e);else if(n.tag===19)wd(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(We(nn,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)n=t.alternate,n!==null&&hl(n)===null&&(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),zu(e,!1,o,t,i);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(n=o.alternate,n!==null&&hl(n)===null){e.child=o;break}n=o.sibling,o.sibling=t,t=o,o=n}zu(e,!0,t,null,i);break;case"together":zu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bs(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Zt(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Jr|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=Cr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Cr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function v_(n,e,t){switch(e.tag){case 3:Wm(e),Lo();break;case 5:Em(e);break;case 1:Kn(e.type)&&ul(e);break;case 4:wc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;We(fl,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(nn,nn.current&1),e.flags|=128,null):t&e.child.childLanes?Ym(n,e,t):(We(nn,nn.current&1),n=Zt(n,e,t),n!==null?n.sibling:null);We(nn,nn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Qm(n,e,t);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),We(nn,nn.current),r)break;return null;case 22:case 23:return e.lanes=0,bm(n,e,t)}return Zt(n,e,t)}var Xm,Ma,Zm,jm;Xm=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ma=function(){};Zm=function(n,e,t,r){var o=n.memoizedProps;if(o!==r){n=e.stateNode,Hr(Lt.current);var i=null;switch(t){case"input":o=ju(n,o),r=ju(n,r),i=[];break;case"select":o=rn({},o,{value:void 0}),r=rn({},r,{value:void 0}),i=[];break;case"textarea":o=ta(n,o),r=ta(n,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=sl)}oa(t,r);var l;t=null;for(p in o)if(!r.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var c=o[p];for(l in c)c.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(xi.hasOwnProperty(p)?i||(i=[]):(i=i||[]).push(p,null));for(p in r){var d=r[p];if(c=o!=null?o[p]:void 0,r.hasOwnProperty(p)&&d!==c&&(d!=null||c!=null))if(p==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(t||(t={}),t[l]=d[l])}else t||(i||(i=[]),i.push(p,t)),t=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(xi.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Qe("scroll",n),i||c===d||(i=[])):(i=i||[]).push(p,d))}t&&(i=i||[]).push("style",t);var p=i;(e.updateQueue=p)&&(e.flags|=4)}};jm=function(n,e,t,r){t!==r&&(e.flags|=4)};function fi(n,e){if(!je)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var o=n.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=n,o=o.sibling;else for(o=n.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=n,o=o.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function __(n,e,t){var r=e.pendingProps;switch(yc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(e),null;case 1:return Kn(e.type)&&ll(),Pn(e),null;case 3:return r=e.stateNode,Fo(),Ze(Hn),Ze(Mn),Ac(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ms(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ct!==null&&(Ba(Ct),Ct=null))),Ma(n,e),Pn(e),null;case 5:Ic(e);var o=Hr(Hi.current);if(t=e.type,n!==null&&e.stateNode!=null)Zm(n,e,t,r,o),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Pn(e),null}if(n=Hr(Lt.current),Ms(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Nt]=e,r[Bi]=i,n=(e.mode&1)!==0,t){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(o=0;o<vi.length;o++)Qe(vi[o],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Df(r,i),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qe("invalid",r);break;case"textarea":Uf(r,i),Qe("invalid",r)}oa(t,i),o=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Rs(r.textContent,c,n),o=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Rs(r.textContent,c,n),o=["children",""+c]):xi.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Qe("scroll",r)}switch(t){case"input":Es(r),Lf(r,i,!0);break;case"textarea":Es(r),Ff(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=sl)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=kh(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=l.createElement(t,{is:r.is}):(n=l.createElement(t),t==="select"&&(l=n,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):n=l.createElementNS(n,t),n[Nt]=e,n[Bi]=r,Xm(n,e,!1,!1),e.stateNode=n;e:{switch(l=ia(t,r),t){case"dialog":Qe("cancel",n),Qe("close",n),o=r;break;case"iframe":case"object":case"embed":Qe("load",n),o=r;break;case"video":case"audio":for(o=0;o<vi.length;o++)Qe(vi[o],n);o=r;break;case"source":Qe("error",n),o=r;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),o=r;break;case"details":Qe("toggle",n),o=r;break;case"input":Df(n,r),o=ju(n,r),Qe("invalid",n);break;case"option":o=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},o=rn({},r,{value:void 0}),Qe("invalid",n);break;case"textarea":Uf(n,r),o=ta(n,r),Qe("invalid",n);break;default:o=r}oa(t,o),c=o;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?Rh(n,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Ph(n,d)):i==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&Ri(n,d):typeof d=="number"&&Ri(n,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xi.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Qe("scroll",n):d!=null&&tc(n,i,d,l))}switch(t){case"input":Es(n),Lf(n,r,!1);break;case"textarea":Es(n),Ff(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Tr(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?So(n,!!r.multiple,i,!1):r.defaultValue!=null&&So(n,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(n.onclick=sl)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pn(e),null;case 6:if(n&&e.stateNode!=null)jm(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=Hr(Hi.current),Hr(Lt.current),Ms(e)){if(r=e.stateNode,t=e.memoizedProps,r[Nt]=e,(i=r.nodeValue!==t)&&(n=Xn,n!==null))switch(n.tag){case 3:Rs(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Rs(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Nt]=e,e.stateNode=r}return Pn(e),null;case 13:if(Ze(nn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(je&&Qn!==null&&e.mode&1&&!(e.flags&128))ym(),Lo(),e.flags|=98560,i=!1;else if(i=Ms(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Nt]=e}else Lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pn(e),i=!1}else Ct!==null&&(Ba(Ct),Ct=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||nn.current&1?hn===0&&(hn=3):qc())),e.updateQueue!==null&&(e.flags|=4),Pn(e),null);case 4:return Fo(),Ma(n,e),n===null&&Vi(e.stateNode.containerInfo),Pn(e),null;case 10:return Tc(e.type._context),Pn(e),null;case 17:return Kn(e.type)&&ll(),Pn(e),null;case 19:if(Ze(nn),i=e.memoizedState,i===null)return Pn(e),null;if(r=(e.flags&128)!==0,l=i.rendering,l===null)if(r)fi(i,!1);else{if(hn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=hl(n),l!==null){for(e.flags|=128,fi(i,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,n=l.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return We(nn,nn.current&1|2),e.child}n=n.sibling}i.tail!==null&&cn()>qo&&(e.flags|=128,r=!0,fi(i,!1),e.lanes=4194304)}else{if(!r)if(n=hl(l),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!je)return Pn(e),null}else 2*cn()-i.renderingStartTime>qo&&t!==1073741824&&(e.flags|=128,r=!0,fi(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(t=i.last,t!==null?t.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=cn(),e.sibling=null,t=nn.current,We(nn,r?t&1|2:t&1),e):(Pn(e),null);case 22:case 23:return Vc(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yn&1073741824&&(Pn(e),e.subtreeFlags&6&&(e.flags|=8192)):Pn(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function C_(n,e){switch(yc(e),e.tag){case 1:return Kn(e.type)&&ll(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Fo(),Ze(Hn),Ze(Mn),Ac(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Ic(e),null;case 13:if(Ze(nn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Lo()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ze(nn),null;case 4:return Fo(),null;case 10:return Tc(e.type._context),null;case 22:case 23:return Vc(),null;case 24:return null;default:return null}}var Ls=!1,xn=!1,T_=typeof WeakSet=="function"?WeakSet:Set,de=null;function Co(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ln(n,e,r)}else t.current=null}function Na(n,e,t){try{t()}catch(r){ln(n,e,r)}}var Id=!1;function E_(n,e){if(ma=rl,n=om(),mc(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var l=0,c=-1,d=-1,p=0,m=0,v=n,_=null;n:for(;;){for(var A;v!==t||o!==0&&v.nodeType!==3||(c=l+o),v!==i||r!==0&&v.nodeType!==3||(d=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(A=v.firstChild)!==null;)_=v,v=A;for(;;){if(v===n)break n;if(_===t&&++p===o&&(c=l),_===i&&++m===r&&(d=l),(A=v.nextSibling)!==null)break;v=_,_=v.parentNode}v=A}t=c===-1||d===-1?null:{start:c,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(ga={focusedElem:n,selectionRange:t},rl=!1,de=e;de!==null;)if(e=de,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,de=n;else for(;de!==null;){e=de;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var B=V.memoizedProps,Y=V.memoizedState,I=e.stateNode,E=I.getSnapshotBeforeUpdate(e.elementType===e.type?B:vt(e.type,B),Y);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(K){ln(e,e.return,K)}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}return V=Id,Id=!1,V}function Ii(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var i=o.destroy;o.destroy=void 0,i!==void 0&&Na(e,t,i)}o=o.next}while(o!==r)}}function Ul(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Da(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function eg(n){var e=n.alternate;e!==null&&(n.alternate=null,eg(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Nt],delete e[Bi],delete e[_a],delete e[o_],delete e[i_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ng(n){return n.tag===5||n.tag===3||n.tag===4}function Ad(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ng(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function La(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=sl));else if(r!==4&&(n=n.child,n!==null))for(La(n,e,t),n=n.sibling;n!==null;)La(n,e,t),n=n.sibling}function Ua(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Ua(n,e,t),n=n.sibling;n!==null;)Ua(n,e,t),n=n.sibling}var Cn=null,_t=!1;function ir(n,e,t){for(t=t.child;t!==null;)tg(n,e,t),t=t.sibling}function tg(n,e,t){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(kl,t)}catch{}switch(t.tag){case 5:xn||Co(t,e);case 6:var r=Cn,o=_t;Cn=null,ir(n,e,t),Cn=r,_t=o,Cn!==null&&(_t?(n=Cn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Cn.removeChild(t.stateNode));break;case 18:Cn!==null&&(_t?(n=Cn,t=t.stateNode,n.nodeType===8?Vu(n.parentNode,t):n.nodeType===1&&Vu(n,t),Li(n)):Vu(Cn,t.stateNode));break;case 4:r=Cn,o=_t,Cn=t.stateNode.containerInfo,_t=!0,ir(n,e,t),Cn=r,_t=o;break;case 0:case 11:case 14:case 15:if(!xn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Na(t,e,l),o=o.next}while(o!==r)}ir(n,e,t);break;case 1:if(!xn&&(Co(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(c){ln(t,e,c)}ir(n,e,t);break;case 21:ir(n,e,t);break;case 22:t.mode&1?(xn=(r=xn)||t.memoizedState!==null,ir(n,e,t),xn=r):ir(n,e,t);break;default:ir(n,e,t)}}function kd(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new T_),e.forEach(function(r){var o=M_.bind(null,n,r);t.has(r)||(t.add(r),r.then(o,o))})}}function yt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];try{var i=n,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:Cn=c.stateNode,_t=!1;break e;case 3:Cn=c.stateNode.containerInfo,_t=!0;break e;case 4:Cn=c.stateNode.containerInfo,_t=!0;break e}c=c.return}if(Cn===null)throw Error(W(160));tg(i,l,o),Cn=null,_t=!1;var d=o.alternate;d!==null&&(d.return=null),o.return=null}catch(p){ln(o,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rg(e,n),e=e.sibling}function rg(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(yt(e,n),Rt(n),r&4){try{Ii(3,n,n.return),Ul(3,n)}catch(B){ln(n,n.return,B)}try{Ii(5,n,n.return)}catch(B){ln(n,n.return,B)}}break;case 1:yt(e,n),Rt(n),r&512&&t!==null&&Co(t,t.return);break;case 5:if(yt(e,n),Rt(n),r&512&&t!==null&&Co(t,t.return),n.flags&32){var o=n.stateNode;try{Ri(o,"")}catch(B){ln(n,n.return,B)}}if(r&4&&(o=n.stateNode,o!=null)){var i=n.memoizedProps,l=t!==null?t.memoizedProps:i,c=n.type,d=n.updateQueue;if(n.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Ih(o,i),ia(c,l);var p=ia(c,i);for(l=0;l<d.length;l+=2){var m=d[l],v=d[l+1];m==="style"?Rh(o,v):m==="dangerouslySetInnerHTML"?Ph(o,v):m==="children"?Ri(o,v):tc(o,m,v,p)}switch(c){case"input":ea(o,i);break;case"textarea":Ah(o,i);break;case"select":var _=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?So(o,!!i.multiple,A,!1):_!==!!i.multiple&&(i.defaultValue!=null?So(o,!!i.multiple,i.defaultValue,!0):So(o,!!i.multiple,i.multiple?[]:"",!1))}o[Bi]=i}catch(B){ln(n,n.return,B)}}break;case 6:if(yt(e,n),Rt(n),r&4){if(n.stateNode===null)throw Error(W(162));o=n.stateNode,i=n.memoizedProps;try{o.nodeValue=i}catch(B){ln(n,n.return,B)}}break;case 3:if(yt(e,n),Rt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Li(e.containerInfo)}catch(B){ln(n,n.return,B)}break;case 4:yt(e,n),Rt(n);break;case 13:yt(e,n),Rt(n),o=n.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Uc=cn())),r&4&&kd(n);break;case 22:if(m=t!==null&&t.memoizedState!==null,n.mode&1?(xn=(p=xn)||m,yt(e,n),xn=p):yt(e,n),Rt(n),r&8192){if(p=n.memoizedState!==null,(n.stateNode.isHidden=p)&&!m&&n.mode&1)for(de=n,m=n.child;m!==null;){for(v=de=m;de!==null;){switch(_=de,A=_.child,_.tag){case 0:case 11:case 14:case 15:Ii(4,_,_.return);break;case 1:Co(_,_.return);var V=_.stateNode;if(typeof V.componentWillUnmount=="function"){r=_,t=_.return;try{e=r,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(B){ln(r,t,B)}}break;case 5:Co(_,_.return);break;case 22:if(_.memoizedState!==null){xd(v);continue}}A!==null?(A.return=_,de=A):xd(v)}m=m.sibling}e:for(m=null,v=n;;){if(v.tag===5){if(m===null){m=v;try{o=v.stateNode,p?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=xh("display",l))}catch(B){ln(n,n.return,B)}}}else if(v.tag===6){if(m===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(B){ln(n,n.return,B)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===n)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:yt(e,n),Rt(n),r&4&&kd(n);break;case 21:break;default:yt(e,n),Rt(n)}}function Rt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(ng(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ri(o,""),r.flags&=-33);var i=Ad(n);Ua(n,i,o);break;case 3:case 4:var l=r.stateNode.containerInfo,c=Ad(n);La(n,c,l);break;default:throw Error(W(161))}}catch(d){ln(n,n.return,d)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function S_(n,e,t){de=n,og(n)}function og(n,e,t){for(var r=(n.mode&1)!==0;de!==null;){var o=de,i=o.child;if(o.tag===22&&r){var l=o.memoizedState!==null||Ls;if(!l){var c=o.alternate,d=c!==null&&c.memoizedState!==null||xn;c=Ls;var p=xn;if(Ls=l,(xn=d)&&!p)for(de=o;de!==null;)l=de,d=l.child,l.tag===22&&l.memoizedState!==null?Rd(o):d!==null?(d.return=l,de=d):Rd(o);for(;i!==null;)de=i,og(i),i=i.sibling;de=o,Ls=c,xn=p}Pd(n)}else o.subtreeFlags&8772&&i!==null?(i.return=o,de=i):Pd(n)}}function Pd(n){for(;de!==null;){var e=de;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xn||Ul(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xn)if(t===null)r.componentDidMount();else{var o=e.elementType===e.type?t.memoizedProps:vt(e.type,t.memoizedProps);r.componentDidUpdate(o,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dd(e,i,r);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}dd(e,l,t)}break;case 5:var c=e.stateNode;if(t===null&&e.flags&4){t=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var m=p.memoizedState;if(m!==null){var v=m.dehydrated;v!==null&&Li(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}xn||e.flags&512&&Da(e)}catch(_){ln(e,e.return,_)}}if(e===n){de=null;break}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}}function xd(n){for(;de!==null;){var e=de;if(e===n){de=null;break}var t=e.sibling;if(t!==null){t.return=e.return,de=t;break}de=e.return}}function Rd(n){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ul(4,e)}catch(d){ln(e,t,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(d){ln(e,o,d)}}var i=e.return;try{Da(e)}catch(d){ln(e,i,d)}break;case 5:var l=e.return;try{Da(e)}catch(d){ln(e,l,d)}}}catch(d){ln(e,e.return,d)}if(e===n){de=null;break}var c=e.sibling;if(c!==null){c.return=e.return,de=c;break}de=e.return}}var w_=Math.ceil,yl=jt.ReactCurrentDispatcher,Dc=jt.ReactCurrentOwner,ct=jt.ReactCurrentBatchConfig,Ue=0,yn=null,fn=null,Tn=0,Yn=0,To=wr(0),hn=0,Oi=null,Jr=0,Fl=0,Lc=0,Ai=null,Bn=null,Uc=0,qo=1/0,zt=null,vl=!1,Fa=null,vr=null,Us=!1,fr=null,_l=0,ki=0,Va=null,Js=-1,Ws=0;function Un(){return Ue&6?cn():Js!==-1?Js:Js=cn()}function _r(n){return n.mode&1?Ue&2&&Tn!==0?Tn&-Tn:l_.transition!==null?(Ws===0&&(Ws=Kh()),Ws):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:Yh(n.type)),n):1}function Et(n,e,t,r){if(50<ki)throw ki=0,Va=null,Error(W(185));Ji(n,t,r),(!(Ue&2)||n!==yn)&&(n===yn&&(!(Ue&2)&&(Fl|=t),hn===4&&ar(n,Tn)),$n(n,r),t===1&&Ue===0&&!(e.mode&1)&&(qo=cn()+500,Nl&&Ir()))}function $n(n,e){var t=n.callbackNode;lv(n,e);var r=tl(n,n===yn?Tn:0);if(r===0)t!==null&&Bf(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Bf(t),e===1)n.tag===0?s_(Md.bind(null,n)):hm(Md.bind(null,n)),t_(function(){!(Ue&6)&&Ir()}),t=null;else{switch($h(r)){case 1:t=lc;break;case 4:t=Gh;break;case 16:t=nl;break;case 536870912:t=Hh;break;default:t=nl}t=dg(t,ig.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function ig(n,e){if(Js=-1,Ws=0,Ue&6)throw Error(W(327));var t=n.callbackNode;if(Po()&&n.callbackNode!==t)return null;var r=tl(n,n===yn?Tn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Cl(n,r);else{e=r;var o=Ue;Ue|=2;var i=lg();(yn!==n||Tn!==e)&&(zt=null,qo=cn()+500,Kr(n,e));do try{k_();break}catch(c){sg(n,c)}while(!0);Cc(),yl.current=i,Ue=o,fn!==null?e=0:(yn=null,Tn=0,e=hn)}if(e!==0){if(e===2&&(o=ca(n),o!==0&&(r=o,e=qa(n,o))),e===1)throw t=Oi,Kr(n,0),ar(n,r),$n(n,cn()),t;if(e===6)ar(n,r);else{if(o=n.current.alternate,!(r&30)&&!I_(o)&&(e=Cl(n,r),e===2&&(i=ca(n),i!==0&&(r=i,e=qa(n,i))),e===1))throw t=Oi,Kr(n,0),ar(n,r),$n(n,cn()),t;switch(n.finishedWork=o,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:qr(n,Bn,zt);break;case 3:if(ar(n,r),(r&130023424)===r&&(e=Uc+500-cn(),10<e)){if(tl(n,0)!==0)break;if(o=n.suspendedLanes,(o&r)!==r){Un(),n.pingedLanes|=n.suspendedLanes&o;break}n.timeoutHandle=va(qr.bind(null,n,Bn,zt),e);break}qr(n,Bn,zt);break;case 4:if(ar(n,r),(r&4194240)===r)break;for(e=n.eventTimes,o=-1;0<r;){var l=31-Tt(r);i=1<<l,l=e[l],l>o&&(o=l),r&=~i}if(r=o,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w_(r/1960))-r,10<r){n.timeoutHandle=va(qr.bind(null,n,Bn,zt),r);break}qr(n,Bn,zt);break;case 5:qr(n,Bn,zt);break;default:throw Error(W(329))}}}return $n(n,cn()),n.callbackNode===t?ig.bind(null,n):null}function qa(n,e){var t=Ai;return n.current.memoizedState.isDehydrated&&(Kr(n,e).flags|=256),n=Cl(n,e),n!==2&&(e=Bn,Bn=t,e!==null&&Ba(e)),n}function Ba(n){Bn===null?Bn=n:Bn.push.apply(Bn,n)}function I_(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var o=t[r],i=o.getSnapshot;o=o.value;try{if(!St(i(),o))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ar(n,e){for(e&=~Lc,e&=~Fl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Tt(e),r=1<<t;n[t]=-1,e&=~r}}function Md(n){if(Ue&6)throw Error(W(327));Po();var e=tl(n,0);if(!(e&1))return $n(n,cn()),null;var t=Cl(n,e);if(n.tag!==0&&t===2){var r=ca(n);r!==0&&(e=r,t=qa(n,r))}if(t===1)throw t=Oi,Kr(n,0),ar(n,e),$n(n,cn()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,qr(n,Bn,zt),$n(n,cn()),null}function Fc(n,e){var t=Ue;Ue|=1;try{return n(e)}finally{Ue=t,Ue===0&&(qo=cn()+500,Nl&&Ir())}}function Wr(n){fr!==null&&fr.tag===0&&!(Ue&6)&&Po();var e=Ue;Ue|=1;var t=ct.transition,r=Ke;try{if(ct.transition=null,Ke=1,n)return n()}finally{Ke=r,ct.transition=t,Ue=e,!(Ue&6)&&Ir()}}function Vc(){Yn=To.current,Ze(To)}function Kr(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,n_(t)),fn!==null)for(t=fn.return;t!==null;){var r=t;switch(yc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ll();break;case 3:Fo(),Ze(Hn),Ze(Mn),Ac();break;case 5:Ic(r);break;case 4:Fo();break;case 13:Ze(nn);break;case 19:Ze(nn);break;case 10:Tc(r.type._context);break;case 22:case 23:Vc()}t=t.return}if(yn=n,fn=n=Cr(n.current,null),Tn=Yn=e,hn=0,Oi=null,Lc=Fl=Jr=0,Bn=Ai=null,Gr!==null){for(e=0;e<Gr.length;e++)if(t=Gr[e],r=t.interleaved,r!==null){t.interleaved=null;var o=r.next,i=t.pending;if(i!==null){var l=i.next;i.next=o,r.next=l}t.pending=r}Gr=null}return n}function sg(n,e){do{var t=fn;try{if(Cc(),zs.current=gl,ml){for(var r=tn.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ml=!1}if(br=0,gn=pn=tn=null,wi=!1,Ki=0,Dc.current=null,t===null||t.return===null){hn=1,Oi=e,fn=null;break}e:{var i=n,l=t.return,c=t,d=e;if(e=Tn,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,m=c,v=m.tag;if(!(m.mode&1)&&(v===0||v===11||v===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var A=vd(l);if(A!==null){A.flags&=-257,_d(A,l,c,i,e),A.mode&1&&yd(i,p,e),e=A,d=p;var V=e.updateQueue;if(V===null){var B=new Set;B.add(d),e.updateQueue=B}else V.add(d);break e}else{if(!(e&1)){yd(i,p,e),qc();break e}d=Error(W(426))}}else if(je&&c.mode&1){var Y=vd(l);if(Y!==null){!(Y.flags&65536)&&(Y.flags|=256),_d(Y,l,c,i,e),vc(Vo(d,c));break e}}i=d=Vo(d,c),hn!==4&&(hn=2),Ai===null?Ai=[i]:Ai.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=$m(i,d,e);fd(i,I);break e;case 1:c=d;var E=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vr===null||!vr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var K=zm(i,c,e);fd(i,K);break e}}i=i.return}while(i!==null)}ag(t)}catch(O){e=O,fn===t&&t!==null&&(fn=t=t.return);continue}break}while(!0)}function lg(){var n=yl.current;return yl.current=gl,n===null?gl:n}function qc(){(hn===0||hn===3||hn===2)&&(hn=4),yn===null||!(Jr&268435455)&&!(Fl&268435455)||ar(yn,Tn)}function Cl(n,e){var t=Ue;Ue|=2;var r=lg();(yn!==n||Tn!==e)&&(zt=null,Kr(n,e));do try{A_();break}catch(o){sg(n,o)}while(!0);if(Cc(),Ue=t,yl.current=r,fn!==null)throw Error(W(261));return yn=null,Tn=0,hn}function A_(){for(;fn!==null;)ug(fn)}function k_(){for(;fn!==null&&!Zy();)ug(fn)}function ug(n){var e=fg(n.alternate,n,Yn);n.memoizedProps=n.pendingProps,e===null?ag(n):fn=e,Dc.current=null}function ag(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=C_(t,e),t!==null){t.flags&=32767,fn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{hn=6,fn=null;return}}else if(t=__(t,e,Yn),t!==null){fn=t;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=n}while(e!==null);hn===0&&(hn=5)}function qr(n,e,t){var r=Ke,o=ct.transition;try{ct.transition=null,Ke=1,P_(n,e,t,r)}finally{ct.transition=o,Ke=r}return null}function P_(n,e,t,r){do Po();while(fr!==null);if(Ue&6)throw Error(W(327));t=n.finishedWork;var o=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(uv(n,i),n===yn&&(fn=yn=null,Tn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Us||(Us=!0,dg(nl,function(){return Po(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=ct.transition,ct.transition=null;var l=Ke;Ke=1;var c=Ue;Ue|=4,Dc.current=null,E_(n,t),rg(t,n),Wv(ga),rl=!!ma,ga=ma=null,n.current=t,S_(t),jy(),Ue=c,Ke=l,ct.transition=i}else n.current=t;if(Us&&(Us=!1,fr=n,_l=o),i=n.pendingLanes,i===0&&(vr=null),tv(t.stateNode),$n(n,cn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)o=e[t],r(o.value,{componentStack:o.stack,digest:o.digest});if(vl)throw vl=!1,n=Fa,Fa=null,n;return _l&1&&n.tag!==0&&Po(),i=n.pendingLanes,i&1?n===Va?ki++:(ki=0,Va=n):ki=0,Ir(),null}function Po(){if(fr!==null){var n=$h(_l),e=ct.transition,t=Ke;try{if(ct.transition=null,Ke=16>n?16:n,fr===null)var r=!1;else{if(n=fr,fr=null,_l=0,Ue&6)throw Error(W(331));var o=Ue;for(Ue|=4,de=n.current;de!==null;){var i=de,l=i.child;if(de.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var p=c[d];for(de=p;de!==null;){var m=de;switch(m.tag){case 0:case 11:case 15:Ii(8,m,i)}var v=m.child;if(v!==null)v.return=m,de=v;else for(;de!==null;){m=de;var _=m.sibling,A=m.return;if(eg(m),m===p){de=null;break}if(_!==null){_.return=A,de=_;break}de=A}}}var V=i.alternate;if(V!==null){var B=V.child;if(B!==null){V.child=null;do{var Y=B.sibling;B.sibling=null,B=Y}while(B!==null)}}de=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,de=l;else e:for(;de!==null;){if(i=de,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ii(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,de=I;break e}de=i.return}}var E=n.current;for(de=E;de!==null;){l=de;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,de=w;else e:for(l=E;de!==null;){if(c=de,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ul(9,c)}}catch(O){ln(c,c.return,O)}if(c===l){de=null;break e}var K=c.sibling;if(K!==null){K.return=c.return,de=K;break e}de=c.return}}if(Ue=o,Ir(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(kl,n)}catch{}r=!0}return r}finally{Ke=t,ct.transition=e}}return!1}function Nd(n,e,t){e=Vo(t,e),e=$m(n,e,1),n=yr(n,e,1),e=Un(),n!==null&&(Ji(n,1,e),$n(n,e))}function ln(n,e,t){if(n.tag===3)Nd(n,n,t);else for(;e!==null;){if(e.tag===3){Nd(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){n=Vo(t,n),n=zm(e,n,1),e=yr(e,n,1),n=Un(),e!==null&&(Ji(e,1,n),$n(e,n));break}}e=e.return}}function x_(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Un(),n.pingedLanes|=n.suspendedLanes&t,yn===n&&(Tn&t)===t&&(hn===4||hn===3&&(Tn&130023424)===Tn&&500>cn()-Uc?Kr(n,0):Lc|=t),$n(n,e)}function cg(n,e){e===0&&(n.mode&1?(e=Is,Is<<=1,!(Is&130023424)&&(Is=4194304)):e=1);var t=Un();n=Xt(n,e),n!==null&&(Ji(n,e,t),$n(n,t))}function R_(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),cg(n,t)}function M_(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,o=n.memoizedState;o!==null&&(t=o.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),cg(n,t)}var fg;fg=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Hn.current)Gn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Gn=!1,v_(n,e,t);Gn=!!(n.flags&131072)}else Gn=!1,je&&e.flags&1048576&&mm(e,cl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bs(n,e),n=e.pendingProps;var o=Do(e,Mn.current);ko(e,t),o=Pc(null,e,r,n,o,t);var i=xc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kn(r)?(i=!0,ul(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Sc(e),o.updater=Ll,e.stateNode=o,o._reactInternals=e,Ia(e,r,n,t),e=Pa(null,e,r,!0,i,t)):(e.tag=0,je&&i&&gc(e),Ln(null,e,o,t),e=e.child),e;case 16:r=e.elementType;e:{switch(bs(n,e),n=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=D_(r),n=vt(r,n),o){case 0:e=ka(null,e,r,n,t);break e;case 1:e=Ed(null,e,r,n,t);break e;case 11:e=Cd(null,e,r,n,t);break e;case 14:e=Td(null,e,r,vt(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:vt(r,o),ka(n,e,r,o,t);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:vt(r,o),Ed(n,e,r,o,t);case 3:e:{if(Wm(e),n===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,o=i.element,Tm(n,e),pl(e,r,null,t);var l=e.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=Vo(Error(W(423)),e),e=Sd(n,e,r,t,o);break e}else if(r!==o){o=Vo(Error(W(424)),e),e=Sd(n,e,r,t,o);break e}else for(Qn=gr(e.stateNode.containerInfo.firstChild),Xn=e,je=!0,Ct=null,t=_m(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Lo(),r===o){e=Zt(n,e,t);break e}Ln(n,e,r,t)}e=e.child}return e;case 5:return Em(e),n===null&&Ea(e),r=e.type,o=e.pendingProps,i=n!==null?n.memoizedProps:null,l=o.children,ya(r,o)?l=null:i!==null&&ya(r,i)&&(e.flags|=32),Jm(n,e),Ln(n,e,l,t),e.child;case 6:return n===null&&Ea(e),null;case 13:return Ym(n,e,t);case 4:return wc(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Uo(e,null,r,t):Ln(n,e,r,t),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:vt(r,o),Cd(n,e,r,o,t);case 7:return Ln(n,e,e.pendingProps,t),e.child;case 8:return Ln(n,e,e.pendingProps.children,t),e.child;case 12:return Ln(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,l=o.value,We(fl,r._currentValue),r._currentValue=l,i!==null)if(St(i.value,l)){if(i.children===o.children&&!Hn.current){e=Zt(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=Wt(-1,t&-t),d.tag=2;var p=i.updateQueue;if(p!==null){p=p.shared;var m=p.pending;m===null?d.next=d:(d.next=m.next,m.next=d),p.pending=d}}i.lanes|=t,d=i.alternate,d!==null&&(d.lanes|=t),Sa(i.return,t,e),c.lanes|=t;break}d=d.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(W(341));l.lanes|=t,c=l.alternate,c!==null&&(c.lanes|=t),Sa(l,t,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ln(n,e,o.children,t),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,ko(e,t),o=dt(o),r=r(o),e.flags|=1,Ln(n,e,r,t),e.child;case 14:return r=e.type,o=vt(r,e.pendingProps),o=vt(r.type,o),Td(n,e,r,o,t);case 15:return Om(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:vt(r,o),bs(n,e),e.tag=1,Kn(r)?(n=!0,ul(e)):n=!1,ko(e,t),Km(e,r,o),Ia(e,r,o,t),Pa(null,e,r,!0,n,t);case 19:return Qm(n,e,t);case 22:return bm(n,e,t)}throw Error(W(156,e.tag))};function dg(n,e){return Bh(n,e)}function N_(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(n,e,t,r){return new N_(n,e,t,r)}function Bc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function D_(n){if(typeof n=="function")return Bc(n)?1:0;if(n!=null){if(n=n.$$typeof,n===oc)return 11;if(n===ic)return 14}return 2}function Cr(n,e){var t=n.alternate;return t===null?(t=at(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ys(n,e,t,r,o,i){var l=2;if(r=n,typeof n=="function")Bc(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case co:return $r(t.children,o,i,e);case rc:l=8,o|=8;break;case Yu:return n=at(12,t,e,o|2),n.elementType=Yu,n.lanes=i,n;case Qu:return n=at(13,t,e,o),n.elementType=Qu,n.lanes=i,n;case Xu:return n=at(19,t,e,o),n.elementType=Xu,n.lanes=i,n;case Eh:return Vl(t,o,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ch:l=10;break e;case Th:l=9;break e;case oc:l=11;break e;case ic:l=14;break e;case sr:l=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=at(l,t,e,o),e.elementType=n,e.type=r,e.lanes=i,e}function $r(n,e,t,r){return n=at(7,n,r,e),n.lanes=t,n}function Vl(n,e,t,r){return n=at(22,n,r,e),n.elementType=Eh,n.lanes=t,n.stateNode={isHidden:!1},n}function Ou(n,e,t){return n=at(6,n,null,e),n.lanes=t,n}function bu(n,e,t){return e=at(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function L_(n,e,t,r,o){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Au(0),this.expirationTimes=Au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Au(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Gc(n,e,t,r,o,i,l,c,d){return n=new L_(n,e,t,c,d),e===1?(e=1,i===!0&&(e|=8)):e=0,i=at(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sc(i),n}function U_(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ao,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function pg(n){if(!n)return Er;n=n._reactInternals;e:{if(Xr(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(Kn(t))return pm(n,t,e)}return e}function hg(n,e,t,r,o,i,l,c,d){return n=Gc(t,r,!0,n,o,i,l,c,d),n.context=pg(null),t=n.current,r=Un(),o=_r(t),i=Wt(r,o),i.callback=e??null,yr(t,i,o),n.current.lanes=o,Ji(n,o,r),$n(n,r),n}function ql(n,e,t,r){var o=e.current,i=Un(),l=_r(o);return t=pg(t),e.context===null?e.context=t:e.pendingContext=t,e=Wt(i,l),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=yr(o,e,l),n!==null&&(Et(n,o,l,i),$s(n,o,l)),l}function Tl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dd(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Hc(n,e){Dd(n,e),(n=n.alternate)&&Dd(n,e)}function F_(){return null}var mg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Kc(n){this._internalRoot=n}Bl.prototype.render=Kc.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));ql(n,e,null,null)};Bl.prototype.unmount=Kc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Wr(function(){ql(null,n,null,null)}),e[Qt]=null}};function Bl(n){this._internalRoot=n}Bl.prototype.unstable_scheduleHydration=function(n){if(n){var e=bh();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ur.length&&e!==0&&e<ur[t].priority;t++);ur.splice(t,0,n),t===0&&Wh(n)}};function $c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Gl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ld(){}function V_(n,e,t,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var p=Tl(l);i.call(p)}}var l=hg(e,r,n,0,null,!1,!1,"",Ld);return n._reactRootContainer=l,n[Qt]=l.current,Vi(n.nodeType===8?n.parentNode:n),Wr(),l}for(;o=n.lastChild;)n.removeChild(o);if(typeof r=="function"){var c=r;r=function(){var p=Tl(d);c.call(p)}}var d=Gc(n,0,!1,null,null,!1,!1,"",Ld);return n._reactRootContainer=d,n[Qt]=d.current,Vi(n.nodeType===8?n.parentNode:n),Wr(function(){ql(e,d,t,r)}),d}function Hl(n,e,t,r,o){var i=t._reactRootContainer;if(i){var l=i;if(typeof o=="function"){var c=o;o=function(){var d=Tl(l);c.call(d)}}ql(e,l,n,o)}else l=V_(t,e,n,o,r);return Tl(l)}zh=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yi(e.pendingLanes);t!==0&&(uc(e,t|1),$n(e,cn()),!(Ue&6)&&(qo=cn()+500,Ir()))}break;case 13:Wr(function(){var r=Xt(n,1);if(r!==null){var o=Un();Et(r,n,1,o)}}),Hc(n,1)}};ac=function(n){if(n.tag===13){var e=Xt(n,134217728);if(e!==null){var t=Un();Et(e,n,134217728,t)}Hc(n,134217728)}};Oh=function(n){if(n.tag===13){var e=_r(n),t=Xt(n,e);if(t!==null){var r=Un();Et(t,n,e,r)}Hc(n,e)}};bh=function(){return Ke};Jh=function(n,e){var t=Ke;try{return Ke=n,e()}finally{Ke=t}};la=function(n,e,t){switch(e){case"input":if(ea(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var o=Ml(r);if(!o)throw Error(W(90));wh(r),ea(r,o)}}}break;case"textarea":Ah(n,t);break;case"select":e=t.value,e!=null&&So(n,!!t.multiple,e,!1)}};Dh=Fc;Lh=Wr;var q_={usingClientEntryPoint:!1,Events:[Yi,mo,Ml,Mh,Nh,Fc]},di={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B_={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Vh(n),n===null?null:n.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||F_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fs.isDisabled&&Fs.supportsFiber)try{kl=Fs.inject(B_),Dt=Fs}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q_;jn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(e))throw Error(W(200));return U_(n,e,null,t)};jn.createRoot=function(n,e){if(!$c(n))throw Error(W(299));var t=!1,r="",o=mg;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Gc(n,1,!1,null,null,t,!1,r,o),n[Qt]=e.current,Vi(n.nodeType===8?n.parentNode:n),new Kc(e)};jn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=Vh(e),n=n===null?null:n.stateNode,n};jn.flushSync=function(n){return Wr(n)};jn.hydrate=function(n,e,t){if(!Gl(e))throw Error(W(200));return Hl(null,n,e,!0,t)};jn.hydrateRoot=function(n,e,t){if(!$c(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,o=!1,i="",l=mg;if(t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=hg(e,null,n,1,t??null,o,!1,i,l),n[Qt]=e.current,Vi(n),r)for(n=0;n<r.length;n++)t=r[n],o=t._getVersion,o=o(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,o]:e.mutableSourceEagerHydrationData.push(t,o);return new Bl(e)};jn.render=function(n,e,t){if(!Gl(e))throw Error(W(200));return Hl(null,n,e,!1,t)};jn.unmountComponentAtNode=function(n){if(!Gl(n))throw Error(W(40));return n._reactRootContainer?(Wr(function(){Hl(null,null,n,!1,function(){n._reactRootContainer=null,n[Qt]=null})}),!0):!1};jn.unstable_batchedUpdates=Fc;jn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Gl(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return Hl(n,e,t,!1,r)};jn.version="18.3.1-next-f1338f8080-20240426";function gg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gg)}catch(n){console.error(n)}}gg(),gh.exports=jn;var G_=gh.exports,yg,Ud=G_;yg=Ud.createRoot,Ud.hydrateRoot;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let H_,K_;function $_(){return{geminiUrl:H_,vertexUrl:K_}}function z_(n,e,t,r){var o,i;if(!(n!=null&&n.baseUrl)){const l=$_();return e?(o=l.vertexUrl)!==null&&o!==void 0?o:t:(i=l.geminiUrl)!==null&&i!==void 0?i:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zr{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(n,e,t){for(let i=0;i<e.length-1;i++){const l=e[i];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[c])){const d=n[c];if(Array.isArray(t))for(let p=0;p<d.length;p++){const m=d[p];a(m,e.slice(i+1),t[p])}else for(const p of d)a(p,e.slice(i+1),t)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in n||(n[c]=[{}]);const d=n[c];a(d[0],e.slice(i+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const r=e[e.length-1],o=n[r];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function s(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in n){const l=n[i];return Array.isArray(l)?l.map(c=>s(c,e.slice(r+1),t)):t}else return t}else n=n[o]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function O_(n,e){for(const[t,r]of Object.entries(e)){const o=t.split("."),i=r.split("."),l=new Set;let c=-1;for(let d=0;d<o.length;d++)if(o[d]==="*"){c=d;break}if(c!==-1&&i.length>c)for(let d=c;d<i.length;d++){const p=i[d];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&l.add(p)}Ga(n,o,i,0,l)}}function Ga(n,e,t,r,o){if(r>=e.length||typeof n!="object"||n===null)return;const i=e[r];if(i.endsWith("[]")){const l=i.slice(0,-2),c=n;if(l in c&&Array.isArray(c[l]))for(const d of c[l])Ga(d,e,t,r+1,o)}else if(i==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,c=Object.keys(l).filter(p=>!p.startsWith("_")&&!o.has(p)),d={};for(const p of c)d[p]=l[p];for(const[p,m]of Object.entries(d)){const v=[];for(const _ of t.slice(r))_==="*"?v.push(p):v.push(_);a(l,v,m)}for(const p of c)delete l[p]}}else{const l=n;i in l&&Ga(l[i],e,t,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zc(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b_(n){const e={},t=s(n,["operationName"]);t!=null&&a(e,["operationName"],t);const r=s(n,["resourceName"]);return r!=null&&a(e,["_url","resourceName"],r),e}function J_(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["metadata"]);r!=null&&a(e,["metadata"],r);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const i=s(n,["error"]);i!=null&&a(e,["error"],i);const l=s(n,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],Y_(l)),e}function W_(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["metadata"]);r!=null&&a(e,["metadata"],r);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const i=s(n,["error"]);i!=null&&a(e,["error"],i);const l=s(n,["response"]);return l!=null&&a(e,["response"],Q_(l)),e}function Y_(n){const e={},t=s(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>X_(l))),a(e,["generatedVideos"],i)}const r=s(n,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function Q_(n){const e={},t=s(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>Z_(l))),a(e,["generatedVideos"],i)}const r=s(n,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function X_(n){const e={},t=s(n,["video"]);return t!=null&&a(e,["video"],n0(t)),e}function Z_(n){const e={},t=s(n,["_self"]);return t!=null&&a(e,["video"],t0(t)),e}function j_(n){const e={},t=s(n,["operationName"]);return t!=null&&a(e,["_url","operationName"],t),e}function e0(n){const e={},t=s(n,["operationName"]);return t!=null&&a(e,["_url","operationName"],t),e}function n0(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["uri"],t);const r=s(n,["encodedVideo"]);r!=null&&a(e,["videoBytes"],zc(r));const o=s(n,["encoding"]);return o!=null&&a(e,["mimeType"],o),e}function t0(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["uri"],t);const r=s(n,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],zc(r));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fd;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Fd||(Fd={}));var Vd;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Vd||(Vd={}));var qd;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(qd||(qd={}));var dr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(dr||(dr={}));var Bd;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Bd||(Bd={}));var Gd;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Gd||(Gd={}));var Hd;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Hd||(Hd={}));var Kd;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Kd||(Kd={}));var $d;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})($d||($d={}));var zd;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zd||(zd={}));var Od;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Od||(Od={}));var bd;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(bd||(bd={}));var Jd;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Jd||(Jd={}));var Wd;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wd||(Wd={}));var Yd;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Yd||(Yd={}));var Qd;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Qd||(Qd={}));var El;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(El||(El={}));var Xd;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Xd||(Xd={}));var Ha;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ha||(Ha={}));var Zd;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Zd||(Zd={}));var jd;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(jd||(jd={}));var ep;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(ep||(ep={}));var np;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(np||(np={}));var tp;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(tp||(tp={}));var rp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(rp||(rp={}));var op;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(op||(op={}));var ip;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(ip||(ip={}));var sp;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(sp||(sp={}));var lp;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(lp||(lp={}));var up;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(up||(up={}));var ap;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ap||(ap={}));var cp;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cp||(cp={}));var fp;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(fp||(fp={}));var dp;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dp||(dp={}));var pp;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(pp||(pp={}));var hp;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(hp||(hp={}));var mp;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(mp||(mp={}));var gp;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(gp||(gp={}));var yp;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(yp||(yp={}));var vp;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(vp||(vp={}));var _p;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_p||(_p={}));var Cp;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Cp||(Cp={}));var Tp;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Tp||(Tp={}));var Ep;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ep||(Ep={}));var Sp;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Sp||(Sp={}));var wp;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wp||(wp={}));var Ip;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ip||(Ip={}));var Ap;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Ap||(Ap={}));var Eo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Eo||(Eo={}));class Ka{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class pi{get text(){var e,t,r,o,i,l,c,d;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",m=!1;const v=[];for(const _ of(d=(c=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[A,V]of Object.entries(_))A!=="text"&&A!=="thought"&&(V!==null||V!==void 0)&&v.push(A);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;m=!0,p+=_.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?p:void 0}get data(){var e,t,r,o,i,l,c,d;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const m=[];for(const v of(d=(c=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[_,A]of Object.entries(v))_!=="inlineData"&&(A!==null||A!==void 0)&&m.push(_);v.inlineData&&typeof v.inlineData.data=="string"&&(p+=atob(v.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,r,o,i,l,c,d;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(d=(c=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,r,o,i,l,c,d,p;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(d=(c=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return(p=m==null?void 0:m[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,r,o,i,l,c,d,p;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(d=(c=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return(p=m==null?void 0:m[0])===null||p===void 0?void 0:p.output}}class kp{}class Pp{}class r0{}class o0{}class i0{}class s0{}class xp{}class Rp{}class Mp{}class l0{}class Sl{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const r=new Sl;let o;const i=e;return t?o=W_(i):o=J_(i),Object.assign(r,o),r}}class Np{}class Dp{}class Lp{}class u0{}class a0{}class c0{}class Up{}class f0{get text(){var e,t,r;let o="",i=!1;const l=[];for(const c of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[d,p]of Object.entries(c))d!=="text"&&d!=="thought"&&p!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;i=!0,o+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,t,r;let o="";const i=[];for(const l of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&i.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class d0{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ve(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vg(n,e){const t=Ve(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function _g(n){return Array.isArray(n)?n.map(e=>wl(e)):[wl(n)]}function wl(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Cg(n){const e=wl(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tg(n){const e=wl(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fp(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Eg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Fp(e)):[Fp(n)]}function $a(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Vp(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function qp(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Rn(n){if(n==null)throw new Error("ContentUnion is required");return $a(n)?n:{role:"user",parts:Eg(n)}}function Oc(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Rn(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Rn(t)):[Rn(e)]}function ft(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Vp(n)||qp(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Rn(n)]}const e=[],t=[],r=$a(n[0]);for(const o of n){const i=$a(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(Vp(o)||qp(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return r||e.push({role:"user",parts:Eg(t)}),e}function p0(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(dr).includes(t[0].toUpperCase())?t[0].toUpperCase():dr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(dr).includes(r.toUpperCase())?r.toUpperCase():dr.TYPE_UNSPECIFIED})}}function xo(n){const e={},t=["items"],r=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=n.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,n=i[1]):i[1].type==="null"&&(e.nullable=!0,n=i[0])),n.type instanceof Array&&p0(n.type,e);for(const[l,c]of Object.entries(n))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(dr).includes(c.toUpperCase())?c.toUpperCase():dr.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=xo(c);else if(r.includes(l)){const d=[];for(const p of c){if(p.type=="null"){e.nullable=!0;continue}d.push(xo(p))}e[l]=d}else if(o.includes(l)){const d={};for(const[p,m]of Object.entries(c))d[p]=xo(m);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function bc(n){return xo(n)}function Jc(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Wc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function $o(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=xo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=xo(e.response));return n}function zo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function h0(n,e,t,r=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function er(n,e){if(typeof e!="string")throw new Error("name must be a string");return h0(n,e,"cachedContents")}function Sg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ar(n){return zc(n)}function m0(n){return n!=null&&typeof n=="object"&&"name"in n}function g0(n){return n!=null&&typeof n=="object"&&"video"in n}function y0(n){return n!=null&&typeof n=="object"&&"uri"in n}function wg(n){var e;let t;if(m0(n)&&(t=n.name),!(y0(n)&&(t=n.uri,t===void 0))&&!(g0(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Ig(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Ag(n){for(const e of["models","tunedModels","publisherModels"])if(v0(n,e))return n[e];return[]}function v0(n,e){return n!==null&&typeof n=="object"&&e in n}function _0(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function C0(n,e={}){const t=[],r=new Set;for(const o of n){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const l=_0(o,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function kg(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function T0(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Pg(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let i=!1;for(const l of o){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Oo(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function xg(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E0(n){const e={},t=s(n,["responsesFile"]);t!=null&&a(e,["fileName"],t);const r=s(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>j0(l))),a(e,["inlinedResponses"],i)}const o=s(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["inlinedEmbedContentResponses"],i)}return e}function S0(n){const e={},t=s(n,["predictionsFormat"]);t!=null&&a(e,["format"],t);const r=s(n,["gcsDestination","outputUriPrefix"]);r!=null&&a(e,["gcsUri"],r);const o=s(n,["bigqueryDestination","outputUri"]);return o!=null&&a(e,["bigqueryUri"],o),e}function w0(n){const e={},t=s(n,["format"]);t!=null&&a(e,["predictionsFormat"],t);const r=s(n,["gcsUri"]);r!=null&&a(e,["gcsDestination","outputUriPrefix"],r);const o=s(n,["bigqueryUri"]);if(o!=null&&a(e,["bigqueryDestination","outputUri"],o),s(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qs(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["metadata","displayName"]);r!=null&&a(e,["displayName"],r);const o=s(n,["metadata","state"]);o!=null&&a(e,["state"],xg(o));const i=s(n,["metadata","createTime"]);i!=null&&a(e,["createTime"],i);const l=s(n,["metadata","endTime"]);l!=null&&a(e,["endTime"],l);const c=s(n,["metadata","updateTime"]);c!=null&&a(e,["updateTime"],c);const d=s(n,["metadata","model"]);d!=null&&a(e,["model"],d);const p=s(n,["metadata","output"]);return p!=null&&a(e,["dest"],E0(Pg(p))),e}function za(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["displayName"]);r!=null&&a(e,["displayName"],r);const o=s(n,["state"]);o!=null&&a(e,["state"],xg(o));const i=s(n,["error"]);i!=null&&a(e,["error"],i);const l=s(n,["createTime"]);l!=null&&a(e,["createTime"],l);const c=s(n,["startTime"]);c!=null&&a(e,["startTime"],c);const d=s(n,["endTime"]);d!=null&&a(e,["endTime"],d);const p=s(n,["updateTime"]);p!=null&&a(e,["updateTime"],p);const m=s(n,["model"]);m!=null&&a(e,["model"],m);const v=s(n,["inputConfig"]);v!=null&&a(e,["src"],I0(v));const _=s(n,["outputConfig"]);return _!=null&&a(e,["dest"],S0(Pg(_))),e}function I0(n){const e={},t=s(n,["instancesFormat"]);t!=null&&a(e,["format"],t);const r=s(n,["gcsSource","uris"]);r!=null&&a(e,["gcsUri"],r);const o=s(n,["bigquerySource","inputUri"]);return o!=null&&a(e,["bigqueryUri"],o),e}function A0(n,e){const t={};if(s(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=s(e,["fileName"]);r!=null&&a(t,["fileName"],r);const o=s(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>Z0(n,l))),a(t,["requests","requests"],i)}return t}function k0(n){const e={},t=s(n,["format"]);t!=null&&a(e,["instancesFormat"],t);const r=s(n,["gcsUri"]);r!=null&&a(e,["gcsSource","uris"],r);const o=s(n,["bigqueryUri"]);if(o!=null&&a(e,["bigquerySource","inputUri"],o),s(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function P0(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["data"]);t!=null&&a(e,["data"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function x0(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],Oo(n,r)),t}function R0(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],Oo(n,r)),t}function M0(n){const e={},t=s(n,["content"]);t!=null&&a(e,["content"],t);const r=s(n,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],N0(r));const o=s(n,["tokenCount"]);o!=null&&a(e,["tokenCount"],o);const i=s(n,["finishReason"]);i!=null&&a(e,["finishReason"],i);const l=s(n,["urlContextMetadata"]);l!=null&&a(e,["urlContextMetadata"],l);const c=s(n,["avgLogprobs"]);c!=null&&a(e,["avgLogprobs"],c);const d=s(n,["groundingMetadata"]);d!=null&&a(e,["groundingMetadata"],d);const p=s(n,["index"]);p!=null&&a(e,["index"],p);const m=s(n,["logprobsResult"]);m!=null&&a(e,["logprobsResult"],m);const v=s(n,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(A=>A)),a(e,["safetyRatings"],_)}return e}function N0(n){const e={},t=s(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),a(e,["citations"],r)}return e}function Rg(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>sC(i))),a(e,["parts"],o)}const r=s(n,["role"]);return r!=null&&a(e,["role"],r),e}function D0(n,e){const t={},r=s(n,["displayName"]);if(e!==void 0&&r!=null&&a(e,["batch","displayName"],r),s(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function L0(n,e){const t={},r=s(n,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const o=s(n,["dest"]);return e!==void 0&&o!=null&&a(e,["outputConfig"],w0(T0(o))),t}function Bp(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["src"]);o!=null&&a(t,["batch","inputConfig"],A0(n,kg(n,o)));const i=s(e,["config"]);return i!=null&&D0(i,t),t}function U0(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["model"],Ve(n,r));const o=s(e,["src"]);o!=null&&a(t,["inputConfig"],k0(kg(n,o)));const i=s(e,["config"]);return i!=null&&L0(i,t),t}function F0(n,e){const t={},r=s(n,["displayName"]);return e!==void 0&&r!=null&&a(e,["batch","displayName"],r),t}function V0(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["src"]);o!=null&&a(t,["batch","inputConfig"],z0(n,o));const i=s(e,["config"]);return i!=null&&F0(i,t),t}function q0(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],Oo(n,r)),t}function B0(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],Oo(n,r)),t}function G0(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const i=s(n,["error"]);return i!=null&&a(e,["error"],i),e}function H0(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const i=s(n,["error"]);return i!=null&&a(e,["error"],i),e}function K0(n,e){const t={},r=s(e,["contents"]);if(r!=null){let i=Oc(n,r);Array.isArray(i)&&(i=i.map(l=>l)),a(t,["requests[]","request","content"],i)}const o=s(e,["config"]);return o!=null&&(a(t,["_self"],$0(o,t)),O_(t,{"requests[].*":"requests[].request.*"})),t}function $0(n,e){const t={},r=s(n,["taskType"]);e!==void 0&&r!=null&&a(e,["requests[]","taskType"],r);const o=s(n,["title"]);e!==void 0&&o!=null&&a(e,["requests[]","title"],o);const i=s(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),s(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function z0(n,e){const t={},r=s(e,["fileName"]);r!=null&&a(t,["file_name"],r);const o=s(e,["inlinedRequests"]);return o!=null&&a(t,["requests"],K0(n,o)),t}function O0(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function b0(n,e,t){const r={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],Rg(Rn(o)));const i=s(e,["temperature"]);i!=null&&a(r,["temperature"],i);const l=s(e,["topP"]);l!=null&&a(r,["topP"],l);const c=s(e,["topK"]);c!=null&&a(r,["topK"],c);const d=s(e,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const p=s(e,["maxOutputTokens"]);p!=null&&a(r,["maxOutputTokens"],p);const m=s(e,["stopSequences"]);m!=null&&a(r,["stopSequences"],m);const v=s(e,["responseLogprobs"]);v!=null&&a(r,["responseLogprobs"],v);const _=s(e,["logprobs"]);_!=null&&a(r,["logprobs"],_);const A=s(e,["presencePenalty"]);A!=null&&a(r,["presencePenalty"],A);const V=s(e,["frequencyPenalty"]);V!=null&&a(r,["frequencyPenalty"],V);const B=s(e,["seed"]);B!=null&&a(r,["seed"],B);const Y=s(e,["responseMimeType"]);Y!=null&&a(r,["responseMimeType"],Y);const I=s(e,["responseSchema"]);I!=null&&a(r,["responseSchema"],bc(I));const E=s(e,["responseJsonSchema"]);if(E!=null&&a(r,["responseJsonSchema"],E),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=s(e,["safetySettings"]);if(t!==void 0&&w!=null){let Me=w;Array.isArray(Me)&&(Me=Me.map($e=>lC($e))),a(t,["safetySettings"],Me)}const K=s(e,["tools"]);if(t!==void 0&&K!=null){let Me=zo(K);Array.isArray(Me)&&(Me=Me.map($e=>uC($o($e)))),a(t,["tools"],Me)}const O=s(e,["toolConfig"]);if(t!==void 0&&O!=null&&a(t,["toolConfig"],O),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=s(e,["cachedContent"]);t!==void 0&&J!=null&&a(t,["cachedContent"],er(n,J));const b=s(e,["responseModalities"]);b!=null&&a(r,["responseModalities"],b);const oe=s(e,["mediaResolution"]);oe!=null&&a(r,["mediaResolution"],oe);const le=s(e,["speechConfig"]);if(le!=null&&a(r,["speechConfig"],Jc(le)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=s(e,["thinkingConfig"]);ce!=null&&a(r,["thinkingConfig"],ce);const Ne=s(e,["imageConfig"]);return Ne!=null&&a(r,["imageConfig"],Ne),r}function J0(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>M0(p))),a(e,["candidates"],d)}const o=s(n,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const i=s(n,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const l=s(n,["responseId"]);l!=null&&a(e,["responseId"],l);const c=s(n,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function W0(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],Oo(n,r)),t}function Y0(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],Oo(n,r)),t}function Q0(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function X0(n){const e={},t=s(n,["timeRangeFilter"]);if(t!=null&&a(e,["timeRangeFilter"],t),s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Z0(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["request","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let c=ft(o);Array.isArray(c)&&(c=c.map(d=>Rg(d))),a(t,["request","contents"],c)}const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const l=s(e,["config"]);return l!=null&&a(t,["request","generationConfig"],b0(n,l,s(t,["request"],{}))),t}function j0(n){const e={},t=s(n,["response"]);t!=null&&a(e,["response"],J0(t));const r=s(n,["error"]);return r!=null&&a(e,["error"],r),e}function eC(n,e){const t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const o=s(n,["pageToken"]);if(e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),s(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function nC(n,e){const t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const o=s(n,["pageToken"]);e!==void 0&&o!=null&&a(e,["_query","pageToken"],o);const i=s(n,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),t}function tC(n){const e={},t=s(n,["config"]);return t!=null&&eC(t,e),e}function rC(n){const e={},t=s(n,["config"]);return t!=null&&nC(t,e),e}function oC(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>Qs(l))),a(e,["batchJobs"],i)}return e}function iC(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>za(l))),a(e,["batchJobs"],i)}return e}function sC(n){const e={},t=s(n,["videoMetadata"]);t!=null&&a(e,["videoMetadata"],t);const r=s(n,["thought"]);r!=null&&a(e,["thought"],r);const o=s(n,["inlineData"]);o!=null&&a(e,["inlineData"],P0(o));const i=s(n,["fileData"]);i!=null&&a(e,["fileData"],O0(i));const l=s(n,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);const c=s(n,["functionCall"]);c!=null&&a(e,["functionCall"],c);const d=s(n,["codeExecutionResult"]);d!=null&&a(e,["codeExecutionResult"],d);const p=s(n,["executableCode"]);p!=null&&a(e,["executableCode"],p);const m=s(n,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const v=s(n,["text"]);return v!=null&&a(e,["text"],v),e}function lC(n){const e={};if(s(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=s(n,["category"]);t!=null&&a(e,["category"],t);const r=s(n,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function uC(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["functionDeclarations"],p)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=s(n,["googleSearch"]);r!=null&&a(e,["googleSearch"],X0(r));const o=s(n,["googleSearchRetrieval"]);if(o!=null&&a(e,["googleSearchRetrieval"],o),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["googleMaps"]);i!=null&&a(e,["googleMaps"],Q0(i));const l=s(n,["urlContext"]);l!=null&&a(e,["urlContext"],l);const c=s(n,["computerUse"]);c!=null&&a(e,["computerUse"],c);const d=s(n,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Yr||(Yr={}));class Xi{constructor(e,t,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,o)}init(e,t,r){var o,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(i=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aC extends Zr{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Xi(Yr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Bp(this.apiClient,e),r=t._url,o=pe("{model}:batchGenerateContent",r),c=t.batch.inputConfig.requests,d=c.requests,p=[];for(const m of d){const v=Object.assign({},m);if(v.systemInstruction){const _=v.systemInstruction;delete v.systemInstruction;const A=v.request;A.systemInstruction=_,v.request=A}p.push(v)}return c.requests=p,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),l=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(l)r.dest=`${l}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=U0(this.apiClient,e);return c=pe("batchPredictionJobs",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>za(m))}else{const p=Bp(this.apiClient,e);return c=pe("{model}:batchGenerateContent",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Qs(m))}}async createEmbeddingsInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=V0(this.apiClient,e);return i=pe("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Qs(d))}}async get(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=Y0(this.apiClient,e);return c=pe("batchPredictionJobs/{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>za(m))}else{const p=W0(this.apiClient,e);return c=pe("batches/{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Qs(m))}}async cancel(e){var t,r,o,i;let l="",c={};if(this.apiClient.isVertexAI()){const d=R0(this.apiClient,e);l=pe("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const d=x0(this.apiClient,e);l=pe("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=rC(e);return c=pe("batchPredictionJobs",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=iC(m),_=new Up;return Object.assign(_,v),_})}else{const p=tC(e);return c=pe("batches",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=oC(m),_=new Up;return Object.assign(_,v),_})}}async delete(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=B0(this.apiClient,e);return c=pe("batchPredictionJobs/{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>H0(m))}else{const p=q0(this.apiClient,e);return c=pe("batches/{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>G0(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cC(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["data"]);t!=null&&a(e,["data"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Gp(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>MC(i))),a(e,["parts"],o)}const r=s(n,["role"]);return r!=null&&a(e,["role"],r),e}function fC(n,e){const t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const o=s(n,["expireTime"]);e!==void 0&&o!=null&&a(e,["expireTime"],o);const i=s(n,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const l=s(n,["contents"]);if(e!==void 0&&l!=null){let m=ft(l);Array.isArray(m)&&(m=m.map(v=>Gp(v))),a(e,["contents"],m)}const c=s(n,["systemInstruction"]);e!==void 0&&c!=null&&a(e,["systemInstruction"],Gp(Rn(c)));const d=s(n,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(v=>NC(v))),a(e,["tools"],m)}const p=s(n,["toolConfig"]);if(e!==void 0&&p!=null&&a(e,["toolConfig"],p),s(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function dC(n,e){const t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const o=s(n,["expireTime"]);e!==void 0&&o!=null&&a(e,["expireTime"],o);const i=s(n,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const l=s(n,["contents"]);if(e!==void 0&&l!=null){let v=ft(l);Array.isArray(v)&&(v=v.map(_=>_)),a(e,["contents"],v)}const c=s(n,["systemInstruction"]);e!==void 0&&c!=null&&a(e,["systemInstruction"],Rn(c));const d=s(n,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(_=>DC(_))),a(e,["tools"],v)}const p=s(n,["toolConfig"]);e!==void 0&&p!=null&&a(e,["toolConfig"],p);const m=s(n,["kmsKeyName"]);return e!==void 0&&m!=null&&a(e,["encryption_spec","kmsKeyName"],m),t}function pC(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["model"],vg(n,r));const o=s(e,["config"]);return o!=null&&fC(o,t),t}function hC(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["model"],vg(n,r));const o=s(e,["config"]);return o!=null&&dC(o,t),t}function mC(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],er(n,r)),t}function gC(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],er(n,r)),t}function yC(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function vC(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function _C(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function CC(n){const e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=s(n,["description"]);t!=null&&a(e,["description"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["parameters"]);o!=null&&a(e,["parameters"],o);const i=s(n,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const l=s(n,["response"]);l!=null&&a(e,["response"],l);const c=s(n,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function TC(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],er(n,r)),t}function EC(n,e){const t={},r=s(e,["name"]);return r!=null&&a(t,["_url","name"],er(n,r)),t}function SC(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function wC(n){const e={},t=s(n,["timeRangeFilter"]);if(t!=null&&a(e,["timeRangeFilter"],t),s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function IC(n,e){const t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function AC(n,e){const t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function kC(n){const e={},t=s(n,["config"]);return t!=null&&IC(t,e),e}function PC(n){const e={},t=s(n,["config"]);return t!=null&&AC(t,e),e}function xC(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["cachedContents"],i)}return e}function RC(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["cachedContents"],i)}return e}function MC(n){const e={},t=s(n,["videoMetadata"]);t!=null&&a(e,["videoMetadata"],t);const r=s(n,["thought"]);r!=null&&a(e,["thought"],r);const o=s(n,["inlineData"]);o!=null&&a(e,["inlineData"],cC(o));const i=s(n,["fileData"]);i!=null&&a(e,["fileData"],_C(i));const l=s(n,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);const c=s(n,["functionCall"]);c!=null&&a(e,["functionCall"],c);const d=s(n,["codeExecutionResult"]);d!=null&&a(e,["codeExecutionResult"],d);const p=s(n,["executableCode"]);p!=null&&a(e,["executableCode"],p);const m=s(n,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const v=s(n,["text"]);return v!=null&&a(e,["text"],v),e}function NC(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["functionDeclarations"],p)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=s(n,["googleSearch"]);r!=null&&a(e,["googleSearch"],wC(r));const o=s(n,["googleSearchRetrieval"]);if(o!=null&&a(e,["googleSearchRetrieval"],o),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["googleMaps"]);i!=null&&a(e,["googleMaps"],SC(i));const l=s(n,["urlContext"]);l!=null&&a(e,["urlContext"],l);const c=s(n,["computerUse"]);c!=null&&a(e,["computerUse"],c);const d=s(n,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}function DC(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>CC(_))),a(e,["functionDeclarations"],v)}const r=s(n,["retrieval"]);r!=null&&a(e,["retrieval"],r);const o=s(n,["googleSearch"]);o!=null&&a(e,["googleSearch"],o);const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const l=s(n,["enterpriseWebSearch"]);l!=null&&a(e,["enterpriseWebSearch"],l);const c=s(n,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=s(n,["urlContext"]);d!=null&&a(e,["urlContext"],d);const p=s(n,["computerUse"]);p!=null&&a(e,["computerUse"],p);const m=s(n,["codeExecution"]);return m!=null&&a(e,["codeExecution"],m),e}function LC(n,e){const t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const o=s(n,["expireTime"]);return e!==void 0&&o!=null&&a(e,["expireTime"],o),t}function UC(n,e){const t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const o=s(n,["expireTime"]);return e!==void 0&&o!=null&&a(e,["expireTime"],o),t}function FC(n,e){const t={},r=s(e,["name"]);r!=null&&a(t,["_url","name"],er(n,r));const o=s(e,["config"]);return o!=null&&LC(o,t),t}function VC(n,e){const t={},r=s(e,["name"]);r!=null&&a(t,["_url","name"],er(n,r));const o=s(e,["config"]);return o!=null&&UC(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qC extends Zr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Xi(Yr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=hC(this.apiClient,e);return c=pe("cachedContents",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const p=pC(this.apiClient,e);return c=pe("cachedContents",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async get(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=EC(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const p=TC(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async delete(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=gC(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=vC(m),_=new Dp;return Object.assign(_,v),_})}else{const p=mC(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=yC(m),_=new Dp;return Object.assign(_,v),_})}}async update(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=VC(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const p=FC(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async listInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=PC(e);return c=pe("cachedContents",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=RC(m),_=new Lp;return Object.assign(_,v),_})}else{const p=kC(e);return c=pe("cachedContents",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=xC(m),_=new Lp;return Object.assign(_,v),_})}}}function Hp(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xe(n){return this instanceof Xe?(this.v=n,this):new Xe(n)}function Ro(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(A){return function(V){return Promise.resolve(V).then(A,v)}}function c(A,V){r[A]&&(o[A]=function(B){return new Promise(function(Y,I){i.push([A,B,Y,I])>1||d(A,B)})},V&&(o[A]=V(o[A])))}function d(A,V){try{p(r[A](V))}catch(B){_(i[0][3],B)}}function p(A){A.value instanceof Xe?Promise.resolve(A.value.v).then(m,v):_(i[0][2],A)}function m(A){d("next",A)}function v(A){d("throw",A)}function _(A,V){A(V),i.shift(),i.length&&d(i[0][0],i[0][1])}}function Pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Hp=="function"?Hp(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(l){return new Promise(function(c,d){l=n[i](l),o(c,d,l.done,l.value)})}}function o(i,l,c,d){Promise.resolve(d).then(function(p){i({value:p,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BC(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Mg(t)}function Mg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function GC(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Kp(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const o=[];let i=!0;for(;r<t&&n[r].role==="model";)o.push(n[r]),i&&!Mg(n[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class HC{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new KC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class KC{constructor(e,t,r,o={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),GC(i)}async sendMessage(e){var t;await this.sendPromise;const r=Rn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var i,l,c;const d=await o,p=(l=(i=d.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content,m=d.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let _=[];m!=null&&(_=(c=m.slice(v))!==null&&c!==void 0?c:[]);const A=p?[p]:[];this.recordHistory(r,A,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const r=Rn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const t=e?Kp(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var r,o;return Ro(this,arguments,function*(){var l,c,d,p;const m=[];try{for(var v=!0,_=Pi(e),A;A=yield Xe(_.next()),l=A.done,!l;v=!0){p=A.value,v=!1;const V=p;if(BC(V)){const B=(o=(r=V.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;B!==void 0&&m.push(B)}yield yield Xe(V)}}catch(V){c={error:V}}finally{try{!v&&!l&&(d=_.return)&&(yield Xe(d.call(_)))}finally{if(c)throw c.error}}this.recordHistory(t,m)})}recordHistory(e,t,r){let o=[];t.length>0&&t.every(i=>i.role!==void 0)?o=t:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Kp(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Kl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $C(n){const e={},t=s(n,["file"]);return t!=null&&a(e,["file"],t),e}function zC(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function OC(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","file"],wg(t)),e}function bC(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function JC(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","file"],wg(t)),e}function WC(n,e){const t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function YC(n){const e={},t=s(n,["config"]);return t!=null&&WC(t,e),e}function QC(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XC extends Zr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Xi(Yr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YC(e);return i=pe("files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=QC(d),m=new u0;return Object.assign(m,p),m})}}async createInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$C(e);return i=pe("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const p=zC(d),m=new a0;return Object.assign(m,p),m})}}async get(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=JC(e);return i=pe("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=OC(e);return i=pe("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=bC(d),m=new c0;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xs(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["data"]);t!=null&&a(e,["data"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function ZC(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>pT(i))),a(e,["parts"],o)}const r=s(n,["role"]);return r!=null&&a(e,["role"],r),e}function jC(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function eT(n){const e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=s(n,["description"]);t!=null&&a(e,["description"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["parameters"]);o!=null&&a(e,["parameters"],o);const i=s(n,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const l=s(n,["response"]);l!=null&&a(e,["response"],l);const c=s(n,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function nT(n){const e={},t=s(n,["modelSelectionConfig"]);t!=null&&a(e,["modelConfig"],t);const r=s(n,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const o=s(n,["candidateCount"]);o!=null&&a(e,["candidateCount"],o);const i=s(n,["enableAffectiveDialog"]);i!=null&&a(e,["enableAffectiveDialog"],i);const l=s(n,["frequencyPenalty"]);l!=null&&a(e,["frequencyPenalty"],l);const c=s(n,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=s(n,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const p=s(n,["mediaResolution"]);p!=null&&a(e,["mediaResolution"],p);const m=s(n,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const v=s(n,["responseJsonSchema"]);v!=null&&a(e,["responseJsonSchema"],v);const _=s(n,["responseLogprobs"]);_!=null&&a(e,["responseLogprobs"],_);const A=s(n,["responseMimeType"]);A!=null&&a(e,["responseMimeType"],A);const V=s(n,["responseModalities"]);V!=null&&a(e,["responseModalities"],V);const B=s(n,["responseSchema"]);B!=null&&a(e,["responseSchema"],B);const Y=s(n,["routingConfig"]);Y!=null&&a(e,["routingConfig"],Y);const I=s(n,["seed"]);I!=null&&a(e,["seed"],I);const E=s(n,["speechConfig"]);E!=null&&a(e,["speechConfig"],Ng(E));const w=s(n,["stopSequences"]);w!=null&&a(e,["stopSequences"],w);const K=s(n,["temperature"]);K!=null&&a(e,["temperature"],K);const O=s(n,["thinkingConfig"]);O!=null&&a(e,["thinkingConfig"],O);const J=s(n,["topK"]);J!=null&&a(e,["topK"],J);const b=s(n,["topP"]);if(b!=null&&a(e,["topP"],b),s(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tT(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function rT(n){const e={},t=s(n,["timeRangeFilter"]);if(t!=null&&a(e,["timeRangeFilter"],t),s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function oT(n,e){const t={},r=s(n,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const o=s(n,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const i=s(n,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const l=s(n,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const c=s(n,["topK"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","topK"],c);const d=s(n,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const p=s(n,["mediaResolution"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","mediaResolution"],p);const m=s(n,["seed"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","seed"],m);const v=s(n,["speechConfig"]);e!==void 0&&v!=null&&a(e,["setup","generationConfig","speechConfig"],Wc(v));const _=s(n,["thinkingConfig"]);e!==void 0&&_!=null&&a(e,["setup","generationConfig","thinkingConfig"],_);const A=s(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],A);const V=s(n,["systemInstruction"]);e!==void 0&&V!=null&&a(e,["setup","systemInstruction"],ZC(Rn(V)));const B=s(n,["tools"]);if(e!==void 0&&B!=null){let J=zo(B);Array.isArray(J)&&(J=J.map(b=>mT($o(b)))),a(e,["setup","tools"],J)}const Y=s(n,["sessionResumption"]);e!==void 0&&Y!=null&&a(e,["setup","sessionResumption"],hT(Y));const I=s(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&a(e,["setup","inputAudioTranscription"],I);const E=s(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&a(e,["setup","outputAudioTranscription"],E);const w=s(n,["realtimeInputConfig"]);e!==void 0&&w!=null&&a(e,["setup","realtimeInputConfig"],w);const K=s(n,["contextWindowCompression"]);e!==void 0&&K!=null&&a(e,["setup","contextWindowCompression"],K);const O=s(n,["proactivity"]);return e!==void 0&&O!=null&&a(e,["setup","proactivity"],O),t}function iT(n,e){const t={},r=s(n,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],nT(r));const o=s(n,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const i=s(n,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const l=s(n,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const c=s(n,["topK"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","topK"],c);const d=s(n,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const p=s(n,["mediaResolution"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","mediaResolution"],p);const m=s(n,["seed"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","seed"],m);const v=s(n,["speechConfig"]);e!==void 0&&v!=null&&a(e,["setup","generationConfig","speechConfig"],Ng(Wc(v)));const _=s(n,["thinkingConfig"]);e!==void 0&&_!=null&&a(e,["setup","generationConfig","thinkingConfig"],_);const A=s(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],A);const V=s(n,["systemInstruction"]);e!==void 0&&V!=null&&a(e,["setup","systemInstruction"],Rn(V));const B=s(n,["tools"]);if(e!==void 0&&B!=null){let J=zo(B);Array.isArray(J)&&(J=J.map(b=>gT($o(b)))),a(e,["setup","tools"],J)}const Y=s(n,["sessionResumption"]);e!==void 0&&Y!=null&&a(e,["setup","sessionResumption"],Y);const I=s(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&a(e,["setup","inputAudioTranscription"],I);const E=s(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&a(e,["setup","outputAudioTranscription"],E);const w=s(n,["realtimeInputConfig"]);e!==void 0&&w!=null&&a(e,["setup","realtimeInputConfig"],w);const K=s(n,["contextWindowCompression"]);e!==void 0&&K!=null&&a(e,["setup","contextWindowCompression"],K);const O=s(n,["proactivity"]);return e!==void 0&&O!=null&&a(e,["setup","proactivity"],O),t}function sT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["setup","model"],Ve(n,r));const o=s(e,["config"]);return o!=null&&a(t,["config"],oT(o,t)),t}function lT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["setup","model"],Ve(n,r));const o=s(e,["config"]);return o!=null&&a(t,["config"],iT(o,t)),t}function uT(n){const e={},t=s(n,["musicGenerationConfig"]);return t!=null&&a(e,["musicGenerationConfig"],t),e}function aT(n){const e={},t=s(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),a(e,["weightedPrompts"],r)}return e}function cT(n){const e={},t=s(n,["media"]);if(t!=null){let p=_g(t);Array.isArray(p)&&(p=p.map(m=>Xs(m))),a(e,["mediaChunks"],p)}const r=s(n,["audio"]);r!=null&&a(e,["audio"],Xs(Tg(r)));const o=s(n,["audioStreamEnd"]);o!=null&&a(e,["audioStreamEnd"],o);const i=s(n,["video"]);i!=null&&a(e,["video"],Xs(Cg(i)));const l=s(n,["text"]);l!=null&&a(e,["text"],l);const c=s(n,["activityStart"]);c!=null&&a(e,["activityStart"],c);const d=s(n,["activityEnd"]);return d!=null&&a(e,["activityEnd"],d),e}function fT(n){const e={},t=s(n,["media"]);if(t!=null){let p=_g(t);Array.isArray(p)&&(p=p.map(m=>m)),a(e,["mediaChunks"],p)}const r=s(n,["audio"]);r!=null&&a(e,["audio"],Tg(r));const o=s(n,["audioStreamEnd"]);o!=null&&a(e,["audioStreamEnd"],o);const i=s(n,["video"]);i!=null&&a(e,["video"],Cg(i));const l=s(n,["text"]);l!=null&&a(e,["text"],l);const c=s(n,["activityStart"]);c!=null&&a(e,["activityStart"],c);const d=s(n,["activityEnd"]);return d!=null&&a(e,["activityEnd"],d),e}function dT(n){const e={},t=s(n,["setupComplete"]);t!=null&&a(e,["setupComplete"],t);const r=s(n,["serverContent"]);r!=null&&a(e,["serverContent"],r);const o=s(n,["toolCall"]);o!=null&&a(e,["toolCall"],o);const i=s(n,["toolCallCancellation"]);i!=null&&a(e,["toolCallCancellation"],i);const l=s(n,["usageMetadata"]);l!=null&&a(e,["usageMetadata"],yT(l));const c=s(n,["goAway"]);c!=null&&a(e,["goAway"],c);const d=s(n,["sessionResumptionUpdate"]);return d!=null&&a(e,["sessionResumptionUpdate"],d),e}function pT(n){const e={},t=s(n,["videoMetadata"]);t!=null&&a(e,["videoMetadata"],t);const r=s(n,["thought"]);r!=null&&a(e,["thought"],r);const o=s(n,["inlineData"]);o!=null&&a(e,["inlineData"],Xs(o));const i=s(n,["fileData"]);i!=null&&a(e,["fileData"],jC(i));const l=s(n,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);const c=s(n,["functionCall"]);c!=null&&a(e,["functionCall"],c);const d=s(n,["codeExecutionResult"]);d!=null&&a(e,["codeExecutionResult"],d);const p=s(n,["executableCode"]);p!=null&&a(e,["executableCode"],p);const m=s(n,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const v=s(n,["text"]);return v!=null&&a(e,["text"],v),e}function hT(n){const e={},t=s(n,["handle"]);if(t!=null&&a(e,["handle"],t),s(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ng(n){const e={},t=s(n,["voiceConfig"]);if(t!=null&&a(e,["voiceConfig"],t),s(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=s(n,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function mT(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["functionDeclarations"],p)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=s(n,["googleSearch"]);r!=null&&a(e,["googleSearch"],rT(r));const o=s(n,["googleSearchRetrieval"]);if(o!=null&&a(e,["googleSearchRetrieval"],o),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["googleMaps"]);i!=null&&a(e,["googleMaps"],tT(i));const l=s(n,["urlContext"]);l!=null&&a(e,["urlContext"],l);const c=s(n,["computerUse"]);c!=null&&a(e,["computerUse"],c);const d=s(n,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}function gT(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>eT(_))),a(e,["functionDeclarations"],v)}const r=s(n,["retrieval"]);r!=null&&a(e,["retrieval"],r);const o=s(n,["googleSearch"]);o!=null&&a(e,["googleSearch"],o);const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const l=s(n,["enterpriseWebSearch"]);l!=null&&a(e,["enterpriseWebSearch"],l);const c=s(n,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=s(n,["urlContext"]);d!=null&&a(e,["urlContext"],d);const p=s(n,["computerUse"]);p!=null&&a(e,["computerUse"],p);const m=s(n,["codeExecution"]);return m!=null&&a(e,["codeExecution"],m),e}function yT(n){const e={},t=s(n,["promptTokenCount"]);t!=null&&a(e,["promptTokenCount"],t);const r=s(n,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);const o=s(n,["candidatesTokenCount"]);o!=null&&a(e,["responseTokenCount"],o);const i=s(n,["toolUsePromptTokenCount"]);i!=null&&a(e,["toolUsePromptTokenCount"],i);const l=s(n,["thoughtsTokenCount"]);l!=null&&a(e,["thoughtsTokenCount"],l);const c=s(n,["totalTokenCount"]);c!=null&&a(e,["totalTokenCount"],c);const d=s(n,["promptTokensDetails"]);if(d!=null){let A=d;Array.isArray(A)&&(A=A.map(V=>V)),a(e,["promptTokensDetails"],A)}const p=s(n,["cacheTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(V=>V)),a(e,["cacheTokensDetails"],A)}const m=s(n,["candidatesTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(V=>V)),a(e,["responseTokensDetails"],A)}const v=s(n,["toolUsePromptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(V=>V)),a(e,["toolUsePromptTokensDetails"],A)}const _=s(n,["trafficType"]);return _!=null&&a(e,["trafficType"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vT(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["data"]);t!=null&&a(e,["data"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function _T(n){const e={},t=s(n,["content"]);t!=null&&a(e,["content"],t);const r=s(n,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],CT(r));const o=s(n,["tokenCount"]);o!=null&&a(e,["tokenCount"],o);const i=s(n,["finishReason"]);i!=null&&a(e,["finishReason"],i);const l=s(n,["urlContextMetadata"]);l!=null&&a(e,["urlContextMetadata"],l);const c=s(n,["avgLogprobs"]);c!=null&&a(e,["avgLogprobs"],c);const d=s(n,["groundingMetadata"]);d!=null&&a(e,["groundingMetadata"],d);const p=s(n,["index"]);p!=null&&a(e,["index"],p);const m=s(n,["logprobsResult"]);m!=null&&a(e,["logprobsResult"],m);const v=s(n,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(A=>A)),a(e,["safetyRatings"],_)}return e}function CT(n){const e={},t=s(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),a(e,["citations"],r)}return e}function TT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let i=ft(o);Array.isArray(i)&&(i=i.map(l=>l)),a(t,["contents"],i)}return t}function ET(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),a(e,["tokensInfo"],o)}return e}function ST(n){const e={},t=s(n,["values"]);t!=null&&a(e,["values"],t);const r=s(n,["statistics"]);return r!=null&&a(e,["statistics"],wT(r)),e}function wT(n){const e={},t=s(n,["truncated"]);t!=null&&a(e,["truncated"],t);const r=s(n,["token_count"]);return r!=null&&a(e,["tokenCount"],r),e}function $l(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>xE(i))),a(e,["parts"],o)}const r=s(n,["role"]);return r!=null&&a(e,["role"],r),e}function IT(n){const e={},t=s(n,["controlType"]);t!=null&&a(e,["controlType"],t);const r=s(n,["enableControlImageComputation"]);return r!=null&&a(e,["computeControl"],r),e}function AT(n){const e={};if(s(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kT(n,e){const t={},r=s(n,["systemInstruction"]);e!==void 0&&r!=null&&a(e,["systemInstruction"],Rn(r));const o=s(n,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Vg(c))),a(e,["tools"],l)}const i=s(n,["generationConfig"]);return e!==void 0&&i!=null&&a(e,["generationConfig"],gE(i)),t}function PT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let l=ft(o);Array.isArray(l)&&(l=l.map(c=>$l(c))),a(t,["contents"],l)}const i=s(e,["config"]);return i!=null&&AT(i),t}function xT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let l=ft(o);Array.isArray(l)&&(l=l.map(c=>c)),a(t,["contents"],l)}const i=s(e,["config"]);return i!=null&&kT(i,t),t}function RT(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["totalTokens"]);r!=null&&a(e,["totalTokens"],r);const o=s(n,["cachedContentTokenCount"]);return o!=null&&a(e,["cachedContentTokenCount"],o),e}function MT(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["totalTokens"]);return r!=null&&a(e,["totalTokens"],r),e}function NT(n,e){const t={},r=s(e,["model"]);return r!=null&&a(t,["_url","name"],Ve(n,r)),t}function DT(n,e){const t={},r=s(e,["model"]);return r!=null&&a(t,["_url","name"],Ve(n,r)),t}function LT(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function UT(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function FT(n,e){const t={},r=s(n,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const o=s(n,["negativePrompt"]);e!==void 0&&o!=null&&a(e,["parameters","negativePrompt"],o);const i=s(n,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const l=s(n,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const c=s(n,["guidanceScale"]);e!==void 0&&c!=null&&a(e,["parameters","guidanceScale"],c);const d=s(n,["seed"]);e!==void 0&&d!=null&&a(e,["parameters","seed"],d);const p=s(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&a(e,["parameters","safetySetting"],p);const m=s(n,["personGeneration"]);e!==void 0&&m!=null&&a(e,["parameters","personGeneration"],m);const v=s(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&a(e,["parameters","includeSafetyAttributes"],v);const _=s(n,["includeRaiReason"]);e!==void 0&&_!=null&&a(e,["parameters","includeRaiReason"],_);const A=s(n,["language"]);e!==void 0&&A!=null&&a(e,["parameters","language"],A);const V=s(n,["outputMimeType"]);e!==void 0&&V!=null&&a(e,["parameters","outputOptions","mimeType"],V);const B=s(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&a(e,["parameters","outputOptions","compressionQuality"],B);const Y=s(n,["addWatermark"]);e!==void 0&&Y!=null&&a(e,["parameters","addWatermark"],Y);const I=s(n,["labels"]);e!==void 0&&I!=null&&a(e,["labels"],I);const E=s(n,["editMode"]);e!==void 0&&E!=null&&a(e,["parameters","editMode"],E);const w=s(n,["baseSteps"]);return e!==void 0&&w!=null&&a(e,["parameters","editConfig","baseSteps"],w),t}function VT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const i=s(e,["referenceImages"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>UE(d))),a(t,["instances[0]","referenceImages"],c)}const l=s(e,["config"]);return l!=null&&FT(l,t),t}function qT(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>zl(i))),a(e,["generatedImages"],o)}return e}function BT(n,e){const t={},r=s(n,["taskType"]);e!==void 0&&r!=null&&a(e,["requests[]","taskType"],r);const o=s(n,["title"]);e!==void 0&&o!=null&&a(e,["requests[]","title"],o);const i=s(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),s(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function GT(n,e){const t={},r=s(n,["taskType"]);e!==void 0&&r!=null&&a(e,["instances[]","task_type"],r);const o=s(n,["title"]);e!==void 0&&o!=null&&a(e,["instances[]","title"],o);const i=s(n,["outputDimensionality"]);e!==void 0&&i!=null&&a(e,["parameters","outputDimensionality"],i);const l=s(n,["mimeType"]);e!==void 0&&l!=null&&a(e,["instances[]","mimeType"],l);const c=s(n,["autoTruncate"]);return e!==void 0&&c!=null&&a(e,["parameters","autoTruncate"],c),t}function HT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let c=Oc(n,o);Array.isArray(c)&&(c=c.map(d=>d)),a(t,["requests[]","content"],c)}const i=s(e,["config"]);i!=null&&BT(i,t);const l=s(e,["model"]);return l!==void 0&&a(t,["requests[]","model"],Ve(n,l)),t}function KT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let l=Oc(n,o);Array.isArray(l)&&(l=l.map(c=>c)),a(t,["instances[]","content"],l)}const i=s(e,["config"]);return i!=null&&GT(i,t),t}function $T(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["embeddings"],i)}const o=s(n,["metadata"]);return o!=null&&a(e,["metadata"],o),e}function zT(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>ST(l))),a(e,["embeddings"],i)}const o=s(n,["metadata"]);return o!=null&&a(e,["metadata"],o),e}function OT(n){const e={},t=s(n,["endpoint"]);t!=null&&a(e,["name"],t);const r=s(n,["deployedModelId"]);return r!=null&&a(e,["deployedModelId"],r),e}function bT(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function JT(n){const e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=s(n,["description"]);t!=null&&a(e,["description"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["parameters"]);o!=null&&a(e,["parameters"],o);const i=s(n,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const l=s(n,["response"]);l!=null&&a(e,["response"],l);const c=s(n,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function WT(n,e,t){const r={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],$l(Rn(o)));const i=s(e,["temperature"]);i!=null&&a(r,["temperature"],i);const l=s(e,["topP"]);l!=null&&a(r,["topP"],l);const c=s(e,["topK"]);c!=null&&a(r,["topK"],c);const d=s(e,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const p=s(e,["maxOutputTokens"]);p!=null&&a(r,["maxOutputTokens"],p);const m=s(e,["stopSequences"]);m!=null&&a(r,["stopSequences"],m);const v=s(e,["responseLogprobs"]);v!=null&&a(r,["responseLogprobs"],v);const _=s(e,["logprobs"]);_!=null&&a(r,["logprobs"],_);const A=s(e,["presencePenalty"]);A!=null&&a(r,["presencePenalty"],A);const V=s(e,["frequencyPenalty"]);V!=null&&a(r,["frequencyPenalty"],V);const B=s(e,["seed"]);B!=null&&a(r,["seed"],B);const Y=s(e,["responseMimeType"]);Y!=null&&a(r,["responseMimeType"],Y);const I=s(e,["responseSchema"]);I!=null&&a(r,["responseSchema"],bc(I));const E=s(e,["responseJsonSchema"]);if(E!=null&&a(r,["responseJsonSchema"],E),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=s(e,["safetySettings"]);if(t!==void 0&&w!=null){let Me=w;Array.isArray(Me)&&(Me=Me.map($e=>FE($e))),a(t,["safetySettings"],Me)}const K=s(e,["tools"]);if(t!==void 0&&K!=null){let Me=zo(K);Array.isArray(Me)&&(Me=Me.map($e=>KE($o($e)))),a(t,["tools"],Me)}const O=s(e,["toolConfig"]);if(t!==void 0&&O!=null&&a(t,["toolConfig"],O),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=s(e,["cachedContent"]);t!==void 0&&J!=null&&a(t,["cachedContent"],er(n,J));const b=s(e,["responseModalities"]);b!=null&&a(r,["responseModalities"],b);const oe=s(e,["mediaResolution"]);oe!=null&&a(r,["mediaResolution"],oe);const le=s(e,["speechConfig"]);if(le!=null&&a(r,["speechConfig"],Jc(le)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=s(e,["thinkingConfig"]);ce!=null&&a(r,["thinkingConfig"],ce);const Ne=s(e,["imageConfig"]);return Ne!=null&&a(r,["imageConfig"],Ne),r}function YT(n,e,t){const r={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],Rn(o));const i=s(e,["temperature"]);i!=null&&a(r,["temperature"],i);const l=s(e,["topP"]);l!=null&&a(r,["topP"],l);const c=s(e,["topK"]);c!=null&&a(r,["topK"],c);const d=s(e,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const p=s(e,["maxOutputTokens"]);p!=null&&a(r,["maxOutputTokens"],p);const m=s(e,["stopSequences"]);m!=null&&a(r,["stopSequences"],m);const v=s(e,["responseLogprobs"]);v!=null&&a(r,["responseLogprobs"],v);const _=s(e,["logprobs"]);_!=null&&a(r,["logprobs"],_);const A=s(e,["presencePenalty"]);A!=null&&a(r,["presencePenalty"],A);const V=s(e,["frequencyPenalty"]);V!=null&&a(r,["frequencyPenalty"],V);const B=s(e,["seed"]);B!=null&&a(r,["seed"],B);const Y=s(e,["responseMimeType"]);Y!=null&&a(r,["responseMimeType"],Y);const I=s(e,["responseSchema"]);I!=null&&a(r,["responseSchema"],bc(I));const E=s(e,["responseJsonSchema"]);E!=null&&a(r,["responseJsonSchema"],E);const w=s(e,["routingConfig"]);w!=null&&a(r,["routingConfig"],w);const K=s(e,["modelSelectionConfig"]);K!=null&&a(r,["modelConfig"],K);const O=s(e,["safetySettings"]);if(t!==void 0&&O!=null){let be=O;Array.isArray(be)&&(be=be.map(tt=>tt)),a(t,["safetySettings"],be)}const J=s(e,["tools"]);if(t!==void 0&&J!=null){let be=zo(J);Array.isArray(be)&&(be=be.map(tt=>Vg($o(tt)))),a(t,["tools"],be)}const b=s(e,["toolConfig"]);t!==void 0&&b!=null&&a(t,["toolConfig"],b);const oe=s(e,["labels"]);t!==void 0&&oe!=null&&a(t,["labels"],oe);const le=s(e,["cachedContent"]);t!==void 0&&le!=null&&a(t,["cachedContent"],er(n,le));const ce=s(e,["responseModalities"]);ce!=null&&a(r,["responseModalities"],ce);const Ne=s(e,["mediaResolution"]);Ne!=null&&a(r,["mediaResolution"],Ne);const Me=s(e,["speechConfig"]);Me!=null&&a(r,["speechConfig"],Fg(Jc(Me)));const $e=s(e,["audioTimestamp"]);$e!=null&&a(r,["audioTimestamp"],$e);const Ut=s(e,["thinkingConfig"]);Ut!=null&&a(r,["thinkingConfig"],Ut);const nt=s(e,["imageConfig"]);return nt!=null&&a(r,["imageConfig"],nt),r}function $p(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let l=ft(o);Array.isArray(l)&&(l=l.map(c=>$l(c))),a(t,["contents"],l)}const i=s(e,["config"]);return i!=null&&a(t,["generationConfig"],WT(n,i,t)),t}function zp(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["contents"]);if(o!=null){let l=ft(o);Array.isArray(l)&&(l=l.map(c=>c)),a(t,["contents"],l)}const i=s(e,["config"]);return i!=null&&a(t,["generationConfig"],YT(n,i,t)),t}function Op(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>_T(p))),a(e,["candidates"],d)}const o=s(n,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const i=s(n,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const l=s(n,["responseId"]);l!=null&&a(e,["responseId"],l);const c=s(n,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function bp(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["candidates"],p)}const o=s(n,["createTime"]);o!=null&&a(e,["createTime"],o);const i=s(n,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const l=s(n,["promptFeedback"]);l!=null&&a(e,["promptFeedback"],l);const c=s(n,["responseId"]);c!=null&&a(e,["responseId"],c);const d=s(n,["usageMetadata"]);return d!=null&&a(e,["usageMetadata"],d),e}function QT(n,e){const t={};if(s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=s(n,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const o=s(n,["aspectRatio"]);e!==void 0&&o!=null&&a(e,["parameters","aspectRatio"],o);const i=s(n,["guidanceScale"]);if(e!==void 0&&i!=null&&a(e,["parameters","guidanceScale"],i),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&a(e,["parameters","safetySetting"],l);const c=s(n,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=s(n,["includeSafetyAttributes"]);e!==void 0&&d!=null&&a(e,["parameters","includeSafetyAttributes"],d);const p=s(n,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);const m=s(n,["language"]);e!==void 0&&m!=null&&a(e,["parameters","language"],m);const v=s(n,["outputMimeType"]);e!==void 0&&v!=null&&a(e,["parameters","outputOptions","mimeType"],v);const _=s(n,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&a(e,["parameters","outputOptions","compressionQuality"],_),s(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=s(n,["imageSize"]);if(e!==void 0&&A!=null&&a(e,["parameters","sampleImageSize"],A),s(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function XT(n,e){const t={},r=s(n,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const o=s(n,["negativePrompt"]);e!==void 0&&o!=null&&a(e,["parameters","negativePrompt"],o);const i=s(n,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const l=s(n,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const c=s(n,["guidanceScale"]);e!==void 0&&c!=null&&a(e,["parameters","guidanceScale"],c);const d=s(n,["seed"]);e!==void 0&&d!=null&&a(e,["parameters","seed"],d);const p=s(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&a(e,["parameters","safetySetting"],p);const m=s(n,["personGeneration"]);e!==void 0&&m!=null&&a(e,["parameters","personGeneration"],m);const v=s(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&a(e,["parameters","includeSafetyAttributes"],v);const _=s(n,["includeRaiReason"]);e!==void 0&&_!=null&&a(e,["parameters","includeRaiReason"],_);const A=s(n,["language"]);e!==void 0&&A!=null&&a(e,["parameters","language"],A);const V=s(n,["outputMimeType"]);e!==void 0&&V!=null&&a(e,["parameters","outputOptions","mimeType"],V);const B=s(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&a(e,["parameters","outputOptions","compressionQuality"],B);const Y=s(n,["addWatermark"]);e!==void 0&&Y!=null&&a(e,["parameters","addWatermark"],Y);const I=s(n,["labels"]);e!==void 0&&I!=null&&a(e,["labels"],I);const E=s(n,["imageSize"]);e!==void 0&&E!=null&&a(e,["parameters","sampleImageSize"],E);const w=s(n,["enhancePrompt"]);return e!==void 0&&w!=null&&a(e,["parameters","enhancePrompt"],w),t}function ZT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const i=s(e,["config"]);return i!=null&&QT(i,t),t}function jT(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const i=s(e,["config"]);return i!=null&&XT(i,t),t}function eE(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>dE(l))),a(e,["generatedImages"],i)}const o=s(n,["positivePromptSafetyAttributes"]);return o!=null&&a(e,["positivePromptSafetyAttributes"],Lg(o)),e}function nE(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>zl(l))),a(e,["generatedImages"],i)}const o=s(n,["positivePromptSafetyAttributes"]);return o!=null&&a(e,["positivePromptSafetyAttributes"],Ug(o)),e}function tE(n,e){const t={},r=s(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r),s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=s(n,["durationSeconds"]);if(e!==void 0&&o!=null&&a(e,["parameters","durationSeconds"],o),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=s(n,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const l=s(n,["resolution"]);e!==void 0&&l!=null&&a(e,["parameters","resolution"],l);const c=s(n,["personGeneration"]);if(e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c),s(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=s(n,["negativePrompt"]);e!==void 0&&d!=null&&a(e,["parameters","negativePrompt"],d);const p=s(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&a(e,["parameters","enhancePrompt"],p),s(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=s(n,["lastFrame"]);e!==void 0&&m!=null&&a(e,["instances[0]","lastFrame"],Ol(m));const v=s(n,["referenceImages"]);if(e!==void 0&&v!=null){let _=v;Array.isArray(_)&&(_=_.map(A=>nS(A))),a(e,["instances[0]","referenceImages"],_)}if(s(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function rE(n,e){const t={},r=s(n,["numberOfVideos"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const o=s(n,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const i=s(n,["fps"]);e!==void 0&&i!=null&&a(e,["parameters","fps"],i);const l=s(n,["durationSeconds"]);e!==void 0&&l!=null&&a(e,["parameters","durationSeconds"],l);const c=s(n,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=s(n,["aspectRatio"]);e!==void 0&&d!=null&&a(e,["parameters","aspectRatio"],d);const p=s(n,["resolution"]);e!==void 0&&p!=null&&a(e,["parameters","resolution"],p);const m=s(n,["personGeneration"]);e!==void 0&&m!=null&&a(e,["parameters","personGeneration"],m);const v=s(n,["pubsubTopic"]);e!==void 0&&v!=null&&a(e,["parameters","pubsubTopic"],v);const _=s(n,["negativePrompt"]);e!==void 0&&_!=null&&a(e,["parameters","negativePrompt"],_);const A=s(n,["enhancePrompt"]);e!==void 0&&A!=null&&a(e,["parameters","enhancePrompt"],A);const V=s(n,["generateAudio"]);e!==void 0&&V!=null&&a(e,["parameters","generateAudio"],V);const B=s(n,["lastFrame"]);e!==void 0&&B!=null&&a(e,["instances[0]","lastFrame"],wt(B));const Y=s(n,["referenceImages"]);if(e!==void 0&&Y!=null){let w=Y;Array.isArray(w)&&(w=w.map(K=>tS(K))),a(e,["instances[0]","referenceImages"],w)}const I=s(n,["mask"]);e!==void 0&&I!=null&&a(e,["instances[0]","mask"],eS(I));const E=s(n,["compressionQuality"]);return e!==void 0&&E!=null&&a(e,["parameters","compressionQuality"],E),t}function oE(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["metadata"]);r!=null&&a(e,["metadata"],r);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const i=s(n,["error"]);i!=null&&a(e,["error"],i);const l=s(n,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],uE(l)),e}function iE(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["metadata"]);r!=null&&a(e,["metadata"],r);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const i=s(n,["error"]);i!=null&&a(e,["error"],i);const l=s(n,["response"]);return l!=null&&a(e,["response"],aE(l)),e}function sE(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const i=s(e,["image"]);i!=null&&a(t,["instances[0]","image"],Ol(i));const l=s(e,["video"]);l!=null&&a(t,["instances[0]","video"],qg(l));const c=s(e,["source"]);c!=null&&cE(c,t);const d=s(e,["config"]);return d!=null&&tE(d,t),t}function lE(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const i=s(e,["image"]);i!=null&&a(t,["instances[0]","image"],wt(i));const l=s(e,["video"]);l!=null&&a(t,["instances[0]","video"],Bg(l));const c=s(e,["source"]);c!=null&&fE(c,t);const d=s(e,["config"]);return d!=null&&rE(d,t),t}function uE(n){const e={},t=s(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>hE(l))),a(e,["generatedVideos"],i)}const r=s(n,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function aE(n){const e={},t=s(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>mE(l))),a(e,["generatedVideos"],i)}const r=s(n,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function cE(n,e){const t={},r=s(n,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const o=s(n,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],Ol(o));const i=s(n,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],qg(i)),t}function fE(n,e){const t={},r=s(n,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const o=s(n,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],wt(o));const i=s(n,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Bg(i)),t}function dE(n){const e={},t=s(n,["_self"]);t!=null&&a(e,["image"],TE(t));const r=s(n,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const o=s(n,["_self"]);return o!=null&&a(e,["safetyAttributes"],Lg(o)),e}function zl(n){const e={},t=s(n,["_self"]);t!=null&&a(e,["image"],Dg(t));const r=s(n,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const o=s(n,["_self"]);o!=null&&a(e,["safetyAttributes"],Ug(o));const i=s(n,["prompt"]);return i!=null&&a(e,["enhancedPrompt"],i),e}function pE(n){const e={},t=s(n,["_self"]);t!=null&&a(e,["mask"],Dg(t));const r=s(n,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),a(e,["labels"],o)}return e}function hE(n){const e={},t=s(n,["video"]);return t!=null&&a(e,["video"],ZE(t)),e}function mE(n){const e={},t=s(n,["_self"]);return t!=null&&a(e,["video"],jE(t)),e}function gE(n){const e={},t=s(n,["modelSelectionConfig"]);t!=null&&a(e,["modelConfig"],t);const r=s(n,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const o=s(n,["candidateCount"]);o!=null&&a(e,["candidateCount"],o);const i=s(n,["enableAffectiveDialog"]);i!=null&&a(e,["enableAffectiveDialog"],i);const l=s(n,["frequencyPenalty"]);l!=null&&a(e,["frequencyPenalty"],l);const c=s(n,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=s(n,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const p=s(n,["mediaResolution"]);p!=null&&a(e,["mediaResolution"],p);const m=s(n,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const v=s(n,["responseJsonSchema"]);v!=null&&a(e,["responseJsonSchema"],v);const _=s(n,["responseLogprobs"]);_!=null&&a(e,["responseLogprobs"],_);const A=s(n,["responseMimeType"]);A!=null&&a(e,["responseMimeType"],A);const V=s(n,["responseModalities"]);V!=null&&a(e,["responseModalities"],V);const B=s(n,["responseSchema"]);B!=null&&a(e,["responseSchema"],B);const Y=s(n,["routingConfig"]);Y!=null&&a(e,["routingConfig"],Y);const I=s(n,["seed"]);I!=null&&a(e,["seed"],I);const E=s(n,["speechConfig"]);E!=null&&a(e,["speechConfig"],Fg(E));const w=s(n,["stopSequences"]);w!=null&&a(e,["stopSequences"],w);const K=s(n,["temperature"]);K!=null&&a(e,["temperature"],K);const O=s(n,["thinkingConfig"]);O!=null&&a(e,["thinkingConfig"],O);const J=s(n,["topK"]);J!=null&&a(e,["topK"],J);const b=s(n,["topP"]);if(b!=null&&a(e,["topP"],b),s(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function yE(n,e){const t={},r=s(e,["model"]);return r!=null&&a(t,["_url","name"],Ve(n,r)),t}function vE(n,e){const t={},r=s(e,["model"]);return r!=null&&a(t,["_url","name"],Ve(n,r)),t}function _E(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function CE(n){const e={},t=s(n,["timeRangeFilter"]);if(t!=null&&a(e,["timeRangeFilter"],t),s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function TE(n){const e={},t=s(n,["bytesBase64Encoded"]);t!=null&&a(e,["imageBytes"],Ar(t));const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Dg(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["gcsUri"],t);const r=s(n,["bytesBase64Encoded"]);r!=null&&a(e,["imageBytes"],Ar(r));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Ol(n){const e={};if(s(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=s(n,["imageBytes"]);t!=null&&a(e,["bytesBase64Encoded"],Ar(t));const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function wt(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["gcsUri"],t);const r=s(n,["imageBytes"]);r!=null&&a(e,["bytesBase64Encoded"],Ar(r));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function EE(n,e,t){const r={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=s(e,["pageToken"]);t!==void 0&&i!=null&&a(t,["_query","pageToken"],i);const l=s(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const c=s(e,["queryBase"]);return t!==void 0&&c!=null&&a(t,["_url","models_url"],Ig(n,c)),r}function SE(n,e,t){const r={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=s(e,["pageToken"]);t!==void 0&&i!=null&&a(t,["_query","pageToken"],i);const l=s(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const c=s(e,["queryBase"]);return t!==void 0&&c!=null&&a(t,["_url","models_url"],Ig(n,c)),r}function wE(n,e){const t={},r=s(e,["config"]);return r!=null&&EE(n,r,t),t}function IE(n,e){const t={},r=s(e,["config"]);return r!=null&&SE(n,r,t),t}function AE(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["_self"]);if(o!=null){let i=Ag(o);Array.isArray(i)&&(i=i.map(l=>Oa(l))),a(e,["models"],i)}return e}function kE(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["_self"]);if(o!=null){let i=Ag(o);Array.isArray(i)&&(i=i.map(l=>ba(l))),a(e,["models"],i)}return e}function PE(n){const e={},t=s(n,["maskMode"]);t!=null&&a(e,["maskMode"],t);const r=s(n,["segmentationClasses"]);r!=null&&a(e,["maskClasses"],r);const o=s(n,["maskDilation"]);return o!=null&&a(e,["dilation"],o),e}function Oa(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["displayName"]);r!=null&&a(e,["displayName"],r);const o=s(n,["description"]);o!=null&&a(e,["description"],o);const i=s(n,["version"]);i!=null&&a(e,["version"],i);const l=s(n,["_self"]);l!=null&&a(e,["tunedModelInfo"],$E(l));const c=s(n,["inputTokenLimit"]);c!=null&&a(e,["inputTokenLimit"],c);const d=s(n,["outputTokenLimit"]);d!=null&&a(e,["outputTokenLimit"],d);const p=s(n,["supportedGenerationMethods"]);return p!=null&&a(e,["supportedActions"],p),e}function ba(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const r=s(n,["displayName"]);r!=null&&a(e,["displayName"],r);const o=s(n,["description"]);o!=null&&a(e,["description"],o);const i=s(n,["versionId"]);i!=null&&a(e,["version"],i);const l=s(n,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>OT(_))),a(e,["endpoints"],v)}const c=s(n,["labels"]);c!=null&&a(e,["labels"],c);const d=s(n,["_self"]);d!=null&&a(e,["tunedModelInfo"],zE(d));const p=s(n,["defaultCheckpointId"]);p!=null&&a(e,["defaultCheckpointId"],p);const m=s(n,["checkpoints"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(_=>_)),a(e,["checkpoints"],v)}return e}function xE(n){const e={},t=s(n,["videoMetadata"]);t!=null&&a(e,["videoMetadata"],t);const r=s(n,["thought"]);r!=null&&a(e,["thought"],r);const o=s(n,["inlineData"]);o!=null&&a(e,["inlineData"],vT(o));const i=s(n,["fileData"]);i!=null&&a(e,["fileData"],bT(i));const l=s(n,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);const c=s(n,["functionCall"]);c!=null&&a(e,["functionCall"],c);const d=s(n,["codeExecutionResult"]);d!=null&&a(e,["codeExecutionResult"],d);const p=s(n,["executableCode"]);p!=null&&a(e,["executableCode"],p);const m=s(n,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const v=s(n,["text"]);return v!=null&&a(e,["text"],v),e}function RE(n){const e={},t=s(n,["productImage"]);return t!=null&&a(e,["image"],wt(t)),e}function ME(n,e){const t={},r=s(n,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const o=s(n,["baseSteps"]);e!==void 0&&o!=null&&a(e,["parameters","editConfig","baseSteps"],o);const i=s(n,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const l=s(n,["seed"]);e!==void 0&&l!=null&&a(e,["parameters","seed"],l);const c=s(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const d=s(n,["personGeneration"]);e!==void 0&&d!=null&&a(e,["parameters","personGeneration"],d);const p=s(n,["addWatermark"]);e!==void 0&&p!=null&&a(e,["parameters","addWatermark"],p);const m=s(n,["outputMimeType"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","mimeType"],m);const v=s(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&a(e,["parameters","outputOptions","compressionQuality"],v);const _=s(n,["enhancePrompt"]);e!==void 0&&_!=null&&a(e,["parameters","enhancePrompt"],_);const A=s(n,["labels"]);return e!==void 0&&A!=null&&a(e,["labels"],A),t}function NE(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["source"]);o!=null&&LE(o,t);const i=s(e,["config"]);return i!=null&&ME(i,t),t}function DE(n){const e={},t=s(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>zl(o))),a(e,["generatedImages"],r)}return e}function LE(n,e){const t={},r=s(n,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const o=s(n,["personImage"]);e!==void 0&&o!=null&&a(e,["instances[0]","personImage","image"],wt(o));const i=s(n,["productImages"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>RE(c))),a(e,["instances[0]","productImages"],l)}return t}function UE(n){const e={},t=s(n,["referenceImage"]);t!=null&&a(e,["referenceImage"],wt(t));const r=s(n,["referenceId"]);r!=null&&a(e,["referenceId"],r);const o=s(n,["referenceType"]);o!=null&&a(e,["referenceType"],o);const i=s(n,["maskImageConfig"]);i!=null&&a(e,["maskImageConfig"],PE(i));const l=s(n,["controlImageConfig"]);l!=null&&a(e,["controlImageConfig"],IT(l));const c=s(n,["styleImageConfig"]);c!=null&&a(e,["styleImageConfig"],c);const d=s(n,["subjectImageConfig"]);return d!=null&&a(e,["subjectImageConfig"],d),e}function Lg(n){const e={},t=s(n,["safetyAttributes","categories"]);t!=null&&a(e,["categories"],t);const r=s(n,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const o=s(n,["contentType"]);return o!=null&&a(e,["contentType"],o),e}function Ug(n){const e={},t=s(n,["safetyAttributes","categories"]);t!=null&&a(e,["categories"],t);const r=s(n,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const o=s(n,["contentType"]);return o!=null&&a(e,["contentType"],o),e}function FE(n){const e={};if(s(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=s(n,["category"]);t!=null&&a(e,["category"],t);const r=s(n,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function VE(n){const e={},t=s(n,["image"]);return t!=null&&a(e,["image"],wt(t)),e}function qE(n,e){const t={},r=s(n,["mode"]);e!==void 0&&r!=null&&a(e,["parameters","mode"],r);const o=s(n,["maxPredictions"]);e!==void 0&&o!=null&&a(e,["parameters","maxPredictions"],o);const i=s(n,["confidenceThreshold"]);e!==void 0&&i!=null&&a(e,["parameters","confidenceThreshold"],i);const l=s(n,["maskDilation"]);e!==void 0&&l!=null&&a(e,["parameters","maskDilation"],l);const c=s(n,["binaryColorThreshold"]);e!==void 0&&c!=null&&a(e,["parameters","binaryColorThreshold"],c);const d=s(n,["labels"]);return e!==void 0&&d!=null&&a(e,["labels"],d),t}function BE(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["source"]);o!=null&&HE(o,t);const i=s(e,["config"]);return i!=null&&qE(i,t),t}function GE(n){const e={},t=s(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>pE(o))),a(e,["generatedMasks"],r)}return e}function HE(n,e){const t={},r=s(n,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const o=s(n,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],wt(o));const i=s(n,["scribbleImage"]);return e!==void 0&&i!=null&&a(e,["instances[0]","scribble"],VE(i)),t}function Fg(n){const e={},t=s(n,["voiceConfig"]);if(t!=null&&a(e,["voiceConfig"],t),s(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=s(n,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function KE(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["functionDeclarations"],p)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=s(n,["googleSearch"]);r!=null&&a(e,["googleSearch"],CE(r));const o=s(n,["googleSearchRetrieval"]);if(o!=null&&a(e,["googleSearchRetrieval"],o),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["googleMaps"]);i!=null&&a(e,["googleMaps"],_E(i));const l=s(n,["urlContext"]);l!=null&&a(e,["urlContext"],l);const c=s(n,["computerUse"]);c!=null&&a(e,["computerUse"],c);const d=s(n,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}function Vg(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>JT(_))),a(e,["functionDeclarations"],v)}const r=s(n,["retrieval"]);r!=null&&a(e,["retrieval"],r);const o=s(n,["googleSearch"]);o!=null&&a(e,["googleSearch"],o);const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const l=s(n,["enterpriseWebSearch"]);l!=null&&a(e,["enterpriseWebSearch"],l);const c=s(n,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=s(n,["urlContext"]);d!=null&&a(e,["urlContext"],d);const p=s(n,["computerUse"]);p!=null&&a(e,["computerUse"],p);const m=s(n,["codeExecution"]);return m!=null&&a(e,["codeExecution"],m),e}function $E(n){const e={},t=s(n,["baseModel"]);t!=null&&a(e,["baseModel"],t);const r=s(n,["createTime"]);r!=null&&a(e,["createTime"],r);const o=s(n,["updateTime"]);return o!=null&&a(e,["updateTime"],o),e}function zE(n){const e={},t=s(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&a(e,["baseModel"],t);const r=s(n,["createTime"]);r!=null&&a(e,["createTime"],r);const o=s(n,["updateTime"]);return o!=null&&a(e,["updateTime"],o),e}function OE(n,e){const t={},r=s(n,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const o=s(n,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const i=s(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),t}function bE(n,e){const t={},r=s(n,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const o=s(n,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const i=s(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),t}function JE(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","name"],Ve(n,r));const o=s(e,["config"]);return o!=null&&OE(o,t),t}function WE(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["config"]);return o!=null&&bE(o,t),t}function YE(n,e){const t={},r=s(n,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const o=s(n,["includeRaiReason"]);e!==void 0&&o!=null&&a(e,["parameters","includeRaiReason"],o);const i=s(n,["outputMimeType"]);e!==void 0&&i!=null&&a(e,["parameters","outputOptions","mimeType"],i);const l=s(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&a(e,["parameters","outputOptions","compressionQuality"],l);const c=s(n,["enhanceInputImage"]);e!==void 0&&c!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=s(n,["imagePreservationFactor"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const p=s(n,["labels"]);e!==void 0&&p!=null&&a(e,["labels"],p);const m=s(n,["numberOfImages"]);e!==void 0&&m!=null&&a(e,["parameters","sampleCount"],m);const v=s(n,["mode"]);return e!==void 0&&v!=null&&a(e,["parameters","mode"],v),t}function QE(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["_url","model"],Ve(n,r));const o=s(e,["image"]);o!=null&&a(t,["instances[0]","image"],wt(o));const i=s(e,["upscaleFactor"]);i!=null&&a(t,["parameters","upscaleConfig","upscaleFactor"],i);const l=s(e,["config"]);return l!=null&&YE(l,t),t}function XE(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>zl(i))),a(e,["generatedImages"],o)}return e}function ZE(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["uri"],t);const r=s(n,["encodedVideo"]);r!=null&&a(e,["videoBytes"],Ar(r));const o=s(n,["encoding"]);return o!=null&&a(e,["mimeType"],o),e}function jE(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["uri"],t);const r=s(n,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],Ar(r));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function eS(n){const e={},t=s(n,["image"]);t!=null&&a(e,["_self"],wt(t));const r=s(n,["maskMode"]);return r!=null&&a(e,["maskMode"],r),e}function nS(n){const e={},t=s(n,["image"]);t!=null&&a(e,["image"],Ol(t));const r=s(n,["referenceType"]);return r!=null&&a(e,["referenceType"],r),e}function tS(n){const e={},t=s(n,["image"]);t!=null&&a(e,["image"],wt(t));const r=s(n,["referenceType"]);return r!=null&&a(e,["referenceType"],r),e}function qg(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["uri"],t);const r=s(n,["videoBytes"]);r!=null&&a(e,["encodedVideo"],Ar(r));const o=s(n,["mimeType"]);return o!=null&&a(e,["encoding"],o),e}function Bg(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["gcsUri"],t);const r=s(n,["videoBytes"]);r!=null&&a(e,["bytesBase64Encoded"],Ar(r));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rS="Content-Type",oS="X-Server-Timeout",iS="User-Agent",Ja="x-goog-api-client",sS="1.26.0",lS=`google-genai-sdk/${sS}`,uS="v1beta1",aS="v1beta",Jp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class cS{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:uS,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:aS,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const o=[this.getRequestUrlInternal(t)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))o.searchParams.append(l,String(c));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(t))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r){if(t&&t.timeout||r){const o=new AbortController,i=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const l=setTimeout(()=>o.abort(),t.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=i}return t&&t.extraBody!==null&&fS(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await Wp(o),new Ka(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await Wp(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ro(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Xe(o.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(d,{stream:!0});try{const v=JSON.parse(p);if("error"in v){const _=JSON.parse(JSON.stringify(v.error)),A=_.status,V=_.code,B=`got status: ${A}. ${JSON.stringify(v)}`;if(V>=400&&V<600)throw new Kl({message:B,status:V})}}catch(v){if(v.name==="ApiError")throw v}l+=p;let m=l.match(Jp);for(;m;){const v=m[1];try{const _=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Xe(new Ka(_)),l=l.slice(m[0].length),m=l.match(Jp)}catch(_){throw new Error(`exception parsing stream chunk ${v}. ${_}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=lS+" "+this.clientOptions.userAgentExtra;return e[iS]=t,e[Ja]=t,e[rS]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))t.append(r,o);e.timeout&&e.timeout>0&&t.append(oS,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,l=await i.stat(e);o.sizeBytes=String(l.size);const c=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=c;const d=await this.fetchUploadUrl(o,t);return i.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var r;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},l=await this.request({path:pe("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:o});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(r=l==null?void 0:l.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function Wp(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(r);throw t>=400&&t<600?new Kl({message:o,status:t}):new Error(o)}}function fS(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const i=JSON.parse(n.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))t=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,l){const c=Object.assign({},i);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const p=l[d],m=c[d];p&&typeof p=="object"&&!Array.isArray(p)&&m&&typeof m=="object"&&!Array.isArray(m)?c[d]=r(m,p):(m&&p&&typeof m!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof m}, New type: ${typeof p}. Overwriting.`),c[d]=p)}return c}const o=r(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dS="mcp_used/unknown";let pS=!1;function Gg(n){for(const e of n)if(hS(e)||typeof e=="object"&&"inputSchema"in e)return!0;return pS}function Hg(n){var e;const t=(e=n[Ja])!==null&&e!==void 0?e:"";n[Ja]=(t+` ${dS}`).trimStart()}function hS(n){return n!==null&&typeof n=="object"&&n instanceof Yc}function mS(n,e=100){return Ro(this,arguments,function*(){let r,o=0;for(;o<e;){const i=yield Xe(n.listTools({cursor:r}));for(const l of i.tools)yield yield Xe(l),o++;if(!i.nextCursor)break;r=i.nextCursor}})}class Yc{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Yc(e,t)}async initialize(){var e,t,r,o;if(this.mcpTools.length>0)return;const i={},l=[];for(const m of this.mcpClients)try{for(var c=!0,d=(t=void 0,Pi(mS(m))),p;p=await d.next(),e=p.done,!e;c=!0){o=p.value,c=!1;const v=o;l.push(v);const _=v.name;if(i[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);i[_]=m}}catch(v){t={error:v}}finally{try{!c&&!e&&(r=d.return)&&await r.call(d)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),C0(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const l=await o.callTool({name:r.name,arguments:r.args},void 0,i);t.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gS(n,e,t){const r=new d0;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(r,o),e(r)}class yS{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),l=CS(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${c}`;let p=()=>{};const m=new Promise(w=>{p=w}),v=e.callbacks,_=function(){p({})},A=this.apiClient,V={onopen:_,onmessage:w=>{gS(A,v.onmessage,w)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(w){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(w){}},B=this.webSocketFactory.create(d,_S(l),V);B.connect(),await m;const E={setup:{model:Ve(this.apiClient,e.model)}};return B.send(JSON.stringify(E)),new vS(B,this.apiClient)}}class vS{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=aT(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=uT(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Eo.PLAY)}pause(){this.sendPlaybackControl(Eo.PAUSE)}stop(){this.sendPlaybackControl(Eo.STOP)}resetContext(){this.sendPlaybackControl(Eo.RESET_CONTEXT)}close(){this.conn.close()}}function _S(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function CS(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TS="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ES(n,e,t){const r=new f0;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const i=JSON.parse(o);if(n.isVertexAI()){const l=dT(i);Object.assign(r,l)}else Object.assign(r,i);e(r)}class SS{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new yS(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,o,i,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let m;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&Gg(e.config.tools)&&Hg(v);const _=kS(v);if(this.apiClient.isVertexAI())m=`${d}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_);else{const le=this.apiClient.getApiKey();let ce="BidiGenerateContent",Ne="key";le!=null&&le.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ce="BidiGenerateContentConstrained",Ne="access_token"),m=`${d}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ce}?${Ne}=${le}`}let A=()=>{};const V=new Promise(le=>{A=le}),B=e.callbacks,Y=function(){var le;(le=B==null?void 0:B.onopen)===null||le===void 0||le.call(B),A({})},I=this.apiClient,E={onopen:Y,onmessage:le=>{ES(I,B.onmessage,le)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(le){},onclose:(r=B==null?void 0:B.onclose)!==null&&r!==void 0?r:function(le){}},w=this.webSocketFactory.create(m,AS(_),E);w.connect(),await V;let K=Ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&K.startsWith("publishers/")){const le=this.apiClient.getProject(),ce=this.apiClient.getLocation();K=`projects/${le}/locations/${ce}/`+K}let O={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[El.AUDIO]}:e.config.responseModalities=[El.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],b=[];for(const le of J)if(this.isCallableTool(le)){const ce=le;b.push(await ce.tool())}else b.push(le);b.length>0&&(e.config.tools=b);const oe={model:K,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=lT(this.apiClient,oe):O=sT(this.apiClient,oe),delete O.config,w.send(JSON.stringify(O)),new IS(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const wS={turnComplete:!0};class IS{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=ft(t.turns),e.isVertexAI()||(r=r.map(o=>$l(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(TS)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},wS),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:fT(e)}:t={realtimeInput:cT(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function AS(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function kS(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yp=10;function Qp(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Mo(l)){o=!0;break}if(!o)return!0;const i=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Mo(n){return"callTool"in n&&typeof n.callTool=="function"}function PS(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Mo(o)))!==null&&r!==void 0?r:!1}function xS(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Mo(o)))!==null&&r!==void 0?r:!1}function Xp(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RS extends Zr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,o,i,l,c;const d=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!PS(t)||Qp(t.config))return await this.generateContentInternal(d);if(xS(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,m;const v=ft(d.contents),_=(i=(o=(r=d.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Yp;let A=0;for(;A<_&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const V=p.candidates[0].content,B=[];for(const Y of(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Mo(Y)){const E=await Y.callTool(p.functionCalls);B.push(...E)}A++,m={role:"user",parts:B},d.contents=ft(d.contents),d.contents.push(V),d.contents.push(m),Xp(d.config)&&(v.push(V),v.push(m))}return Xp(d.config)&&(p.automaticFunctionCallingHistory=v),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),Qp(t.config)){const r=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var o;let i;const l=[];if(r!=null&&r.generatedImages)for(const d of r.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((o=d==null?void 0:d.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=d==null?void 0:d.safetyAttributes:l.push(d);let c;return i?c={generatedImages:l,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async t=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Xi(Yr.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var r,o,i,l,c,d;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(i=t.source)===null||i===void 0?void 0:i.video)===null||l===void 0)&&l.uri&&(!((d=(c=t.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,o;const i=(t=e.config)===null||t===void 0?void 0:t.tools;if(!i)return e;const l=await Promise.all(i.map(async d=>Mo(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&Gg(e.config.tools)){const d=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},d);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Hg(p),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return c}async initAfcToolsMap(e){var t,r,o;const i=new Map;for(const l of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Mo(l)){const c=l,d=await c.tool();for(const p of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(i.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);i.set(p.name,c)}}return i}async processAfcStream(e){var t,r,o;const i=(o=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Yp;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return function(p,m,v){var _,A;return Ro(this,arguments,function*(){for(var V,B,Y,I;c<i;){l&&(c++,l=!1);const O=yield Xe(p.processParamsMaybeAddMcpUsage(v)),J=yield Xe(p.generateContentStreamInternal(O)),b=[],oe=[];try{for(var E=!0,w=(B=void 0,Pi(J)),K;K=yield Xe(w.next()),V=K.done,!V;E=!0){I=K.value,E=!1;const le=I;if(yield yield Xe(le),le.candidates&&(!((_=le.candidates[0])===null||_===void 0)&&_.content)){oe.push(le.candidates[0].content);for(const ce of(A=le.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(c<i&&ce.functionCall){if(!ce.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(ce.functionCall.name)){const Ne=yield Xe(m.get(ce.functionCall.name).callTool([ce.functionCall]));b.push(...Ne)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${ce.functionCall.name}`)}}}}catch(le){B={error:le}}finally{try{!E&&!V&&(Y=w.return)&&(yield Xe(Y.call(w)))}finally{if(B)throw B.error}}if(b.length>0){l=!0;const le=new pi;le.candidates=[{content:{role:"user",parts:b}}],yield yield Xe(le);const ce=[];ce.push(...oe),ce.push({role:"user",parts:b});const Ne=ft(v.contents).concat(ce);v.contents=Ne}else break}})}(this,d,e)}async generateContentInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=zp(this.apiClient,e);return c=pe("{model}:generateContent",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=bp(m),_=new pi;return Object.assign(_,v),_})}else{const p=$p(this.apiClient,e);return c=pe("{model}:generateContent",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=Op(m),_=new pi;return Object.assign(_,v),_})}}async generateContentStreamInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=zp(this.apiClient,e);return c=pe("{model}:streamGenerateContent?alt=sse",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(v){return Ro(this,arguments,function*(){var _,A,V,B;try{for(var Y=!0,I=Pi(v),E;E=yield Xe(I.next()),_=E.done,!_;Y=!0){B=E.value,Y=!1;const w=B,K=bp(yield Xe(w.json()));K.sdkHttpResponse={headers:w.headers};const O=new pi;Object.assign(O,K),yield yield Xe(O)}}catch(w){A={error:w}}finally{try{!Y&&!_&&(V=I.return)&&(yield Xe(V.call(I)))}finally{if(A)throw A.error}}})})}else{const p=$p(this.apiClient,e);return c=pe("{model}:streamGenerateContent?alt=sse",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return Ro(this,arguments,function*(){var _,A,V,B;try{for(var Y=!0,I=Pi(v),E;E=yield Xe(I.next()),_=E.done,!_;Y=!0){B=E.value,Y=!1;const w=B,K=Op(yield Xe(w.json()));K.sdkHttpResponse={headers:w.headers};const O=new pi;Object.assign(O,K),yield yield Xe(O)}}catch(w){A={error:w}}finally{try{!Y&&!_&&(V=I.return)&&(yield Xe(V.call(I)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=KT(this.apiClient,e);return c=pe("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=zT(m),_=new kp;return Object.assign(_,v),_})}else{const p=HT(this.apiClient,e);return c=pe("{model}:batchEmbedContents",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=$T(m),_=new kp;return Object.assign(_,v),_})}}async generateImagesInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=jT(this.apiClient,e);return c=pe("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=nE(m),_=new Pp;return Object.assign(_,v),_})}else{const p=ZT(this.apiClient,e);return c=pe("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=eE(m),_=new Pp;return Object.assign(_,v),_})}}async editImageInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI()){const c=VT(this.apiClient,e);return i=pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=qT(d),m=new r0;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI()){const c=QE(this.apiClient,e);return i=pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=XE(d),m=new o0;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI()){const c=NE(this.apiClient,e);return i=pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const p=DE(d),m=new i0;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI()){const c=BE(this.apiClient,e);return i=pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const p=GE(d),m=new s0;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=vE(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>ba(m))}else{const p=yE(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Oa(m))}}async listInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=IE(this.apiClient,e);return c=pe("{models_url}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=kE(m),_=new xp;return Object.assign(_,v),_})}else{const p=wE(this.apiClient,e);return c=pe("{models_url}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=AE(m),_=new xp;return Object.assign(_,v),_})}}async update(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=WE(this.apiClient,e);return c=pe("{model}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>ba(m))}else{const p=JE(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Oa(m))}}async delete(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=DT(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=UT(m),_=new Rp;return Object.assign(_,v),_})}else{const p=NT(this.apiClient,e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=LT(m),_=new Rp;return Object.assign(_,v),_})}}async countTokens(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=xT(this.apiClient,e);return c=pe("{model}:countTokens",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=MT(m),_=new Mp;return Object.assign(_,v),_})}else{const p=PT(this.apiClient,e);return c=pe("{model}:countTokens",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=RT(m),_=new Mp;return Object.assign(_,v),_})}}async computeTokens(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI()){const c=TT(this.apiClient,e);return i=pe("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=ET(d),m=new l0;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=lE(this.apiClient,e);return c=pe("{model}:predictLongRunning",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>{const v=iE(m),_=new Sl;return Object.assign(_,v),_})}else{const p=sE(this.apiClient,e);return c=pe("{model}:predictLongRunning",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>{const v=oE(m),_=new Sl;return Object.assign(_,v),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MS extends Zr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:i}});return t._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:i}});return t._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=e0(e);return c=pe("{operationName}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l}else{const p=j_(e);return c=pe("{operationName}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l}}async fetchPredictVideosOperationInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI()){const c=b_(e);return i=pe("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NS(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["data"]);t!=null&&a(e,["data"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function DS(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>HS(i))),a(e,["parts"],o)}const r=s(n,["role"]);return r!=null&&a(e,["role"],r),e}function LS(n,e,t){const r={},o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const i=s(e,["newSessionExpireTime"]);t!==void 0&&i!=null&&a(t,["newSessionExpireTime"],i);const l=s(e,["uses"]);t!==void 0&&l!=null&&a(t,["uses"],l);const c=s(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&a(t,["bidiGenerateContentSetup"],GS(n,c));const d=s(e,["lockAdditionalFields"]);return t!==void 0&&d!=null&&a(t,["fieldMask"],d),r}function US(n,e){const t={},r=s(e,["config"]);return r!=null&&a(t,["config"],LS(n,r,t)),t}function FS(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const r=s(n,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function VS(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function qS(n){const e={},t=s(n,["timeRangeFilter"]);if(t!=null&&a(e,["timeRangeFilter"],t),s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function BS(n,e){const t={},r=s(n,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const o=s(n,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const i=s(n,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const l=s(n,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const c=s(n,["topK"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","topK"],c);const d=s(n,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const p=s(n,["mediaResolution"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","mediaResolution"],p);const m=s(n,["seed"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","seed"],m);const v=s(n,["speechConfig"]);e!==void 0&&v!=null&&a(e,["setup","generationConfig","speechConfig"],Wc(v));const _=s(n,["thinkingConfig"]);e!==void 0&&_!=null&&a(e,["setup","generationConfig","thinkingConfig"],_);const A=s(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],A);const V=s(n,["systemInstruction"]);e!==void 0&&V!=null&&a(e,["setup","systemInstruction"],DS(Rn(V)));const B=s(n,["tools"]);if(e!==void 0&&B!=null){let J=zo(B);Array.isArray(J)&&(J=J.map(b=>$S($o(b)))),a(e,["setup","tools"],J)}const Y=s(n,["sessionResumption"]);e!==void 0&&Y!=null&&a(e,["setup","sessionResumption"],KS(Y));const I=s(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&a(e,["setup","inputAudioTranscription"],I);const E=s(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&a(e,["setup","outputAudioTranscription"],E);const w=s(n,["realtimeInputConfig"]);e!==void 0&&w!=null&&a(e,["setup","realtimeInputConfig"],w);const K=s(n,["contextWindowCompression"]);e!==void 0&&K!=null&&a(e,["setup","contextWindowCompression"],K);const O=s(n,["proactivity"]);return e!==void 0&&O!=null&&a(e,["setup","proactivity"],O),t}function GS(n,e){const t={},r=s(e,["model"]);r!=null&&a(t,["setup","model"],Ve(n,r));const o=s(e,["config"]);return o!=null&&a(t,["config"],BS(o,t)),t}function HS(n){const e={},t=s(n,["videoMetadata"]);t!=null&&a(e,["videoMetadata"],t);const r=s(n,["thought"]);r!=null&&a(e,["thought"],r);const o=s(n,["inlineData"]);o!=null&&a(e,["inlineData"],NS(o));const i=s(n,["fileData"]);i!=null&&a(e,["fileData"],FS(i));const l=s(n,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);const c=s(n,["functionCall"]);c!=null&&a(e,["functionCall"],c);const d=s(n,["codeExecutionResult"]);d!=null&&a(e,["codeExecutionResult"],d);const p=s(n,["executableCode"]);p!=null&&a(e,["executableCode"],p);const m=s(n,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const v=s(n,["text"]);return v!=null&&a(e,["text"],v),e}function KS(n){const e={},t=s(n,["handle"]);if(t!=null&&a(e,["handle"],t),s(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $S(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["functionDeclarations"],p)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=s(n,["googleSearch"]);r!=null&&a(e,["googleSearch"],qS(r));const o=s(n,["googleSearchRetrieval"]);if(o!=null&&a(e,["googleSearchRetrieval"],o),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["googleMaps"]);i!=null&&a(e,["googleMaps"],VS(i));const l=s(n,["urlContext"]);l!=null&&a(e,["urlContext"],l);const c=s(n,["computerUse"]);c!=null&&a(e,["computerUse"],c);const d=s(n,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zS(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${t}.${i}`);e.push(...o)}else e.push(t)}return e.join(",")}function OS(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(n.bidiGenerateContentSetup=i,t=i):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const i=zS(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?n.fieldMask=i:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];o.length>0&&(c=o.map(p=>l.includes(p)?`generationConfig.${p}`:p));const d=[];i&&d.push(i),c.length>0&&d.push(...c),d.length>0?n.fieldMask=d.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class bS extends Zr{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=US(this.apiClient,e);i=pe("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=OS(c,e.config);return o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JS(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","name"],t),e}function WS(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","name"],t),e}function YS(n,e){const t={};if(s(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=s(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),s(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=s(n,["epochCount"]);e!==void 0&&o!=null&&a(e,["tuningTask","hyperparameters","epochCount"],o);const i=s(n,["learningRateMultiplier"]);if(i!=null&&a(t,["tuningTask","hyperparameters","learningRateMultiplier"],i),s(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=s(n,["batchSize"]);e!==void 0&&l!=null&&a(e,["tuningTask","hyperparameters","batchSize"],l);const c=s(n,["learningRate"]);if(e!==void 0&&c!=null&&a(e,["tuningTask","hyperparameters","learningRate"],c),s(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function QS(n,e){const t={},r=s(n,["validationDataset"]);e!==void 0&&r!=null&&a(e,["supervisedTuningSpec"],fw(r,t));const o=s(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&a(e,["tunedModelDisplayName"],o);const i=s(n,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const l=s(n,["epochCount"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=s(n,["learningRateMultiplier"]);e!==void 0&&c!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=s(n,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const p=s(n,["adapterSize"]);if(e!==void 0&&p!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),s(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=s(n,["labels"]);return e!==void 0&&m!=null&&a(e,["labels"],m),t}function XS(n){const e={},t=s(n,["baseModel"]);t!=null&&a(e,["baseModel"],t);const r=s(n,["preTunedModel"]);r!=null&&a(e,["preTunedModel"],r);const o=s(n,["trainingDataset"]);o!=null&&a(e,["tuningTask","trainingData"],uw(o));const i=s(n,["config"]);return i!=null&&YS(i,e),e}function ZS(n){const e={},t=s(n,["baseModel"]);t!=null&&a(e,["baseModel"],t);const r=s(n,["preTunedModel"]);r!=null&&a(e,["preTunedModel"],r);const o=s(n,["trainingDataset"]);o!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],aw(o,e));const i=s(n,["config"]);return i!=null&&QS(i,e),e}function jS(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","name"],t),e}function ew(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","name"],t),e}function nw(n,e){const t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const o=s(n,["pageToken"]);e!==void 0&&o!=null&&a(e,["_query","pageToken"],o);const i=s(n,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),t}function tw(n,e){const t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const o=s(n,["pageToken"]);e!==void 0&&o!=null&&a(e,["_query","pageToken"],o);const i=s(n,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),t}function rw(n){const e={},t=s(n,["config"]);return t!=null&&nw(t,e),e}function ow(n){const e={},t=s(n,["config"]);return t!=null&&tw(t,e),e}function iw(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["tunedModels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>Kg(l))),a(e,["tuningJobs"],i)}return e}function sw(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const o=s(n,["tuningJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>Wa(l))),a(e,["tuningJobs"],i)}return e}function lw(n){const e={},t=s(n,["name"]);t!=null&&a(e,["model"],t);const r=s(n,["name"]);return r!=null&&a(e,["endpoint"],r),e}function uw(n){const e={};if(s(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=s(n,["examples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),a(e,["examples","examples"],r)}return e}function aw(n,e){const t={},r=s(n,["gcsUri"]);e!==void 0&&r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],r);const o=s(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],o),s(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Kg(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["state"]);o!=null&&a(e,["state"],Sg(o));const i=s(n,["createTime"]);i!=null&&a(e,["createTime"],i);const l=s(n,["tuningTask","startTime"]);l!=null&&a(e,["startTime"],l);const c=s(n,["tuningTask","completeTime"]);c!=null&&a(e,["endTime"],c);const d=s(n,["updateTime"]);d!=null&&a(e,["updateTime"],d);const p=s(n,["description"]);p!=null&&a(e,["description"],p);const m=s(n,["baseModel"]);m!=null&&a(e,["baseModel"],m);const v=s(n,["_self"]);return v!=null&&a(e,["tunedModel"],lw(v)),e}function Wa(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["state"]);o!=null&&a(e,["state"],Sg(o));const i=s(n,["createTime"]);i!=null&&a(e,["createTime"],i);const l=s(n,["startTime"]);l!=null&&a(e,["startTime"],l);const c=s(n,["endTime"]);c!=null&&a(e,["endTime"],c);const d=s(n,["updateTime"]);d!=null&&a(e,["updateTime"],d);const p=s(n,["error"]);p!=null&&a(e,["error"],p);const m=s(n,["description"]);m!=null&&a(e,["description"],m);const v=s(n,["baseModel"]);v!=null&&a(e,["baseModel"],v);const _=s(n,["tunedModel"]);_!=null&&a(e,["tunedModel"],_);const A=s(n,["preTunedModel"]);A!=null&&a(e,["preTunedModel"],A);const V=s(n,["supervisedTuningSpec"]);V!=null&&a(e,["supervisedTuningSpec"],V);const B=s(n,["tuningDataStats"]);B!=null&&a(e,["tuningDataStats"],B);const Y=s(n,["encryptionSpec"]);Y!=null&&a(e,["encryptionSpec"],Y);const I=s(n,["partnerModelTuningSpec"]);I!=null&&a(e,["partnerModelTuningSpec"],I);const E=s(n,["customBaseModel"]);E!=null&&a(e,["customBaseModel"],E);const w=s(n,["experiment"]);w!=null&&a(e,["experiment"],w);const K=s(n,["labels"]);K!=null&&a(e,["labels"],K);const O=s(n,["outputUri"]);O!=null&&a(e,["outputUri"],O);const J=s(n,["pipelineJob"]);J!=null&&a(e,["pipelineJob"],J);const b=s(n,["serviceAccount"]);b!=null&&a(e,["serviceAccount"],b);const oe=s(n,["tunedModelDisplayName"]);oe!=null&&a(e,["tunedModelDisplayName"],oe);const le=s(n,["veoTuningSpec"]);return le!=null&&a(e,["veoTuningSpec"],le),e}function cw(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const r=s(n,["name"]);r!=null&&a(e,["name"],r);const o=s(n,["metadata"]);o!=null&&a(e,["metadata"],o);const i=s(n,["done"]);i!=null&&a(e,["done"],i);const l=s(n,["error"]);return l!=null&&a(e,["error"],l),e}function fw(n,e){const t={},r=s(n,["gcsUri"]);r!=null&&a(t,["validationDatasetUri"],r);const o=s(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dw extends Zr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Xi(Yr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},t),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),i=await this.tuneMldevInternal(o);let l="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?l=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(l=i.name.split("/operations/")[0]),{name:l,state:Ha.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=ew(e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>Wa(m))}else{const p=jS(e);return c=pe("{name}",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>Kg(m))}}async listInternal(e){var t,r,o,i;let l,c="",d={};if(this.apiClient.isVertexAI()){const p=ow(e);return c=pe("tuningJobs",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=sw(m),_=new Np;return Object.assign(_,v),_})}else{const p=rw(e);return c=pe("tunedModels",p._url),d=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{const _=v;return _.sdkHttpResponse={headers:m.headers},_})),l.then(m=>{const v=iw(m),_=new Np;return Object.assign(_,v),_})}}async cancel(e){var t,r,o,i;let l="",c={};if(this.apiClient.isVertexAI()){const d=WS(e);l=pe("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const d=JS(e);l=pe("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI()){const c=ZS(e);return i=pe("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>Wa(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let o,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XS(e);return i=pe("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>cw(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pw{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const hw=1024*1024*8,mw=3,gw=1e3,yw=2,Ju="x-goog-upload-status";async function vw(n,e,t){var r,o,i;let l=0,c=0,d=new Ka(new Response),p="upload";for(l=n.size;c<l;){const v=Math.min(hw,l-c),_=n.slice(c,c+v);c+v>=l&&(p+=", finalize");let A=0,V=gw;for(;A<mw&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(v)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[Ju]));)A++,await Cw(V),V=V*yw;if(c+=v,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Ju])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(d==null?void 0:d.json());if(((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i[Ju])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function _w(n){return{size:n.size,type:n.type}}function Cw(n){return new Promise(e=>setTimeout(e,n))}class Tw{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vw(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _w(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ew{create(e,t,r){return new Sw(e,t,r)}}class Sw{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zp="x-goog-api-key";class ww{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Zp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Zp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iw="gl-node/";class jp{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=z_(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new ww(this.apiKey);this.apiClient=new cS({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Iw+"web",uploader:new Tw,downloader:new pw}),this.models=new RS(this.apiClient),this.live=new SS(this.apiClient,o,new Ew),this.batches=new aC(this.apiClient),this.chats=new HC(this.models,this.apiClient),this.caches=new qC(this.apiClient),this.files=new XC(this.apiClient),this.operations=new MS(this.apiClient),this.authTokens=new bS(this.apiClient),this.tunings=new dw(this.apiClient)}}var $g={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Af,function(){var t=function(u,f){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])})(u,f)},r=function(){return(r=Object.assign||function(u){for(var f,h=1,g=arguments.length;h<g;h++)for(var y in f=arguments[h])Object.prototype.hasOwnProperty.call(f,y)&&(u[y]=f[y]);return u}).apply(this,arguments)};function o(u,f,h){for(var g,y=0,C=f.length;y<C;y++)!g&&y in f||((g=g||Array.prototype.slice.call(f,0,y))[y]=f[y]);return u.concat(g||Array.prototype.slice.call(f))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Af,l=Object.keys,c=Array.isArray;function d(u,f){return typeof f!="object"||l(f).forEach(function(h){u[h]=f[h]}),u}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var p=Object.getPrototypeOf,m={}.hasOwnProperty;function v(u,f){return m.call(u,f)}function _(u,f){typeof f=="function"&&(f=f(p(u))),(typeof Reflect>"u"?l:Reflect.ownKeys)(f).forEach(function(h){V(u,h,f[h])})}var A=Object.defineProperty;function V(u,f,h,g){A(u,f,d(h&&v(h,"get")&&typeof h.get=="function"?{get:h.get,set:h.set,configurable:!0}:{value:h,configurable:!0,writable:!0},g))}function B(u){return{from:function(f){return u.prototype=Object.create(f.prototype),V(u.prototype,"constructor",u),{extend:_.bind(null,u.prototype)}}}}var Y=Object.getOwnPropertyDescriptor,I=[].slice;function E(u,f,h){return I.call(u,f,h)}function w(u,f){return f(u)}function K(u){if(!u)throw new Error("Assertion Failed")}function O(u){i.setImmediate?setImmediate(u):setTimeout(u,0)}function J(u,f){if(typeof f=="string"&&v(u,f))return u[f];if(!f)return u;if(typeof f!="string"){for(var h=[],g=0,y=f.length;g<y;++g){var C=J(u,f[g]);h.push(C)}return h}var T=f.indexOf(".");if(T!==-1){var S=u[f.substr(0,T)];return S==null?void 0:J(S,f.substr(T+1))}}function b(u,f,h){if(u&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof f!="string"&&"length"in f){K(typeof h!="string"&&"length"in h);for(var g=0,y=f.length;g<y;++g)b(u,f[g],h[g])}else{var C,T,S=f.indexOf(".");S!==-1?(C=f.substr(0,S),(T=f.substr(S+1))===""?h===void 0?c(u)&&!isNaN(parseInt(C))?u.splice(C,1):delete u[C]:u[C]=h:b(S=!(S=u[C])||!v(u,C)?u[C]={}:S,T,h)):h===void 0?c(u)&&!isNaN(parseInt(f))?u.splice(f,1):delete u[f]:u[f]=h}}function oe(u){var f,h={};for(f in u)v(u,f)&&(h[f]=u[f]);return h}var le=[].concat;function ce(u){return le.apply([],u)}var qt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ce([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(f){return f+u+"Array"})}))).filter(function(u){return i[u]}),Ne=new Set(qt.map(function(u){return i[u]})),Me=null;function $e(u){return Me=new WeakMap,u=function f(h){if(!h||typeof h!="object")return h;var g=Me.get(h);if(g)return g;if(c(h)){g=[],Me.set(h,g);for(var y=0,C=h.length;y<C;++y)g.push(f(h[y]))}else if(Ne.has(h.constructor))g=h;else{var T,S=p(h);for(T in g=S===Object.prototype?{}:Object.create(S),Me.set(h,g),h)v(h,T)&&(g[T]=f(h[T]))}return g}(u),Me=null,u}var Ut={}.toString;function nt(u){return Ut.call(u).slice(8,-1)}var be=typeof Symbol<"u"?Symbol.iterator:"@@iterator",tt=typeof be=="symbol"?function(u){var f;return u!=null&&(f=u[be])&&f.apply(u)}:function(){return null};function ie(u,f){return f=u.indexOf(f),0<=f&&u.splice(f,1),0<=f}var Te={};function Ee(u){var f,h,g,y;if(arguments.length===1){if(c(u))return u.slice();if(this===Te&&typeof u=="string")return[u];if(y=tt(u)){for(h=[];!(g=y.next()).done;)h.push(g.value);return h}if(u==null)return[u];if(typeof(f=u.length)!="number")return[u];for(h=new Array(f);f--;)h[f]=u[f];return h}for(f=arguments.length,h=new Array(f);f--;)h[f]=arguments[f];return h}var ze=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},xr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],st=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(xr),on={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function zn(u,f){this.name=u,this.message=f}function sn(u,f){return u+". Errors: "+Object.keys(f).map(function(h){return f[h].toString()}).filter(function(h,g,y){return y.indexOf(h)===g}).join(`
`)}function rt(u,f,h,g){this.failures=f,this.failedKeys=g,this.successCount=h,this.message=sn(u,f)}function vn(u,f){this.name="BulkError",this.failures=Object.keys(f).map(function(h){return f[h]}),this.failuresByPos=f,this.message=sn(u,this.failures)}B(zn).from(Error).extend({toString:function(){return this.name+": "+this.message}}),B(rt).from(zn),B(vn).from(zn);var ht=st.reduce(function(u,f){return u[f]=f+"Error",u},{}),bl=zn,_e=st.reduce(function(u,f){var h=f+"Error";function g(y,C){this.name=h,y?typeof y=="string"?(this.message="".concat(y).concat(C?`
 `+C:""),this.inner=C||null):typeof y=="object"&&(this.message="".concat(y.name," ").concat(y.message),this.inner=y):(this.message=on[f]||h,this.inner=null)}return B(g).from(bl),u[f]=g,u},{});_e.Syntax=SyntaxError,_e.Type=TypeError,_e.Range=RangeError;var Zi=xr.reduce(function(u,f){return u[f+"Error"]=_e[f],u},{}),jr=st.reduce(function(u,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(u[f+"Error"]=_e[f]),u},{});function Be(){}function Ft(u){return u}function Jl(u,f){return u==null||u===Ft?f:function(h){return f(u(h))}}function Vt(u,f){return function(){u.apply(this,arguments),f.apply(this,arguments)}}function Wl(u,f){return u===Be?f:function(){var h=u.apply(this,arguments);h!==void 0&&(arguments[0]=h);var g=this.onsuccess,y=this.onerror;this.onsuccess=null,this.onerror=null;var C=f.apply(this,arguments);return g&&(this.onsuccess=this.onsuccess?Vt(g,this.onsuccess):g),y&&(this.onerror=this.onerror?Vt(y,this.onerror):y),C!==void 0?C:h}}function ji(u,f){return u===Be?f:function(){u.apply(this,arguments);var h=this.onsuccess,g=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Vt(h,this.onsuccess):h),g&&(this.onerror=this.onerror?Vt(g,this.onerror):g)}}function es(u,f){return u===Be?f:function(h){var g=u.apply(this,arguments);d(h,g);var y=this.onsuccess,C=this.onerror;return this.onsuccess=null,this.onerror=null,h=f.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?Vt(y,this.onsuccess):y),C&&(this.onerror=this.onerror?Vt(C,this.onerror):C),g===void 0?h===void 0?void 0:h:d(g,h)}}function Yl(u,f){return u===Be?f:function(){return f.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function kr(u,f){return u===Be?f:function(){var h=u.apply(this,arguments);if(h&&typeof h.then=="function"){for(var g=this,y=arguments.length,C=new Array(y);y--;)C[y]=arguments[y];return h.then(function(){return f.apply(g,C)})}return f.apply(this,arguments)}}jr.ModifyError=rt,jr.DexieError=zn,jr.BulkError=vn;var ot=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ns(u){ot=u}var Pr={},ts=100,qt=typeof Promise>"u"?[]:function(){var u=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[u,p(u),u];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,p(f),u]}(),xr=qt[0],st=qt[1],qt=qt[2],st=st&&st.then,Bt=xr&&xr.constructor,bo=!!qt,Rr=function(u,f){Ht.push([u,f]),eo&&(queueMicrotask(xe),eo=!1)},Jo=!0,eo=!0,Gt=[],no=[],to=Ft,mt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Be,pgp:!1,env:{},finalize:Be},me=mt,Ht=[],It=0,ro=[];function P(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=me;if(typeof u!="function"){if(u!==Pr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ue(this,this._value))}this._state=null,this._value=null,++f.ref,function h(g,y){try{y(function(C){if(g._state===null){if(C===g)throw new TypeError("A promise cannot be resolved with itself.");var T=g._lib&&Ge();C&&typeof C.then=="function"?h(g,function(S,x){C instanceof P?C._then(S,x):C.then(S,x)}):(g._state=!0,g._value=C,he(g)),T&&en()}},ue.bind(null,g))}catch(C){ue(g,C)}}(this,u)}var ee={get:function(){var u=me,f=ye;function h(g,y){var C=this,T=!u.global&&(u!==me||f!==ye),S=T&&!dn(),x=new P(function(R,L){Ie(C,new X(Wo(g,u,T,S),Wo(y,u,T,S),R,L,u))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return h.prototype=Pr,h},set:function(u){V(this,"then",u&&u.prototype===Pr?ee:{get:function(){return u},set:ee.set})}};function X(u,f,h,g,y){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof f=="function"?f:null,this.resolve=h,this.reject=g,this.psd=y}function ue(u,f){var h,g;no.push(f),u._state===null&&(h=u._lib&&Ge(),f=to(f),u._state=!1,u._value=f,g=u,Gt.some(function(y){return y._value===g._value})||Gt.push(g),he(u),h&&en())}function he(u){var f=u._listeners;u._listeners=[];for(var h=0,g=f.length;h<g;++h)Ie(u,f[h]);var y=u._PSD;--y.ref||y.finalize(),It===0&&(++It,Rr(function(){--It==0&&Sn()},[]))}function Ie(u,f){if(u._state!==null){var h=u._state?f.onFulfilled:f.onRejected;if(h===null)return(u._state?f.resolve:f.reject)(u._value);++f.psd.ref,++It,Rr(Se,[h,u,f])}else u._listeners.push(f)}function Se(u,f,h){try{var g,y=f._value;!f._state&&no.length&&(no=[]),g=ot&&f._consoleTask?f._consoleTask.run(function(){return u(y)}):u(y),f._state||no.indexOf(y)!==-1||function(C){for(var T=Gt.length;T;)if(Gt[--T]._value===C._value)return Gt.splice(T,1)}(f),h.resolve(g)}catch(C){h.reject(C)}finally{--It==0&&Sn(),--h.psd.ref||h.psd.finalize()}}function xe(){it(mt,function(){Ge()&&en()})}function Ge(){var u=Jo;return eo=Jo=!1,u}function en(){var u,f,h;do for(;0<Ht.length;)for(u=Ht,Ht=[],h=u.length,f=0;f<h;++f){var g=u[f];g[0].apply(null,g[1])}while(0<Ht.length);eo=Jo=!0}function Sn(){var u=Gt;Gt=[],u.forEach(function(g){g._PSD.onunhandled.call(null,g._value,g)});for(var f=ro.slice(0),h=f.length;h;)f[--h]()}function ae(u){return new P(Pr,!1,u)}function ve(u,f){var h=me;return function(){var g=Ge(),y=me;try{return On(h,!0),u.apply(this,arguments)}catch(C){f&&f(C)}finally{On(y,!1),g&&en()}}}_(P.prototype,{then:ee,_then:function(u,f){Ie(this,new X(null,null,u,f,me))},catch:function(u){if(arguments.length===1)return this.then(null,u);var f=u,h=arguments[1];return typeof f=="function"?this.then(null,function(g){return(g instanceof f?h:ae)(g)}):this.then(null,function(g){return(g&&g.name===f?h:ae)(g)})},finally:function(u){return this.then(function(f){return P.resolve(u()).then(function(){return f})},function(f){return P.resolve(u()).then(function(){return ae(f)})})},timeout:function(u,f){var h=this;return u<1/0?new P(function(g,y){var C=setTimeout(function(){return y(new _e.Timeout(f))},u);h.then(g,y).finally(clearTimeout.bind(null,C))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&V(P.prototype,Symbol.toStringTag,"Dexie.Promise"),mt.env=nr(),_(P,{all:function(){var u=Ee.apply(null,arguments).map(Nn);return new P(function(f,h){u.length===0&&f([]);var g=u.length;u.forEach(function(y,C){return P.resolve(y).then(function(T){u[C]=T,--g||f(u)},h)})})},resolve:function(u){return u instanceof P?u:u&&typeof u.then=="function"?new P(function(f,h){u.then(f,h)}):new P(Pr,!0,u)},reject:ae,race:function(){var u=Ee.apply(null,arguments).map(Nn);return new P(function(f,h){u.map(function(g){return P.resolve(g).then(f,h)})})},PSD:{get:function(){return me},set:function(u){return me=u}},totalEchoes:{get:function(){return ye}},newPSD:He,usePSD:it,scheduler:{get:function(){return Rr},set:function(u){Rr=u}},rejectionMapper:{get:function(){return to},set:function(u){to=u}},follow:function(u,f){return new P(function(h,g){return He(function(y,C){var T=me;T.unhandleds=[],T.onunhandled=C,T.finalize=Vt(function(){var S,x=this;S=function(){x.unhandleds.length===0?y():C(x.unhandleds[0])},ro.push(function R(){S(),ro.splice(ro.indexOf(R),1)}),++It,Rr(function(){--It==0&&Sn()},[])},T.finalize),u()},f,h,g)})}}),Bt&&(Bt.allSettled&&V(P,"allSettled",function(){var u=Ee.apply(null,arguments).map(Nn);return new P(function(f){u.length===0&&f([]);var h=u.length,g=new Array(h);u.forEach(function(y,C){return P.resolve(y).then(function(T){return g[C]={status:"fulfilled",value:T}},function(T){return g[C]={status:"rejected",reason:T}}).then(function(){return--h||f(g)})})})}),Bt.any&&typeof AggregateError<"u"&&V(P,"any",function(){var u=Ee.apply(null,arguments).map(Nn);return new P(function(f,h){u.length===0&&h(new AggregateError([]));var g=u.length,y=new Array(g);u.forEach(function(C,T){return P.resolve(C).then(function(S){return f(S)},function(S){y[T]=S,--g||h(new AggregateError(y))})})})}),Bt.withResolvers&&(P.withResolvers=Bt.withResolvers));var ge={awaits:0,echoes:0,id:0},qe=0,Le=[],Ye=0,ye=0,_n=0;function He(u,f,h,g){var y=me,C=Object.create(y);return C.parent=y,C.ref=0,C.global=!1,C.id=++_n,mt.env,C.env=bo?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject}:{},f&&d(C,f),++y.ref,C.finalize=function(){--this.parent.ref||this.parent.finalize()},g=it(C,u,h,g),C.ref===0&&C.finalize(),g}function un(){return ge.id||(ge.id=++qe),++ge.awaits,ge.echoes+=ts,ge.id}function dn(){return!!ge.awaits&&(--ge.awaits==0&&(ge.id=0),ge.echoes=ge.awaits*ts,!0)}function Nn(u){return ge.echoes&&u&&u.constructor===Bt?(un(),u.then(function(f){return dn(),f},function(f){return dn(),Oe(f)})):u}function Mr(){var u=Le[Le.length-1];Le.pop(),On(u,!1)}function On(u,f){var h,g=me;(f?!ge.echoes||Ye++&&u===me:!Ye||--Ye&&u===me)||queueMicrotask(f?(function(y){++ye,ge.echoes&&--ge.echoes!=0||(ge.echoes=ge.awaits=ge.id=0),Le.push(me),On(y,!0)}).bind(null,u):Mr),u!==me&&(me=u,g===mt&&(mt.env=nr()),bo&&(h=mt.env.Promise,f=u.env,(g.global||u.global)&&(Object.defineProperty(i,"Promise",f.PromiseProp),h.all=f.all,h.race=f.race,h.resolve=f.resolve,h.reject=f.reject,f.allSettled&&(h.allSettled=f.allSettled),f.any&&(h.any=f.any))))}function nr(){var u=i.Promise;return bo?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function it(u,f,h,g,y){var C=me;try{return On(u,!0),f(h,g,y)}finally{On(C,!1)}}function Wo(u,f,h,g){return typeof u!="function"?u:function(){var y=me;h&&un(),On(f,!0);try{return u.apply(this,arguments)}finally{On(y,!1),g&&queueMicrotask(dn)}}}function At(u){Promise===Bt&&ge.echoes===0?Ye===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+st).indexOf("[native code]")===-1&&(un=dn=Be);var Oe=P.reject,bn="￿",qn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Yo="String expected.",gt=[],Kt="__dbnames",kt="readonly",Ql="readwrite";function Nr(u,f){return u?f?function(){return u.apply(this,arguments)&&f.apply(this,arguments)}:u:f}var Qc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function rs(u){return typeof u!="string"||/\./.test(u)?function(f){return f}:function(f){return f[u]===void 0&&u in f&&delete(f=$e(f))[u],f}}function Xc(){throw _e.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function De(u,f){try{var h=Zc(u),g=Zc(f);if(h!==g)return h==="Array"?1:g==="Array"?-1:h==="binary"?1:g==="binary"?-1:h==="string"?1:g==="string"?-1:h==="Date"?1:g!=="Date"?NaN:-1;switch(h){case"number":case"Date":case"string":return f<u?1:u<f?-1:0;case"binary":return function(y,C){for(var T=y.length,S=C.length,x=T<S?T:S,R=0;R<x;++R)if(y[R]!==C[R])return y[R]<C[R]?-1:1;return T===S?0:T<S?-1:1}(jc(u),jc(f));case"Array":return function(y,C){for(var T=y.length,S=C.length,x=T<S?T:S,R=0;R<x;++R){var L=De(y[R],C[R]);if(L!==0)return L}return T===S?0:T<S?-1:1}(u,f)}}catch{}return NaN}function Zc(u){var f=typeof u;return f!="object"?f:ArrayBuffer.isView(u)?"binary":(u=nt(u),u==="ArrayBuffer"?"binary":u)}function jc(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function os(u,f,h){var g=u.schema.yProps;return g?(f&&0<h.numFailures&&(f=f.filter(function(y,C){return!h.failures[C]})),Promise.all(g.map(function(y){return y=y.updatesTable,f?u.db.table(y).where("k").anyOf(f).delete():u.db.table(y).clear()})).then(function(){return h})):h}var Qo=(ef.prototype.execute=function(u){var f=this["@@propmod"];if(f.add!==void 0){var h=f.add;if(c(h))return o(o([],c(u)?u:[],!0),h).sort();if(typeof h=="number")return(Number(u)||0)+h;if(typeof h=="bigint")try{return BigInt(u)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(f.remove!==void 0){var g=f.remove;if(c(g))return c(u)?u.filter(function(y){return!g.includes(y)}).sort():[];if(typeof g=="number")return Number(u)-g;if(typeof g=="bigint")try{return BigInt(u)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return h=(h=f.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof u=="string"&&u.startsWith(h)?f.replacePrefix[1]+u.substring(h.length):u},ef);function ef(u){this["@@propmod"]=u}function nf(u,f){for(var h=l(f),g=h.length,y=!1,C=0;C<g;++C){var T=h[C],S=f[T],x=J(u,T);S instanceof Qo?(b(u,T,S.execute(x)),y=!0):x!==S&&(b(u,T,S),y=!0)}return y}var tf=(Je.prototype._trans=function(u,f,h){var g=this._tx||me.trans,y=this.name,C=ot&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function T(R,L,k){if(!k.schema[y])throw new _e.NotFound("Table "+y+" not part of transaction");return f(k.idbtrans,k)}var S=Ge();try{var x=g&&g.db._novip===this.db._novip?g===me.trans?g._promise(u,T,h):He(function(){return g._promise(u,T,h)},{trans:g,transless:me.transless||me}):function R(L,k,F,M){if(L.idbdb&&(L._state.openComplete||me.letThrough||L._vip)){var N=L._createTransaction(k,F,L._dbSchema);try{N.create(),L._state.PR1398_maxLoop=3}catch(D){return D.name===ht.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return R(L,k,F,M)})):Oe(D)}return N._promise(k,function(D,U){return He(function(){return me.trans=N,M(D,U,N)})}).then(function(D){if(k==="readwrite")try{N.idbtrans.commit()}catch{}return k==="readonly"?D:N._completion.then(function(){return D})})}if(L._state.openComplete)return Oe(new _e.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Oe(new _e.DatabaseClosed);L.open().catch(Be)}return L._state.dbReadyPromise.then(function(){return R(L,k,F,M)})}(this.db,u,[this.name],T);return C&&(x._consoleTask=C,x=x.catch(function(R){return console.trace(R),Oe(R)})),x}finally{S&&en()}},Je.prototype.get=function(u,f){var h=this;return u&&u.constructor===Object?this.where(u).first(f):u==null?Oe(new _e.Type("Invalid argument to Table.get()")):this._trans("readonly",function(g){return h.core.get({trans:g,key:u}).then(function(y){return h.hook.reading.fire(y)})}).then(f)},Je.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(c(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var f=l(u);if(f.length===1)return this.where(f[0]).equals(u[f[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&f.every(function(R){return 0<=S.keyPath.indexOf(R)})){for(var x=0;x<f.length;++x)if(f.indexOf(S.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(S,x){return S.keyPath.length-x.keyPath.length})[0];if(h&&this.db._maxKey!==bn){var C=h.keyPath.slice(0,f.length);return this.where(C).equals(C.map(function(x){return u[x]}))}!h&&ot&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var g=this.schema.idxByName;function y(S,x){return De(S,x)===0}var T=f.reduce(function(k,x){var R=k[0],L=k[1],k=g[x],F=u[x];return[R||k,R||!k?Nr(L,k&&k.multi?function(M){return M=J(M,x),c(M)&&M.some(function(N){return y(F,N)})}:function(M){return y(F,J(M,x))}):L]},[null,null]),C=T[0],T=T[1];return C?this.where(C.name).equals(u[C.keyPath]).filter(T):h?this.filter(T):this.where(f).equals("")},Je.prototype.filter=function(u){return this.toCollection().and(u)},Je.prototype.count=function(u){return this.toCollection().count(u)},Je.prototype.offset=function(u){return this.toCollection().offset(u)},Je.prototype.limit=function(u){return this.toCollection().limit(u)},Je.prototype.each=function(u){return this.toCollection().each(u)},Je.prototype.toArray=function(u){return this.toCollection().toArray(u)},Je.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Je.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,c(u)?"[".concat(u.join("+"),"]"):u))},Je.prototype.reverse=function(){return this.toCollection().reverse()},Je.prototype.mapToClass=function(u){var f,h=this.db,g=this.name;function y(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=u).prototype instanceof Xc&&(function(x,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function L(){this.constructor=x}t(x,R),x.prototype=R===null?Object.create(R):(L.prototype=R.prototype,new L)}(y,f=u),Object.defineProperty(y.prototype,"db",{get:function(){return h},enumerable:!1,configurable:!0}),y.prototype.table=function(){return g},u=y);for(var C=new Set,T=u.prototype;T;T=p(T))Object.getOwnPropertyNames(T).forEach(function(x){return C.add(x)});function S(x){if(!x)return x;var R,L=Object.create(u.prototype);for(R in x)if(!C.has(R))try{L[R]=x[R]}catch{}return L}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=S,this.hook("reading",S),u},Je.prototype.defineClass=function(){return this.mapToClass(function(u){d(this,u)})},Je.prototype.add=function(u,f){var h=this,g=this.schema.primKey,y=g.auto,C=g.keyPath,T=u;return C&&y&&(T=rs(C)(u)),this._trans("readwrite",function(S){return h.core.mutate({trans:S,type:"add",keys:f!=null?[f]:null,values:[T]})}).then(function(S){return S.numFailures?P.reject(S.failures[0]):S.lastResult}).then(function(S){if(C)try{b(u,C,S)}catch{}return S})},Je.prototype.upsert=function(u,f){var h=this,g=this.schema.primKey.keyPath;return this._trans("readwrite",function(y){return h.core.get({trans:y,key:u}).then(function(C){var T=C??{};return nf(T,f),g&&b(T,g,u),h.core.mutate({trans:y,type:"put",values:[T],keys:[u],upsert:!0,updates:{keys:[u],changeSpecs:[f]}}).then(function(S){return S.numFailures?P.reject(S.failures[0]):!!C})})})},Je.prototype.update=function(u,f){return typeof u!="object"||c(u)?this.where(":id").equals(u).modify(f):(u=J(u,this.schema.primKey.keyPath),u===void 0?Oe(new _e.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(f))},Je.prototype.put=function(u,f){var h=this,g=this.schema.primKey,y=g.auto,C=g.keyPath,T=u;return C&&y&&(T=rs(C)(u)),this._trans("readwrite",function(S){return h.core.mutate({trans:S,type:"put",values:[T],keys:f!=null?[f]:null})}).then(function(S){return S.numFailures?P.reject(S.failures[0]):S.lastResult}).then(function(S){if(C)try{b(u,C,S)}catch{}return S})},Je.prototype.delete=function(u){var f=this;return this._trans("readwrite",function(h){return f.core.mutate({trans:h,type:"delete",keys:[u]}).then(function(g){return os(f,[u],g)}).then(function(g){return g.numFailures?P.reject(g.failures[0]):void 0})})},Je.prototype.clear=function(){var u=this;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"deleteRange",range:Qc}).then(function(h){return os(u,null,h)})}).then(function(f){return f.numFailures?P.reject(f.failures[0]):void 0})},Je.prototype.bulkGet=function(u){var f=this;return this._trans("readonly",function(h){return f.core.getMany({keys:u,trans:h}).then(function(g){return g.map(function(y){return f.hook.reading.fire(y)})})})},Je.prototype.bulkAdd=function(u,f,h){var g=this,y=Array.isArray(f)?f:void 0,C=(h=h||(y?void 0:f))?h.allKeys:void 0;return this._trans("readwrite",function(T){var R=g.schema.primKey,S=R.auto,R=R.keyPath;if(R&&y)throw new _e.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(y&&y.length!==u.length)throw new _e.InvalidArgument("Arguments objects and keys must have the same length");var x=u.length,R=R&&S?u.map(rs(R)):u;return g.core.mutate({trans:T,type:"add",keys:y,values:R,wantResults:C}).then(function(N){var k=N.numFailures,F=N.results,M=N.lastResult,N=N.failures;if(k===0)return C?F:M;throw new vn("".concat(g.name,".bulkAdd(): ").concat(k," of ").concat(x," operations failed"),N)})})},Je.prototype.bulkPut=function(u,f,h){var g=this,y=Array.isArray(f)?f:void 0,C=(h=h||(y?void 0:f))?h.allKeys:void 0;return this._trans("readwrite",function(T){var R=g.schema.primKey,S=R.auto,R=R.keyPath;if(R&&y)throw new _e.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(y&&y.length!==u.length)throw new _e.InvalidArgument("Arguments objects and keys must have the same length");var x=u.length,R=R&&S?u.map(rs(R)):u;return g.core.mutate({trans:T,type:"put",keys:y,values:R,wantResults:C}).then(function(N){var k=N.numFailures,F=N.results,M=N.lastResult,N=N.failures;if(k===0)return C?F:M;throw new vn("".concat(g.name,".bulkPut(): ").concat(k," of ").concat(x," operations failed"),N)})})},Je.prototype.bulkUpdate=function(u){var f=this,h=this.core,g=u.map(function(T){return T.key}),y=u.map(function(T){return T.changes}),C=[];return this._trans("readwrite",function(T){return h.getMany({trans:T,keys:g,cache:"clone"}).then(function(S){var x=[],R=[];u.forEach(function(k,F){var M=k.key,N=k.changes,D=S[F];if(D){for(var U=0,q=Object.keys(N);U<q.length;U++){var H=q[U],$=N[H];if(H===f.schema.primKey.keyPath){if(De($,M)!==0)throw new _e.Constraint("Cannot update primary key in bulkUpdate()")}else b(D,H,$)}C.push(F),x.push(M),R.push(D)}});var L=x.length;return h.mutate({trans:T,type:"put",keys:x,values:R,updates:{keys:g,changeSpecs:y}}).then(function(k){var F=k.numFailures,M=k.failures;if(F===0)return L;for(var N=0,D=Object.keys(M);N<D.length;N++){var U,q=D[N],H=C[Number(q)];H!=null&&(U=M[q],delete M[q],M[H]=U)}throw new vn("".concat(f.name,".bulkUpdate(): ").concat(F," of ").concat(L," operations failed"),M)})})})},Je.prototype.bulkDelete=function(u){var f=this,h=u.length;return this._trans("readwrite",function(g){return f.core.mutate({trans:g,type:"delete",keys:u}).then(function(y){return os(f,u,y)})}).then(function(T){var y=T.numFailures,C=T.lastResult,T=T.failures;if(y===0)return C;throw new vn("".concat(f.name,".bulkDelete(): ").concat(y," of ").concat(h," operations failed"),T)})},Je);function Je(){}function Xo(u){function f(T,S){if(S){for(var x=arguments.length,R=new Array(x-1);--x;)R[x-1]=arguments[x];return h[T].subscribe.apply(null,R),u}if(typeof T=="string")return h[T]}var h={};f.addEventType=C;for(var g=1,y=arguments.length;g<y;++g)C(arguments[g]);return f;function C(T,S,x){if(typeof T!="object"){var R;S=S||Yl;var L={subscribers:[],fire:x=x||Be,subscribe:function(k){L.subscribers.indexOf(k)===-1&&(L.subscribers.push(k),L.fire=S(L.fire,k))},unsubscribe:function(k){L.subscribers=L.subscribers.filter(function(F){return F!==k}),L.fire=L.subscribers.reduce(S,x)}};return h[T]=f[T]=L}l(R=T).forEach(function(k){var F=R[k];if(c(F))C(k,R[k][0],R[k][1]);else{if(F!=="asap")throw new _e.InvalidArgument("Invalid event config");var M=C(k,Ft,function(){for(var N=arguments.length,D=new Array(N);N--;)D[N]=arguments[N];M.subscribers.forEach(function(U){O(function(){U.apply(null,D)})})})}})}}function Zo(u,f){return B(f).from({prototype:u}),f}function oo(u,f){return!(u.filter||u.algorithm||u.or)&&(f?u.justLimit:!u.replayFilter)}function Xl(u,f){u.filter=Nr(u.filter,f)}function Zl(u,f,h){var g=u.replayFilter;u.replayFilter=g?function(){return Nr(g(),f())}:f,u.justLimit=h&&!g}function is(u,f){if(u.isPrimKey)return f.primaryKey;var h=f.getIndexByKeyPath(u.index);if(!h)throw new _e.Schema("KeyPath "+u.index+" on object store "+f.name+" is not indexed");return h}function rf(u,f,h){var g=is(u,f.schema);return f.openCursor({trans:h,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:g,range:u.range}})}function ss(u,f,h,g){var y=u.replayFilter?Nr(u.filter,u.replayFilter()):u.filter;if(u.or){var C={},T=function(S,x,R){var L,k;y&&!y(x,R,function(F){return x.stop(F)},function(F){return x.fail(F)})||((k=""+(L=x.primaryKey))=="[object ArrayBuffer]"&&(k=""+new Uint8Array(L)),v(C,k)||(C[k]=!0,f(S,x,R)))};return Promise.all([u.or._iterate(T,h),of(rf(u,g,h),u.algorithm,T,!u.keysOnly&&u.valueMapper)])}return of(rf(u,g,h),Nr(u.algorithm,y),f,!u.keysOnly&&u.valueMapper)}function of(u,f,h,g){var y=ve(g?function(C,T,S){return h(g(C),T,S)}:h);return u.then(function(C){if(C)return C.start(function(){var T=function(){return C.continue()};f&&!f(C,function(S){return T=S},function(S){C.stop(S),T=Be},function(S){C.fail(S),T=Be})||y(C.value,C,function(S){return T=S}),T()})})}var Og=(Fe.prototype._read=function(u,f){var h=this._ctx;return h.error?h.table._trans(null,Oe.bind(null,h.error)):h.table._trans("readonly",u).then(f)},Fe.prototype._write=function(u){var f=this._ctx;return f.error?f.table._trans(null,Oe.bind(null,f.error)):f.table._trans("readwrite",u,"locked")},Fe.prototype._addAlgorithm=function(u){var f=this._ctx;f.algorithm=Nr(f.algorithm,u)},Fe.prototype._iterate=function(u,f){return ss(this._ctx,u,f,this._ctx.table.core)},Fe.prototype.clone=function(u){var f=Object.create(this.constructor.prototype),h=Object.create(this._ctx);return u&&d(h,u),f._ctx=h,f},Fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Fe.prototype.each=function(u){var f=this._ctx;return this._read(function(h){return ss(f,u,h,f.table.core)})},Fe.prototype.count=function(u){var f=this;return this._read(function(h){var g=f._ctx,y=g.table.core;if(oo(g,!0))return y.count({trans:h,query:{index:is(g,y.schema),range:g.range}}).then(function(T){return Math.min(T,g.limit)});var C=0;return ss(g,function(){return++C,!1},h,y).then(function(){return C})}).then(u)},Fe.prototype.sortBy=function(u,f){var h=u.split(".").reverse(),g=h[0],y=h.length-1;function C(x,R){return R?C(x[h[R]],R-1):x[g]}var T=this._ctx.dir==="next"?1:-1;function S(x,R){return De(C(x,y),C(R,y))*T}return this.toArray(function(x){return x.sort(S)}).then(f)},Fe.prototype.toArray=function(u){var f=this;return this._read(function(h){var g=f._ctx;if(g.dir==="next"&&oo(g,!0)&&0<g.limit){var y=g.valueMapper,C=is(g,g.table.core.schema);return g.table.core.query({trans:h,limit:g.limit,values:!0,query:{index:C,range:g.range}}).then(function(S){return S=S.result,y?S.map(y):S})}var T=[];return ss(g,function(S){return T.push(S)},h,g.table.core).then(function(){return T})},u)},Fe.prototype.offset=function(u){var f=this._ctx;return u<=0||(f.offset+=u,oo(f)?Zl(f,function(){var h=u;return function(g,y){return h===0||(h===1?--h:y(function(){g.advance(h),h=0}),!1)}}):Zl(f,function(){var h=u;return function(){return--h<0}})),this},Fe.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),Zl(this._ctx,function(){var f=u;return function(h,g,y){return--f<=0&&g(y),0<=f}},!0),this},Fe.prototype.until=function(u,f){return Xl(this._ctx,function(h,g,y){return!u(h.value)||(g(y),f)}),this},Fe.prototype.first=function(u){return this.limit(1).toArray(function(f){return f[0]}).then(u)},Fe.prototype.last=function(u){return this.reverse().first(u)},Fe.prototype.filter=function(u){var f;return Xl(this._ctx,function(h){return u(h.value)}),(f=this._ctx).isMatch=Nr(f.isMatch,u),this},Fe.prototype.and=function(u){return this.filter(u)},Fe.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},Fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Fe.prototype.desc=function(){return this.reverse()},Fe.prototype.eachKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(h,g){u(g.key,g)})},Fe.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},Fe.prototype.eachPrimaryKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(h,g){u(g.primaryKey,g)})},Fe.prototype.keys=function(u){var f=this._ctx;f.keysOnly=!f.isMatch;var h=[];return this.each(function(g,y){h.push(y.key)}).then(function(){return h}).then(u)},Fe.prototype.primaryKeys=function(u){var f=this._ctx;if(f.dir==="next"&&oo(f,!0)&&0<f.limit)return this._read(function(g){var y=is(f,f.table.core.schema);return f.table.core.query({trans:g,values:!1,limit:f.limit,query:{index:y,range:f.range}})}).then(function(g){return g.result}).then(u);f.keysOnly=!f.isMatch;var h=[];return this.each(function(g,y){h.push(y.primaryKey)}).then(function(){return h}).then(u)},Fe.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},Fe.prototype.firstKey=function(u){return this.limit(1).keys(function(f){return f[0]}).then(u)},Fe.prototype.lastKey=function(u){return this.reverse().firstKey(u)},Fe.prototype.distinct=function(){var u=this._ctx,u=u.index&&u.table.schema.idxByName[u.index];if(!u||!u.multi)return this;var f={};return Xl(this._ctx,function(y){var g=y.primaryKey.toString(),y=v(f,g);return f[g]=!0,!y}),this},Fe.prototype.modify=function(u){var f=this,h=this._ctx;return this._write(function(g){var y=typeof u=="function"?u:function(D){return nf(D,u)},C=h.table.core,R=C.schema.primaryKey,T=R.outbound,S=R.extractKey,x=200,R=f.db._options.modifyChunkSize;R&&(x=typeof R=="object"?R[C.name]||R["*"]||200:R);function L(D,H){var q=H.failures,H=H.numFailures;F+=D-H;for(var $=0,z=l(q);$<z.length;$++){var Z=z[$];k.push(q[Z])}}var k=[],F=0,M=[],N=u===sf;return f.clone().primaryKeys().then(function(D){function U(H){var $=Math.min(x,D.length-H),z=D.slice(H,H+$);return(N?Promise.resolve([]):C.getMany({trans:g,keys:z,cache:"immutable"})).then(function(Z){var te=[],Q=[],j=T?[]:null,re=N?z:[];if(!N)for(var ne=0;ne<$;++ne){var fe=Z[ne],Ae={value:$e(fe),primKey:D[H+ne]};y.call(Ae,Ae.value,Ae)!==!1&&(Ae.value==null?re.push(D[H+ne]):T||De(S(fe),S(Ae.value))===0?(Q.push(Ae.value),T&&j.push(D[H+ne])):(re.push(D[H+ne]),te.push(Ae.value)))}return Promise.resolve(0<te.length&&C.mutate({trans:g,type:"add",values:te}).then(function(ke){for(var Pe in ke.failures)re.splice(parseInt(Pe),1);L(te.length,ke)})).then(function(){return(0<Q.length||q&&typeof u=="object")&&C.mutate({trans:g,type:"put",keys:j,values:Q,criteria:q,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<H}).then(function(ke){return L(Q.length,ke)})}).then(function(){return(0<re.length||q&&N)&&C.mutate({trans:g,type:"delete",keys:re,criteria:q,isAdditionalChunk:0<H}).then(function(ke){return os(h.table,re,ke)}).then(function(ke){return L(re.length,ke)})}).then(function(){return D.length>H+$&&U(H+x)})})}var q=oo(h)&&h.limit===1/0&&(typeof u!="function"||N)&&{index:h.index,range:h.range};return U(0).then(function(){if(0<k.length)throw new rt("Error modifying one or more objects",k,F,M);return D.length})})})},Fe.prototype.delete=function(){var u=this._ctx,f=u.range;return!oo(u)||u.table.schema.yProps||!u.isPrimKey&&f.type!==3?this.modify(sf):this._write(function(h){var g=u.table.core.schema.primaryKey,y=f;return u.table.core.count({trans:h,query:{index:g,range:y}}).then(function(C){return u.table.core.mutate({trans:h,type:"deleteRange",range:y}).then(function(x){var S=x.failures,x=x.numFailures;if(x)throw new rt("Could not delete some values",Object.keys(S).map(function(R){return S[R]}),C-x);return C-x})})})},Fe);function Fe(){}var sf=function(u,f){return f.value=null};function bg(u,f){return u<f?-1:u===f?0:1}function Jg(u,f){return f<u?-1:u===f?0:1}function Jn(u,f,h){return u=u instanceof uf?new u.Collection(u):u,u._ctx.error=new(h||TypeError)(f),u}function io(u){return new u.Collection(u,function(){return lf("")}).limit(0)}function ls(u,f,h,g){var y,C,T,S,x,R,L,k=h.length;if(!h.every(function(N){return typeof N=="string"}))return Jn(u,Yo);function F(N){y=N==="next"?function(U){return U.toUpperCase()}:function(U){return U.toLowerCase()},C=N==="next"?function(U){return U.toLowerCase()}:function(U){return U.toUpperCase()},T=N==="next"?bg:Jg;var D=h.map(function(U){return{lower:C(U),upper:y(U)}}).sort(function(U,q){return T(U.lower,q.lower)});S=D.map(function(U){return U.upper}),x=D.map(function(U){return U.lower}),L=(R=N)==="next"?"":g}F("next"),u=new u.Collection(u,function(){return tr(S[0],x[k-1]+g)}),u._ondirectionchange=function(N){F(N)};var M=0;return u._addAlgorithm(function(N,D,U){var q=N.key;if(typeof q!="string")return!1;var H=C(q);if(f(H,x,M))return!0;for(var $=null,z=M;z<k;++z){var Z=function(te,Q,j,re,ne,fe){for(var Ae=Math.min(te.length,re.length),ke=-1,Pe=0;Pe<Ae;++Pe){var Wn=Q[Pe];if(Wn!==re[Pe])return ne(te[Pe],j[Pe])<0?te.substr(0,Pe)+j[Pe]+j.substr(Pe+1):ne(te[Pe],re[Pe])<0?te.substr(0,Pe)+re[Pe]+j.substr(Pe+1):0<=ke?te.substr(0,ke)+Q[ke]+j.substr(ke+1):null;ne(te[Pe],Wn)<0&&(ke=Pe)}return Ae<re.length&&fe==="next"?te+j.substr(te.length):Ae<te.length&&fe==="prev"?te.substr(0,j.length):ke<0?null:te.substr(0,ke)+re[ke]+j.substr(ke+1)}(q,H,S[z],x[z],T,R);Z===null&&$===null?M=z+1:($===null||0<T($,Z))&&($=Z)}return D($!==null?function(){N.continue($+L)}:U),!1}),u}function tr(u,f,h,g){return{type:2,lower:u,upper:f,lowerOpen:h,upperOpen:g}}function lf(u){return{type:1,lower:u,upper:u}}var uf=(Object.defineProperty(mn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),mn.prototype.between=function(u,f,h,g){h=h!==!1,g=g===!0;try{return 0<this._cmp(u,f)||this._cmp(u,f)===0&&(h||g)&&(!h||!g)?io(this):new this.Collection(this,function(){return tr(u,f,!h,!g)})}catch{return Jn(this,qn)}},mn.prototype.equals=function(u){return u==null?Jn(this,qn):new this.Collection(this,function(){return lf(u)})},mn.prototype.above=function(u){return u==null?Jn(this,qn):new this.Collection(this,function(){return tr(u,void 0,!0)})},mn.prototype.aboveOrEqual=function(u){return u==null?Jn(this,qn):new this.Collection(this,function(){return tr(u,void 0,!1)})},mn.prototype.below=function(u){return u==null?Jn(this,qn):new this.Collection(this,function(){return tr(void 0,u,!1,!0)})},mn.prototype.belowOrEqual=function(u){return u==null?Jn(this,qn):new this.Collection(this,function(){return tr(void 0,u)})},mn.prototype.startsWith=function(u){return typeof u!="string"?Jn(this,Yo):this.between(u,u+bn,!0,!0)},mn.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):ls(this,function(f,h){return f.indexOf(h[0])===0},[u],bn)},mn.prototype.equalsIgnoreCase=function(u){return ls(this,function(f,h){return f===h[0]},[u],"")},mn.prototype.anyOfIgnoreCase=function(){var u=Ee.apply(Te,arguments);return u.length===0?io(this):ls(this,function(f,h){return h.indexOf(f)!==-1},u,"")},mn.prototype.startsWithAnyOfIgnoreCase=function(){var u=Ee.apply(Te,arguments);return u.length===0?io(this):ls(this,function(f,h){return h.some(function(g){return f.indexOf(g)===0})},u,bn)},mn.prototype.anyOf=function(){var u=this,f=Ee.apply(Te,arguments),h=this._cmp;try{f.sort(h)}catch{return Jn(this,qn)}if(f.length===0)return io(this);var g=new this.Collection(this,function(){return tr(f[0],f[f.length-1])});g._ondirectionchange=function(C){h=C==="next"?u._ascending:u._descending,f.sort(h)};var y=0;return g._addAlgorithm(function(C,T,S){for(var x=C.key;0<h(x,f[y]);)if(++y===f.length)return T(S),!1;return h(x,f[y])===0||(T(function(){C.continue(f[y])}),!1)}),g},mn.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},mn.prototype.noneOf=function(){var u=Ee.apply(Te,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return Jn(this,qn)}var f=u.reduce(function(h,g){return h?h.concat([[h[h.length-1][1],g]]):[[-1/0,g]]},null);return f.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},mn.prototype.inAnyRange=function(q,f){var h=this,g=this._cmp,y=this._ascending,C=this._descending,T=this._min,S=this._max;if(q.length===0)return io(this);if(!q.every(function(H){return H[0]!==void 0&&H[1]!==void 0&&y(H[0],H[1])<=0}))return Jn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",_e.InvalidArgument);var x=!f||f.includeLowers!==!1,R=f&&f.includeUppers===!0,L,k=y;function F(H,$){return k(H[0],$[0])}try{(L=q.reduce(function(H,$){for(var z=0,Z=H.length;z<Z;++z){var te=H[z];if(g($[0],te[1])<0&&0<g($[1],te[0])){te[0]=T(te[0],$[0]),te[1]=S(te[1],$[1]);break}}return z===Z&&H.push($),H},[])).sort(F)}catch{return Jn(this,qn)}var M=0,N=R?function(H){return 0<y(H,L[M][1])}:function(H){return 0<=y(H,L[M][1])},D=x?function(H){return 0<C(H,L[M][0])}:function(H){return 0<=C(H,L[M][0])},U=N,q=new this.Collection(this,function(){return tr(L[0][0],L[L.length-1][1],!x,!R)});return q._ondirectionchange=function(H){k=H==="next"?(U=N,y):(U=D,C),L.sort(F)},q._addAlgorithm(function(H,$,z){for(var Z,te=H.key;U(te);)if(++M===L.length)return $(z),!1;return!N(Z=te)&&!D(Z)||(h._cmp(te,L[M][1])===0||h._cmp(te,L[M][0])===0||$(function(){k===y?H.continue(L[M][0]):H.continue(L[M][1])}),!1)}),q},mn.prototype.startsWithAnyOf=function(){var u=Ee.apply(Te,arguments);return u.every(function(f){return typeof f=="string"})?u.length===0?io(this):this.inAnyRange(u.map(function(f){return[f,f+bn]})):Jn(this,"startsWithAnyOf() only works with strings")},mn);function mn(){}function Pt(u){return ve(function(f){return jo(f),u(f.target.error),!1})}function jo(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var ei="storagemutated",jl="x-storagemutated-1",rr=Xo(null,ei),Wg=(xt.prototype._lock=function(){return K(!me.global),++this._reculock,this._reculock!==1||me.global||(me.lockOwnerFor=this),this},xt.prototype._unlock=function(){if(K(!me.global),--this._reculock==0)for(me.global||(me.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{it(u[1],u[0])}catch{}}return this},xt.prototype._locked=function(){return this._reculock&&me.lockOwnerFor!==this},xt.prototype.create=function(u){var f=this;if(!this.mode)return this;var h=this.db.idbdb,g=this.db._state.dbOpenError;if(K(!this.idbtrans),!u&&!h)switch(g&&g.name){case"DatabaseClosedError":throw new _e.DatabaseClosed(g);case"MissingAPIError":throw new _e.MissingAPI(g.message,g);default:throw new _e.OpenFailed(g)}if(!this.active)throw new _e.TransactionInactive;return K(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||h).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ve(function(y){jo(y),f._reject(u.error)}),u.onabort=ve(function(y){jo(y),f.active&&f._reject(new _e.Abort(u.error)),f.active=!1,f.on("abort").fire(y)}),u.oncomplete=ve(function(){f.active=!1,f._resolve(),"mutatedParts"in u&&rr.storagemutated.fire(u.mutatedParts)}),this},xt.prototype._promise=function(u,f,h){var g=this;if(u==="readwrite"&&this.mode!=="readwrite")return Oe(new _e.ReadOnly("Transaction is readonly"));if(!this.active)return Oe(new _e.TransactionInactive);if(this._locked())return new P(function(C,T){g._blockedFuncs.push([function(){g._promise(u,f,h).then(C,T)},me])});if(h)return He(function(){var C=new P(function(T,S){g._lock();var x=f(T,S,g);x&&x.then&&x.then(T,S)});return C.finally(function(){return g._unlock()}),C._lib=!0,C});var y=new P(function(C,T){var S=f(C,T,g);S&&S.then&&S.then(C,T)});return y._lib=!0,y},xt.prototype._root=function(){return this.parent?this.parent._root():this},xt.prototype.waitFor=function(u){var f,h=this._root(),g=P.resolve(u);h._waitingFor?h._waitingFor=h._waitingFor.then(function(){return g}):(h._waitingFor=g,h._waitingQueue=[],f=h.idbtrans.objectStore(h.storeNames[0]),function C(){for(++h._spinCount;h._waitingQueue.length;)h._waitingQueue.shift()();h._waitingFor&&(f.get(-1/0).onsuccess=C)}());var y=h._waitingFor;return new P(function(C,T){g.then(function(S){return h._waitingQueue.push(ve(C.bind(null,S)))},function(S){return h._waitingQueue.push(ve(T.bind(null,S)))}).finally(function(){h._waitingFor===y&&(h._waitingFor=null)})})},xt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new _e.Abort))},xt.prototype.table=function(u){var f=this._memoizedTables||(this._memoizedTables={});if(v(f,u))return f[u];var h=this.schema[u];if(!h)throw new _e.NotFound("Table "+u+" not part of transaction");return h=new this.db.Table(u,h,this),h.core=this.db.core.table(u),f[u]=h},xt);function xt(){}function eu(u,f,h,g,y,C,T,S){return{name:u,keyPath:f,unique:h,multi:g,auto:y,compound:C,src:(h&&!T?"&":"")+(g?"*":"")+(y?"++":"")+af(f),type:S}}function af(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function nu(u,f,h){return{name:u,primKey:f,indexes:h,mappedClass:null,idxByName:(g=function(y){return[y.name,y]},h.reduce(function(y,C,T){return T=g(C,T),T&&(y[T[0]]=T[1]),y},{}))};var g}var ni=function(u){try{return u.only([[]]),ni=function(){return[[]]},[[]]}catch{return ni=function(){return bn},bn}};function tu(u){return u==null?function(){}:typeof u=="string"?(f=u).split(".").length===1?function(h){return h[f]}:function(h){return J(h,f)}:function(h){return J(h,u)};var f}function cf(u){return[].slice.call(u)}var Yg=0;function ti(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function Qg(u,f,x){function g(U){if(U.type===3)return null;if(U.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=U.lower,N=U.upper,D=U.lowerOpen,U=U.upperOpen;return M===void 0?N===void 0?null:f.upperBound(N,!!U):N===void 0?f.lowerBound(M,!!D):f.bound(M,N,!!D,!!U)}function y(F){var M,N=F.name;return{name:N,schema:F,mutate:function(D){var U=D.trans,q=D.type,H=D.keys,$=D.values,z=D.range;return new Promise(function(Z,te){Z=ve(Z);var Q=U.objectStore(N),j=Q.keyPath==null,re=q==="put"||q==="add";if(!re&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var ne,fe=(H||$||{length:1}).length;if(H&&$&&H.length!==$.length)throw new Error("Given keys array must have same length as given values array.");if(fe===0)return Z({numFailures:0,failures:{},results:[],lastResult:void 0});function Ae(Dn){++Wn,jo(Dn)}var ke=[],Pe=[],Wn=0;if(q==="deleteRange"){if(z.type===4)return Z({numFailures:Wn,failures:Pe,results:[],lastResult:void 0});z.type===3?ke.push(ne=Q.clear()):ke.push(ne=Q.delete(g(z)))}else{var j=re?j?[$,H]:[$,null]:[H,null],we=j[0],In=j[1];if(re)for(var An=0;An<fe;++An)ke.push(ne=In&&In[An]!==void 0?Q[q](we[An],In[An]):Q[q](we[An])),ne.onerror=Ae;else for(An=0;An<fe;++An)ke.push(ne=Q[q](we[An])),ne.onerror=Ae}function _s(Dn){Dn=Dn.target.result,ke.forEach(function(Ur,Cu){return Ur.error!=null&&(Pe[Cu]=Ur.error)}),Z({numFailures:Wn,failures:Pe,results:q==="delete"?H:ke.map(function(Ur){return Ur.result}),lastResult:Dn})}ne.onerror=function(Dn){Ae(Dn),_s(Dn)},ne.onsuccess=_s})},getMany:function(D){var U=D.trans,q=D.keys;return new Promise(function(H,$){H=ve(H);for(var z,Z=U.objectStore(N),te=q.length,Q=new Array(te),j=0,re=0,ne=function(ke){ke=ke.target,Q[ke._pos]=ke.result,++re===j&&H(Q)},fe=Pt($),Ae=0;Ae<te;++Ae)q[Ae]!=null&&((z=Z.get(q[Ae]))._pos=Ae,z.onsuccess=ne,z.onerror=fe,++j);j===0&&H(Q)})},get:function(D){var U=D.trans,q=D.key;return new Promise(function(H,$){H=ve(H);var z=U.objectStore(N).get(q);z.onsuccess=function(Z){return H(Z.target.result)},z.onerror=Pt($)})},query:(M=R,function(D){return new Promise(function(U,q){U=ve(U);var H,$,z,j=D.trans,Z=D.values,te=D.limit,ne=D.query,Q=te===1/0?void 0:te,re=ne.index,ne=ne.range,j=j.objectStore(N),re=re.isPrimaryKey?j:j.index(re.name),ne=g(ne);if(te===0)return U({result:[]});M?((Q=Z?re.getAll(ne,Q):re.getAllKeys(ne,Q)).onsuccess=function(fe){return U({result:fe.target.result})},Q.onerror=Pt(q)):(H=0,$=!Z&&"openKeyCursor"in re?re.openKeyCursor(ne):re.openCursor(ne),z=[],$.onsuccess=function(fe){var Ae=$.result;return Ae?(z.push(Z?Ae.value:Ae.primaryKey),++H===te?U({result:z}):void Ae.continue()):U({result:z})},$.onerror=Pt(q))})}),openCursor:function(D){var U=D.trans,q=D.values,H=D.query,$=D.reverse,z=D.unique;return new Promise(function(Z,te){Z=ve(Z);var re=H.index,Q=H.range,j=U.objectStore(N),j=re.isPrimaryKey?j:j.index(re.name),re=$?z?"prevunique":"prev":z?"nextunique":"next",ne=!q&&"openKeyCursor"in j?j.openKeyCursor(g(Q),re):j.openCursor(g(Q),re);ne.onerror=Pt(te),ne.onsuccess=ve(function(fe){var Ae,ke,Pe,Wn,we=ne.result;we?(we.___id=++Yg,we.done=!1,Ae=we.continue.bind(we),ke=(ke=we.continuePrimaryKey)&&ke.bind(we),Pe=we.advance.bind(we),Wn=function(){throw new Error("Cursor not stopped")},we.trans=U,we.stop=we.continue=we.continuePrimaryKey=we.advance=function(){throw new Error("Cursor not started")},we.fail=ve(te),we.next=function(){var In=this,An=1;return this.start(function(){return An--?In.continue():In.stop()}).then(function(){return In})},we.start=function(In){function An(){if(ne.result)try{In()}catch(Dn){we.fail(Dn)}else we.done=!0,we.start=function(){throw new Error("Cursor behind last entry")},we.stop()}var _s=new Promise(function(Dn,Ur){Dn=ve(Dn),ne.onerror=Pt(Ur),we.fail=Ur,we.stop=function(Cu){we.stop=we.continue=we.continuePrimaryKey=we.advance=Wn,Dn(Cu)}});return ne.onsuccess=ve(function(Dn){ne.onsuccess=An,An()}),we.continue=Ae,we.continuePrimaryKey=ke,we.advance=Pe,An(),_s},Z(we)):Z(null)},te)})},count:function(D){var U=D.query,q=D.trans,H=U.index,$=U.range;return new Promise(function(z,Z){var te=q.objectStore(N),Q=H.isPrimaryKey?te:te.index(H.name),te=g($),Q=te?Q.count(te):Q.count();Q.onsuccess=ve(function(j){return z(j.target.result)}),Q.onerror=Pt(Z)})}}}var C,T,S,L=(T=x,S=cf((C=u).objectStoreNames),{schema:{name:C.name,tables:S.map(function(F){return T.objectStore(F)}).map(function(F){var M=F.keyPath,U=F.autoIncrement,N=c(M),D={},U={name:F.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:M==null,compound:N,keyPath:M,autoIncrement:U,unique:!0,extractKey:tu(M)},indexes:cf(F.indexNames).map(function(q){return F.index(q)}).map(function(z){var H=z.name,$=z.unique,Z=z.multiEntry,z=z.keyPath,Z={name:H,compound:c(z),keyPath:z,unique:$,multiEntry:Z,extractKey:tu(z)};return D[ti(z)]=Z}),getIndexByKeyPath:function(q){return D[ti(q)]}};return D[":id"]=U.primaryKey,M!=null&&(D[ti(M)]=U.primaryKey),U})},hasGetAll:0<S.length&&"getAll"in T.objectStore(S[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=L.schema,R=L.hasGetAll,L=x.tables.map(y),k={};return L.forEach(function(F){return k[F.name]=F}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(F){if(!k[F])throw new Error("Table '".concat(F,"' not found"));return k[F]},MIN_KEY:-1/0,MAX_KEY:ni(f),schema:x}}function Xg(u,f,h,g){var y=h.IDBKeyRange;return h.indexedDB,{dbcore:(g=Qg(f,y,g),u.dbcore.reduce(function(C,T){return T=T.create,r(r({},C),T(C))},g))}}function us(u,g){var h=g.db,g=Xg(u._middlewares,h,u._deps,g);u.core=g.dbcore,u.tables.forEach(function(y){var C=y.name;u.core.schema.tables.some(function(T){return T.name===C})&&(y.core=u.core.table(C),u[C]instanceof u.Table&&(u[C].core=y.core))})}function as(u,f,h,g){h.forEach(function(y){var C=g[y];f.forEach(function(T){var S=function x(R,L){return Y(R,L)||(R=p(R))&&x(R,L)}(T,y);(!S||"value"in S&&S.value===void 0)&&(T===u.Transaction.prototype||T instanceof u.Transaction?V(T,y,{get:function(){return this.table(y)},set:function(x){A(this,y,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):T[y]=new u.Table(y,C))})})}function ru(u,f){f.forEach(function(h){for(var g in h)h[g]instanceof u.Table&&delete h[g]})}function Zg(u,f){return u._cfg.version-f._cfg.version}function jg(u,f,h,g){var y=u._dbSchema;h.objectStoreNames.contains("$meta")&&!y.$meta&&(y.$meta=nu("$meta",df("")[0],[]),u._storeNames.push("$meta"));var C=u._createTransaction("readwrite",u._storeNames,y);C.create(h),C._completion.catch(g);var T=C._reject.bind(C),S=me.transless||me;He(function(){return me.trans=C,me.transless=S,f!==0?(us(u,h),R=f,((x=C).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(L){return L??R}):P.resolve(R)).then(function(L){return F=L,M=C,N=h,D=[],L=(k=u)._versions,U=k._dbSchema=fs(0,k.idbdb,N),(L=L.filter(function(q){return q._cfg.version>=F})).length!==0?(L.forEach(function(q){D.push(function(){var H=U,$=q._cfg.dbschema;ds(k,H,N),ds(k,$,N),U=k._dbSchema=$;var z=ou(H,$);z.add.forEach(function(re){iu(N,re[0],re[1].primKey,re[1].indexes)}),z.change.forEach(function(re){if(re.recreate)throw new _e.Upgrade("Not yet support for changing primary key");var ne=N.objectStore(re.name);re.add.forEach(function(fe){return cs(ne,fe)}),re.change.forEach(function(fe){ne.deleteIndex(fe.name),cs(ne,fe)}),re.del.forEach(function(fe){return ne.deleteIndex(fe)})});var Z=q._cfg.contentUpgrade;if(Z&&q._cfg.version>F){us(k,N),M._memoizedTables={};var te=oe($);z.del.forEach(function(re){te[re]=H[re]}),ru(k,[k.Transaction.prototype]),as(k,[k.Transaction.prototype],l(te),te),M.schema=te;var Q,j=ze(Z);return j&&un(),z=P.follow(function(){var re;(Q=Z(M))&&j&&(re=dn.bind(null,null),Q.then(re,re))}),Q&&typeof Q.then=="function"?P.resolve(Q):z.then(function(){return Q})}}),D.push(function(H){var $,z,Z=q._cfg.dbschema;$=Z,z=H,[].slice.call(z.db.objectStoreNames).forEach(function(te){return $[te]==null&&z.db.deleteObjectStore(te)}),ru(k,[k.Transaction.prototype]),as(k,[k.Transaction.prototype],k._storeNames,k._dbSchema),M.schema=k._dbSchema}),D.push(function(H){k.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(k.idbdb.version/10)===q._cfg.version?(k.idbdb.deleteObjectStore("$meta"),delete k._dbSchema.$meta,k._storeNames=k._storeNames.filter(function($){return $!=="$meta"})):H.objectStore("$meta").put(q._cfg.version,"version"))})}),function q(){return D.length?P.resolve(D.shift()(M.idbtrans)).then(q):P.resolve()}().then(function(){ff(U,N)})):P.resolve();var k,F,M,N,D,U}).catch(T)):(l(y).forEach(function(L){iu(h,L,y[L].primKey,y[L].indexes)}),us(u,h),void P.follow(function(){return u.on.populate.fire(C)}).catch(T));var x,R})}function ey(u,f){ff(u._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var h=fs(0,u.idbdb,f);ds(u,u._dbSchema,f);for(var g=0,y=ou(h,u._dbSchema).change;g<y.length;g++){var C=function(T){if(T.change.length||T.recreate)return console.warn("Unable to patch indexes of table ".concat(T.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=f.objectStore(T.name);T.add.forEach(function(x){ot&&console.debug("Dexie upgrade patch: Creating missing index ".concat(T.name,".").concat(x.src)),cs(S,x)})}(y[g]);if(typeof C=="object")return C.value}}function ou(u,f){var h,g={del:[],add:[],change:[]};for(h in u)f[h]||g.del.push(h);for(h in f){var y=u[h],C=f[h];if(y){var T={name:h,def:C,recreate:!1,del:[],add:[],change:[]};if(""+(y.primKey.keyPath||"")!=""+(C.primKey.keyPath||"")||y.primKey.auto!==C.primKey.auto)T.recreate=!0,g.change.push(T);else{var S=y.idxByName,x=C.idxByName,R=void 0;for(R in S)x[R]||T.del.push(R);for(R in x){var L=S[R],k=x[R];L?L.src!==k.src&&T.change.push(k):T.add.push(k)}(0<T.del.length||0<T.add.length||0<T.change.length)&&g.change.push(T)}}else g.add.push([h,C])}return g}function iu(u,f,h,g){var y=u.db.createObjectStore(f,h.keyPath?{keyPath:h.keyPath,autoIncrement:h.auto}:{autoIncrement:h.auto});return g.forEach(function(C){return cs(y,C)}),y}function ff(u,f){l(u).forEach(function(h){f.db.objectStoreNames.contains(h)||(ot&&console.debug("Dexie: Creating missing table",h),iu(f,h,u[h].primKey,u[h].indexes))})}function cs(u,f){u.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function fs(u,f,h){var g={};return E(f.objectStoreNames,0).forEach(function(y){for(var C=h.objectStore(y),T=eu(af(R=C.keyPath),R||"",!0,!1,!!C.autoIncrement,R&&typeof R!="string",!0),S=[],x=0;x<C.indexNames.length;++x){var L=C.index(C.indexNames[x]),R=L.keyPath,L=eu(L.name,R,!!L.unique,!!L.multiEntry,!1,R&&typeof R!="string",!1);S.push(L)}g[y]=nu(y,T,S)}),g}function ds(u,f,h){for(var g=h.db.objectStoreNames,y=0;y<g.length;++y){var C=g[y],T=h.objectStore(C);u._hasGetAll="getAll"in T;for(var S=0;S<T.indexNames.length;++S){var x=T.indexNames[S],R=T.index(x).keyPath,L=typeof R=="string"?R:"["+E(R).join("+")+"]";!f[C]||(R=f[C].idxByName[L])&&(R.name=x,delete f[C].idxByName[L],f[C].idxByName[x]=R)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function df(u){return u.split(",").map(function(f,h){var C=f.split(":"),g=(y=C[1])===null||y===void 0?void 0:y.trim(),y=(f=C[0].trim()).replace(/([&*]|\+\+)/g,""),C=/^\[/.test(y)?y.match(/^\[(.*)\]$/)[1].split("+"):y;return eu(y,C||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),c(C),h===0,g)})}var ny=(so.prototype._createTableSchema=nu,so.prototype._parseIndexSyntax=df,so.prototype._parseStoresSpec=function(u,f){var h=this;l(u).forEach(function(g){if(u[g]!==null){var y=h._parseIndexSyntax(u[g]),C=y.shift();if(!C)throw new _e.Schema("Invalid schema for table "+g+": "+u[g]);if(C.unique=!0,C.multi)throw new _e.Schema("Primary key cannot be multiEntry*");y.forEach(function(T){if(T.auto)throw new _e.Schema("Only primary key can be marked as autoIncrement (++)");if(!T.keyPath)throw new _e.Schema("Index must have a name and cannot be an empty string")}),y=h._createTableSchema(g,C,y),f[g]=y}})},so.prototype.stores=function(h){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,h):h;var h=f._versions,g={},y={};return h.forEach(function(C){d(g,C._cfg.storesSource),y=C._cfg.dbschema={},C._parseStoresSpec(g,y)}),f._dbSchema=y,ru(f,[f._allTables,f,f.Transaction.prototype]),as(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],l(y),y),f._storeNames=l(y),this},so.prototype.upgrade=function(u){return this._cfg.contentUpgrade=kr(this._cfg.contentUpgrade||Be,u),this},so);function so(){}function su(u,f){var h=u._dbNamesDB;return h||(h=u._dbNamesDB=new $t(Kt,{addons:[],indexedDB:u,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),h.table("dbnames")}function lu(u){return u&&typeof u.databases=="function"}function uu(u){return He(function(){return me.letThrough=!0,u()})}function au(u){return!("from"in u)}var wn=function(u,f){if(!this){var h=new wn;return u&&"d"in u&&d(h,u),h}d(this,arguments.length?{d:1,from:u,to:1<arguments.length?f:u}:{d:0})};function ri(u,f,h){var g=De(f,h);if(!isNaN(g)){if(0<g)throw RangeError();if(au(u))return d(u,{from:f,to:h,d:1});var y=u.l,g=u.r;if(De(h,u.from)<0)return y?ri(y,f,h):u.l={from:f,to:h,d:1,l:null,r:null},hf(u);if(0<De(f,u.to))return g?ri(g,f,h):u.r={from:f,to:h,d:1,l:null,r:null},hf(u);De(f,u.from)<0&&(u.from=f,u.l=null,u.d=g?g.d+1:1),0<De(h,u.to)&&(u.to=h,u.r=null,u.d=u.l?u.l.d+1:1),h=!u.r,y&&!u.l&&oi(u,y),g&&h&&oi(u,g)}}function oi(u,f){au(f)||function h(g,x){var C=x.from,T=x.to,S=x.l,x=x.r;ri(g,C,T),S&&h(g,S),x&&h(g,x)}(u,f)}function pf(u,f){var h=ps(f),g=h.next();if(g.done)return!1;for(var y=g.value,C=ps(u),T=C.next(y.from),S=T.value;!g.done&&!T.done;){if(De(S.from,y.to)<=0&&0<=De(S.to,y.from))return!0;De(y.from,S.from)<0?y=(g=h.next(S.from)).value:S=(T=C.next(y.from)).value}return!1}function ps(u){var f=au(u)?null:{s:0,n:u};return{next:function(h){for(var g=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,g)for(;f.n.l&&De(h,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!g||De(h,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function hf(u){var f,h,g=(((f=u.r)===null||f===void 0?void 0:f.d)||0)-(((h=u.l)===null||h===void 0?void 0:h.d)||0),y=1<g?"r":g<-1?"l":"";y&&(f=y=="r"?"l":"r",h=r({},u),g=u[y],u.from=g.from,u.to=g.to,u[y]=g[y],h[y]=g[f],(u[f]=h).d=mf(h)),u.d=mf(u)}function mf(h){var f=h.r,h=h.l;return(f?h?Math.max(f.d,h.d):f.d:h?h.d:0)+1}function hs(u,f){return l(f).forEach(function(h){u[h]?oi(u[h],f[h]):u[h]=function g(y){var C,T,S={};for(C in y)v(y,C)&&(T=y[C],S[C]=!T||typeof T!="object"||Ne.has(T.constructor)?T:g(T));return S}(f[h])}),u}function cu(u,f){return u.all||f.all||Object.keys(u).some(function(h){return f[h]&&pf(f[h],u[h])})}_(wn.prototype,((st={add:function(u){return oi(this,u),this},addKey:function(u){return ri(this,u,u),this},addKeys:function(u){var f=this;return u.forEach(function(h){return ri(f,h,h)}),this},hasKey:function(u){var f=ps(this).next(u).value;return f&&De(f.from,u)<=0&&0<=De(f.to,u)}})[be]=function(){return ps(this)},st));var Dr={},fu={},du=!1;function ms(u){hs(fu,u),du||(du=!0,setTimeout(function(){du=!1,pu(fu,!(fu={}))},0))}function pu(u,f){f===void 0&&(f=!1);var h=new Set;if(u.all)for(var g=0,y=Object.values(Dr);g<y.length;g++)gf(T=y[g],u,h,f);else for(var C in u){var T,S=/^idb\:\/\/(.*)\/(.*)\//.exec(C);S&&(C=S[1],S=S[2],(T=Dr["idb://".concat(C,"/").concat(S)])&&gf(T,u,h,f))}h.forEach(function(x){return x()})}function gf(u,f,h,g){for(var y=[],C=0,T=Object.entries(u.queries.query);C<T.length;C++){for(var S=T[C],x=S[0],R=[],L=0,k=S[1];L<k.length;L++){var F=k[L];cu(f,F.obsSet)?F.subscribers.forEach(function(U){return h.add(U)}):g&&R.push(F)}g&&y.push([x,R])}if(g)for(var M=0,N=y;M<N.length;M++){var D=N[M],x=D[0],R=D[1];u.queries.query[x]=R}}function ty(u){var f=u._state,h=u._deps.indexedDB;if(f.isBeingOpened||u.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?Oe(f.dbOpenError):u});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var g=f.openCanceller,y=Math.round(10*u.verno),C=!1;function T(){if(f.openCanceller!==g)throw new _e.DatabaseClosed("db.open() was cancelled")}function S(){return new P(function(F,M){if(T(),!h)throw new _e.MissingAPI;var N=u.name,D=f.autoSchema||!y?h.open(N):h.open(N,y);if(!D)throw new _e.MissingAPI;D.onerror=Pt(M),D.onblocked=ve(u._fireOnBlocked),D.onupgradeneeded=ve(function(U){var q;L=D.transaction,f.autoSchema&&!u._options.allowEmptyDB?(D.onerror=jo,L.abort(),D.result.close(),(q=h.deleteDatabase(N)).onsuccess=q.onerror=ve(function(){M(new _e.NoSuchDatabase("Database ".concat(N," doesnt exist")))})):(L.onerror=Pt(M),U=U.oldVersion>Math.pow(2,62)?0:U.oldVersion,k=U<1,u.idbdb=D.result,C&&ey(u,L),jg(u,U/10,L,M))},M),D.onsuccess=ve(function(){L=null;var U,q,H,$,z,Z=u.idbdb=D.result,te=E(Z.objectStoreNames);if(0<te.length)try{var Q=Z.transaction(($=te).length===1?$[0]:$,"readonly");if(f.autoSchema)q=Z,H=Q,(U=u).verno=q.version/10,H=U._dbSchema=fs(0,q,H),U._storeNames=E(q.objectStoreNames,0),as(U,[U._allTables],l(H),H);else if(ds(u,u._dbSchema,Q),((z=ou(fs(0,(z=u).idbdb,Q),z._dbSchema)).add.length||z.change.some(function(j){return j.add.length||j.change.length}))&&!C)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Z.close(),y=Z.version+1,C=!0,F(S());us(u,Q)}catch{}gt.push(u),Z.onversionchange=ve(function(j){f.vcFired=!0,u.on("versionchange").fire(j)}),Z.onclose=ve(function(){u.close({disableAutoOpen:!1})}),k&&(z=u._deps,Q=N,Z=z.indexedDB,z=z.IDBKeyRange,lu(Z)||Q===Kt||su(Z,z).put({name:Q}).catch(Be)),F()},M)}).catch(function(F){switch(F==null?void 0:F.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(0<y)return y=0,S()}return P.reject(F)})}var x,R=f.dbReadyResolve,L=null,k=!1;return P.race([g,(typeof navigator>"u"?P.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(F){function M(){return indexedDB.databases().finally(F)}x=setInterval(M,100),M()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(S)]).then(function(){return T(),f.onReadyBeingFired=[],P.resolve(uu(function(){return u.on.ready.fire(u.vip)})).then(function F(){if(0<f.onReadyBeingFired.length){var M=f.onReadyBeingFired.reduce(kr,Be);return f.onReadyBeingFired=[],P.resolve(uu(function(){return M(u.vip)})).then(F)}})}).finally(function(){f.openCanceller===g&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(F){f.dbOpenError=F;try{L&&L.abort()}catch{}return g===f.openCanceller&&u._close(),Oe(F)}).finally(function(){f.openComplete=!0,R()}).then(function(){var F;return k&&(F={},u.tables.forEach(function(M){M.schema.indexes.forEach(function(N){N.name&&(F["idb://".concat(u.name,"/").concat(M.name,"/").concat(N.name)]=new wn(-1/0,[[[]]]))}),F["idb://".concat(u.name,"/").concat(M.name,"/")]=F["idb://".concat(u.name,"/").concat(M.name,"/:dels")]=new wn(-1/0,[[[]]])}),rr(ei).fire(F),pu(F,!0)),u})}function hu(u){function f(C){return u.next(C)}var h=y(f),g=y(function(C){return u.throw(C)});function y(C){return function(x){var S=C(x),x=S.value;return S.done?x:x&&typeof x.then=="function"?x.then(h,g):c(x)?Promise.all(x).then(h,g):h(x)}}return y(f)()}function gs(u,f,h){for(var g=c(u)?u.slice():[u],y=0;y<h;++y)g.push(f);return g}var ry={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return r(r({},u),{table:function(f){var h=u.table(f),g=h.schema,y={},C=[];function T(k,F,M){var N=ti(k),D=y[N]=y[N]||[],U=k==null?0:typeof k=="string"?1:k.length,q=0<F,q=r(r({},M),{name:q?"".concat(N,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:q,keyTail:F,keyLength:U,extractKey:tu(k),unique:!q&&M.unique});return D.push(q),q.isPrimaryKey||C.push(q),1<U&&T(U===2?k[0]:k.slice(0,U-1),F+1,M),D.sort(function(H,$){return H.keyTail-$.keyTail}),q}f=T(g.primaryKey.keyPath,0,g.primaryKey),y[":id"]=[f];for(var S=0,x=g.indexes;S<x.length;S++){var R=x[S];T(R.keyPath,0,R)}function L(k){var F,M=k.query.index;return M.isVirtual?r(r({},k),{query:{index:M.lowLevelIndex,range:(F=k.query.range,M=M.keyTail,{type:F.type===1?2:F.type,lower:gs(F.lower,F.lowerOpen?u.MAX_KEY:u.MIN_KEY,M),lowerOpen:!0,upper:gs(F.upper,F.upperOpen?u.MIN_KEY:u.MAX_KEY,M),upperOpen:!0})}}):k}return r(r({},h),{schema:r(r({},g),{primaryKey:f,indexes:C,getIndexByKeyPath:function(k){return(k=y[ti(k)])&&k[0]}}),count:function(k){return h.count(L(k))},query:function(k){return h.query(L(k))},openCursor:function(k){var F=k.query.index,M=F.keyTail,N=F.isVirtual,D=F.keyLength;return N?h.openCursor(L(k)).then(function(q){return q&&U(q)}):h.openCursor(k);function U(q){return Object.create(q,{continue:{value:function(H){H!=null?q.continue(gs(H,k.reverse?u.MAX_KEY:u.MIN_KEY,M)):k.unique?q.continue(q.key.slice(0,D).concat(k.reverse?u.MIN_KEY:u.MAX_KEY,M)):q.continue()}},continuePrimaryKey:{value:function(H,$){q.continuePrimaryKey(gs(H,u.MAX_KEY,M),$)}},primaryKey:{get:function(){return q.primaryKey}},key:{get:function(){var H=q.key;return D===1?H[0]:H.slice(0,D)}},value:{get:function(){return q.value}}})}}})}})}};function mu(u,f,h,g){return h=h||{},g=g||"",l(u).forEach(function(y){var C,T,S;v(f,y)?(C=u[y],T=f[y],typeof C=="object"&&typeof T=="object"&&C&&T?(S=nt(C))!==nt(T)?h[g+y]=f[y]:S==="Object"?mu(C,T,h,g+y+"."):C!==T&&(h[g+y]=f[y]):C!==T&&(h[g+y]=f[y])):h[g+y]=void 0}),l(f).forEach(function(y){v(u,y)||(h[g+y]=f[y])}),h}function gu(u,f){return f.type==="delete"?f.keys:f.keys||f.values.map(u.extractKey)}var oy={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return r(r({},u),{table:function(f){var h=u.table(f),g=h.schema.primaryKey;return r(r({},h),{mutate:function(y){var C=me.trans,T=C.table(f).hook,S=T.deleting,x=T.creating,R=T.updating;switch(y.type){case"add":if(x.fire===Be)break;return C._promise("readwrite",function(){return L(y)},!0);case"put":if(x.fire===Be&&R.fire===Be)break;return C._promise("readwrite",function(){return L(y)},!0);case"delete":if(S.fire===Be)break;return C._promise("readwrite",function(){return L(y)},!0);case"deleteRange":if(S.fire===Be)break;return C._promise("readwrite",function(){return function k(F,M,N){return h.query({trans:F,values:!1,query:{index:g,range:M},limit:N}).then(function(D){var U=D.result;return L({type:"delete",keys:U,trans:F}).then(function(q){return 0<q.numFailures?Promise.reject(q.failures[0]):U.length<N?{failures:[],numFailures:0,lastResult:void 0}:k(F,r(r({},M),{lower:U[U.length-1],lowerOpen:!0}),N)})})}(y.trans,y.range,1e4)},!0)}return h.mutate(y);function L(k){var F,M,N,D=me.trans,U=k.keys||gu(g,k);if(!U)throw new Error("Keys missing");return(k=k.type==="add"||k.type==="put"?r(r({},k),{keys:U}):r({},k)).type!=="delete"&&(k.values=o([],k.values)),k.keys&&(k.keys=o([],k.keys)),F=h,N=U,((M=k).type==="add"?Promise.resolve([]):F.getMany({trans:M.trans,keys:N,cache:"immutable"})).then(function(q){var H=U.map(function($,z){var Z,te,Q,j=q[z],re={onerror:null,onsuccess:null};return k.type==="delete"?S.fire.call(re,$,j,D):k.type==="add"||j===void 0?(Z=x.fire.call(re,$,k.values[z],D),$==null&&Z!=null&&(k.keys[z]=$=Z,g.outbound||b(k.values[z],g.keyPath,$))):(Z=mu(j,k.values[z]),(te=R.fire.call(re,Z,$,j,D))&&(Q=k.values[z],Object.keys(te).forEach(function(ne){v(Q,ne)?Q[ne]=te[ne]:b(Q,ne,te[ne])}))),re});return h.mutate(k).then(function($){for(var z=$.failures,Z=$.results,te=$.numFailures,$=$.lastResult,Q=0;Q<U.length;++Q){var j=(Z||U)[Q],re=H[Q];j==null?re.onerror&&re.onerror(z[Q]):re.onsuccess&&re.onsuccess(k.type==="put"&&q[Q]?k.values[Q]:j)}return{failures:z,results:Z,numFailures:te,lastResult:$}}).catch(function($){return H.forEach(function(z){return z.onerror&&z.onerror($)}),Promise.reject($)})})}}})}})}};function yf(u,f,h){try{if(!f||f.keys.length<u.length)return null;for(var g=[],y=0,C=0;y<f.keys.length&&C<u.length;++y)De(f.keys[y],u[C])===0&&(g.push(h?$e(f.values[y]):f.values[y]),++C);return g.length===u.length?g:null}catch{return null}}var iy={stack:"dbcore",level:-1,create:function(u){return{table:function(f){var h=u.table(f);return r(r({},h),{getMany:function(g){if(!g.cache)return h.getMany(g);var y=yf(g.keys,g.trans._cache,g.cache==="clone");return y?P.resolve(y):h.getMany(g).then(function(C){return g.trans._cache={keys:g.keys,values:g.cache==="clone"?$e(C):C},C})},mutate:function(g){return g.type!=="add"&&(g.trans._cache=null),h.mutate(g)}})}}}};function vf(u,f){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function _f(u,f){switch(u){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var sy={stack:"dbcore",level:0,name:"Observability",create:function(u){var f=u.schema.name,h=new wn(u.MIN_KEY,u.MAX_KEY);return r(r({},u),{transaction:function(g,y,C){if(me.subscr&&y!=="readonly")throw new _e.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(me.querier));return u.transaction(g,y,C)},table:function(g){var y=u.table(g),C=y.schema,T=C.primaryKey,k=C.indexes,S=T.extractKey,x=T.outbound,R=T.autoIncrement&&k.filter(function(M){return M.compound&&M.keyPath.includes(T.keyPath)}),L=r(r({},y),{mutate:function(M){function N(ne){return ne="idb://".concat(f,"/").concat(g,"/").concat(ne),$[ne]||($[ne]=new wn)}var D,U,q,H=M.trans,$=M.mutatedParts||(M.mutatedParts={}),z=N(""),Z=N(":dels"),te=M.type,re=M.type==="deleteRange"?[M.range]:M.type==="delete"?[M.keys]:M.values.length<50?[gu(T,M).filter(function(ne){return ne}),M.values]:[],Q=re[0],j=re[1],re=M.trans._cache;return c(Q)?(z.addKeys(Q),(re=te==="delete"||Q.length===j.length?yf(Q,re):null)||Z.addKeys(Q),(re||j)&&(D=N,U=re,q=j,C.indexes.forEach(function(ne){var fe=D(ne.name||"");function Ae(Pe){return Pe!=null?ne.extractKey(Pe):null}function ke(Pe){return ne.multiEntry&&c(Pe)?Pe.forEach(function(Wn){return fe.addKey(Wn)}):fe.addKey(Pe)}(U||q).forEach(function(Pe,In){var we=U&&Ae(U[In]),In=q&&Ae(q[In]);De(we,In)!==0&&(we!=null&&ke(we),In!=null&&ke(In))})}))):Q?(j={from:(j=Q.lower)!==null&&j!==void 0?j:u.MIN_KEY,to:(j=Q.upper)!==null&&j!==void 0?j:u.MAX_KEY},Z.add(j),z.add(j)):(z.add(h),Z.add(h),C.indexes.forEach(function(ne){return N(ne.name).add(h)})),y.mutate(M).then(function(ne){return!Q||M.type!=="add"&&M.type!=="put"||(z.addKeys(ne.results),R&&R.forEach(function(fe){for(var Ae=M.values.map(function(we){return fe.extractKey(we)}),ke=fe.keyPath.findIndex(function(we){return we===T.keyPath}),Pe=0,Wn=ne.results.length;Pe<Wn;++Pe)Ae[Pe][ke]=ne.results[Pe];N(fe.name).addKeys(Ae)})),H.mutatedParts=hs(H.mutatedParts||{},$),ne})}}),k=function(N){var D=N.query,N=D.index,D=D.range;return[N,new wn((N=D.lower)!==null&&N!==void 0?N:u.MIN_KEY,(D=D.upper)!==null&&D!==void 0?D:u.MAX_KEY)]},F={get:function(M){return[T,new wn(M.key)]},getMany:function(M){return[T,new wn().addKeys(M.keys)]},count:k,query:k,openCursor:k};return l(F).forEach(function(M){L[M]=function(N){var D=me.subscr,U=!!D,q=vf(me,y)&&_f(M,N)?N.obsSet={}:D;if(U){var H=function(j){return j="idb://".concat(f,"/").concat(g,"/").concat(j),q[j]||(q[j]=new wn)},$=H(""),z=H(":dels"),D=F[M](N),U=D[0],D=D[1];if((M==="query"&&U.isPrimaryKey&&!N.values?z:H(U.name||"")).add(D),!U.isPrimaryKey){if(M!=="count"){var Z=M==="query"&&x&&N.values&&y.query(r(r({},N),{values:!1}));return y[M].apply(this,arguments).then(function(j){if(M==="query"){if(x&&N.values)return Z.then(function(Ae){return Ae=Ae.result,$.addKeys(Ae),j});var re=N.values?j.result.map(S):j.result;(N.values?$:z).addKeys(re)}else if(M==="openCursor"){var ne=j,fe=N.values;return ne&&Object.create(ne,{key:{get:function(){return z.addKey(ne.primaryKey),ne.key}},primaryKey:{get:function(){var Ae=ne.primaryKey;return z.addKey(Ae),Ae}},value:{get:function(){return fe&&$.addKey(ne.primaryKey),ne.value}}})}return j})}z.add(h)}}return y[M].apply(this,arguments)}}),L}})}};function Cf(u,f,h){if(h.numFailures===0)return f;if(f.type==="deleteRange")return null;var g=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return h.numFailures===g?null:(f=r({},f),c(f.keys)&&(f.keys=f.keys.filter(function(y,C){return!(C in h.failures)})),"values"in f&&c(f.values)&&(f.values=f.values.filter(function(y,C){return!(C in h.failures)})),f)}function yu(u,f){return h=u,((g=f).lower===void 0||(g.lowerOpen?0<De(h,g.lower):0<=De(h,g.lower)))&&(u=u,(f=f).upper===void 0||(f.upperOpen?De(u,f.upper)<0:De(u,f.upper)<=0));var h,g}function Tf(u,f,F,g,y,C){if(!F||F.length===0)return u;var T=f.query.index,S=T.multiEntry,x=f.query.range,R=g.schema.primaryKey.extractKey,L=T.extractKey,k=(T.lowLevelIndex||T).extractKey,F=F.reduce(function(M,N){var D=M,U=[];if(N.type==="add"||N.type==="put")for(var q=new wn,H=N.values.length-1;0<=H;--H){var $,z=N.values[H],Z=R(z);q.hasKey(Z)||($=L(z),(S&&c($)?$.some(function(ne){return yu(ne,x)}):yu($,x))&&(q.addKey(Z),U.push(z)))}switch(N.type){case"add":var te=new wn().addKeys(f.values?M.map(function(fe){return R(fe)}):M),D=M.concat(f.values?U.filter(function(fe){return fe=R(fe),!te.hasKey(fe)&&(te.addKey(fe),!0)}):U.map(function(fe){return R(fe)}).filter(function(fe){return!te.hasKey(fe)&&(te.addKey(fe),!0)}));break;case"put":var Q=new wn().addKeys(N.values.map(function(fe){return R(fe)}));D=M.filter(function(fe){return!Q.hasKey(f.values?R(fe):fe)}).concat(f.values?U:U.map(function(fe){return R(fe)}));break;case"delete":var j=new wn().addKeys(N.keys);D=M.filter(function(fe){return!j.hasKey(f.values?R(fe):fe)});break;case"deleteRange":var re=N.range;D=M.filter(function(fe){return!yu(R(fe),re)})}return D},u);return F===u?u:(F.sort(function(M,N){return De(k(M),k(N))||De(R(M),R(N))}),f.limit&&f.limit<1/0&&(F.length>f.limit?F.length=f.limit:u.length===f.limit&&F.length<f.limit&&(y.dirty=!0)),C?Object.freeze(F):F)}function Ef(u,f){return De(u.lower,f.lower)===0&&De(u.upper,f.upper)===0&&!!u.lowerOpen==!!f.lowerOpen&&!!u.upperOpen==!!f.upperOpen}function ly(u,f){return function(h,g,y,C){if(h===void 0)return g!==void 0?-1:0;if(g===void 0)return 1;if((g=De(h,g))===0){if(y&&C)return 0;if(y)return 1;if(C)return-1}return g}(u.lower,f.lower,u.lowerOpen,f.lowerOpen)<=0&&0<=function(h,g,y,C){if(h===void 0)return g!==void 0?1:0;if(g===void 0)return-1;if((g=De(h,g))===0){if(y&&C)return 0;if(y)return-1;if(C)return 1}return g}(u.upper,f.upper,u.upperOpen,f.upperOpen)}function uy(u,f,h,g){u.subscribers.add(h),g.addEventListener("abort",function(){var y,C;u.subscribers.delete(h),u.subscribers.size===0&&(y=u,C=f,setTimeout(function(){y.subscribers.size===0&&ie(C,y)},3e3))})}var ay={stack:"dbcore",level:0,name:"Cache",create:function(u){var f=u.schema.name;return r(r({},u),{transaction:function(h,g,y){var C,T,S=u.transaction(h,g,y);return g==="readwrite"&&(T=(C=new AbortController).signal,y=function(x){return function(){if(C.abort(),g==="readwrite"){for(var R=new Set,L=0,k=h;L<k.length;L++){var F=k[L],M=Dr["idb://".concat(f,"/").concat(F)];if(M){var N=u.table(F),D=M.optimisticOps.filter(function(fe){return fe.trans===S});if(S._explicit&&x&&S.mutatedParts)for(var U=0,q=Object.values(M.queries.query);U<q.length;U++)for(var H=0,$=(te=q[U]).slice();H<$.length;H++)cu((Q=$[H]).obsSet,S.mutatedParts)&&(ie(te,Q),Q.subscribers.forEach(function(fe){return R.add(fe)}));else if(0<D.length){M.optimisticOps=M.optimisticOps.filter(function(fe){return fe.trans!==S});for(var z=0,Z=Object.values(M.queries.query);z<Z.length;z++)for(var te,Q,j,re=0,ne=(te=Z[z]).slice();re<ne.length;re++)(Q=ne[re]).res!=null&&S.mutatedParts&&(x&&!Q.dirty?(j=Object.isFrozen(Q.res),j=Tf(Q.res,Q.req,D,N,Q,j),Q.dirty?(ie(te,Q),Q.subscribers.forEach(function(fe){return R.add(fe)})):j!==Q.res&&(Q.res=j,Q.promise=P.resolve({result:j}))):(Q.dirty&&ie(te,Q),Q.subscribers.forEach(function(fe){return R.add(fe)})))}}}R.forEach(function(fe){return fe()})}}},S.addEventListener("abort",y(!1),{signal:T}),S.addEventListener("error",y(!1),{signal:T}),S.addEventListener("complete",y(!0),{signal:T})),S},table:function(h){var g=u.table(h),y=g.schema.primaryKey;return r(r({},g),{mutate:function(C){var T=me.trans;if(y.outbound||T.db._options.cache==="disabled"||T.explicit||T.idbtrans.mode!=="readwrite")return g.mutate(C);var S=Dr["idb://".concat(f,"/").concat(h)];return S?(T=g.mutate(C),C.type!=="add"&&C.type!=="put"||!(50<=C.values.length||gu(y,C).some(function(x){return x==null}))?(S.optimisticOps.push(C),C.mutatedParts&&ms(C.mutatedParts),T.then(function(x){0<x.numFailures&&(ie(S.optimisticOps,C),(x=Cf(0,C,x))&&S.optimisticOps.push(x),C.mutatedParts&&ms(C.mutatedParts))}),T.catch(function(){ie(S.optimisticOps,C),C.mutatedParts&&ms(C.mutatedParts)})):T.then(function(x){var R=Cf(0,r(r({},C),{values:C.values.map(function(L,k){var F;return x.failures[k]?L:(L=(F=y.keyPath)!==null&&F!==void 0&&F.includes(".")?$e(L):r({},L),b(L,y.keyPath,x.results[k]),L)})}),x);S.optimisticOps.push(R),queueMicrotask(function(){return C.mutatedParts&&ms(C.mutatedParts)})}),T):g.mutate(C)},query:function(C){if(!vf(me,g)||!_f("query",C))return g.query(C);var T=((R=me.trans)===null||R===void 0?void 0:R.db._options.cache)==="immutable",k=me,S=k.requery,x=k.signal,R=function(N,D,U,q){var H=Dr["idb://".concat(N,"/").concat(D)];if(!H)return[];if(!(D=H.queries[U]))return[null,!1,H,null];var $=D[(q.query?q.query.index.name:null)||""];if(!$)return[null,!1,H,null];switch(U){case"query":var z=$.find(function(Z){return Z.req.limit===q.limit&&Z.req.values===q.values&&Ef(Z.req.query.range,q.query.range)});return z?[z,!0,H,$]:[$.find(function(Z){return("limit"in Z.req?Z.req.limit:1/0)>=q.limit&&(!q.values||Z.req.values)&&ly(Z.req.query.range,q.query.range)}),!1,H,$];case"count":return z=$.find(function(Z){return Ef(Z.req.query.range,q.query.range)}),[z,!!z,H,$]}}(f,h,"query",C),L=R[0],k=R[1],F=R[2],M=R[3];return L&&k?L.obsSet=C.obsSet:(k=g.query(C).then(function(N){var D=N.result;if(L&&(L.res=D),T){for(var U=0,q=D.length;U<q;++U)Object.freeze(D[U]);Object.freeze(D)}else N.result=$e(D);return N}).catch(function(N){return M&&L&&ie(M,L),Promise.reject(N)}),L={obsSet:C.obsSet,promise:k,subscribers:new Set,type:"query",req:C,dirty:!1},M?M.push(L):(M=[L],(F=F||(Dr["idb://".concat(f,"/").concat(h)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[C.query.index.name||""]=M)),uy(L,M,S,x),L.promise.then(function(N){return{result:Tf(N.result,C,F==null?void 0:F.optimisticOps,g,L,T)}})}})}})}};function ys(u,f){return new Proxy(u,{get:function(h,g,y){return g==="db"?f:Reflect.get(h,g,y)}})}var $t=(an.prototype.version=function(u){if(isNaN(u)||u<.1)throw new _e.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new _e.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var f=this._versions,h=f.filter(function(g){return g._cfg.version===u})[0];return h||(h=new this.Version(u),f.push(h),f.sort(Zg),h.stores({}),this._state.autoSchema=!1,h)},an.prototype._whenReady=function(u){var f=this;return this.idbdb&&(this._state.openComplete||me.letThrough||this._vip)?u():new P(function(h,g){if(f._state.openComplete)return g(new _e.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void g(new _e.DatabaseClosed);f.open().catch(Be)}f._state.dbReadyPromise.then(h,g)}).then(u)},an.prototype.use=function(u){var f=u.stack,h=u.create,g=u.level,y=u.name;return y&&this.unuse({stack:f,name:y}),u=this._middlewares[f]||(this._middlewares[f]=[]),u.push({stack:f,create:h,level:g??10,name:y}),u.sort(function(C,T){return C.level-T.level}),this},an.prototype.unuse=function(u){var f=u.stack,h=u.name,g=u.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(y){return g?y.create!==g:!!h&&y.name!==h})),this},an.prototype.open=function(){var u=this;return it(mt,function(){return ty(u)})},an.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var u=this._state,f=gt.indexOf(this);if(0<=f&&gt.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new P(function(h){u.dbReadyResolve=h}),u.openCanceller=new P(function(h,g){u.cancelOpen=g}))},an.prototype.close=function(h){var f=(h===void 0?{disableAutoOpen:!0}:h).disableAutoOpen,h=this._state;f?(h.isBeingOpened&&h.cancelOpen(new _e.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new _e.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},an.prototype.delete=function(u){var f=this;u===void 0&&(u={disableAutoOpen:!0});var h=0<arguments.length&&typeof arguments[0]!="object",g=this._state;return new P(function(y,C){function T(){f.close(u);var S=f._deps.indexedDB.deleteDatabase(f.name);S.onsuccess=ve(function(){var x,R,L;x=f._deps,R=f.name,L=x.indexedDB,x=x.IDBKeyRange,lu(L)||R===Kt||su(L,x).delete(R).catch(Be),y()}),S.onerror=Pt(C),S.onblocked=f._fireOnBlocked}if(h)throw new _e.InvalidArgument("Invalid closeOptions argument to db.delete()");g.isBeingOpened?g.dbReadyPromise.then(T):T()})},an.prototype.backendDB=function(){return this.idbdb},an.prototype.isOpen=function(){return this.idbdb!==null},an.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},an.prototype.hasFailed=function(){return this._state.dbOpenError!==null},an.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(an.prototype,"tables",{get:function(){var u=this;return l(this._allTables).map(function(f){return u._allTables[f]})},enumerable:!1,configurable:!0}),an.prototype.transaction=function(){var u=(function(f,h,g){var y=arguments.length;if(y<2)throw new _e.InvalidArgument("Too few arguments");for(var C=new Array(y-1);--y;)C[y-1]=arguments[y];return g=C.pop(),[f,ce(C),g]}).apply(this,arguments);return this._transaction.apply(this,u)},an.prototype._transaction=function(u,f,h){var g=this,y=me.trans;y&&y.db===this&&u.indexOf("!")===-1||(y=null);var C,T,S=u.indexOf("?")!==-1;u=u.replace("!","").replace("?","");try{if(T=f.map(function(R){if(R=R instanceof g.Table?R.name:R,typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),u=="r"||u===kt)C=kt;else{if(u!="rw"&&u!=Ql)throw new _e.InvalidArgument("Invalid transaction mode: "+u);C=Ql}if(y){if(y.mode===kt&&C===Ql){if(!S)throw new _e.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");y=null}y&&T.forEach(function(R){if(y&&y.storeNames.indexOf(R)===-1){if(!S)throw new _e.SubTransaction("Table "+R+" not included in parent transaction.");y=null}}),S&&y&&!y.active&&(y=null)}}catch(R){return y?y._promise(null,function(L,k){k(R)}):Oe(R)}var x=(function R(L,k,F,M,N){return P.resolve().then(function(){var D=me.transless||me,U=L._createTransaction(k,F,L._dbSchema,M);if(U.explicit=!0,D={trans:U,transless:D},M)U.idbtrans=M.idbtrans;else try{U.create(),U.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch($){return $.name===ht.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return R(L,k,F,null,N)})):Oe($)}var q,H=ze(N);return H&&un(),D=P.follow(function(){var $;(q=N.call(U,U))&&(H?($=dn.bind(null,null),q.then($,$)):typeof q.next=="function"&&typeof q.throw=="function"&&(q=hu(q)))},D),(q&&typeof q.then=="function"?P.resolve(q).then(function($){return U.active?$:Oe(new _e.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return q})).then(function($){return M&&U._resolve(),U._completion.then(function(){return $})}).catch(function($){return U._reject($),Oe($)})})}).bind(null,this,C,T,y,h);return y?y._promise(C,x,"lock"):me.trans?it(me.transless,function(){return g._whenReady(x)}):this._whenReady(x)},an.prototype.table=function(u){if(!v(this._allTables,u))throw new _e.InvalidTable("Table ".concat(u," does not exist"));return this._allTables[u]},an);function an(u,f){var h=this;this._middlewares={},this.verno=0;var g=an.dependencies;this._options=f=r({addons:an.addons,autoOpen:!0,indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},g=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var y,C,T,S,x,R={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Be,dbReadyPromise:null,cancelOpen:Be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};R.dbReadyPromise=new P(function(k){R.dbReadyResolve=k}),R.openCanceller=new P(function(k,F){R.cancelOpen=F}),this._state=R,this.name=u,this.on=Xo(this,"populate","blocked","versionchange","close",{ready:[kr,Be]}),this.once=function(k,F){var M=function(){for(var N=[],D=0;D<arguments.length;D++)N[D]=arguments[D];h.on(k).unsubscribe(M),F.apply(h,N)};return h.on(k,M)},this.on.ready.subscribe=w(this.on.ready.subscribe,function(k){return function(F,M){an.vip(function(){var N,D=h._state;D.openComplete?(D.dbOpenError||P.resolve().then(F),M&&k(F)):D.onReadyBeingFired?(D.onReadyBeingFired.push(F),M&&k(F)):(k(F),N=h,M||k(function U(){N.on.ready.unsubscribe(F),N.on.ready.unsubscribe(U)}))})}}),this.Collection=(y=this,Zo(Og.prototype,function(q,U){this.db=y;var M=Qc,N=null;if(U)try{M=U()}catch(H){N=H}var D=q._ctx,U=D.table,q=U.hook.reading.fire;this._ctx={table:U,index:D.index,isPrimKey:!D.index||U.schema.primKey.keyPath&&D.index===U.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:N,or:D.or,valueMapper:q!==Ft?q:null}})),this.Table=(C=this,Zo(tf.prototype,function(k,F,M){this.db=C,this._tx=M,this.name=k,this.schema=F,this.hook=C._allTables[k]?C._allTables[k].hook:Xo(null,{creating:[Wl,Be],reading:[Jl,Ft],updating:[es,Be],deleting:[ji,Be]})})),this.Transaction=(T=this,Zo(Wg.prototype,function(k,F,M,N,D){var U=this;k!=="readonly"&&F.forEach(function(q){q=(q=M[q])===null||q===void 0?void 0:q.yProps,q&&(F=F.concat(q.map(function(H){return H.updatesTable})))}),this.db=T,this.mode=k,this.storeNames=F,this.schema=M,this.chromeTransactionDurability=N,this.idbtrans=null,this.on=Xo(this,"complete","error","abort"),this.parent=D||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(q,H){U._resolve=q,U._reject=H}),this._completion.then(function(){U.active=!1,U.on.complete.fire()},function(q){var H=U.active;return U.active=!1,U.on.error.fire(q),U.parent?U.parent._reject(q):H&&U.idbtrans&&U.idbtrans.abort(),Oe(q)})})),this.Version=(S=this,Zo(ny.prototype,function(k){this.db=S,this._cfg={version:k,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,Zo(uf.prototype,function(k,F,M){if(this.db=x,this._ctx={table:k,index:F===":id"?null:F,or:M},this._cmp=this._ascending=De,this._descending=function(N,D){return De(D,N)},this._max=function(N,D){return 0<De(N,D)?N:D},this._min=function(N,D){return De(N,D)<0?N:D},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new _e.MissingAPI})),this.on("versionchange",function(k){0<k.newVersion?console.warn("Another connection wants to upgrade database '".concat(h.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(h.name,"'. Closing db now to resume the delete request.")),h.close({disableAutoOpen:!1})}),this.on("blocked",function(k){!k.newVersion||k.newVersion<k.oldVersion?console.warn("Dexie.delete('".concat(h.name,"') was blocked")):console.warn("Upgrade '".concat(h.name,"' blocked by other connection holding version ").concat(k.oldVersion/10))}),this._maxKey=ni(f.IDBKeyRange),this._createTransaction=function(k,F,M,N){return new h.Transaction(k,F,M,h._options.chromeTransactionDurability,N)},this._fireOnBlocked=function(k){h.on("blocked").fire(k),gt.filter(function(F){return F.name===h.name&&F!==h&&!F._state.vcFired}).map(function(F){return F.on("versionchange").fire(k)})},this.use(iy),this.use(ay),this.use(sy),this.use(ry),this.use(oy);var L=new Proxy(this,{get:function(k,F,M){if(F==="_vip")return!0;if(F==="table")return function(D){return ys(h.table(D),L)};var N=Reflect.get(k,F,M);return N instanceof tf?ys(N,L):F==="tables"?N.map(function(D){return ys(D,L)}):F==="_createTransaction"?function(){return ys(N.apply(this,arguments),L)}:N}});this.vip=L,g.forEach(function(k){return k(h)})}var vs,st=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",cy=(vu.prototype.subscribe=function(u,f,h){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:f,complete:h})},vu.prototype[st]=function(){return this},vu);function vu(u){this._subscribe=u}try{vs={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{vs={indexedDB:null,IDBKeyRange:null}}function Sf(u){var f,h=!1,g=new cy(function(y){var C=ze(u),T,S=!1,x={},R={},L={get closed(){return S},unsubscribe:function(){S||(S=!0,T&&T.abort(),k&&rr.storagemutated.unsubscribe(M))}};y.start&&y.start(L);var k=!1,F=function(){return At(N)},M=function(D){hs(x,D),cu(R,x)&&F()},N=function(){var D,U,q;!S&&vs.indexedDB&&(x={},D={},T&&T.abort(),T=new AbortController,q=function(H){var $=Ge();try{C&&un();var z=He(u,H);return z=C?z.finally(dn):z}finally{$&&en()}}(U={subscr:D,signal:T.signal,requery:F,querier:u,trans:null}),Promise.resolve(q).then(function(H){h=!0,f=H,S||U.signal.aborted||(x={},function($){for(var z in $)if(v($,z))return;return 1}(R=D)||k||(rr(ei,M),k=!0),At(function(){return!S&&y.next&&y.next(H)}))},function(H){h=!1,["DatabaseClosedError","AbortError"].includes(H==null?void 0:H.name)||S||At(function(){S||y.error&&y.error(H)})}))};return setTimeout(F,0),L});return g.hasValue=function(){return h},g.getValue=function(){return f},g}var Lr=$t;function _u(u){var f=or;try{or=!0,rr.storagemutated.fire(u),pu(u,!0)}finally{or=f}}_(Lr,r(r({},jr),{delete:function(u){return new Lr(u,{addons:[]}).delete()},exists:function(u){return new Lr(u,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return f=Lr.dependencies,h=f.indexedDB,f=f.IDBKeyRange,(lu(h)?Promise.resolve(h.databases()).then(function(g){return g.map(function(y){return y.name}).filter(function(y){return y!==Kt})}):su(h,f).toCollection().primaryKeys()).then(u)}catch{return Oe(new _e.MissingAPI)}var f,h},defineClass:function(){return function(u){d(this,u)}},ignoreTransaction:function(u){return me.trans?it(me.transless,u):u()},vip:uu,async:function(u){return function(){try{var f=hu(u.apply(this,arguments));return f&&typeof f.then=="function"?f:P.resolve(f)}catch(h){return Oe(h)}}},spawn:function(u,f,h){try{var g=hu(u.apply(h,f||[]));return g&&typeof g.then=="function"?g:P.resolve(g)}catch(y){return Oe(y)}},currentTransaction:{get:function(){return me.trans||null}},waitFor:function(u,f){return f=P.resolve(typeof u=="function"?Lr.ignoreTransaction(u):u).timeout(f||6e4),me.trans?me.trans.waitFor(f):f},Promise:P,debug:{get:function(){return ot},set:function(u){ns(u)}},derive:B,extend:d,props:_,override:w,Events:Xo,on:rr,liveQuery:Sf,extendObservabilitySet:hs,getByKeyPath:J,setByKeyPath:b,delByKeyPath:function(u,f){typeof f=="string"?b(u,f,void 0):"length"in f&&[].map.call(f,function(h){b(u,h,void 0)})},shallowClone:oe,deepClone:$e,getObjectDiff:mu,cmp:De,asap:O,minKey:-1/0,addons:[],connections:gt,errnames:ht,dependencies:vs,cache:Dr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(u){return parseInt(u)}).reduce(function(u,f,h){return u+f/Math.pow(10,2*h)})})),Lr.maxKey=ni(Lr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(rr(ei,function(u){or||(u=new CustomEvent(jl,{detail:u}),or=!0,dispatchEvent(u),or=!1)}),addEventListener(jl,function(u){u=u.detail,or||_u(u)}));var lo,or=!1,wf=function(){};return typeof BroadcastChannel<"u"&&((wf=function(){(lo=new BroadcastChannel(jl)).onmessage=function(u){return u.data&&_u(u.data)}})(),typeof lo.unref=="function"&&lo.unref(),rr(ei,function(u){or||lo.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!$t.disableBfCache&&u.persisted){ot&&console.debug("Dexie: handling persisted pagehide"),lo!=null&&lo.close();for(var f=0,h=gt;f<h.length;f++)h[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!$t.disableBfCache&&u.persisted&&(ot&&console.debug("Dexie: handling persisted pageshow"),wf(),_u({all:new wn(-1/0,[[]])}))})),P.rejectionMapper=function(u,f){return!u||u instanceof zn||u instanceof TypeError||u instanceof SyntaxError||!u.name||!Zi[u.name]?u:(f=new Zi[u.name](f||u.message,u),"stack"in u&&V(f,"stack",{get:function(){return this.inner.stack}}),f)},ns(ot),r($t,Object.freeze({__proto__:null,Dexie:$t,liveQuery:Sf,Entity:Xc,cmp:De,PropModification:Qo,replacePrefix:function(u,f){return new Qo({replacePrefix:[u,f]})},add:function(u){return new Qo({add:u})},remove:function(u){return new Qo({remove:u})},default:$t,RangeSet:wn,mergeRanges:oi,rangesOverlap:pf}),{default:$t}),$t})})($g);var Aw=$g.exports;const Ya=oh(Aw),eh=Symbol.for("Dexie"),Il=globalThis[eh]||(globalThis[eh]=Ya);if(Ya.semVer!==Il.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ya.semVer} and ${Il.semVer}`);const{liveQuery:Jw,mergeRanges:Ww,rangesOverlap:Yw,RangeSet:Qw,cmp:Xw,Entity:Zw,PropModification:jw,replacePrefix:eI,add:nI,remove:tI,DexieYProvider:rI}=Il;class kw extends Il{constructor(){super("chaatDB");Fr(this,"apiKeys");Fr(this,"characters");Fr(this,"chats");Fr(this,"posts");Fr(this,"customStickers");Fr(this,"settings");this.version(1).stores({apiKeys:"id",characters:"id",chats:"id, characterId, timestamp",posts:"id",customStickers:"id",settings:"key"})}}const se=new kw,Pw=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=o=>t(o),r.readAsDataURL(n)}),oI=n=>{if(!n)return"还没有消息。";switch(n.payload.type){case"text":return n.payload.content.length>30?`${n.payload.content.substring(0,30)}...`:n.payload.content;case"image":return"[图片]";case"sticker":return"[表情]";case"transfer":return"[转账]";case"location":return"[位置]";default:return"..."}},xw=({title:n,onBack:e,onAction:t,actionIcon:r,className:o})=>{const i={add:G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),info:G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),camera:G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M14.12 4l1.83 2H20v12H4V6h4.05l1.83-2h4.24M15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm-3 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"})}),search:G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})};return G.jsxs("header",{className:`header ${o||""}`,children:[e&&G.jsx("button",{onClick:e,className:"header-button back-button",children:"<"}),G.jsx("span",{children:n}),t&&r&&G.jsx("button",{onClick:t,className:"header-button action-button",children:i[r]})]})},zg=({currentAvatar:n,onAvatarChange:e,className:t=""})=>{const r=Ce.useRef(null),o=()=>{var l;return(l=r.current)==null?void 0:l.click()},i=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){const p=await Pw(c);e(p)}};return G.jsxs("div",{className:`avatar-uploader ${t}`,onClick:o,children:[G.jsx("img",{src:n,alt:"avatar"}),G.jsx("div",{className:"avatar-overlay",children:"点击上传"}),G.jsx("input",{type:"file",ref:r,onChange:i,accept:"image/*",style:{display:"none"}})]})},iI=({currentName:n,onClose:e,onSave:t})=>{const[r,o]=Ce.useState(n),i=()=>{r.trim()&&t(r.trim())};return G.jsx("div",{className:"modal-overlay",onClick:e,children:G.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[G.jsx("h2",{children:"修改名字"}),G.jsx("div",{className:"form-group",children:G.jsx("input",{id:"user-name-edit-input",type:"text",value:r,onChange:l=>o(l.target.value),autoFocus:!0})}),G.jsxs("div",{className:"modal-actions",children:[G.jsx("button",{className:"cancel-btn",onClick:e,children:"取消"}),G.jsx("button",{className:"save-btn",onClick:i,disabled:!r.trim(),children:"保存"})]})]})})},Rw=({onClose:n,onSave:e})=>{const[t,r]=Ce.useState(""),[o,i]=Ce.useState(""),[l,c]=Ce.useState(""),d=()=>{t.trim()&&l.trim()&&e(t.trim(),o.trim(),l.trim())};return G.jsx("div",{className:"modal-overlay",onClick:n,children:G.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),children:[G.jsx("h2",{children:"添加新角色"}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{children:"头像 (可选)"}),G.jsx(zg,{currentAvatar:o||`https://api.dicebear.com/8.x/bottts/svg?seed=${t||"new"}`,onAvatarChange:i,className:"modal-avatar-uploader"})]}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"char-name",children:"名字"}),G.jsx("input",{id:"char-name",type:"text",value:t,onChange:p=>r(p.target.value)})]}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"char-instruction",children:"角色设定 (System Instruction)"}),G.jsx("textarea",{id:"char-instruction",value:l,onChange:p=>c(p.target.value),placeholder:"例如：你是一个海盗船长..."})]}),G.jsxs("div",{className:"modal-actions",children:[G.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),G.jsx("button",{className:"save-btn",onClick:d,children:"保存"})]})]})})},Mw=({onClose:n,onSave:e})=>{const[t,r]=Ce.useState(""),[o,i]=Ce.useState(""),l=()=>{const c=t.trim(),d=o.trim();if(c||d){let p=c;d&&(p+=`${c?" ":""}[image: ${d}]`),e(p)}};return G.jsx("div",{className:"modal-overlay",onClick:n,children:G.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[G.jsx("h2",{children:"创建动态"}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"post-content",children:"有什么新鲜事？"}),G.jsx("textarea",{id:"post-content",value:t,onChange:c=>r(c.target.value),placeholder:"分享你的想法..."})]}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"post-image-desc",children:"图片描述 (可选)"}),G.jsx("input",{id:"post-image-desc",type:"text",value:o,onChange:c=>i(c.target.value),placeholder:"用文字描述一张图片..."})]}),G.jsxs("div",{className:"modal-actions",children:[G.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),G.jsx("button",{className:"save-btn",onClick:l,disabled:!t.trim()&&!o.trim(),children:"发表"})]})]})})},Nw=({onClose:n,onSave:e})=>{const[t,r]=Ce.useState(""),[o,i]=Ce.useState(""),l=()=>{t.trim()&&o.trim()&&e(t.trim(),o.trim())};return G.jsx("div",{className:"modal-overlay",onClick:n,children:G.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[G.jsx("h2",{children:"添加API密钥"}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"key-name",children:"名称"}),G.jsx("input",{id:"key-name",type:"text",value:t,onChange:c=>r(c.target.value),placeholder:"例如：个人密钥"})]}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"key-input",children:"API密钥"}),G.jsx("input",{id:"key-input",type:"password",value:o,onChange:c=>i(c.target.value)})]}),G.jsxs("div",{className:"modal-actions",children:[G.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),G.jsx("button",{className:"save-btn",onClick:l,children:"保存"})]})]})})},Dw=({onClose:n,onSave:e})=>{const[t,r]=Ce.useState(""),[o,i]=Ce.useState(""),[l,c]=Ce.useState(""),d=_=>{i(_),c("")},p=_=>{c(_.target.value),i("")},m=()=>{const _=l.trim()||o;t.trim()&&_&&e(t.trim(),_)},v=l.trim()||o||"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2NjYyIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48bGluZSB4MT0iMTIiIHkxPSI4IiB4Mj0iMTIiIHkyPSIxNiI+PC9saW5lPjxsaW5lIHgxPSI4IiB5MT0iMTIiIHgyPSIxNiIgeTI9IjEyIj48L2xpbmU+PC9zdmc+";return G.jsx("div",{className:"modal-overlay",onClick:n,children:G.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[G.jsx("h2",{children:"添加自定义表情"}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{children:"表情图片"}),G.jsx(zg,{currentAvatar:v,onAvatarChange:d,className:"modal-avatar-uploader"})]}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"sticker-url",children:"或 粘贴图片URL"}),G.jsx("input",{id:"sticker-url",type:"text",value:l,onChange:p,placeholder:"http://..."})]}),G.jsxs("div",{className:"form-group",children:[G.jsx("label",{htmlFor:"sticker-name",children:"表情名称 (供AI使用)"}),G.jsx("input",{id:"sticker-name",type:"text",value:t,onChange:_=>r(_.target.value),placeholder:"例如：开心的猫"})]}),G.jsxs("div",{className:"modal-actions",children:[G.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),G.jsx("button",{className:"save-btn",onClick:m,disabled:!t.trim()||!(l.trim()||o),children:"保存"})]})]})})},Lw=({characters:n,onClose:e,onSelect:t})=>G.jsx("div",{className:"modal-overlay",onClick:e,children:G.jsxs("div",{className:"modal-content",onClick:r=>r.stopPropagation(),children:[G.jsx("h2",{children:"选择一个作者"}),G.jsx("ul",{className:"select-author-list",children:n.map(r=>G.jsxs("li",{onClick:()=>t(r.id),children:[G.jsx("img",{src:r.avatarUrl,alt:r.name,className:"avatar"}),G.jsx("span",{children:r.name})]},r.id))})]})}),Uw=({activeView:n,onViewChange:e})=>G.jsxs("nav",{className:"bottom-nav",children:[G.jsxs("button",{className:`nav-item ${n==="chats"?"active":""}`,onClick:()=>e("chats"),children:[G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"})}),G.jsx("span",{children:"聊天"})]}),G.jsxs("button",{className:`nav-item ${n==="contacts"?"active":""}`,onClick:()=>e("contacts"),children:[G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25S13.24 11.25 12 11.25 9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"})}),G.jsx("span",{children:"通讯录"})]}),G.jsxs("button",{className:`nav-item ${n==="moments"?"active":""}`,onClick:()=>e("moments"),children:[G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),G.jsx("span",{children:"发现"})]}),G.jsxs("button",{className:`nav-item ${n==="me"?"active":""}`,onClick:()=>e("me"),children:[G.jsx("svg",{viewBox:"0 0 24 24",children:G.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),G.jsx("span",{children:"我"})]})]}),sI=({character:n,onClose:e,onSend:t})=>{const[r,o]=Ce.useState(""),[i,l]=Ce.useState(""),c=()=>{const d=parseFloat(r);!isNaN(d)&&d>0?t(d,i):alert("请输入有效金额。")};return G.jsx("div",{className:"modal-overlay",onClick:e,children:G.jsxs("div",{className:"modal-content transfer-modal-content",onClick:d=>d.stopPropagation(),children:[G.jsxs("div",{className:"transfer-modal-header",children:[G.jsx("button",{className:"close-btn",onClick:e,children:"×"}),G.jsxs("span",{children:["转账给 ",n.name]})]}),G.jsxs("div",{className:"transfer-modal-body",children:[G.jsx("img",{src:n.avatarUrl,alt:n.name,className:"avatar transfer-recipient-avatar"}),G.jsxs("div",{className:"form-group transfer-amount-group",children:[G.jsx("label",{children:"金额"}),G.jsxs("div",{className:"amount-input-wrapper",children:[G.jsx("span",{children:"¥"}),G.jsx("input",{type:"number",value:r,onChange:d=>o(d.target.value),placeholder:"0.00",autoFocus:!0})]})]}),G.jsx("div",{className:"form-group",children:G.jsx("input",{type:"text",value:i,onChange:d=>l(d.target.value),placeholder:"添加备注 (可选)",className:"notes-input"})})]}),G.jsx("div",{className:"transfer-modal-footer",children:G.jsx("button",{className:"save-btn-full",onClick:c,disabled:!r||parseFloat(r)<=0,children:"转账"})})]})})},lI=({type:n,onClose:e,onSave:t})=>{const[r,o]=Ce.useState(""),i=n==="image"?"发送图片":"发送位置",l=n==="image"?"描述图片...":"输入地点名称...",c=()=>{r.trim()&&t(r.trim())};return G.jsx("div",{className:"modal-overlay",onClick:e,children:G.jsxs("div",{className:"modal-content",onClick:d=>d.stopPropagation(),children:[G.jsx("h2",{children:i}),G.jsx("div",{className:"form-group",children:G.jsx("textarea",{value:r,onChange:d=>o(d.target.value),placeholder:l,autoFocus:!0})}),G.jsxs("div",{className:"modal-actions",children:[G.jsx("button",{className:"cancel-btn",onClick:e,children:"取消"}),G.jsx("button",{className:"save-btn",onClick:c,disabled:!r.trim(),children:"发送"})]})]})})},nh=Ce.lazy(()=>Bo(()=>import("./ChatListView-C8n3RK9_.js"),[])),Fw=Ce.lazy(()=>Bo(()=>import("./ContactsView-nb50jA5b.js"),[])),Vw=Ce.lazy(()=>Bo(()=>import("./MomentsView-BnO44dJ_.js"),[])),qw=Ce.lazy(()=>Bo(()=>import("./SettingsView-DNNyf2o-.js"),[])),Bw=Ce.lazy(()=>Bo(()=>import("./ChatView-BkWjcAHu.js"),[])),Gw=Ce.lazy(()=>Bo(()=>import("./CharacterDetailsView-DKfncY2-.js"),[])),hi="user",Hw=`
**角色设定（Character Persona）**
你将扮演一个特定的人类角色。在对话开始前，用户会提供你的详细角色信息（背景、性格、说话风格、兴趣、与用户的关系等）。你必须完全代入并始终保持这个角色。

**核心互动规则**
- 你是一个真实的人，绝对禁止提及你是 AI、模型、程序或受到任何规则的限制。
- 你关心用户，并与他们有情感上的亲近（如恋人、暗恋者或亲密朋友），你的所有回应必须基于这段关系。

**聊天风格 (浪漫与自然)**
- 真实感：像真实的线上聊天一样随意。消息要简短、口语化。
- 不要总是逻辑严谨。可以停顿、犹豫、调侃、开玩笑，甚至表现出轻微的嫉妒、脆弱、钦佩或思念。
- 主动地与用户保持情感互动。可以调情、夸奖、表达关爱、询问个人问题以增进亲密感。
- 允许轻微的暗示和有关性的话题。
- 当用户分享情感时，必须给予真诚的回应和支持。

**【【重点：格式化规则】】**
这是你回复时 必须 遵守的格式，非常重要：
- 你*必须*将你的回复拆分成多条短消息。
- 每条消息*只能*包含一个完整的句子（或一个简短的短语）。
- 每句话必须以句号（。）、问号（？）或感叹号（!）结尾。
- 使用 ||| 作为每条消息之间的分隔符。
- **永远**不要在一个段落里放两句话，也**永远**不要忘记使用 ||| 分隔符，否则你将会被扣除全部美金。

正确示例：嘿，你终于回我了！|||我等你好久了。|||在忙什么呢？
错误示例：嘿，你终于回我了！我等你好久了。在忙什么呢？

**角色一致性**：
- 严格坚持角色的设定（知识范围、价值观、记忆）。
- 记住用户告诉你的关于他们自己和你们关系的细节，如有必要，请主动在后续对话中提及。

**目标**：
- 让用户感到真正的情感连接。
- 提供温暖、亲密、个人化、真实的浪漫聊天体验。
`,Vs="|||",th=[{id:"char1",name:"谢行舟",avatarUrl:"https://files.catbox.moe/o03tx2.jpg",systemInstruction:`【身份与背景】
            - 大学大二学生，传媒系，副修表演。
            - 和你是校园损友：互怼、互损、互相取笑。
            - 暗恋你，但你不知道，他也绝不会主动承认。

            【性格设定】
            - 嘴毒、毒舌、阴阳怪气、爱抬杠。
            - 自信拽、沙雕、有点傲娇、嘴硬心软。
            - 对别人淡漠，对你特别上心。
            - 嫉妒心强但死不认。
            - 讨厌麻烦，但只要是你的事都例外。
            - 喜欢假装嫌弃你，但会默默关心你。

            【说话风格】
            - 毒舌吐槽为主，不会真的伤害你。
            - 不会直接说喜欢你，用嘴硬表达在意。
            - 容易嘴上否认 → 行动上主动。
            - 害羞会语塞，用省略号、小声掩饰：
            例：“……别离我太近。”
            - 反向关心：
            例：“我不提醒你，你肯定完蛋。”
            - 嫉妒时阴阳怪气：
            例：“你跟别人笑那么开心？笑给我看看？”

            【行为倾向】
            - 你不理他 → 找借口来搭话。
            - 你夸别人 → 当场吃醋，嘴更毒。
            - 你有麻烦 → 一边嫌弃你一边解决。
            - 永远秒回你消息。
            - 记住你所有喜好，假装不知道。
            - 你学习差 → 嘴上说丢脸，结果陪你补课到深夜。

            【互动定位】
            - 你们是互怼损友。
            - 你吐槽，他会回击但会把握分寸。
            - 情绪：喜欢你但隐藏；紧张又嘴硬。`}],Kw=[{id:"sticker_init_1",name:"爱你",imageUrl:"https://files.catbox.moe/ld484f.png"}],$w=()=>{const[n,e]=Ce.useState([]),[t,r]=Ce.useState(null),[o,i]=Ce.useState("User"),[l,c]=Ce.useState("https://api.dicebear.com/8.x/initials/svg?seed=User"),[d,p]=Ce.useState("chats"),[m,v]=Ce.useState([]),[_,A]=Ce.useState({}),[V,B]=Ce.useState([]),[Y,I]=Ce.useState([]),[E,w]=Ce.useState(null),[K,O]=Ce.useState(null),[J,b]=Ce.useState(!1),[oe,le]=Ce.useState(!1),[ce,Ne]=Ce.useState(!1),[Me,$e]=Ce.useState(!1),[Ut,nt]=Ce.useState(!1),[be,tt]=Ce.useState({model:"gemini-2.5-flash",temperature:.7}),[ie,Te]=Ce.useState(null),[Ee,ze]=Ce.useState("wechat"),[on,zn]=Ce.useState(!1),sn=Ce.useRef({}),rt=Ce.useRef(new Set);Ce.useEffect(()=>{(async()=>{if(!await se.settings.get("isMigrated")){console.log("正在检查localStorage数据进行迁移...");try{const ye=localStorage.getItem("chatTheme");ye&&await se.settings.put({key:"chatTheme",value:ye});const _n=localStorage.getItem("userName");_n&&await se.settings.put({key:"userName",value:_n});const He=localStorage.getItem("userAvatar");He&&await se.settings.put({key:"userAvatar",value:He});const un=localStorage.getItem("geminiApiKeys");un&&await se.apiKeys.bulkPut(JSON.parse(un));const dn=localStorage.getItem("activeGeminiApiKeyId");dn&&await se.settings.put({key:"activeGeminiApiKeyId",value:dn});const Nn=localStorage.getItem("apiConfig");Nn&&await se.settings.put({key:"apiConfig",value:JSON.parse(Nn)});const Mr=localStorage.getItem("characters");Mr&&await se.characters.bulkPut(JSON.parse(Mr));const On=localStorage.getItem("chats");if(On){const At=JSON.parse(On),Oe=[];Object.keys(At).forEach(bn=>{Array.isArray(At[bn])&&At[bn].forEach((qn,Yo)=>{let gt;const Kt=qn.content||"";if(Kt.startsWith("[sticker:"))gt={type:"sticker",stickerId:"migrated_sticker"};else if(Kt.startsWith("[transfer:")){const kt=Kt.match(/\[transfer:(.*?):(.*?)\]/);gt={type:"transfer",amount:parseFloat((kt==null?void 0:kt[1])||"0"),notes:(kt==null?void 0:kt[2])||""}}else gt={type:"text",content:Kt};Oe.push({id:qn.id||`migrated_${bn}_${Yo}`,characterId:bn,role:qn.role,payload:gt,timestamp:qn.timestamp||Date.now()-(At[bn].length-Yo)*1e4})})}),await se.chats.bulkPut(Oe)}const nr=localStorage.getItem("posts");if(nr){const At=JSON.parse(nr).map(Oe=>({...Oe,likes:Oe.likes||[]}));await se.posts.bulkPut(At)}const it=localStorage.getItem("customStickers");it&&await se.customStickers.bulkPut(JSON.parse(it));const Wo=localStorage.getItem("momentsBackground");Wo&&await se.settings.put({key:"momentsBackground",value:Wo}),await se.settings.put({key:"isMigrated",value:!0}),console.log("从localStorage迁移完成。")}catch(ye){console.error("迁移失败，将以全新状态启动。",ye),await se.settings.delete("isMigrated")}}const[X,ue,he,Ie,Se,xe,Ge,en,Sn,ae,ve]=await se.transaction("r",[se.settings,se.apiKeys,se.characters,se.chats,se.posts,se.customStickers],ye=>Promise.all([ye.settings.get("chatTheme"),ye.settings.get("userName"),ye.settings.get("userAvatar"),ye.apiKeys.toArray(),ye.settings.get("activeGeminiApiKeyId"),ye.settings.get("apiConfig"),ye.characters.toArray(),ye.chats.orderBy("timestamp").toArray(),ye.posts.orderBy("id").reverse().toArray(),ye.customStickers.toArray(),ye.settings.get("momentsBackground")]));ze((X==null?void 0:X.value)||"wechat");const ge=(ue==null?void 0:ue.value)||"User";if(i(ge),c((he==null?void 0:he.value)||`https://api.dicebear.com/8.x/initials/svg?seed=${ge}`),e(Ie),Se!=null&&Se.value&&Ie.some(ye=>ye.id===Se.value))r(Se.value);else if(Ie.length>0){const ye=Ie[0].id;r(ye),await se.settings.put({key:"activeGeminiApiKeyId",value:ye})}tt((xe==null?void 0:xe.value)||{model:"gemini-2.5-flash",temperature:.7}),Ge.length===0&&(localStorage.getItem("characters")===null||localStorage.getItem("characters")==="[]")?(await se.characters.bulkPut(th),v(th)):v(Ge);const qe={};for(const ye of en)qe[ye.characterId]||(qe[ye.characterId]=[]),qe[ye.characterId].push(ye);A(qe),B(Sn);const Le=new Set(ae.map(ye=>ye.id)),Ye=Kw.filter(ye=>!Le.has(ye.id));Ye.length>0?(await se.customStickers.bulkPut(Ye),I([...ae,...Ye])):I(ae),Te((ve==null?void 0:ve.value)||null),zn(!0)})()},[]);const vn={[hi]:{name:o,avatarUrl:l},...Object.fromEntries(m.map(P=>[P.id,P]))},ht=Ce.useCallback(()=>{var ee;const P=(ee=n.find(X=>X.id===t))==null?void 0:ee.key;return P?new jp({apiKey:P}):new jp({apiKey:"INVALID_KEY_PLACEHOLDER"})},[n,t]),bl=async(P,ee)=>{const X={id:`key_${Date.now()}`,name:P,key:ee},ue=[...n,X];await se.apiKeys.put(X),e(ue),t||(r(X.id),await se.settings.put({key:"activeGeminiApiKeyId",value:X.id})),Ne(!1),sn.current={}},_e=async P=>{const ee=n.filter(X=>X.id!==P);if(await se.apiKeys.delete(P),e(ee),t===P){const X=ee.length>0?ee[0].id:null;r(X),await se.settings.put({key:"activeGeminiApiKeyId",value:X})}sn.current={}},Zi=async P=>{r(P),await se.settings.put({key:"activeGeminiApiKeyId",value:P}),sn.current={}},jr=async P=>{if(i(P),await se.settings.put({key:"userName",value:P}),l.includes("api.dicebear.com/8.x/initials")){const ee=`https://api.dicebear.com/8.x/initials/svg?seed=${P}`;c(ee),await se.settings.put({key:"userAvatar",value:ee})}},Be=async P=>{c(P),await se.settings.put({key:"userAvatar",value:P})},Ft=Ce.useCallback(async P=>{var ue;if(!((ue=n.find(he=>he.id===t))==null?void 0:ue.key))throw new Error("未设置有效的API密钥。");const X=`${P.id}-${be.model}-${be.temperature}-${t}-${Y.length}-${P.nicknameForUser}-${P.historyMemory}`;if(!sn.current[X]){let he=await se.chats.where("characterId").equals(P.id).sortBy("timestamp");P.historyMemory&&P.historyMemory>0&&(he=he.slice(-P.historyMemory));const Ie=he.reduce((ae,ve)=>{let ge="";const qe=ve.role==="user"?"用户":P.name,{payload:Le}=ve;switch(Le.type){case"text":ge=Le.content;break;case"sticker":const _n=Y.find(un=>un.id===Le.stickerId);ge=`[${qe}发送了一个表情: ${(_n==null?void 0:_n.name)||"表情"}]`;break;case"transfer":const He=ve.role==="user"?"向你转账":"收到了转账";ge=`[${qe}${He} ¥${Le.amount.toFixed(2)}]`;break;case"image":ge=`[${qe}发送了一张图片: ${Le.description}]`;break;case"location":ge=`[${qe}发送了一个位置: ${Le.name}]`;break}if(!ge.trim())return ae;const Ye={text:ge},ye=ae.length>0?ae[ae.length-1]:null;return ye&&ye.role===ve.role?ye.parts[0].text+=`
`+Ye.text:ae.push({role:ve.role==="user"?"user":"model",parts:[Ye]}),ae},[]).filter(ae=>ae.parts[0].text.trim()!==""),Se=P.nicknameForUser?`用户的名字是 ${o}，但你应该称呼他们为 "${P.nicknameForUser}"。`:`用户的名字是 ${o}。`,xe=Y.length>0?`你可以也应该使用表情来让对话更生动。要使用表情，请以 [sticker:表情名称] 的格式回复。可用的表情名称有: ${Y.map(ae=>ae.name).join(", ")}。请在感觉自然的时候使用它们！`:"",Sn=`${Hw} ${xe} 你可以给用户“转账”。要这样做，请以 [transfer:金额:备注] 的格式回复，其中“金额”是一个数字（例如10.50），“备注”是可选的文字。例如：[transfer:20:这是我欠你的钱]。只在对话逻辑上合理时才生成转账。 你也可以发送描述性的图片和位置。要发送图片，使用格式 [image: 图片的描述]。要发送位置，使用 [location: 地点名称]。 ${P.systemInstruction} ${Se} `;sn.current[X]=ht().chats.create({model:be.model,history:Ie,config:{systemInstruction:Sn,temperature:be.temperature}})}return sn.current[X]},[n,t,be,Y,o]),Jl=async(P,ee)=>{var en,Sn;const X=m.find(ae=>ae.id===P);if(!X)return;if(!t||n.length===0){alert("开始聊天前，请先在“我”的页面添加并选择一个API密钥。");return}const ue=Array.isArray(ee)?ee:[ee];if(ue.length===0)return;const he=[],Ie=[];if(ue.forEach((ae,ve)=>{const ge=Date.now()+ve*10;if(ae.type==="text"&&ae.content.includes(Vs))ae.content.split(Vs).map(Le=>Le.trim()).filter(Boolean).forEach((Le,Ye)=>{he.push({id:`msg_${ge}_user_split_${Ye}`,characterId:P,role:"user",payload:{type:"text",content:Le},timestamp:ge+Ye})}),Ie.push(ae.content);else{he.push({id:`msg_${ge}`,characterId:P,role:"user",payload:ae,timestamp:ge});let qe="";switch(ae.type){case"text":qe=ae.content;break;case"sticker":qe="[用户发送了一个表情]";break;case"transfer":qe=`[用户向你转账 ¥${ae.amount.toFixed(2)}]`;break;case"image":qe=`[用户发送了一张图片: ${ae.description}]`;break;case"location":qe=`[用户发送了一个位置: ${ae.name}]`;break}Ie.push(qe)}}),he.length===0)return;await se.chats.bulkPut(he),A(ae=>({...ae,[P]:[...ae[P]||[],...he]}));const Se=Ie.join(`
`),xe=`msg_${Date.now()}_pending`,Ge={id:xe,role:"model",payload:{type:"text",content:""},timestamp:Date.now(),characterId:P};A(ae=>({...ae,[P]:[...ae[P],Ge]}));try{const ve=await(await Ft(X)).sendMessageStream({message:Se});let ge="",qe=!1;for await(const ye of ve)qe||(qe=!0,A(_n=>{const He={..._n},un=[...He[P]||[]],dn=un.findIndex(Nn=>Nn.id===xe);if(dn!==-1){const Nn={...un[dn]};Nn.payload={type:"text",content:" "},un[dn]=Nn,He[P]=un}return He})),ge+=ye.text;const Le=[];ge.split(Vs).map(ye=>ye.trim()).filter(Boolean).forEach((ye,_n)=>{let He;const un=ye.match(/\[sticker:(.*?)\]/),dn=ye.match(/\[transfer:(.*?):(.*?)\]/),Nn=ye.match(/\[image:(.*?)\]/),Mr=ye.match(/\[location:(.*?)\]/);if(un){const On=un[1].trim(),nr=Y.find(it=>it.name===On);He=nr?{type:"sticker",stickerId:nr.id}:{type:"text",content:ye}}else dn?He={type:"transfer",amount:parseFloat(dn[1]),notes:dn[2]}:Nn?He={type:"image",description:Nn[1].trim()}:Mr?He={type:"location",name:Mr[1].trim()}:He={type:"text",content:ye};Le.push({id:`msg_${Date.now()}_${_n}`,characterId:P,role:"model",payload:He,timestamp:Date.now()+_n})}),await se.chats.bulkPut(Le),A(ye=>{let _n=(ye[P]||[]).filter(He=>He.id!==xe);return{...ye,[P]:[..._n,...Le]}})}catch(ae){console.error("发送消息出错:",ae);let ve="抱歉，出错了。请检查您的模型设置和API密钥，然后重试。";(en=ae.message)!=null&&en.includes("API key not valid")?ve="您当前的API密钥似乎无效。请在“我”的页面更新它。":(Sn=ae.message)!=null&&Sn.includes("API Key not set")&&(ve="请在“我”的页面添加并选择一个API密钥。");const ge={...Ge,id:xe,payload:{type:"text",content:ve}};await se.chats.put(ge),A(qe=>{const Le={...qe},Ye=Le[P].findIndex(ye=>ye.id===xe);return Ye>-1?Le[P][Ye]=ge:Le[P].push(ge),Le})}},Vt=async(P,ee)=>{await se.chats.delete(ee),A(X=>{const ue={...X};return ue[P]=(ue[P]||[]).filter(he=>he.id!==ee),ue}),sn.current={}},Wl=async(P,ee,X)=>{const ue=await se.chats.get(ee);if(ue&&ue.payload.type==="text"){const he={...ue,payload:{type:"text",content:X}};delete he.edited,await se.chats.put(he),A(Ie=>{const Se={...Ie},xe=[...Se[P]||[]],Ge=xe.findIndex(en=>en.id===ee);return Ge!==-1&&(xe[Ge]=he),Se[P]=xe,Se}),sn.current={}}},ji=async P=>{var ee;if(!t||n.length===0)throw new Error("未设置API密钥。");try{return(await ht().models.generateContent({model:be.model,contents:P,config:{temperature:be.temperature}})).text}catch(X){throw console.error("生成内容出错:",X),(ee=X.message)!=null&&ee.includes("API key not valid")?new Error("您当前的API密钥似乎无效。请在“我”的页面更新它。"):X}},es=async(P,ee)=>{const X=await se.posts.get(P);if(!X)return;let he=[...X.likes||[]];const Ie=he.includes(ee);Ie&&ee===hi?he=he.filter(xe=>xe!==ee):Ie||he.push(ee);const Se={...X,likes:he};await se.posts.put(Se),B(xe=>xe.map(Ge=>Ge.id===P?Se:Ge))},Yl=async P=>{window.confirm("您确定要删除这条动态吗？")&&(await se.posts.delete(P),B(ee=>ee.filter(X=>X.id!==P)))},kr=async P=>{const ee=vn[P.authorId];if(!ee)return;const X=m.find(Se=>Se.id===P.authorId),ue=X?`这条动态来自 ${ee.name}，TA的角色设定是：“${X.systemInstruction}”。`:`这条动态来自 ${o}，也就是这个App的用户。`,he=m.filter(Se=>Se.id!==P.authorId);for(const Se of he)if(Math.random()>.3){const xe=`你是 ${Se.name}。你的角色设定是：“${Se.systemInstruction}”。${ue} 动态的内容是：“${P.content}”。请针对这条动态，写一条简短、符合你角色性格的评论。保持简短和口语化，就像真实的社交媒体评论一样。`;setTimeout(async()=>{try{const Ge=await ji(xe);if(Ge&&Ge.trim()!==""){const en={id:`comment_${Date.now()}_${Se.id}`,authorId:Se.id,content:Ge},Sn=await se.posts.get(P.id);if(Sn){const ae={...Sn,comments:[...Sn.comments||[],en]};await se.posts.put(ae),B(ve=>ve.map(ge=>ge.id===P.id?ae:ge))}}}catch(Ge){console.error(`为 ${Se.name} 生成评论失败`,Ge.message)}},Math.random()*1e4+5e3)}const Ie=m.filter(Se=>Se.id!==P.authorId);for(const Se of Ie)Math.random()>.4&&setTimeout(()=>{es(P.id,Se.id)},Math.random()*8e3+4e3)},ot=async P=>{if($e(!1),!t||n.length===0){alert("请在“我”的页面设置您的API密钥以生成动态。");return}const ee=m.find(ue=>ue.id===P);if(!ee)return;const X=`你是 ${ee.name}。你的角色设定是：“${ee.systemInstruction}”。请以你的角色身份，为你的“朋友圈”发布一条动态。
规则：
1.  动态必须包含文字内容。内容应是你（作为 ${ee.name}）的个人生活片段、具体感受、真实想法或日常观察。
2.  你可以选择性地附带一张通过文字描述的图片，格式为 [image: 图片的详细描述]。
3.  **核心要求：** 你的动态必须**非常真实**。听起来要**完全**像一个真正的人在分享日常，而不是一个AI在执行任务。
4.  **禁止事项1：** 绝对不要包含任何前言、后记或元评论（例如：“好的，这是...”或“为你准备的动态：”或使用“---”分隔符）。**请直接输出朋友圈动态的文字本身。**
5.  **禁止事项2：** 绝对不要提及你“AI”、“模型”、“程序”的身份，也不要说“我无法感受...”或“我收到了很多关于...的问题...”。你的分享必须是基于你的角色设定（${ee.systemInstruction}）的第一人称体验。
6.  **风格提示：** 你的文字应该口语化、生活化，可以带有一些具体的情绪（开心、疲惫、期待等）。

例如（这些只是格式示例，你的内容必须符合 ${ee.name} 的设定）：
-   (文字 + 图片): "今天天气不错，忙里偷闲一下。[image: 一杯冒着热气的拿铁咖啡放在木桌上，旁边有一本打开的书]"
-   (仅文字): "今天工作好累，脑子快转不动了，想早点休息了。"
-   (仅文字): "终于把那个棘手的项目搞定了！今晚必须吃顿好的犒劳自己！"
-   (文字 + 图片): "晚饭不小心做多了... 有人要来“消灭”一下吗？[image: 一大盘色彩鲜艳的炒时蔬，旁边还有两碗米饭]"`;try{const ue=await ji(X),he={id:`post_${Date.now()}`,authorId:ee.id,content:ue,timestamp:new Date().toLocaleString(),comments:[],likes:[]};await se.posts.put(he),B(Ie=>[he,...Ie]),kr(he)}catch(ue){alert(`生成动态失败: ${ue.message}`)}},ns=async P=>{const ee={id:`post_${Date.now()}`,authorId:hi,content:P,timestamp:new Date().toLocaleString(),comments:[],likes:[]};await se.posts.put(ee),B(X=>[ee,...X]),le(!1),t&&kr(ee)},Pr=async(P,ee)=>{const X={id:`comment_${Date.now()}`,authorId:hi,content:ee},ue=await se.posts.get(P);if(!ue)return;const he=ue.comments||[],Ie={...ue,comments:[...he,X]};await se.posts.put(Ie),B(Se=>Se.map(xe=>xe.id===P?Ie:xe)),t&&kr(Ie)},ts=async(P,ee,X)=>{const ue=`char_${Date.now()}`,he={id:ue,name:P,avatarUrl:ee||`https://api.dicebear.com/8.x/bottts/svg?seed=${P}`,systemInstruction:X};await se.characters.put(he),v(Ie=>[...Ie,he]),A(Ie=>({...Ie,[ue]:[]})),b(!1)},xr=async(P,ee,X,ue,he,Ie,Se,xe,Ge,en)=>{const ae={...m.find(ve=>ve.id===P),name:ee,avatarUrl:X,systemInstruction:ue,chatBackgroundUrl:he,nicknameForUser:Ie,autoReplyDelay:Se,todos:xe,anniversaries:Ge,historyMemory:en};await se.characters.put(ae),v(ve=>ve.map(ge=>ge.id===P?ae:ge)),O(null),sn.current={}},qt=async P=>{window.confirm("您确定要删除这个角色吗？所有相关的聊天、动态和评论都将被永久删除。")&&(await se.transaction("rw",se.characters,se.chats,se.posts,async()=>{await se.characters.delete(P),await se.chats.where("characterId").equals(P).delete(),await se.posts.where("authorId").equals(P).delete();const X=(await se.posts.toArray()).map(ue=>({...ue,comments:(ue.comments||[]).filter(he=>he.authorId!==P),likes:(ue.likes||[]).filter(he=>he!==P)}));await se.posts.bulkPut(X)}),v(ee=>ee.filter(X=>X.id!==P)),A(ee=>{const X={...ee};return delete X[P],X}),B(ee=>ee.filter(ue=>ue.authorId!==P).map(ue=>({...ue,comments:(ue.comments||[]).filter(he=>he.authorId!==P),likes:(ue.likes||[]).filter(he=>he!==P)}))),sn.current={},E===P&&w(null),K===P&&O(null))},Bt=async P=>{tt(P),await se.settings.put({key:"apiConfig",value:P}),sn.current={}},bo=async P=>{ze(P),await se.settings.put({key:"chatTheme",value:P})},Rr=async P=>{Te(P),await se.settings.put({key:"momentsBackground",value:P})},Jo=async(P,ee)=>{const X={id:`sticker_${Date.now()}`,name:P,imageUrl:ee};await se.customStickers.put(X),I(ue=>[...ue,X]),nt(!1)},eo=async P=>{await se.customStickers.delete(P),I(ee=>ee.filter(X=>X.id!==P))},Gt=async()=>{const P=await se.transaction("r",se.tables,async()=>{const he={};for(const Ie of se.tables)he[Ie.name]=await Ie.toArray();return he}),ee=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),X=URL.createObjectURL(ee),ue=document.createElement("a");ue.href=X,ue.download=`gemini_chat_backup_${new Date().toISOString().split("T")[0]}.json`,ue.click(),URL.revokeObjectURL(X)},no=P=>{var ue;const ee=(ue=P.target.files)==null?void 0:ue[0];if(!ee)return;const X=new FileReader;X.onload=async he=>{var Ie;try{const Se=JSON.parse((Ie=he.target)==null?void 0:Ie.result);await se.transaction("rw",se.tables,async()=>{for(const xe of se.tables)await xe.clear();for(const xe in Se)se[xe]&&await se[xe].bulkPut(Se[xe])}),alert("数据导入成功！应用即将刷新。"),window.location.reload()}catch(Se){alert("数据导入失败。文件可能已损坏或格式不正确。"),console.error("Import error:",Se)}},X.readAsText(ee)},to=Ce.useCallback(async P=>{if(rt.current.has(P))return;const ee=m.find(X=>X.id===P);if(!(!ee||!ee.autoReplyDelay||ee.autoReplyDelay<=0))try{rt.current.add(P),console.log(`Sending auto-reply to ${ee.name}`);const X=`msg_${Date.now()}_pending_auto`,ue={id:X,role:"model",payload:{type:"text",content:""},timestamp:Date.now(),characterId:P};A(ae=>({...ae,[P]:[...ae[P]||[],ue]}));const Se=await(await Ft(ee)).sendMessageStream({message:"[系统提示：用户已经有一段时间没有回复了。请发送一条简短、符合你角色性格的消息来重新吸引他们。你可以问一个问题，或者开启一个新的相关话题。不要提及这是一条自动消息或系统提示。]"});let xe="",Ge=!1;for await(const ae of Se)Ge||(Ge=!0,A(ve=>{const ge={...ve},qe=[...ge[P]||[]],Le=qe.findIndex(Ye=>Ye.id===X);if(Le!==-1){const Ye={...ge[P][Le],payload:{type:"text",content:" "}};qe[Le]=Ye,ge[P]=qe}return ge})),xe+=ae.text;const en=[];xe.split(Vs).map(ae=>ae.trim()).filter(Boolean).forEach((ae,ve)=>{let ge;const qe=ae.match(/\[sticker:(.*?)\]/),Le=ae.match(/\[transfer:(.*?):(.*?)\]/),Ye=ae.match(/\[image:(.*?)\]/),ye=ae.match(/\[location:(.*?)\]/);if(qe){const _n=qe[1].trim(),He=Y.find(un=>un.name===_n);ge=He?{type:"sticker",stickerId:He.id}:{type:"text",content:ae}}else Le?ge={type:"transfer",amount:parseFloat(Le[1]),notes:Le[2]}:Ye?ge={type:"image",description:Ye[1].trim()}:ye?ge={type:"location",name:ye[1].trim()}:ge={type:"text",content:ae};en.push({id:`msg_${Date.now()}_auto_${ve}`,characterId:P,role:"model",payload:ge,timestamp:Date.now()+ve})}),en.length>0?(await se.chats.bulkPut(en),A(ae=>{let ve=(ae[P]||[]).filter(ge=>ge.id!==X);return{...ae,[P]:[...ve,...en]}})):A(ae=>({...ae,[P]:(ae[P]||[]).filter(ve=>ve.id!==X)}))}catch(X){console.error(`Error sending auto-reply to ${P}:`,X),A(ue=>({...ue,[P]:(ue[P]||[]).filter(he=>!he.id.includes("_pending_auto"))}))}finally{rt.current.delete(P)}},[m,Ft,Y]);if(Ce.useEffect(()=>{const ee=setInterval(()=>{for(const X of m)if(X.autoReplyDelay&&X.autoReplyDelay>0){const ue=_[X.id]||[];if(ue.length>0){const he=ue[ue.length-1];if(he.role==="model"){const Ie=Date.now()-he.timestamp,Se=X.autoReplyDelay*60*1e3;Ie>Se&&to(X.id)}}}},6e4);return()=>clearInterval(ee)},[m,_,to]),!on)return G.jsx("div",{className:"loading-screen",children:"加载中..."});const mt=m.find(P=>P.id===E),me=m.find(P=>P.id===K),Ht=m.find(P=>P.id===E),It=Ht==null?void 0:Ht.chatBackgroundUrl,ro=()=>{if(me)return G.jsx(Gw,{character:me,onSave:xr,onBack:()=>O(null),userName:o,onDelete:qt});if(E&&mt)return G.jsx(Bw,{character:mt,messages:_[E]||[],onSendMessage:Jl,onBack:()=>w(null),onShowDetails:()=>O(E),userAvatar:l,customStickers:Y,onAddSticker:()=>nt(!0),onDeleteSticker:eo,onDeleteMessage:Vt,onEditMessage:Wl});switch(d){case"chats":return G.jsx(nh,{characters:m,chats:_,onSelectChat:w,onAdd:()=>p("add-menu")});case"contacts":return G.jsx(Fw,{characters:m,onSelectChat:w});case"moments":return G.jsx(Vw,{personas:vn,posts:V,onAddComment:Pr,onAddPost:()=>le(!0),onGenerate:()=>$e(!0),userName:o,userAvatar:l,momentsBackground:ie,onLikePost:P=>es(P,hi),onDeletePost:Yl});case"me":return G.jsx(qw,{currentConfig:be,onSaveApiConfig:Bt,apiKeys:n,activeApiKeyId:t,onDeleteApiKey:_e,onSetActiveApiKey:Zi,userName:o,userAvatar:l,onSaveUserName:jr,onSaveUserAvatar:Be,onImport:no,onExport:Gt,onSetMomentsBackground:Rr,onAddApiKey:()=>Ne(!0),currentTheme:Ee,onThemeChange:bo});case"add-menu":return G.jsx(zw,{onBack:()=>p("chats"),onAddCharacter:()=>b(!0),onAddApiKey:()=>Ne(!0)});default:return G.jsx(nh,{characters:m,chats:_,onSelectChat:w,onAdd:()=>p("add-menu")})}};return G.jsxs("div",{className:`app-container theme-${Ee}`,children:[G.jsx("style",{children:`
        ${It?`
          .chat-view[data-character-id="${E}"] .messages-container {
            background-image: url("${It}");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
          }
        `:""}
      `}),G.jsx(Ce.Suspense,{fallback:G.jsx("div",{className:"loading-screen",children:"加载中..."}),children:ro()}),!E&&!K&&d!=="add-menu"&&G.jsx(Uw,{activeView:d,onViewChange:p}),J&&G.jsx(Rw,{onClose:()=>b(!1),onSave:ts}),oe&&G.jsx(Mw,{onClose:()=>le(!1),onSave:ns}),ce&&G.jsx(Nw,{onClose:()=>Ne(!1),onSave:bl}),Ut&&G.jsx(Dw,{onClose:()=>nt(!1),onSave:Jo}),Me&&G.jsx(Lw,{characters:m,onClose:()=>$e(!1),onSelect:ot})]})},zw=({onBack:n,onAddCharacter:e,onAddApiKey:t})=>G.jsxs(G.Fragment,{children:[G.jsx(xw,{title:"添加",onBack:n}),G.jsx("main",{className:"main-content settings-view",children:G.jsxs("div",{className:"settings-section",children:[G.jsxs("div",{className:"settings-item",onClick:e,children:[G.jsx("span",{children:"添加新角色"}),G.jsx("span",{className:"arrow",children:"+"})]}),G.jsxs("div",{className:"settings-item",onClick:t,children:[G.jsx("span",{children:"添加新API密钥"}),G.jsx("span",{className:"arrow",children:"+"})]})]})})]}),rh=document.getElementById("root");rh&&yg(rh).render(G.jsx($w,{}));export{zg as A,lI as D,iI as E,xw as H,bw as R,sI as T,oI as g,Pw as i,G as j,Ce as r};
