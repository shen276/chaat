import{r as a,j as e,H as R,A as I,E as P,i as G}from"./index-BdaxE78_.js";const z=({currentConfig:i,onSaveApiConfig:j,apiKeys:p,activeApiKeyId:g,onDeleteApiKey:u,onSetActiveApiKey:v,userName:d,userAvatar:N,onSaveUserName:f,onSaveUserAvatar:k,onImport:b,onExport:C,onSetMomentsBackground:w,onAddApiKey:y,currentTheme:E,onThemeChange:A})=>{const[n,l]=a.useState(i),[F,t]=a.useState(!1),o=a.useRef(null),h=a.useRef(null);a.useEffect(()=>{l(i)},[i]);const r=()=>j(n),S=s=>s.length>8?`${s.substring(0,4)}...${s.substring(s.length-4)}`:s,B=s=>async M=>{var x;const m=(x=M.target.files)==null?void 0:x[0];if(m)try{const c=await G(m);s(c)}catch(c){console.error("Error converting file to Base64",c),alert("无法加载图片。")}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"我"}),e.jsxs("main",{className:"main-content settings-view",children:[e.jsxs("div",{className:"user-profile-banner",children:[e.jsx(I,{currentAvatar:N,onAvatarChange:k,className:"profile-banner-avatar"}),e.jsxs("div",{className:"user-name-display",onClick:()=>t(!0),children:[e.jsx("span",{children:d}),e.jsx("svg",{viewBox:"0 0 24 24",className:"edit-icon",children:e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"API 密钥"}),e.jsx("ul",{className:"api-key-list",children:p.map(s=>e.jsxs("li",{className:"api-key-item",children:[e.jsx("input",{type:"radio",name:"api-key",checked:g===s.id,onChange:()=>v(s.id)}),e.jsxs("div",{className:"api-key-info",children:[e.jsx("div",{className:"name",children:s.name}),e.jsx("div",{className:"key-preview",children:S(s.key)})]}),e.jsx("button",{className:"delete-key-btn",onClick:()=>u(s.id),children:"删除"})]},s.id))}),e.jsx("div",{className:"add-key-button",onClick:y,children:"+ 添加API密钥"}),e.jsxs("div",{className:"billing-link",children:["从 ",e.jsx("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio"})," 获取您的API密钥。"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"模型设置"}),e.jsxs("div",{className:"settings-item",children:[e.jsx("label",{htmlFor:"model-select",children:"模型"}),e.jsxs("select",{id:"model-select",value:n.model,onChange:s=>l({...n,model:s.target.value}),onBlur:r,children:[e.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),e.jsx("option",{value:"gemini-2.5-pro",children:"Gemini 2.5 Pro"})]})]}),e.jsxs("div",{className:"settings-item",children:[e.jsx("label",{children:"温度"}),e.jsxs("div",{className:"slider-container",children:[e.jsx("span",{children:"0.0"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:n.temperature,onChange:s=>l({...n,temperature:parseFloat(s.target.value)}),onMouseUp:r,onTouchEnd:r}),e.jsx("span",{children:n.temperature.toFixed(1)})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"外观"}),e.jsxs("div",{className:"settings-item",children:[e.jsx("label",{htmlFor:"theme-select",children:"主题"}),e.jsxs("select",{id:"theme-select",value:E,onChange:s=>A(s.target.value),children:[e.jsx("option",{value:"wechat",children:"微信"}),e.jsx("option",{value:"sakura-pink",children:"樱花粉"}),e.jsx("option",{value:"ocean-blue",children:"海洋蓝"}),e.jsx("option",{value:"mint-green",children:"薄荷绿"}),e.jsx("option",{value:"lavender-dream",children:"薰衣草紫"})]})]}),e.jsxs("div",{className:"settings-item",onClick:()=>{var s;return(s=h.current)==null?void 0:s.click()},children:[e.jsx("span",{children:"朋友圈背景"}),e.jsx("span",{className:"arrow",children:">"}),e.jsx("input",{type:"file",ref:h,style:{display:"none"},accept:"image/*",onChange:B(w)})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"数据管理"}),e.jsxs("div",{className:"settings-item",onClick:()=>{var s;return(s=o.current)==null?void 0:s.click()},children:[e.jsx("span",{children:"导入数据"}),e.jsx("span",{className:"arrow",children:">"})]}),e.jsx("input",{type:"file",ref:o,style:{display:"none"},accept:".json",onChange:b}),e.jsxs("div",{className:"settings-item",onClick:C,children:[e.jsx("span",{children:"导出数据"}),e.jsx("span",{className:"arrow",children:">"})]})]})]}),F&&e.jsx(P,{currentName:d,onClose:()=>t(!1),onSave:s=>{f(s),t(!1)}})]})};export{z as default};
