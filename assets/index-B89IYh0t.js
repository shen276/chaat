var py=Object.defineProperty;var hy=(n,e,t)=>e in n?py(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var br=(n,e,t)=>hy(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lh={exports:{}},Pl={},ah={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qi=Symbol.for("react.element"),my=Symbol.for("react.portal"),gy=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),vy=Symbol.for("react.profiler"),_y=Symbol.for("react.provider"),Cy=Symbol.for("react.context"),Sy=Symbol.for("react.forward_ref"),Ty=Symbol.for("react.suspense"),Ey=Symbol.for("react.memo"),wy=Symbol.for("react.lazy"),kd=Symbol.iterator;function xy(n){return n===null||typeof n!="object"?null:(n=kd&&n[kd]||n["@@iterator"],typeof n=="function"?n:null)}var uh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ch=Object.assign,dh={};function Oo(n,e,t){this.props=n,this.context=e,this.refs=dh,this.updater=t||uh}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Oo.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function fh(){}fh.prototype=Oo.prototype;function Zu(n,e,t){this.props=n,this.context=e,this.refs=dh,this.updater=t||uh}var ju=Zu.prototype=new fh;ju.constructor=Zu;ch(ju,Oo.prototype);ju.isPureReactComponent=!0;var Pd=Array.isArray,ph=Object.prototype.hasOwnProperty,ec={current:null},hh={key:!0,ref:!0,__self:!0,__source:!0};function mh(n,e,t){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)ph.call(e,r)&&!hh.hasOwnProperty(r)&&(o[r]=e[r]);var c=arguments.length-2;if(c===1)o.children=t;else if(1<c){for(var f=Array(c),p=0;p<c;p++)f[p]=arguments[p+2];o.children=f}if(n&&n.defaultProps)for(r in c=n.defaultProps,c)o[r]===void 0&&(o[r]=c[r]);return{$$typeof:Qi,type:n,key:i,ref:s,props:o,_owner:ec.current}}function Iy(n,e){return{$$typeof:Qi,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function nc(n){return typeof n=="object"&&n!==null&&n.$$typeof===Qi}function Ay(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Nd=/\/+/g;function Ea(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Ay(""+n.key):e.toString(36)}function Gs(n,e,t,r,o){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case Qi:case my:s=!0}}if(s)return s=n,o=o(s),n=r===""?"."+Ea(s,0):r,Pd(o)?(t="",n!=null&&(t=n.replace(Nd,"$&/")+"/"),Gs(o,e,t,"",function(p){return p})):o!=null&&(nc(o)&&(o=Iy(o,t+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Nd,"$&/")+"/")+n)),e.push(o)),1;if(s=0,r=r===""?".":r+":",Pd(n))for(var c=0;c<n.length;c++){i=n[c];var f=r+Ea(i,c);s+=Gs(i,e,t,f,o)}else if(f=xy(n),typeof f=="function")for(n=f.call(n),c=0;!(i=n.next()).done;)i=i.value,f=r+Ea(i,c++),s+=Gs(i,e,t,f,o);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ts(n,e,t){if(n==null)return n;var r=[],o=0;return Gs(n,r,"","",function(i){return e.call(t,i,o++)}),r}function ky(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Kn={current:null},bs={transition:null},Py={ReactCurrentDispatcher:Kn,ReactCurrentBatchConfig:bs,ReactCurrentOwner:ec};function gh(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:Ts,forEach:function(n,e,t){Ts(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ts(n,function(){e++}),e},toArray:function(n){return Ts(n,function(e){return e})||[]},only:function(n){if(!nc(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ue.Component=Oo;Ue.Fragment=gy;Ue.Profiler=vy;Ue.PureComponent=Zu;Ue.StrictMode=yy;Ue.Suspense=Ty;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Py;Ue.act=gh;Ue.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=ch({},n.props),o=n.key,i=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=ec.current),e.key!==void 0&&(o=""+e.key),n.type&&n.type.defaultProps)var c=n.type.defaultProps;for(f in e)ph.call(e,f)&&!hh.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&c!==void 0?c[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=t;else if(1<f){c=Array(f);for(var p=0;p<f;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:Qi,type:n.type,key:o,ref:i,props:r,_owner:s}};Ue.createContext=function(n){return n={$$typeof:Cy,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:_y,_context:n},n.Consumer=n};Ue.createElement=mh;Ue.createFactory=function(n){var e=mh.bind(null,n);return e.type=n,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(n){return{$$typeof:Sy,render:n}};Ue.isValidElement=nc;Ue.lazy=function(n){return{$$typeof:wy,_payload:{_status:-1,_result:n},_init:ky}};Ue.memo=function(n,e){return{$$typeof:Ey,type:n,compare:e===void 0?null:e}};Ue.startTransition=function(n){var e=bs.transition;bs.transition={};try{n()}finally{bs.transition=e}};Ue.unstable_act=gh;Ue.useCallback=function(n,e){return Kn.current.useCallback(n,e)};Ue.useContext=function(n){return Kn.current.useContext(n)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(n){return Kn.current.useDeferredValue(n)};Ue.useEffect=function(n,e){return Kn.current.useEffect(n,e)};Ue.useId=function(){return Kn.current.useId()};Ue.useImperativeHandle=function(n,e,t){return Kn.current.useImperativeHandle(n,e,t)};Ue.useInsertionEffect=function(n,e){return Kn.current.useInsertionEffect(n,e)};Ue.useLayoutEffect=function(n,e){return Kn.current.useLayoutEffect(n,e)};Ue.useMemo=function(n,e){return Kn.current.useMemo(n,e)};Ue.useReducer=function(n,e,t){return Kn.current.useReducer(n,e,t)};Ue.useRef=function(n){return Kn.current.useRef(n)};Ue.useState=function(n){return Kn.current.useState(n)};Ue.useSyncExternalStore=function(n,e,t){return Kn.current.useSyncExternalStore(n,e,t)};Ue.useTransition=function(){return Kn.current.useTransition()};Ue.version="18.3.1";ah.exports=Ue;var Q=ah.exports;const Ny=sh(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My=Q,Ry=Symbol.for("react.element"),Dy=Symbol.for("react.fragment"),Ly=Object.prototype.hasOwnProperty,Uy=My.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fy={key:!0,ref:!0,__self:!0,__source:!0};function yh(n,e,t){var r,o={},i=null,s=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Ly.call(e,r)&&!Fy.hasOwnProperty(r)&&(o[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Ry,type:n,key:i,ref:s,props:o,_owner:Uy.current}}Pl.Fragment=Dy;Pl.jsx=yh;Pl.jsxs=yh;lh.exports=Pl;var C=lh.exports,vh={exports:{}},ut={},_h={exports:{}},Ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ae,Ee){var ge=ae.length;ae.push(Ee);e:for(;0<ge;){var Be=ge-1>>>1,je=ae[Be];if(0<o(je,Ee))ae[Be]=Ee,ae[ge]=je,ge=Be;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var Ee=ae[0],ge=ae.pop();if(ge!==Ee){ae[0]=ge;e:for(var Be=0,je=ae.length,Jn=je>>>1;Be<Jn;){var Ye=2*(Be+1)-1,Hn=ae[Ye],yn=Ye+1,et=ae[yn];if(0>o(Hn,ge))yn<je&&0>o(et,Hn)?(ae[Be]=et,ae[yn]=ge,Be=yn):(ae[Be]=Hn,ae[Ye]=ge,Be=Ye);else if(yn<je&&0>o(et,ge))ae[Be]=et,ae[yn]=ge,Be=yn;else break e}}return Ee}function o(ae,Ee){var ge=ae.sortIndex-Ee.sortIndex;return ge!==0?ge:ae.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();n.unstable_now=function(){return s.now()-c}}var f=[],p=[],m=1,y=null,v=3,x=!1,U=!1,B=!1,J=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ae){for(var Ee=t(p);Ee!==null;){if(Ee.callback===null)r(p);else if(Ee.startTime<=ae)r(p),Ee.sortIndex=Ee.expirationTime,e(f,Ee);else break;Ee=t(p)}}function H(ae){if(B=!1,w(ae),!U)if(t(f)!==null)U=!0,He(z);else{var Ee=t(p);Ee!==null&&ln(H,Ee.startTime-ae)}}function z(ae,Ee){U=!1,B&&(B=!1,I(te),te=-1),x=!0;var ge=v;try{for(w(Ee),y=t(f);y!==null&&(!(y.expirationTime>Ee)||ae&&!we());){var Be=y.callback;if(typeof Be=="function"){y.callback=null,v=y.priorityLevel;var je=Be(y.expirationTime<=Ee);Ee=n.unstable_now(),typeof je=="function"?y.callback=je:y===t(f)&&r(f),w(Ee)}else r(f);y=t(f)}if(y!==null)var Jn=!0;else{var Ye=t(p);Ye!==null&&ln(H,Ye.startTime-Ee),Jn=!1}return Jn}finally{y=null,v=ge,x=!1}}var O=!1,$=null,te=-1,Y=5,ue=-1;function we(){return!(n.unstable_now()-ue<Y)}function xe(){if($!==null){var ae=n.unstable_now();ue=ae;var Ee=!0;try{Ee=$(!0,ae)}finally{Ee?Me():(O=!1,$=null)}}else O=!1}var Me;if(typeof E=="function")Me=function(){E(xe)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,rn=Ve.port2;Ve.port1.onmessage=xe,Me=function(){rn.postMessage(null)}}else Me=function(){J(xe,0)};function He(ae){$=ae,O||(O=!0,Me())}function ln(ae,Ee){te=J(function(){ae(n.unstable_now())},Ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){U||x||(U=!0,He(z))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(v){case 1:case 2:case 3:var Ee=3;break;default:Ee=v}var ge=v;v=Ee;try{return ae()}finally{v=ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,Ee){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ge=v;v=ae;try{return Ee()}finally{v=ge}},n.unstable_scheduleCallback=function(ae,Ee,ge){var Be=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Be+ge:Be):ge=Be,ae){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ge+je,ae={id:m++,callback:Ee,priorityLevel:ae,startTime:ge,expirationTime:je,sortIndex:-1},ge>Be?(ae.sortIndex=ge,e(p,ae),t(f)===null&&ae===t(p)&&(B?(I(te),te=-1):B=!0,ln(H,ge-Be))):(ae.sortIndex=je,e(f,ae),U||x||(U=!0,He(z))),ae},n.unstable_shouldYield=we,n.unstable_wrapCallback=function(ae){var Ee=v;return function(){var ge=v;v=Ee;try{return ae.apply(this,arguments)}finally{v=ge}}}})(Ch);_h.exports=Ch;var Vy=_h.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By=Q,at=Vy;function X(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sh=new Set,Di={};function to(n,e){qo(n,e),qo(n+"Capture",e)}function qo(n,e){for(Di[n]=e,n=0;n<e.length;n++)Sh.add(e[n])}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qa=Object.prototype.hasOwnProperty,qy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Md={},Rd={};function Hy(n){return Qa.call(Rd,n)?!0:Qa.call(Md,n)?!1:qy.test(n)?Rd[n]=!0:(Md[n]=!0,!1)}function Gy(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function by(n,e,t,r){if(e===null||typeof e>"u"||Gy(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(n,e,t,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){kn[n]=new On(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];kn[e]=new On(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){kn[n]=new On(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){kn[n]=new On(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){kn[n]=new On(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){kn[n]=new On(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){kn[n]=new On(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){kn[n]=new On(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){kn[n]=new On(n,5,!1,n.toLowerCase(),null,!1,!1)});var tc=/[\-:]([a-z])/g;function rc(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(tc,rc);kn[e]=new On(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(tc,rc);kn[e]=new On(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(tc,rc);kn[e]=new On(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){kn[n]=new On(n,1,!1,n.toLowerCase(),null,!1,!1)});kn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){kn[n]=new On(n,1,!1,n.toLowerCase(),null,!0,!0)});function oc(n,e,t,r){var o=kn.hasOwnProperty(e)?kn[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(by(e,t,o,r)&&(t=null),r||o===null?Hy(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):o.mustUseProperty?n[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,r=o.attributeNamespace,t===null?n.removeAttribute(e):(o=o.type,t=o===3||o===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var tr=By.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Es=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),ic=Symbol.for("react.strict_mode"),Xa=Symbol.for("react.profiler"),Th=Symbol.for("react.provider"),Eh=Symbol.for("react.context"),sc=Symbol.for("react.forward_ref"),Za=Symbol.for("react.suspense"),ja=Symbol.for("react.suspense_list"),lc=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),wh=Symbol.for("react.offscreen"),Dd=Symbol.iterator;function ci(n){return n===null||typeof n!="object"?null:(n=Dd&&n[Dd]||n["@@iterator"],typeof n=="function"?n:null)}var dn=Object.assign,wa;function _i(n){if(wa===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);wa=e&&e[1]||""}return`
`+wa+n}var xa=!1;function Ia(n,e){if(!n||xa)return"";xa=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(n,[],e)}else{try{e.call()}catch(p){r=p}n.call(e.prototype)}else{try{throw Error()}catch(p){r=p}n()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,c=i.length-1;1<=s&&0<=c&&o[s]!==i[c];)c--;for(;1<=s&&0<=c;s--,c--)if(o[s]!==i[c]){if(s!==1||c!==1)do if(s--,c--,0>c||o[s]!==i[c]){var f=`
`+o[s].replace(" at new "," at ");return n.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",n.displayName)),f}while(1<=s&&0<=c);break}}}finally{xa=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?_i(n):""}function zy(n){switch(n.tag){case 5:return _i(n.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return n=Ia(n.type,!1),n;case 11:return n=Ia(n.type.render,!1),n;case 1:return n=Ia(n.type,!0),n;default:return""}}function eu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case vo:return"Fragment";case yo:return"Portal";case Xa:return"Profiler";case ic:return"StrictMode";case Za:return"Suspense";case ja:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Eh:return(n.displayName||"Context")+".Consumer";case Th:return(n._context.displayName||"Context")+".Provider";case sc:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case lc:return e=n.displayName||null,e!==null?e:eu(n.type)||"Memo";case dr:e=n._payload,n=n._init;try{return eu(n(e))}catch{}}return null}function $y(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eu(e);case 8:return e===ic?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xh(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ky(n){var e=xh(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var o=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ws(n){n._valueTracker||(n._valueTracker=Ky(n))}function Ih(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=xh(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function nl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function nu(n,e){var t=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Ld(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ir(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ah(n,e){e=e.checked,e!=null&&oc(n,"checked",e,!1)}function tu(n,e){Ah(n,e);var t=Ir(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ru(n,e.type,t):e.hasOwnProperty("defaultValue")&&ru(n,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ud(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ru(n,e,t){(e!=="number"||nl(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ci=Array.isArray;function No(n,e,t,r){if(n=n.options,e){e={};for(var o=0;o<t.length;o++)e["$"+t[o]]=!0;for(t=0;t<n.length;t++)o=e.hasOwnProperty("$"+n[t].value),n[t].selected!==o&&(n[t].selected=o),o&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ir(t),e=null,o=0;o<n.length;o++){if(n[o].value===t){n[o].selected=!0,r&&(n[o].defaultSelected=!0);return}e!==null||n[o].disabled||(e=n[o])}e!==null&&(e.selected=!0)}}function ou(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Fd(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(X(92));if(Ci(t)){if(1<t.length)throw Error(X(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ir(t)}}function kh(n,e){var t=Ir(e.value),r=Ir(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Vd(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Ph(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iu(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Ph(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var xs,Nh=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,o)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Li(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oy=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(n){Oy.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ei[e]=Ei[n]})});function Mh(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ei.hasOwnProperty(n)&&Ei[n]?(""+e).trim():e+"px"}function Rh(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,o=Mh(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,o):n[t]=o}}var Jy=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(n,e){if(e){if(Jy[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function lu(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=null;function ac(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var uu=null,Mo=null,Ro=null;function Bd(n){if(n=ji(n)){if(typeof uu!="function")throw Error(X(280));var e=n.stateNode;e&&(e=Ll(e),uu(n.stateNode,n.type,e))}}function Dh(n){Mo?Ro?Ro.push(n):Ro=[n]:Mo=n}function Lh(){if(Mo){var n=Mo,e=Ro;if(Ro=Mo=null,Bd(n),e)for(n=0;n<e.length;n++)Bd(e[n])}}function Uh(n,e){return n(e)}function Fh(){}var Aa=!1;function Vh(n,e,t){if(Aa)return n(e,t);Aa=!0;try{return Uh(n,e,t)}finally{Aa=!1,(Mo!==null||Ro!==null)&&(Fh(),Lh())}}function Ui(n,e){var t=n.stateNode;if(t===null)return null;var r=Ll(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(X(231,e,typeof t));return t}var cu=!1;if(Zt)try{var di={};Object.defineProperty(di,"passive",{get:function(){cu=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{cu=!1}function Wy(n,e,t,r,o,i,s,c,f){var p=Array.prototype.slice.call(arguments,3);try{e.apply(t,p)}catch(m){this.onError(m)}}var wi=!1,tl=null,rl=!1,du=null,Yy={onError:function(n){wi=!0,tl=n}};function Qy(n,e,t,r,o,i,s,c,f){wi=!1,tl=null,Wy.apply(Yy,arguments)}function Xy(n,e,t,r,o,i,s,c,f){if(Qy.apply(this,arguments),wi){if(wi){var p=tl;wi=!1,tl=null}else throw Error(X(198));rl||(rl=!0,du=p)}}function ro(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Bh(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function qd(n){if(ro(n)!==n)throw Error(X(188))}function Zy(n){var e=n.alternate;if(!e){if(e=ro(n),e===null)throw Error(X(188));return e!==n?null:n}for(var t=n,r=e;;){var o=t.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){t=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===t)return qd(o),n;if(i===r)return qd(o),e;i=i.sibling}throw Error(X(188))}if(t.return!==r.return)t=o,r=i;else{for(var s=!1,c=o.child;c;){if(c===t){s=!0,t=o,r=i;break}if(c===r){s=!0,r=o,t=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===t){s=!0,t=i,r=o;break}if(c===r){s=!0,r=i,t=o;break}c=c.sibling}if(!s)throw Error(X(189))}}if(t.alternate!==r)throw Error(X(190))}if(t.tag!==3)throw Error(X(188));return t.stateNode.current===t?n:e}function qh(n){return n=Zy(n),n!==null?Hh(n):null}function Hh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Hh(n);if(e!==null)return e;n=n.sibling}return null}var Gh=at.unstable_scheduleCallback,Hd=at.unstable_cancelCallback,jy=at.unstable_shouldYield,ev=at.unstable_requestPaint,mn=at.unstable_now,nv=at.unstable_getCurrentPriorityLevel,uc=at.unstable_ImmediatePriority,bh=at.unstable_UserBlockingPriority,ol=at.unstable_NormalPriority,tv=at.unstable_LowPriority,zh=at.unstable_IdlePriority,Nl=null,Bt=null;function rv(n){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Nl,n,void 0,(n.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:sv,ov=Math.log,iv=Math.LN2;function sv(n){return n>>>=0,n===0?32:31-(ov(n)/iv|0)|0}var Is=64,As=4194304;function Si(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function il(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,o=n.suspendedLanes,i=n.pingedLanes,s=t&268435455;if(s!==0){var c=s&~o;c!==0?r=Si(c):(i&=s,i!==0&&(r=Si(i)))}else s=t&~o,s!==0?r=Si(s):i!==0&&(r=Si(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-It(e),o=1<<t,r|=n[t],e&=~o;return r}function lv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function av(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,o=n.expirationTimes,i=n.pendingLanes;0<i;){var s=31-It(i),c=1<<s,f=o[s];f===-1?(!(c&t)||c&r)&&(o[s]=lv(c,e)):f<=e&&(n.expiredLanes|=c),i&=~c}}function fu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $h(){var n=Is;return Is<<=1,!(Is&4194240)&&(Is=64),n}function ka(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Xi(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-It(e),n[e]=t}function uv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var o=31-It(t),i=1<<o;e[o]=0,r[o]=-1,n[o]=-1,t&=~i}}function cc(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-It(t),o=1<<r;o&e|n[r]&e&&(n[r]|=e),t&=~o}}var We=0;function Kh(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Oh,dc,Jh,Wh,Yh,pu=!1,ks=[],vr=null,_r=null,Cr=null,Fi=new Map,Vi=new Map,pr=[],cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gd(n,e){switch(n){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Fi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(e.pointerId)}}function fi(n,e,t,r,o,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=ji(e),e!==null&&dc(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),n)}function dv(n,e,t,r,o){switch(e){case"focusin":return vr=fi(vr,n,e,t,r,o),!0;case"dragenter":return _r=fi(_r,n,e,t,r,o),!0;case"mouseover":return Cr=fi(Cr,n,e,t,r,o),!0;case"pointerover":var i=o.pointerId;return Fi.set(i,fi(Fi.get(i)||null,n,e,t,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Vi.set(i,fi(Vi.get(i)||null,n,e,t,r,o)),!0}return!1}function Qh(n){var e=Kr(n.target);if(e!==null){var t=ro(e);if(t!==null){if(e=t.tag,e===13){if(e=Bh(t),e!==null){n.blockedOn=e,Yh(n.priority,function(){Jh(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zs(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=hu(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);au=r,t.target.dispatchEvent(r),au=null}else return e=ji(t),e!==null&&dc(e),n.blockedOn=t,!1;e.shift()}return!0}function bd(n,e,t){zs(n)&&t.delete(e)}function fv(){pu=!1,vr!==null&&zs(vr)&&(vr=null),_r!==null&&zs(_r)&&(_r=null),Cr!==null&&zs(Cr)&&(Cr=null),Fi.forEach(bd),Vi.forEach(bd)}function pi(n,e){n.blockedOn===e&&(n.blockedOn=null,pu||(pu=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,fv)))}function Bi(n){function e(o){return pi(o,n)}if(0<ks.length){pi(ks[0],n);for(var t=1;t<ks.length;t++){var r=ks[t];r.blockedOn===n&&(r.blockedOn=null)}}for(vr!==null&&pi(vr,n),_r!==null&&pi(_r,n),Cr!==null&&pi(Cr,n),Fi.forEach(e),Vi.forEach(e),t=0;t<pr.length;t++)r=pr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<pr.length&&(t=pr[0],t.blockedOn===null);)Qh(t),t.blockedOn===null&&pr.shift()}var Do=tr.ReactCurrentBatchConfig,sl=!0;function pv(n,e,t,r){var o=We,i=Do.transition;Do.transition=null;try{We=1,fc(n,e,t,r)}finally{We=o,Do.transition=i}}function hv(n,e,t,r){var o=We,i=Do.transition;Do.transition=null;try{We=4,fc(n,e,t,r)}finally{We=o,Do.transition=i}}function fc(n,e,t,r){if(sl){var o=hu(n,e,t,r);if(o===null)Ba(n,e,r,ll,t),Gd(n,r);else if(dv(o,n,e,t,r))r.stopPropagation();else if(Gd(n,r),e&4&&-1<cv.indexOf(n)){for(;o!==null;){var i=ji(o);if(i!==null&&Oh(i),i=hu(n,e,t,r),i===null&&Ba(n,e,r,ll,t),i===o)break;o=i}o!==null&&r.stopPropagation()}else Ba(n,e,r,null,t)}}var ll=null;function hu(n,e,t,r){if(ll=null,n=ac(r),n=Kr(n),n!==null)if(e=ro(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Bh(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ll=n,null}function Xh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nv()){case uc:return 1;case bh:return 4;case ol:case tv:return 16;case zh:return 536870912;default:return 16}default:return 16}}var mr=null,pc=null,$s=null;function Zh(){if($s)return $s;var n,e=pc,t=e.length,r,o="value"in mr?mr.value:mr.textContent,i=o.length;for(n=0;n<t&&e[n]===o[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===o[i-r];r++);return $s=o.slice(n,1<r?1-r:void 0)}function Ks(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ps(){return!0}function zd(){return!1}function ct(n){function e(t,r,o,i,s){this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var c in n)n.hasOwnProperty(c)&&(t=n[c],this[c]=t?t(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ps:zd,this.isPropagationStopped=zd,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=ct(Jo),Zi=dn({},Jo,{view:0,detail:0}),mv=ct(Zi),Pa,Na,hi,Ml=dn({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hi&&(hi&&n.type==="mousemove"?(Pa=n.screenX-hi.screenX,Na=n.screenY-hi.screenY):Na=Pa=0,hi=n),Pa)},movementY:function(n){return"movementY"in n?n.movementY:Na}}),$d=ct(Ml),gv=dn({},Ml,{dataTransfer:0}),yv=ct(gv),vv=dn({},Zi,{relatedTarget:0}),Ma=ct(vv),_v=dn({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Cv=ct(_v),Sv=dn({},Jo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tv=ct(Sv),Ev=dn({},Jo,{data:0}),Kd=ct(Ev),wv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Av(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Iv[n])?!!e[n]:!1}function mc(){return Av}var kv=dn({},Zi,{key:function(n){if(n.key){var e=wv[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mc,charCode:function(n){return n.type==="keypress"?Ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pv=ct(kv),Nv=dn({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Od=ct(Nv),Mv=dn({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mc}),Rv=ct(Mv),Dv=dn({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lv=ct(Dv),Uv=dn({},Ml,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fv=ct(Uv),Vv=[9,13,27,32],gc=Zt&&"CompositionEvent"in window,xi=null;Zt&&"documentMode"in document&&(xi=document.documentMode);var Bv=Zt&&"TextEvent"in window&&!xi,jh=Zt&&(!gc||xi&&8<xi&&11>=xi),Jd=" ",Wd=!1;function em(n,e){switch(n){case"keyup":return Vv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _o=!1;function qv(n,e){switch(n){case"compositionend":return nm(e);case"keypress":return e.which!==32?null:(Wd=!0,Jd);case"textInput":return n=e.data,n===Jd&&Wd?null:n;default:return null}}function Hv(n,e){if(_o)return n==="compositionend"||!gc&&em(n,e)?(n=Zh(),$s=pc=mr=null,_o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jh&&e.locale!=="ko"?null:e.data;default:return null}}var Gv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Gv[n.type]:e==="textarea"}function tm(n,e,t,r){Dh(r),e=al(e,"onChange"),0<e.length&&(t=new hc("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Ii=null,qi=null;function bv(n){pm(n,0)}function Rl(n){var e=To(n);if(Ih(e))return n}function zv(n,e){if(n==="change")return e}var rm=!1;if(Zt){var Ra;if(Zt){var Da="oninput"in document;if(!Da){var Qd=document.createElement("div");Qd.setAttribute("oninput","return;"),Da=typeof Qd.oninput=="function"}Ra=Da}else Ra=!1;rm=Ra&&(!document.documentMode||9<document.documentMode)}function Xd(){Ii&&(Ii.detachEvent("onpropertychange",om),qi=Ii=null)}function om(n){if(n.propertyName==="value"&&Rl(qi)){var e=[];tm(e,qi,n,ac(n)),Vh(bv,e)}}function $v(n,e,t){n==="focusin"?(Xd(),Ii=e,qi=t,Ii.attachEvent("onpropertychange",om)):n==="focusout"&&Xd()}function Kv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Rl(qi)}function Ov(n,e){if(n==="click")return Rl(e)}function Jv(n,e){if(n==="input"||n==="change")return Rl(e)}function Wv(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var kt=typeof Object.is=="function"?Object.is:Wv;function Hi(n,e){if(kt(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var o=t[r];if(!Qa.call(e,o)||!kt(n[o],e[o]))return!1}return!0}function Zd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jd(n,e){var t=Zd(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Zd(t)}}function im(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?im(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function sm(){for(var n=window,e=nl();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=nl(n.document)}return e}function yc(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Yv(n){var e=sm(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&im(t.ownerDocument.documentElement,t)){if(r!==null&&yc(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=t.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!n.extend&&i>r&&(o=r,r=i,i=o),o=jd(t,i);var s=jd(t,r);o&&s&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Qv=Zt&&"documentMode"in document&&11>=document.documentMode,Co=null,mu=null,Ai=null,gu=!1;function ef(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;gu||Co==null||Co!==nl(r)||(r=Co,"selectionStart"in r&&yc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ai&&Hi(Ai,r)||(Ai=r,r=al(mu,"onSelect"),0<r.length&&(e=new hc("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Co)))}function Ns(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var So={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionend:Ns("Transition","TransitionEnd")},La={},lm={};Zt&&(lm=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Dl(n){if(La[n])return La[n];if(!So[n])return n;var e=So[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in lm)return La[n]=e[t];return n}var am=Dl("animationend"),um=Dl("animationiteration"),cm=Dl("animationstart"),dm=Dl("transitionend"),fm=new Map,nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(n,e){fm.set(n,e),to(e,[n])}for(var Ua=0;Ua<nf.length;Ua++){var Fa=nf[Ua],Xv=Fa.toLowerCase(),Zv=Fa[0].toUpperCase()+Fa.slice(1);kr(Xv,"on"+Zv)}kr(am,"onAnimationEnd");kr(um,"onAnimationIteration");kr(cm,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(dm,"onTransitionEnd");qo("onMouseEnter",["mouseout","mouseover"]);qo("onMouseLeave",["mouseout","mouseover"]);qo("onPointerEnter",["pointerout","pointerover"]);qo("onPointerLeave",["pointerout","pointerover"]);to("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));to("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));to("onBeforeInput",["compositionend","keypress","textInput","paste"]);to("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));to("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));to("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function tf(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Xy(r,e,void 0,n),n.currentTarget=null}function pm(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var c=r[s],f=c.instance,p=c.currentTarget;if(c=c.listener,f!==i&&o.isPropagationStopped())break e;tf(o,c,p),i=f}else for(s=0;s<r.length;s++){if(c=r[s],f=c.instance,p=c.currentTarget,c=c.listener,f!==i&&o.isPropagationStopped())break e;tf(o,c,p),i=f}}}if(rl)throw n=du,rl=!1,du=null,n}function en(n,e){var t=e[Su];t===void 0&&(t=e[Su]=new Set);var r=n+"__bubble";t.has(r)||(hm(e,n,2,!1),t.add(r))}function Va(n,e,t){var r=0;e&&(r|=4),hm(t,n,r,e)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function Gi(n){if(!n[Ms]){n[Ms]=!0,Sh.forEach(function(t){t!=="selectionchange"&&(jv.has(t)||Va(t,!1,n),Va(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ms]||(e[Ms]=!0,Va("selectionchange",!1,e))}}function hm(n,e,t,r){switch(Xh(e)){case 1:var o=pv;break;case 4:o=hv;break;default:o=fc}t=o.bind(null,e,t,n),o=void 0,!cu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?n.addEventListener(e,t,{capture:!0,passive:o}):n.addEventListener(e,t,!0):o!==void 0?n.addEventListener(e,t,{passive:o}):n.addEventListener(e,t,!1)}function Ba(n,e,t,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var f=s.tag;if((f===3||f===4)&&(f=s.stateNode.containerInfo,f===o||f.nodeType===8&&f.parentNode===o))return;s=s.return}for(;c!==null;){if(s=Kr(c),s===null)return;if(f=s.tag,f===5||f===6){r=i=s;continue e}c=c.parentNode}}r=r.return}Vh(function(){var p=i,m=ac(t),y=[];e:{var v=fm.get(n);if(v!==void 0){var x=hc,U=n;switch(n){case"keypress":if(Ks(t)===0)break e;case"keydown":case"keyup":x=Pv;break;case"focusin":U="focus",x=Ma;break;case"focusout":U="blur",x=Ma;break;case"beforeblur":case"afterblur":x=Ma;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Rv;break;case am:case um:case cm:x=Cv;break;case dm:x=Lv;break;case"scroll":x=mv;break;case"wheel":x=Fv;break;case"copy":case"cut":case"paste":x=Tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Od}var B=(e&4)!==0,J=!B&&n==="scroll",I=B?v!==null?v+"Capture":null:v;B=[];for(var E=p,w;E!==null;){w=E;var H=w.stateNode;if(w.tag===5&&H!==null&&(w=H,I!==null&&(H=Ui(E,I),H!=null&&B.push(bi(E,H,w)))),J)break;E=E.return}0<B.length&&(v=new x(v,U,null,t,m),y.push({event:v,listeners:B}))}}if(!(e&7)){e:{if(v=n==="mouseover"||n==="pointerover",x=n==="mouseout"||n==="pointerout",v&&t!==au&&(U=t.relatedTarget||t.fromElement)&&(Kr(U)||U[jt]))break e;if((x||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,x?(U=t.relatedTarget||t.toElement,x=p,U=U?Kr(U):null,U!==null&&(J=ro(U),U!==J||U.tag!==5&&U.tag!==6)&&(U=null)):(x=null,U=p),x!==U)){if(B=$d,H="onMouseLeave",I="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(B=Od,H="onPointerLeave",I="onPointerEnter",E="pointer"),J=x==null?v:To(x),w=U==null?v:To(U),v=new B(H,E+"leave",x,t,m),v.target=J,v.relatedTarget=w,H=null,Kr(m)===p&&(B=new B(I,E+"enter",U,t,m),B.target=w,B.relatedTarget=J,H=B),J=H,x&&U)n:{for(B=x,I=U,E=0,w=B;w;w=mo(w))E++;for(w=0,H=I;H;H=mo(H))w++;for(;0<E-w;)B=mo(B),E--;for(;0<w-E;)I=mo(I),w--;for(;E--;){if(B===I||I!==null&&B===I.alternate)break n;B=mo(B),I=mo(I)}B=null}else B=null;x!==null&&rf(y,v,x,B,!1),U!==null&&J!==null&&rf(y,J,U,B,!0)}}e:{if(v=p?To(p):window,x=v.nodeName&&v.nodeName.toLowerCase(),x==="select"||x==="input"&&v.type==="file")var z=zv;else if(Yd(v))if(rm)z=Jv;else{z=Kv;var O=$v}else(x=v.nodeName)&&x.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(z=Ov);if(z&&(z=z(n,p))){tm(y,z,t,m);break e}O&&O(n,v,p),n==="focusout"&&(O=v._wrapperState)&&O.controlled&&v.type==="number"&&ru(v,"number",v.value)}switch(O=p?To(p):window,n){case"focusin":(Yd(O)||O.contentEditable==="true")&&(Co=O,mu=p,Ai=null);break;case"focusout":Ai=mu=Co=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,ef(y,t,m);break;case"selectionchange":if(Qv)break;case"keydown":case"keyup":ef(y,t,m)}var $;if(gc)e:{switch(n){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else _o?em(n,t)&&(te="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(te="onCompositionStart");te&&(jh&&t.locale!=="ko"&&(_o||te!=="onCompositionStart"?te==="onCompositionEnd"&&_o&&($=Zh()):(mr=m,pc="value"in mr?mr.value:mr.textContent,_o=!0)),O=al(p,te),0<O.length&&(te=new Kd(te,n,null,t,m),y.push({event:te,listeners:O}),$?te.data=$:($=nm(t),$!==null&&(te.data=$)))),($=Bv?qv(n,t):Hv(n,t))&&(p=al(p,"onBeforeInput"),0<p.length&&(m=new Kd("onBeforeInput","beforeinput",null,t,m),y.push({event:m,listeners:p}),m.data=$))}pm(y,e)})}function bi(n,e,t){return{instance:n,listener:e,currentTarget:t}}function al(n,e){for(var t=e+"Capture",r=[];n!==null;){var o=n,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Ui(n,t),i!=null&&r.unshift(bi(n,i,o)),i=Ui(n,e),i!=null&&r.push(bi(n,i,o))),n=n.return}return r}function mo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function rf(n,e,t,r,o){for(var i=e._reactName,s=[];t!==null&&t!==r;){var c=t,f=c.alternate,p=c.stateNode;if(f!==null&&f===r)break;c.tag===5&&p!==null&&(c=p,o?(f=Ui(t,i),f!=null&&s.unshift(bi(t,f,c))):o||(f=Ui(t,i),f!=null&&s.push(bi(t,f,c)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var e0=/\r\n?/g,n0=/\u0000|\uFFFD/g;function of(n){return(typeof n=="string"?n:""+n).replace(e0,`
`).replace(n0,"")}function Rs(n,e,t){if(e=of(e),of(n)!==e&&t)throw Error(X(425))}function ul(){}var yu=null,vu=null;function _u(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cu=typeof setTimeout=="function"?setTimeout:void 0,t0=typeof clearTimeout=="function"?clearTimeout:void 0,sf=typeof Promise=="function"?Promise:void 0,r0=typeof queueMicrotask=="function"?queueMicrotask:typeof sf<"u"?function(n){return sf.resolve(null).then(n).catch(o0)}:Cu;function o0(n){setTimeout(function(){throw n})}function qa(n,e){var t=e,r=0;do{var o=t.nextSibling;if(n.removeChild(t),o&&o.nodeType===8)if(t=o.data,t==="/$"){if(r===0){n.removeChild(o),Bi(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=o}while(t);Bi(e)}function Sr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function lf(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Wo,zi="__reactProps$"+Wo,jt="__reactContainer$"+Wo,Su="__reactEvents$"+Wo,i0="__reactListeners$"+Wo,s0="__reactHandles$"+Wo;function Kr(n){var e=n[Vt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[jt]||t[Vt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=lf(n);n!==null;){if(t=n[Vt])return t;n=lf(n)}return e}n=t,t=n.parentNode}return null}function ji(n){return n=n[Vt]||n[jt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function To(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(X(33))}function Ll(n){return n[zi]||null}var Tu=[],Eo=-1;function Pr(n){return{current:n}}function tn(n){0>Eo||(n.current=Tu[Eo],Tu[Eo]=null,Eo--)}function Ze(n,e){Eo++,Tu[Eo]=n.current,n.current=e}var Ar={},qn=Pr(Ar),Xn=Pr(!1),Qr=Ar;function Ho(n,e){var t=n.type.contextTypes;if(!t)return Ar;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in t)o[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),o}function Zn(n){return n=n.childContextTypes,n!=null}function cl(){tn(Xn),tn(qn)}function af(n,e,t){if(qn.current!==Ar)throw Error(X(168));Ze(qn,e),Ze(Xn,t)}function mm(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(X(108,$y(n)||"Unknown",o));return dn({},t,r)}function dl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ar,Qr=qn.current,Ze(qn,n),Ze(Xn,Xn.current),!0}function uf(n,e,t){var r=n.stateNode;if(!r)throw Error(X(169));t?(n=mm(n,e,Qr),r.__reactInternalMemoizedMergedChildContext=n,tn(Xn),tn(qn),Ze(qn,n)):tn(Xn),Ze(Xn,t)}var Jt=null,Ul=!1,Ha=!1;function gm(n){Jt===null?Jt=[n]:Jt.push(n)}function l0(n){Ul=!0,gm(n)}function Nr(){if(!Ha&&Jt!==null){Ha=!0;var n=0,e=We;try{var t=Jt;for(We=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Jt=null,Ul=!1}catch(o){throw Jt!==null&&(Jt=Jt.slice(n+1)),Gh(uc,Nr),o}finally{We=e,Ha=!1}}return null}var wo=[],xo=0,fl=null,pl=0,ht=[],mt=0,Xr=null,Wt=1,Yt="";function zr(n,e){wo[xo++]=pl,wo[xo++]=fl,fl=n,pl=e}function ym(n,e,t){ht[mt++]=Wt,ht[mt++]=Yt,ht[mt++]=Xr,Xr=n;var r=Wt;n=Yt;var o=32-It(r)-1;r&=~(1<<o),t+=1;var i=32-It(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Wt=1<<32-It(e)+o|t<<o|r,Yt=i+n}else Wt=1<<i|t<<o|r,Yt=n}function vc(n){n.return!==null&&(zr(n,1),ym(n,1,0))}function _c(n){for(;n===fl;)fl=wo[--xo],wo[xo]=null,pl=wo[--xo],wo[xo]=null;for(;n===Xr;)Xr=ht[--mt],ht[mt]=null,Yt=ht[--mt],ht[mt]=null,Wt=ht[--mt],ht[mt]=null}var lt=null,st=null,sn=!1,xt=null;function vm(n,e){var t=gt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function cf(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,lt=n,st=Sr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,lt=n,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xr!==null?{id:Wt,overflow:Yt}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=gt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,lt=n,st=null,!0):!1;default:return!1}}function Eu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wu(n){if(sn){var e=st;if(e){var t=e;if(!cf(n,e)){if(Eu(n))throw Error(X(418));e=Sr(t.nextSibling);var r=lt;e&&cf(n,e)?vm(r,t):(n.flags=n.flags&-4097|2,sn=!1,lt=n)}}else{if(Eu(n))throw Error(X(418));n.flags=n.flags&-4097|2,sn=!1,lt=n}}}function df(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;lt=n}function Ds(n){if(n!==lt)return!1;if(!sn)return df(n),sn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!_u(n.type,n.memoizedProps)),e&&(e=st)){if(Eu(n))throw _m(),Error(X(418));for(;e;)vm(n,e),e=Sr(e.nextSibling)}if(df(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(X(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){st=Sr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}st=null}}else st=lt?Sr(n.stateNode.nextSibling):null;return!0}function _m(){for(var n=st;n;)n=Sr(n.nextSibling)}function Go(){st=lt=null,sn=!1}function Cc(n){xt===null?xt=[n]:xt.push(n)}var a0=tr.ReactCurrentBatchConfig;function mi(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(X(309));var r=t.stateNode}if(!r)throw Error(X(147,n));var o=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var c=o.refs;s===null?delete c[i]:c[i]=s},e._stringRef=i,e)}if(typeof n!="string")throw Error(X(284));if(!t._owner)throw Error(X(290,n))}return n}function Ls(n,e){throw n=Object.prototype.toString.call(e),Error(X(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function ff(n){var e=n._init;return e(n._payload)}function Cm(n){function e(I,E){if(n){var w=I.deletions;w===null?(I.deletions=[E],I.flags|=16):w.push(E)}}function t(I,E){if(!n)return null;for(;E!==null;)e(I,E),E=E.sibling;return null}function r(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function o(I,E){return I=xr(I,E),I.index=0,I.sibling=null,I}function i(I,E,w){return I.index=w,n?(w=I.alternate,w!==null?(w=w.index,w<E?(I.flags|=2,E):w):(I.flags|=2,E)):(I.flags|=1048576,E)}function s(I){return n&&I.alternate===null&&(I.flags|=2),I}function c(I,E,w,H){return E===null||E.tag!==6?(E=Ja(w,I.mode,H),E.return=I,E):(E=o(E,w),E.return=I,E)}function f(I,E,w,H){var z=w.type;return z===vo?m(I,E,w.props.children,H,w.key):E!==null&&(E.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===dr&&ff(z)===E.type)?(H=o(E,w.props),H.ref=mi(I,E,w),H.return=I,H):(H=Zs(w.type,w.key,w.props,null,I.mode,H),H.ref=mi(I,E,w),H.return=I,H)}function p(I,E,w,H){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=Wa(w,I.mode,H),E.return=I,E):(E=o(E,w.children||[]),E.return=I,E)}function m(I,E,w,H,z){return E===null||E.tag!==7?(E=Yr(w,I.mode,H,z),E.return=I,E):(E=o(E,w),E.return=I,E)}function y(I,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ja(""+E,I.mode,w),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Es:return w=Zs(E.type,E.key,E.props,null,I.mode,w),w.ref=mi(I,null,E),w.return=I,w;case yo:return E=Wa(E,I.mode,w),E.return=I,E;case dr:var H=E._init;return y(I,H(E._payload),w)}if(Ci(E)||ci(E))return E=Yr(E,I.mode,w,null),E.return=I,E;Ls(I,E)}return null}function v(I,E,w,H){var z=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return z!==null?null:c(I,E,""+w,H);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Es:return w.key===z?f(I,E,w,H):null;case yo:return w.key===z?p(I,E,w,H):null;case dr:return z=w._init,v(I,E,z(w._payload),H)}if(Ci(w)||ci(w))return z!==null?null:m(I,E,w,H,null);Ls(I,w)}return null}function x(I,E,w,H,z){if(typeof H=="string"&&H!==""||typeof H=="number")return I=I.get(w)||null,c(E,I,""+H,z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Es:return I=I.get(H.key===null?w:H.key)||null,f(E,I,H,z);case yo:return I=I.get(H.key===null?w:H.key)||null,p(E,I,H,z);case dr:var O=H._init;return x(I,E,w,O(H._payload),z)}if(Ci(H)||ci(H))return I=I.get(w)||null,m(E,I,H,z,null);Ls(E,H)}return null}function U(I,E,w,H){for(var z=null,O=null,$=E,te=E=0,Y=null;$!==null&&te<w.length;te++){$.index>te?(Y=$,$=null):Y=$.sibling;var ue=v(I,$,w[te],H);if(ue===null){$===null&&($=Y);break}n&&$&&ue.alternate===null&&e(I,$),E=i(ue,E,te),O===null?z=ue:O.sibling=ue,O=ue,$=Y}if(te===w.length)return t(I,$),sn&&zr(I,te),z;if($===null){for(;te<w.length;te++)$=y(I,w[te],H),$!==null&&(E=i($,E,te),O===null?z=$:O.sibling=$,O=$);return sn&&zr(I,te),z}for($=r(I,$);te<w.length;te++)Y=x($,I,te,w[te],H),Y!==null&&(n&&Y.alternate!==null&&$.delete(Y.key===null?te:Y.key),E=i(Y,E,te),O===null?z=Y:O.sibling=Y,O=Y);return n&&$.forEach(function(we){return e(I,we)}),sn&&zr(I,te),z}function B(I,E,w,H){var z=ci(w);if(typeof z!="function")throw Error(X(150));if(w=z.call(w),w==null)throw Error(X(151));for(var O=z=null,$=E,te=E=0,Y=null,ue=w.next();$!==null&&!ue.done;te++,ue=w.next()){$.index>te?(Y=$,$=null):Y=$.sibling;var we=v(I,$,ue.value,H);if(we===null){$===null&&($=Y);break}n&&$&&we.alternate===null&&e(I,$),E=i(we,E,te),O===null?z=we:O.sibling=we,O=we,$=Y}if(ue.done)return t(I,$),sn&&zr(I,te),z;if($===null){for(;!ue.done;te++,ue=w.next())ue=y(I,ue.value,H),ue!==null&&(E=i(ue,E,te),O===null?z=ue:O.sibling=ue,O=ue);return sn&&zr(I,te),z}for($=r(I,$);!ue.done;te++,ue=w.next())ue=x($,I,te,ue.value,H),ue!==null&&(n&&ue.alternate!==null&&$.delete(ue.key===null?te:ue.key),E=i(ue,E,te),O===null?z=ue:O.sibling=ue,O=ue);return n&&$.forEach(function(xe){return e(I,xe)}),sn&&zr(I,te),z}function J(I,E,w,H){if(typeof w=="object"&&w!==null&&w.type===vo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Es:e:{for(var z=w.key,O=E;O!==null;){if(O.key===z){if(z=w.type,z===vo){if(O.tag===7){t(I,O.sibling),E=o(O,w.props.children),E.return=I,I=E;break e}}else if(O.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===dr&&ff(z)===O.type){t(I,O.sibling),E=o(O,w.props),E.ref=mi(I,O,w),E.return=I,I=E;break e}t(I,O);break}else e(I,O);O=O.sibling}w.type===vo?(E=Yr(w.props.children,I.mode,H,w.key),E.return=I,I=E):(H=Zs(w.type,w.key,w.props,null,I.mode,H),H.ref=mi(I,E,w),H.return=I,I=H)}return s(I);case yo:e:{for(O=w.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){t(I,E.sibling),E=o(E,w.children||[]),E.return=I,I=E;break e}else{t(I,E);break}else e(I,E);E=E.sibling}E=Wa(w,I.mode,H),E.return=I,I=E}return s(I);case dr:return O=w._init,J(I,E,O(w._payload),H)}if(Ci(w))return U(I,E,w,H);if(ci(w))return B(I,E,w,H);Ls(I,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(t(I,E.sibling),E=o(E,w),E.return=I,I=E):(t(I,E),E=Ja(w,I.mode,H),E.return=I,I=E),s(I)):t(I,E)}return J}var bo=Cm(!0),Sm=Cm(!1),hl=Pr(null),ml=null,Io=null,Sc=null;function Tc(){Sc=Io=ml=null}function Ec(n){var e=hl.current;tn(hl),n._currentValue=e}function xu(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Lo(n,e){ml=n,Sc=Io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qn=!0),n.firstContext=null)}function _t(n){var e=n._currentValue;if(Sc!==n)if(n={context:n,memoizedValue:e,next:null},Io===null){if(ml===null)throw Error(X(308));Io=n,ml.dependencies={lanes:0,firstContext:n}}else Io=Io.next=n;return e}var Or=null;function wc(n){Or===null?Or=[n]:Or.push(n)}function Tm(n,e,t,r){var o=e.interleaved;return o===null?(t.next=t,wc(e)):(t.next=o.next,o.next=t),e.interleaved=t,er(n,r)}function er(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var fr=!1;function xc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Em(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Qt(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,er(n,t)}return o=r.interleaved,o===null?(e.next=e,wc(r)):(e.next=o.next,o.next=e),r.interleaved=e,er(n,t)}function Os(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,cc(n,t)}}function pf(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var o=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?o=i=s:i=i.next=s,t=t.next}while(t!==null);i===null?o=i=e:i=i.next=e}else o=i=e;t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function gl(n,e,t,r){var o=n.updateQueue;fr=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var f=c,p=f.next;f.next=null,s===null?i=p:s.next=p,s=f;var m=n.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==s&&(c===null?m.firstBaseUpdate=p:c.next=p,m.lastBaseUpdate=f))}if(i!==null){var y=o.baseState;s=0,m=p=f=null,c=i;do{var v=c.lane,x=c.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var U=n,B=c;switch(v=e,x=t,B.tag){case 1:if(U=B.payload,typeof U=="function"){y=U.call(x,y,v);break e}y=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=B.payload,v=typeof U=="function"?U.call(x,y,v):U,v==null)break e;y=dn({},y,v);break e;case 2:fr=!0}}c.callback!==null&&c.lane!==0&&(n.flags|=64,v=o.effects,v===null?o.effects=[c]:v.push(c))}else x={eventTime:x,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(p=m=x,f=y):m=m.next=x,s|=v;if(c=c.next,c===null){if(c=o.shared.pending,c===null)break;v=c,c=v.next,v.next=null,o.lastBaseUpdate=v,o.shared.pending=null}}while(!0);if(m===null&&(f=y),o.baseState=f,o.firstBaseUpdate=p,o.lastBaseUpdate=m,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);jr|=s,n.lanes=s,n.memoizedState=y}}function hf(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],o=r.callback;if(o!==null){if(r.callback=null,r=t,typeof o!="function")throw Error(X(191,o));o.call(r)}}}var es={},qt=Pr(es),$i=Pr(es),Ki=Pr(es);function Jr(n){if(n===es)throw Error(X(174));return n}function Ic(n,e){switch(Ze(Ki,e),Ze($i,n),Ze(qt,es),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iu(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=iu(e,n)}tn(qt),Ze(qt,e)}function zo(){tn(qt),tn($i),tn(Ki)}function wm(n){Jr(Ki.current);var e=Jr(qt.current),t=iu(e,n.type);e!==t&&(Ze($i,n),Ze(qt,t))}function Ac(n){$i.current===n&&(tn(qt),tn($i))}var un=Pr(0);function yl(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ga=[];function kc(){for(var n=0;n<Ga.length;n++)Ga[n]._workInProgressVersionPrimary=null;Ga.length=0}var Js=tr.ReactCurrentDispatcher,ba=tr.ReactCurrentBatchConfig,Zr=0,cn=null,_n=null,En=null,vl=!1,ki=!1,Oi=0,u0=0;function Un(){throw Error(X(321))}function Pc(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!kt(n[t],e[t]))return!1;return!0}function Nc(n,e,t,r,o,i){if(Zr=i,cn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Js.current=n===null||n.memoizedState===null?p0:h0,n=t(r,o),ki){i=0;do{if(ki=!1,Oi=0,25<=i)throw Error(X(301));i+=1,En=_n=null,e.updateQueue=null,Js.current=m0,n=t(r,o)}while(ki)}if(Js.current=_l,e=_n!==null&&_n.next!==null,Zr=0,En=_n=cn=null,vl=!1,e)throw Error(X(300));return n}function Mc(){var n=Oi!==0;return Oi=0,n}function Ft(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?cn.memoizedState=En=n:En=En.next=n,En}function Ct(){if(_n===null){var n=cn.alternate;n=n!==null?n.memoizedState:null}else n=_n.next;var e=En===null?cn.memoizedState:En.next;if(e!==null)En=e,_n=n;else{if(n===null)throw Error(X(310));_n=n,n={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},En===null?cn.memoizedState=En=n:En=En.next=n}return En}function Ji(n,e){return typeof e=="function"?e(n):e}function za(n){var e=Ct(),t=e.queue;if(t===null)throw Error(X(311));t.lastRenderedReducer=n;var r=_n,o=r.baseQueue,i=t.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,t.pending=null}if(o!==null){i=o.next,r=r.baseState;var c=s=null,f=null,p=i;do{var m=p.lane;if((Zr&m)===m)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:n(r,p.action);else{var y={lane:m,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(c=f=y,s=r):f=f.next=y,cn.lanes|=m,jr|=m}p=p.next}while(p!==null&&p!==i);f===null?s=r:f.next=c,kt(r,e.memoizedState)||(Qn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=f,t.lastRenderedState=r}if(n=t.interleaved,n!==null){o=n;do i=o.lane,cn.lanes|=i,jr|=i,o=o.next;while(o!==n)}else o===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function $a(n){var e=Ct(),t=e.queue;if(t===null)throw Error(X(311));t.lastRenderedReducer=n;var r=t.dispatch,o=t.pending,i=e.memoizedState;if(o!==null){t.pending=null;var s=o=o.next;do i=n(i,s.action),s=s.next;while(s!==o);kt(i,e.memoizedState)||(Qn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function xm(){}function Im(n,e){var t=cn,r=Ct(),o=e(),i=!kt(r.memoizedState,o);if(i&&(r.memoizedState=o,Qn=!0),r=r.queue,Rc(Pm.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||En!==null&&En.memoizedState.tag&1){if(t.flags|=2048,Wi(9,km.bind(null,t,r,o,e),void 0,null),wn===null)throw Error(X(349));Zr&30||Am(t,e,o)}return o}function Am(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function km(n,e,t,r){e.value=t,e.getSnapshot=r,Nm(e)&&Mm(n)}function Pm(n,e,t){return t(function(){Nm(e)&&Mm(n)})}function Nm(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!kt(n,t)}catch{return!0}}function Mm(n){var e=er(n,1);e!==null&&At(e,n,1,-1)}function mf(n){var e=Ft();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:n},e.queue=n,n=n.dispatch=f0.bind(null,cn,n),[e.memoizedState,n]}function Wi(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Rm(){return Ct().memoizedState}function Ws(n,e,t,r){var o=Ft();cn.flags|=n,o.memoizedState=Wi(1|e,t,void 0,r===void 0?null:r)}function Fl(n,e,t,r){var o=Ct();r=r===void 0?null:r;var i=void 0;if(_n!==null){var s=_n.memoizedState;if(i=s.destroy,r!==null&&Pc(r,s.deps)){o.memoizedState=Wi(e,t,i,r);return}}cn.flags|=n,o.memoizedState=Wi(1|e,t,i,r)}function gf(n,e){return Ws(8390656,8,n,e)}function Rc(n,e){return Fl(2048,8,n,e)}function Dm(n,e){return Fl(4,2,n,e)}function Lm(n,e){return Fl(4,4,n,e)}function Um(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Fm(n,e,t){return t=t!=null?t.concat([n]):null,Fl(4,4,Um.bind(null,e,n),t)}function Dc(){}function Vm(n,e){var t=Ct();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Pc(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Bm(n,e){var t=Ct();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Pc(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function qm(n,e,t){return Zr&21?(kt(t,e)||(t=$h(),cn.lanes|=t,jr|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qn=!0),n.memoizedState=t)}function c0(n,e){var t=We;We=t!==0&&4>t?t:4,n(!0);var r=ba.transition;ba.transition={};try{n(!1),e()}finally{We=t,ba.transition=r}}function Hm(){return Ct().memoizedState}function d0(n,e,t){var r=wr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Gm(n))bm(e,t);else if(t=Tm(n,e,t,r),t!==null){var o=$n();At(t,n,r,o),zm(t,e,r)}}function f0(n,e,t){var r=wr(n),o={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Gm(n))bm(e,o);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,c=i(s,t);if(o.hasEagerState=!0,o.eagerState=c,kt(c,s)){var f=e.interleaved;f===null?(o.next=o,wc(e)):(o.next=f.next,f.next=o),e.interleaved=o;return}}catch{}finally{}t=Tm(n,e,o,r),t!==null&&(o=$n(),At(t,n,r,o),zm(t,e,r))}}function Gm(n){var e=n.alternate;return n===cn||e!==null&&e===cn}function bm(n,e){ki=vl=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function zm(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,cc(n,t)}}var _l={readContext:_t,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},p0={readContext:_t,useCallback:function(n,e){return Ft().memoizedState=[n,e===void 0?null:e],n},useContext:_t,useEffect:gf,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ws(4194308,4,Um.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ws(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ws(4,2,n,e)},useMemo:function(n,e){var t=Ft();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ft();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=d0.bind(null,cn,n),[r.memoizedState,n]},useRef:function(n){var e=Ft();return n={current:n},e.memoizedState=n},useState:mf,useDebugValue:Dc,useDeferredValue:function(n){return Ft().memoizedState=n},useTransition:function(){var n=mf(!1),e=n[0];return n=c0.bind(null,n[1]),Ft().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=cn,o=Ft();if(sn){if(t===void 0)throw Error(X(407));t=t()}else{if(t=e(),wn===null)throw Error(X(349));Zr&30||Am(r,e,t)}o.memoizedState=t;var i={value:t,getSnapshot:e};return o.queue=i,gf(Pm.bind(null,r,i,n),[n]),r.flags|=2048,Wi(9,km.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Ft(),e=wn.identifierPrefix;if(sn){var t=Yt,r=Wt;t=(r&~(1<<32-It(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Oi++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=u0++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},h0={readContext:_t,useCallback:Vm,useContext:_t,useEffect:Rc,useImperativeHandle:Fm,useInsertionEffect:Dm,useLayoutEffect:Lm,useMemo:Bm,useReducer:za,useRef:Rm,useState:function(){return za(Ji)},useDebugValue:Dc,useDeferredValue:function(n){var e=Ct();return qm(e,_n.memoizedState,n)},useTransition:function(){var n=za(Ji)[0],e=Ct().memoizedState;return[n,e]},useMutableSource:xm,useSyncExternalStore:Im,useId:Hm,unstable_isNewReconciler:!1},m0={readContext:_t,useCallback:Vm,useContext:_t,useEffect:Rc,useImperativeHandle:Fm,useInsertionEffect:Dm,useLayoutEffect:Lm,useMemo:Bm,useReducer:$a,useRef:Rm,useState:function(){return $a(Ji)},useDebugValue:Dc,useDeferredValue:function(n){var e=Ct();return _n===null?e.memoizedState=n:qm(e,_n.memoizedState,n)},useTransition:function(){var n=$a(Ji)[0],e=Ct().memoizedState;return[n,e]},useMutableSource:xm,useSyncExternalStore:Im,useId:Hm,unstable_isNewReconciler:!1};function Et(n,e){if(n&&n.defaultProps){e=dn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Iu(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:dn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Vl={isMounted:function(n){return(n=n._reactInternals)?ro(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=$n(),o=wr(n),i=Qt(r,o);i.payload=e,t!=null&&(i.callback=t),e=Tr(n,i,o),e!==null&&(At(e,n,o,r),Os(e,n,o))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=$n(),o=wr(n),i=Qt(r,o);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Tr(n,i,o),e!==null&&(At(e,n,o,r),Os(e,n,o))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=$n(),r=wr(n),o=Qt(t,r);o.tag=2,e!=null&&(o.callback=e),e=Tr(n,o,r),e!==null&&(At(e,n,r,t),Os(e,n,r))}};function yf(n,e,t,r,o,i,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!Hi(t,r)||!Hi(o,i):!0}function $m(n,e,t){var r=!1,o=Ar,i=e.contextType;return typeof i=="object"&&i!==null?i=_t(i):(o=Zn(e)?Qr:qn.current,r=e.contextTypes,i=(r=r!=null)?Ho(n,o):Ar),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=i),e}function vf(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Vl.enqueueReplaceState(e,e.state,null)}function Au(n,e,t,r){var o=n.stateNode;o.props=t,o.state=n.memoizedState,o.refs={},xc(n);var i=e.contextType;typeof i=="object"&&i!==null?o.context=_t(i):(i=Zn(e)?Qr:qn.current,o.context=Ho(n,i)),o.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Iu(n,e,i,t),o.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Vl.enqueueReplaceState(o,o.state,null),gl(n,t,o,r),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308)}function $o(n,e){try{var t="",r=e;do t+=zy(r),r=r.return;while(r);var o=t}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:o,digest:null}}function Ka(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ku(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var g0=typeof WeakMap=="function"?WeakMap:Map;function Km(n,e,t){t=Qt(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Sl||(Sl=!0,Bu=r),ku(n,e)},t}function Om(n,e,t){t=Qt(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;t.payload=function(){return r(o)},t.callback=function(){ku(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){ku(n,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function _f(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new g0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(t)||(o.add(t),n=N0.bind(null,n,e,t),e.then(n,n))}function Cf(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Sf(n,e,t,r,o){return n.mode&1?(n.flags|=65536,n.lanes=o,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Qt(-1,1),e.tag=2,Tr(t,e,1))),t.lanes|=1),n)}var y0=tr.ReactCurrentOwner,Qn=!1;function zn(n,e,t,r){e.child=n===null?Sm(e,null,t,r):bo(e,n.child,t,r)}function Tf(n,e,t,r,o){t=t.render;var i=e.ref;return Lo(e,o),r=Nc(n,e,t,r,i,o),t=Mc(),n!==null&&!Qn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,nr(n,e,o)):(sn&&t&&vc(e),e.flags|=1,zn(n,e,r,o),e.child)}function Ef(n,e,t,r,o){if(n===null){var i=t.type;return typeof i=="function"&&!Gc(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,Jm(n,e,i,r,o)):(n=Zs(t.type,null,r,e,e.mode,o),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&o)){var s=i.memoizedProps;if(t=t.compare,t=t!==null?t:Hi,t(s,r)&&n.ref===e.ref)return nr(n,e,o)}return e.flags|=1,n=xr(i,r),n.ref=e.ref,n.return=e,e.child=n}function Jm(n,e,t,r,o){if(n!==null){var i=n.memoizedProps;if(Hi(i,r)&&n.ref===e.ref)if(Qn=!1,e.pendingProps=r=i,(n.lanes&o)!==0)n.flags&131072&&(Qn=!0);else return e.lanes=n.lanes,nr(n,e,o)}return Pu(n,e,t,r,o)}function Wm(n,e,t){var r=e.pendingProps,o=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(ko,it),it|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ze(ko,it),it|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Ze(ko,it),it|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Ze(ko,it),it|=r;return zn(n,e,o,t),e.child}function Ym(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Pu(n,e,t,r,o){var i=Zn(t)?Qr:qn.current;return i=Ho(e,i),Lo(e,o),t=Nc(n,e,t,r,i,o),r=Mc(),n!==null&&!Qn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,nr(n,e,o)):(sn&&r&&vc(e),e.flags|=1,zn(n,e,t,o),e.child)}function wf(n,e,t,r,o){if(Zn(t)){var i=!0;dl(e)}else i=!1;if(Lo(e,o),e.stateNode===null)Ys(n,e),$m(e,t,r),Au(e,t,r,o),r=!0;else if(n===null){var s=e.stateNode,c=e.memoizedProps;s.props=c;var f=s.context,p=t.contextType;typeof p=="object"&&p!==null?p=_t(p):(p=Zn(t)?Qr:qn.current,p=Ho(e,p));var m=t.getDerivedStateFromProps,y=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function";y||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c!==r||f!==p)&&vf(e,s,r,p),fr=!1;var v=e.memoizedState;s.state=v,gl(e,r,s,o),f=e.memoizedState,c!==r||v!==f||Xn.current||fr?(typeof m=="function"&&(Iu(e,t,m,r),f=e.memoizedState),(c=fr||yf(e,t,c,r,v,f,p))?(y||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=p,r=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Em(n,e),c=e.memoizedProps,p=e.type===e.elementType?c:Et(e.type,c),s.props=p,y=e.pendingProps,v=s.context,f=t.contextType,typeof f=="object"&&f!==null?f=_t(f):(f=Zn(t)?Qr:qn.current,f=Ho(e,f));var x=t.getDerivedStateFromProps;(m=typeof x=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c!==y||v!==f)&&vf(e,s,r,f),fr=!1,v=e.memoizedState,s.state=v,gl(e,r,s,o);var U=e.memoizedState;c!==y||v!==U||Xn.current||fr?(typeof x=="function"&&(Iu(e,t,x,r),U=e.memoizedState),(p=fr||yf(e,t,p,r,v,U,f)||!1)?(m||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,U,f),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,U,f)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||c===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=U),s.props=r,s.state=U,s.context=f,r=p):(typeof s.componentDidUpdate!="function"||c===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),r=!1)}return Nu(n,e,t,r,i,o)}function Nu(n,e,t,r,o,i){Ym(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&uf(e,t,!1),nr(n,e,i);r=e.stateNode,y0.current=e;var c=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=bo(e,n.child,null,i),e.child=bo(e,null,c,i)):zn(n,e,c,i),e.memoizedState=r.state,o&&uf(e,t,!0),e.child}function Qm(n){var e=n.stateNode;e.pendingContext?af(n,e.pendingContext,e.pendingContext!==e.context):e.context&&af(n,e.context,!1),Ic(n,e.containerInfo)}function xf(n,e,t,r,o){return Go(),Cc(o),e.flags|=256,zn(n,e,t,r),e.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function Ru(n){return{baseLanes:n,cachePool:null,transitions:null}}function Xm(n,e,t){var r=e.pendingProps,o=un.current,i=!1,s=(e.flags&128)!==0,c;if((c=s)||(c=n!==null&&n.memoizedState===null?!1:(o&2)!==0),c?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(o|=1),Ze(un,o&1),n===null)return wu(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Hl(s,r,0,null),n=Yr(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Ru(t),e.memoizedState=Mu,n):Lc(e,s));if(o=n.memoizedState,o!==null&&(c=o.dehydrated,c!==null))return v0(n,e,s,r,c,o,t);if(i){i=r.fallback,s=e.mode,o=n.child,c=o.sibling;var f={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=xr(o,f),r.subtreeFlags=o.subtreeFlags&14680064),c!==null?i=xr(c,i):(i=Yr(i,s,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=n.child.memoizedState,s=s===null?Ru(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=n.childLanes&~t,e.memoizedState=Mu,r}return i=n.child,n=i.sibling,r=xr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Lc(n,e){return e=Hl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Us(n,e,t,r){return r!==null&&Cc(r),bo(e,n.child,null,t),n=Lc(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function v0(n,e,t,r,o,i,s){if(t)return e.flags&256?(e.flags&=-257,r=Ka(Error(X(422))),Us(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=Hl({mode:"visible",children:r.children},o,0,null),i=Yr(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,n.child,null,s),e.child.memoizedState=Ru(s),e.memoizedState=Mu,i);if(!(e.mode&1))return Us(n,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(X(419)),r=Ka(i,r,void 0),Us(n,e,s,r)}if(c=(s&n.childLanes)!==0,Qn||c){if(r=wn,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,er(n,o),At(r,n,o,-1))}return Hc(),r=Ka(Error(X(421))),Us(n,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=n.child,e=M0.bind(null,n),o._reactRetry=e,null):(n=i.treeContext,st=Sr(o.nextSibling),lt=e,sn=!0,xt=null,n!==null&&(ht[mt++]=Wt,ht[mt++]=Yt,ht[mt++]=Xr,Wt=n.id,Yt=n.overflow,Xr=e),e=Lc(e,r.children),e.flags|=4096,e)}function If(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),xu(n.return,e,t)}function Oa(n,e,t,r,o){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=o)}function Zm(n,e,t){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(zn(n,e,r.children,t),r=un.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&If(n,t,e);else if(n.tag===19)If(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ze(un,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)n=t.alternate,n!==null&&yl(n)===null&&(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),Oa(e,!1,o,t,i);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(n=o.alternate,n!==null&&yl(n)===null){e.child=o;break}n=o.sibling,o.sibling=t,t=o,o=n}Oa(e,!0,t,null,i);break;case"together":Oa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ys(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function nr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),jr|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(X(153));if(e.child!==null){for(n=e.child,t=xr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=xr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function _0(n,e,t){switch(e.tag){case 3:Qm(e),Go();break;case 5:wm(e);break;case 1:Zn(e.type)&&dl(e);break;case 4:Ic(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Ze(hl,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ze(un,un.current&1),e.flags|=128,null):t&e.child.childLanes?Xm(n,e,t):(Ze(un,un.current&1),n=nr(n,e,t),n!==null?n.sibling:null);Ze(un,un.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Zm(n,e,t);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ze(un,un.current),r)break;return null;case 22:case 23:return e.lanes=0,Wm(n,e,t)}return nr(n,e,t)}var jm,Du,eg,ng;jm=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Du=function(){};eg=function(n,e,t,r){var o=n.memoizedProps;if(o!==r){n=e.stateNode,Jr(qt.current);var i=null;switch(t){case"input":o=nu(n,o),r=nu(n,r),i=[];break;case"select":o=dn({},o,{value:void 0}),r=dn({},r,{value:void 0}),i=[];break;case"textarea":o=ou(n,o),r=ou(n,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=ul)}su(t,r);var s;t=null;for(p in o)if(!r.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var c=o[p];for(s in c)c.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Di.hasOwnProperty(p)?i||(i=[]):(i=i||[]).push(p,null));for(p in r){var f=r[p];if(c=o!=null?o[p]:void 0,r.hasOwnProperty(p)&&f!==c&&(f!=null||c!=null))if(p==="style")if(c){for(s in c)!c.hasOwnProperty(s)||f&&f.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in f)f.hasOwnProperty(s)&&c[s]!==f[s]&&(t||(t={}),t[s]=f[s])}else t||(i||(i=[]),i.push(p,t)),t=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,c=c?c.__html:void 0,f!=null&&c!==f&&(i=i||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(i=i||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Di.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&en("scroll",n),i||c===f||(i=[])):(i=i||[]).push(p,f))}t&&(i=i||[]).push("style",t);var p=i;(e.updateQueue=p)&&(e.flags|=4)}};ng=function(n,e,t,r){t!==r&&(e.flags|=4)};function gi(n,e){if(!sn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Fn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var o=n.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=n,o=o.sibling;else for(o=n.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=n,o=o.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function C0(n,e,t){var r=e.pendingProps;switch(_c(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(e),null;case 1:return Zn(e.type)&&cl(),Fn(e),null;case 3:return r=e.stateNode,zo(),tn(Xn),tn(qn),kc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ds(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xt!==null&&(Gu(xt),xt=null))),Du(n,e),Fn(e),null;case 5:Ac(e);var o=Jr(Ki.current);if(t=e.type,n!==null&&e.stateNode!=null)eg(n,e,t,r,o),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Fn(e),null}if(n=Jr(qt.current),Ds(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Vt]=e,r[zi]=i,n=(e.mode&1)!==0,t){case"dialog":en("cancel",r),en("close",r);break;case"iframe":case"object":case"embed":en("load",r);break;case"video":case"audio":for(o=0;o<Ti.length;o++)en(Ti[o],r);break;case"source":en("error",r);break;case"img":case"image":case"link":en("error",r),en("load",r);break;case"details":en("toggle",r);break;case"input":Ld(r,i),en("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},en("invalid",r);break;case"textarea":Fd(r,i),en("invalid",r)}su(t,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var c=i[s];s==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Rs(r.textContent,c,n),o=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Rs(r.textContent,c,n),o=["children",""+c]):Di.hasOwnProperty(s)&&c!=null&&s==="onScroll"&&en("scroll",r)}switch(t){case"input":ws(r),Ud(r,i,!0);break;case"textarea":ws(r),Vd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ul)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ph(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[Vt]=e,n[zi]=r,jm(n,e,!1,!1),e.stateNode=n;e:{switch(s=lu(t,r),t){case"dialog":en("cancel",n),en("close",n),o=r;break;case"iframe":case"object":case"embed":en("load",n),o=r;break;case"video":case"audio":for(o=0;o<Ti.length;o++)en(Ti[o],n);o=r;break;case"source":en("error",n),o=r;break;case"img":case"image":case"link":en("error",n),en("load",n),o=r;break;case"details":en("toggle",n),o=r;break;case"input":Ld(n,r),o=nu(n,r),en("invalid",n);break;case"option":o=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},o=dn({},r,{value:void 0}),en("invalid",n);break;case"textarea":Fd(n,r),o=ou(n,r),en("invalid",n);break;default:o=r}su(t,o),c=o;for(i in c)if(c.hasOwnProperty(i)){var f=c[i];i==="style"?Rh(n,f):i==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Nh(n,f)):i==="children"?typeof f=="string"?(t!=="textarea"||f!=="")&&Li(n,f):typeof f=="number"&&Li(n,""+f):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Di.hasOwnProperty(i)?f!=null&&i==="onScroll"&&en("scroll",n):f!=null&&oc(n,i,f,s))}switch(t){case"input":ws(n),Ud(n,r,!1);break;case"textarea":ws(n),Vd(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ir(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?No(n,!!r.multiple,i,!1):r.defaultValue!=null&&No(n,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(n.onclick=ul)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fn(e),null;case 6:if(n&&e.stateNode!=null)ng(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(t=Jr(Ki.current),Jr(qt.current),Ds(e)){if(r=e.stateNode,t=e.memoizedProps,r[Vt]=e,(i=r.nodeValue!==t)&&(n=lt,n!==null))switch(n.tag){case 3:Rs(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Rs(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Vt]=e,e.stateNode=r}return Fn(e),null;case 13:if(tn(un),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(sn&&st!==null&&e.mode&1&&!(e.flags&128))_m(),Go(),e.flags|=98560,i=!1;else if(i=Ds(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Vt]=e}else Go(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fn(e),i=!1}else xt!==null&&(Gu(xt),xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||un.current&1?Cn===0&&(Cn=3):Hc())),e.updateQueue!==null&&(e.flags|=4),Fn(e),null);case 4:return zo(),Du(n,e),n===null&&Gi(e.stateNode.containerInfo),Fn(e),null;case 10:return Ec(e.type._context),Fn(e),null;case 17:return Zn(e.type)&&cl(),Fn(e),null;case 19:if(tn(un),i=e.memoizedState,i===null)return Fn(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)gi(i,!1);else{if(Cn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=yl(n),s!==null){for(e.flags|=128,gi(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,n=s.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ze(un,un.current&1|2),e.child}n=n.sibling}i.tail!==null&&mn()>Ko&&(e.flags|=128,r=!0,gi(i,!1),e.lanes=4194304)}else{if(!r)if(n=yl(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),gi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!sn)return Fn(e),null}else 2*mn()-i.renderingStartTime>Ko&&t!==1073741824&&(e.flags|=128,r=!0,gi(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mn(),e.sibling=null,t=un.current,Ze(un,r?t&1|2:t&1),e):(Fn(e),null);case 22:case 23:return qc(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?it&1073741824&&(Fn(e),e.subtreeFlags&6&&(e.flags|=8192)):Fn(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function S0(n,e){switch(_c(e),e.tag){case 1:return Zn(e.type)&&cl(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return zo(),tn(Xn),tn(qn),kc(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Ac(e),null;case 13:if(tn(un),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Go()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return tn(un),null;case 4:return zo(),null;case 10:return Ec(e.type._context),null;case 22:case 23:return qc(),null;case 24:return null;default:return null}}var Fs=!1,Vn=!1,T0=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ao(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){fn(n,e,r)}else t.current=null}function Lu(n,e,t){try{t()}catch(r){fn(n,e,r)}}var Af=!1;function E0(n,e){if(yu=sl,n=sm(),yc(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var s=0,c=-1,f=-1,p=0,m=0,y=n,v=null;n:for(;;){for(var x;y!==t||o!==0&&y.nodeType!==3||(c=s+o),y!==i||r!==0&&y.nodeType!==3||(f=s+r),y.nodeType===3&&(s+=y.nodeValue.length),(x=y.firstChild)!==null;)v=y,y=x;for(;;){if(y===n)break n;if(v===t&&++p===o&&(c=s),v===i&&++m===r&&(f=s),(x=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=x}t=c===-1||f===-1?null:{start:c,end:f}}else t=null}t=t||{start:0,end:0}}else t=null;for(vu={focusedElem:n,selectionRange:t},sl=!1,he=e;he!==null;)if(e=he,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,he=n;else for(;he!==null;){e=he;try{var U=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var B=U.memoizedProps,J=U.memoizedState,I=e.stateNode,E=I.getSnapshotBeforeUpdate(e.elementType===e.type?B:Et(e.type,B),J);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(H){fn(e,e.return,H)}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}return U=Af,Af=!1,U}function Pi(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var i=o.destroy;o.destroy=void 0,i!==void 0&&Lu(e,t,i)}o=o.next}while(o!==r)}}function Bl(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Uu(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function tg(n){var e=n.alternate;e!==null&&(n.alternate=null,tg(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Vt],delete e[zi],delete e[Su],delete e[i0],delete e[s0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rg(n){return n.tag===5||n.tag===3||n.tag===4}function kf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fu(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ul));else if(r!==4&&(n=n.child,n!==null))for(Fu(n,e,t),n=n.sibling;n!==null;)Fu(n,e,t),n=n.sibling}function Vu(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Vu(n,e,t),n=n.sibling;n!==null;)Vu(n,e,t),n=n.sibling}var In=null,wt=!1;function cr(n,e,t){for(t=t.child;t!==null;)og(n,e,t),t=t.sibling}function og(n,e,t){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Nl,t)}catch{}switch(t.tag){case 5:Vn||Ao(t,e);case 6:var r=In,o=wt;In=null,cr(n,e,t),In=r,wt=o,In!==null&&(wt?(n=In,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):In.removeChild(t.stateNode));break;case 18:In!==null&&(wt?(n=In,t=t.stateNode,n.nodeType===8?qa(n.parentNode,t):n.nodeType===1&&qa(n,t),Bi(n)):qa(In,t.stateNode));break;case 4:r=In,o=wt,In=t.stateNode.containerInfo,wt=!0,cr(n,e,t),In=r,wt=o;break;case 0:case 11:case 14:case 15:if(!Vn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Lu(t,e,s),o=o.next}while(o!==r)}cr(n,e,t);break;case 1:if(!Vn&&(Ao(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(c){fn(t,e,c)}cr(n,e,t);break;case 21:cr(n,e,t);break;case 22:t.mode&1?(Vn=(r=Vn)||t.memoizedState!==null,cr(n,e,t),Vn=r):cr(n,e,t);break;default:cr(n,e,t)}}function Pf(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new T0),e.forEach(function(r){var o=R0.bind(null,n,r);t.has(r)||(t.add(r),r.then(o,o))})}}function Tt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];try{var i=n,s=e,c=s;e:for(;c!==null;){switch(c.tag){case 5:In=c.stateNode,wt=!1;break e;case 3:In=c.stateNode.containerInfo,wt=!0;break e;case 4:In=c.stateNode.containerInfo,wt=!0;break e}c=c.return}if(In===null)throw Error(X(160));og(i,s,o),In=null,wt=!1;var f=o.alternate;f!==null&&(f.return=null),o.return=null}catch(p){fn(o,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ig(e,n),e=e.sibling}function ig(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Tt(e,n),Ut(n),r&4){try{Pi(3,n,n.return),Bl(3,n)}catch(B){fn(n,n.return,B)}try{Pi(5,n,n.return)}catch(B){fn(n,n.return,B)}}break;case 1:Tt(e,n),Ut(n),r&512&&t!==null&&Ao(t,t.return);break;case 5:if(Tt(e,n),Ut(n),r&512&&t!==null&&Ao(t,t.return),n.flags&32){var o=n.stateNode;try{Li(o,"")}catch(B){fn(n,n.return,B)}}if(r&4&&(o=n.stateNode,o!=null)){var i=n.memoizedProps,s=t!==null?t.memoizedProps:i,c=n.type,f=n.updateQueue;if(n.updateQueue=null,f!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Ah(o,i),lu(c,s);var p=lu(c,i);for(s=0;s<f.length;s+=2){var m=f[s],y=f[s+1];m==="style"?Rh(o,y):m==="dangerouslySetInnerHTML"?Nh(o,y):m==="children"?Li(o,y):oc(o,m,y,p)}switch(c){case"input":tu(o,i);break;case"textarea":kh(o,i);break;case"select":var v=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?No(o,!!i.multiple,x,!1):v!==!!i.multiple&&(i.defaultValue!=null?No(o,!!i.multiple,i.defaultValue,!0):No(o,!!i.multiple,i.multiple?[]:"",!1))}o[zi]=i}catch(B){fn(n,n.return,B)}}break;case 6:if(Tt(e,n),Ut(n),r&4){if(n.stateNode===null)throw Error(X(162));o=n.stateNode,i=n.memoizedProps;try{o.nodeValue=i}catch(B){fn(n,n.return,B)}}break;case 3:if(Tt(e,n),Ut(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Bi(e.containerInfo)}catch(B){fn(n,n.return,B)}break;case 4:Tt(e,n),Ut(n);break;case 13:Tt(e,n),Ut(n),o=n.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Vc=mn())),r&4&&Pf(n);break;case 22:if(m=t!==null&&t.memoizedState!==null,n.mode&1?(Vn=(p=Vn)||m,Tt(e,n),Vn=p):Tt(e,n),Ut(n),r&8192){if(p=n.memoizedState!==null,(n.stateNode.isHidden=p)&&!m&&n.mode&1)for(he=n,m=n.child;m!==null;){for(y=he=m;he!==null;){switch(v=he,x=v.child,v.tag){case 0:case 11:case 14:case 15:Pi(4,v,v.return);break;case 1:Ao(v,v.return);var U=v.stateNode;if(typeof U.componentWillUnmount=="function"){r=v,t=v.return;try{e=r,U.props=e.memoizedProps,U.state=e.memoizedState,U.componentWillUnmount()}catch(B){fn(r,t,B)}}break;case 5:Ao(v,v.return);break;case 22:if(v.memoizedState!==null){Mf(y);continue}}x!==null?(x.return=v,he=x):Mf(y)}m=m.sibling}e:for(m=null,y=n;;){if(y.tag===5){if(m===null){m=y;try{o=y.stateNode,p?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=y.stateNode,f=y.memoizedProps.style,s=f!=null&&f.hasOwnProperty("display")?f.display:null,c.style.display=Mh("display",s))}catch(B){fn(n,n.return,B)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(B){fn(n,n.return,B)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===n)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Tt(e,n),Ut(n),r&4&&Pf(n);break;case 21:break;default:Tt(e,n),Ut(n)}}function Ut(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(rg(t)){var r=t;break e}t=t.return}throw Error(X(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Li(o,""),r.flags&=-33);var i=kf(n);Vu(n,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,c=kf(n);Fu(n,c,s);break;default:throw Error(X(161))}}catch(f){fn(n,n.return,f)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function w0(n,e,t){he=n,sg(n)}function sg(n,e,t){for(var r=(n.mode&1)!==0;he!==null;){var o=he,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Fs;if(!s){var c=o.alternate,f=c!==null&&c.memoizedState!==null||Vn;c=Fs;var p=Vn;if(Fs=s,(Vn=f)&&!p)for(he=o;he!==null;)s=he,f=s.child,s.tag===22&&s.memoizedState!==null?Rf(o):f!==null?(f.return=s,he=f):Rf(o);for(;i!==null;)he=i,sg(i),i=i.sibling;he=o,Fs=c,Vn=p}Nf(n)}else o.subtreeFlags&8772&&i!==null?(i.return=o,he=i):Nf(n)}}function Nf(n){for(;he!==null;){var e=he;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vn||Bl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vn)if(t===null)r.componentDidMount();else{var o=e.elementType===e.type?t.memoizedProps:Et(e.type,t.memoizedProps);r.componentDidUpdate(o,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&hf(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}hf(e,s,t)}break;case 5:var c=e.stateNode;if(t===null&&e.flags&4){t=c;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&t.focus();break;case"img":f.src&&(t.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var m=p.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&Bi(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Vn||e.flags&512&&Uu(e)}catch(v){fn(e,e.return,v)}}if(e===n){he=null;break}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}}function Mf(n){for(;he!==null;){var e=he;if(e===n){he=null;break}var t=e.sibling;if(t!==null){t.return=e.return,he=t;break}he=e.return}}function Rf(n){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Bl(4,e)}catch(f){fn(e,t,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(f){fn(e,o,f)}}var i=e.return;try{Uu(e)}catch(f){fn(e,i,f)}break;case 5:var s=e.return;try{Uu(e)}catch(f){fn(e,s,f)}}}catch(f){fn(e,e.return,f)}if(e===n){he=null;break}var c=e.sibling;if(c!==null){c.return=e.return,he=c;break}he=e.return}}var x0=Math.ceil,Cl=tr.ReactCurrentDispatcher,Uc=tr.ReactCurrentOwner,yt=tr.ReactCurrentBatchConfig,qe=0,wn=null,gn=null,An=0,it=0,ko=Pr(0),Cn=0,Yi=null,jr=0,ql=0,Fc=0,Ni=null,Yn=null,Vc=0,Ko=1/0,Ot=null,Sl=!1,Bu=null,Er=null,Vs=!1,gr=null,Tl=0,Mi=0,qu=null,Qs=-1,Xs=0;function $n(){return qe&6?mn():Qs!==-1?Qs:Qs=mn()}function wr(n){return n.mode&1?qe&2&&An!==0?An&-An:a0.transition!==null?(Xs===0&&(Xs=$h()),Xs):(n=We,n!==0||(n=window.event,n=n===void 0?16:Xh(n.type)),n):1}function At(n,e,t,r){if(50<Mi)throw Mi=0,qu=null,Error(X(185));Xi(n,t,r),(!(qe&2)||n!==wn)&&(n===wn&&(!(qe&2)&&(ql|=t),Cn===4&&hr(n,An)),jn(n,r),t===1&&qe===0&&!(e.mode&1)&&(Ko=mn()+500,Ul&&Nr()))}function jn(n,e){var t=n.callbackNode;av(n,e);var r=il(n,n===wn?An:0);if(r===0)t!==null&&Hd(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Hd(t),e===1)n.tag===0?l0(Df.bind(null,n)):gm(Df.bind(null,n)),r0(function(){!(qe&6)&&Nr()}),t=null;else{switch(Kh(r)){case 1:t=uc;break;case 4:t=bh;break;case 16:t=ol;break;case 536870912:t=zh;break;default:t=ol}t=hg(t,lg.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function lg(n,e){if(Qs=-1,Xs=0,qe&6)throw Error(X(327));var t=n.callbackNode;if(Uo()&&n.callbackNode!==t)return null;var r=il(n,n===wn?An:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=El(n,r);else{e=r;var o=qe;qe|=2;var i=ug();(wn!==n||An!==e)&&(Ot=null,Ko=mn()+500,Wr(n,e));do try{k0();break}catch(c){ag(n,c)}while(!0);Tc(),Cl.current=i,qe=o,gn!==null?e=0:(wn=null,An=0,e=Cn)}if(e!==0){if(e===2&&(o=fu(n),o!==0&&(r=o,e=Hu(n,o))),e===1)throw t=Yi,Wr(n,0),hr(n,r),jn(n,mn()),t;if(e===6)hr(n,r);else{if(o=n.current.alternate,!(r&30)&&!I0(o)&&(e=El(n,r),e===2&&(i=fu(n),i!==0&&(r=i,e=Hu(n,i))),e===1))throw t=Yi,Wr(n,0),hr(n,r),jn(n,mn()),t;switch(n.finishedWork=o,n.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:$r(n,Yn,Ot);break;case 3:if(hr(n,r),(r&130023424)===r&&(e=Vc+500-mn(),10<e)){if(il(n,0)!==0)break;if(o=n.suspendedLanes,(o&r)!==r){$n(),n.pingedLanes|=n.suspendedLanes&o;break}n.timeoutHandle=Cu($r.bind(null,n,Yn,Ot),e);break}$r(n,Yn,Ot);break;case 4:if(hr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,o=-1;0<r;){var s=31-It(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=mn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x0(r/1960))-r,10<r){n.timeoutHandle=Cu($r.bind(null,n,Yn,Ot),r);break}$r(n,Yn,Ot);break;case 5:$r(n,Yn,Ot);break;default:throw Error(X(329))}}}return jn(n,mn()),n.callbackNode===t?lg.bind(null,n):null}function Hu(n,e){var t=Ni;return n.current.memoizedState.isDehydrated&&(Wr(n,e).flags|=256),n=El(n,e),n!==2&&(e=Yn,Yn=t,e!==null&&Gu(e)),n}function Gu(n){Yn===null?Yn=n:Yn.push.apply(Yn,n)}function I0(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var o=t[r],i=o.getSnapshot;o=o.value;try{if(!kt(i(),o))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(n,e){for(e&=~Fc,e&=~ql,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-It(e),r=1<<t;n[t]=-1,e&=~r}}function Df(n){if(qe&6)throw Error(X(327));Uo();var e=il(n,0);if(!(e&1))return jn(n,mn()),null;var t=El(n,e);if(n.tag!==0&&t===2){var r=fu(n);r!==0&&(e=r,t=Hu(n,r))}if(t===1)throw t=Yi,Wr(n,0),hr(n,e),jn(n,mn()),t;if(t===6)throw Error(X(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,$r(n,Yn,Ot),jn(n,mn()),null}function Bc(n,e){var t=qe;qe|=1;try{return n(e)}finally{qe=t,qe===0&&(Ko=mn()+500,Ul&&Nr())}}function eo(n){gr!==null&&gr.tag===0&&!(qe&6)&&Uo();var e=qe;qe|=1;var t=yt.transition,r=We;try{if(yt.transition=null,We=1,n)return n()}finally{We=r,yt.transition=t,qe=e,!(qe&6)&&Nr()}}function qc(){it=ko.current,tn(ko)}function Wr(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,t0(t)),gn!==null)for(t=gn.return;t!==null;){var r=t;switch(_c(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cl();break;case 3:zo(),tn(Xn),tn(qn),kc();break;case 5:Ac(r);break;case 4:zo();break;case 13:tn(un);break;case 19:tn(un);break;case 10:Ec(r.type._context);break;case 22:case 23:qc()}t=t.return}if(wn=n,gn=n=xr(n.current,null),An=it=e,Cn=0,Yi=null,Fc=ql=jr=0,Yn=Ni=null,Or!==null){for(e=0;e<Or.length;e++)if(t=Or[e],r=t.interleaved,r!==null){t.interleaved=null;var o=r.next,i=t.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}t.pending=r}Or=null}return n}function ag(n,e){do{var t=gn;try{if(Tc(),Js.current=_l,vl){for(var r=cn.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}vl=!1}if(Zr=0,En=_n=cn=null,ki=!1,Oi=0,Uc.current=null,t===null||t.return===null){Cn=1,Yi=e,gn=null;break}e:{var i=n,s=t.return,c=t,f=e;if(e=An,c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,m=c,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=Cf(s);if(x!==null){x.flags&=-257,Sf(x,s,c,i,e),x.mode&1&&_f(i,p,e),e=x,f=p;var U=e.updateQueue;if(U===null){var B=new Set;B.add(f),e.updateQueue=B}else U.add(f);break e}else{if(!(e&1)){_f(i,p,e),Hc();break e}f=Error(X(426))}}else if(sn&&c.mode&1){var J=Cf(s);if(J!==null){!(J.flags&65536)&&(J.flags|=256),Sf(J,s,c,i,e),Cc($o(f,c));break e}}i=f=$o(f,c),Cn!==4&&(Cn=2),Ni===null?Ni=[i]:Ni.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Km(i,f,e);pf(i,I);break e;case 1:c=f;var E=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Er===null||!Er.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var H=Om(i,c,e);pf(i,H);break e}}i=i.return}while(i!==null)}dg(t)}catch(z){e=z,gn===t&&t!==null&&(gn=t=t.return);continue}break}while(!0)}function ug(){var n=Cl.current;return Cl.current=_l,n===null?_l:n}function Hc(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),wn===null||!(jr&268435455)&&!(ql&268435455)||hr(wn,An)}function El(n,e){var t=qe;qe|=2;var r=ug();(wn!==n||An!==e)&&(Ot=null,Wr(n,e));do try{A0();break}catch(o){ag(n,o)}while(!0);if(Tc(),qe=t,Cl.current=r,gn!==null)throw Error(X(261));return wn=null,An=0,Cn}function A0(){for(;gn!==null;)cg(gn)}function k0(){for(;gn!==null&&!jy();)cg(gn)}function cg(n){var e=pg(n.alternate,n,it);n.memoizedProps=n.pendingProps,e===null?dg(n):gn=e,Uc.current=null}function dg(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=S0(t,e),t!==null){t.flags&=32767,gn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Cn=6,gn=null;return}}else if(t=C0(t,e,it),t!==null){gn=t;return}if(e=e.sibling,e!==null){gn=e;return}gn=e=n}while(e!==null);Cn===0&&(Cn=5)}function $r(n,e,t){var r=We,o=yt.transition;try{yt.transition=null,We=1,P0(n,e,t,r)}finally{yt.transition=o,We=r}return null}function P0(n,e,t,r){do Uo();while(gr!==null);if(qe&6)throw Error(X(327));t=n.finishedWork;var o=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(X(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(uv(n,i),n===wn&&(gn=wn=null,An=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Vs||(Vs=!0,hg(ol,function(){return Uo(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=yt.transition,yt.transition=null;var s=We;We=1;var c=qe;qe|=4,Uc.current=null,E0(n,t),ig(t,n),Yv(vu),sl=!!yu,vu=yu=null,n.current=t,w0(t),ev(),qe=c,We=s,yt.transition=i}else n.current=t;if(Vs&&(Vs=!1,gr=n,Tl=o),i=n.pendingLanes,i===0&&(Er=null),rv(t.stateNode),jn(n,mn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)o=e[t],r(o.value,{componentStack:o.stack,digest:o.digest});if(Sl)throw Sl=!1,n=Bu,Bu=null,n;return Tl&1&&n.tag!==0&&Uo(),i=n.pendingLanes,i&1?n===qu?Mi++:(Mi=0,qu=n):Mi=0,Nr(),null}function Uo(){if(gr!==null){var n=Kh(Tl),e=yt.transition,t=We;try{if(yt.transition=null,We=16>n?16:n,gr===null)var r=!1;else{if(n=gr,gr=null,Tl=0,qe&6)throw Error(X(331));var o=qe;for(qe|=4,he=n.current;he!==null;){var i=he,s=i.child;if(he.flags&16){var c=i.deletions;if(c!==null){for(var f=0;f<c.length;f++){var p=c[f];for(he=p;he!==null;){var m=he;switch(m.tag){case 0:case 11:case 15:Pi(8,m,i)}var y=m.child;if(y!==null)y.return=m,he=y;else for(;he!==null;){m=he;var v=m.sibling,x=m.return;if(tg(m),m===p){he=null;break}if(v!==null){v.return=x,he=v;break}he=x}}}var U=i.alternate;if(U!==null){var B=U.child;if(B!==null){U.child=null;do{var J=B.sibling;B.sibling=null,B=J}while(B!==null)}}he=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,he=s;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pi(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,he=I;break e}he=i.return}}var E=n.current;for(he=E;he!==null;){s=he;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,he=w;else e:for(s=E;he!==null;){if(c=he,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Bl(9,c)}}catch(z){fn(c,c.return,z)}if(c===s){he=null;break e}var H=c.sibling;if(H!==null){H.return=c.return,he=H;break e}he=c.return}}if(qe=o,Nr(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Nl,n)}catch{}r=!0}return r}finally{We=t,yt.transition=e}}return!1}function Lf(n,e,t){e=$o(t,e),e=Km(n,e,1),n=Tr(n,e,1),e=$n(),n!==null&&(Xi(n,1,e),jn(n,e))}function fn(n,e,t){if(n.tag===3)Lf(n,n,t);else for(;e!==null;){if(e.tag===3){Lf(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){n=$o(t,n),n=Om(e,n,1),e=Tr(e,n,1),n=$n(),e!==null&&(Xi(e,1,n),jn(e,n));break}}e=e.return}}function N0(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=$n(),n.pingedLanes|=n.suspendedLanes&t,wn===n&&(An&t)===t&&(Cn===4||Cn===3&&(An&130023424)===An&&500>mn()-Vc?Wr(n,0):Fc|=t),jn(n,e)}function fg(n,e){e===0&&(n.mode&1?(e=As,As<<=1,!(As&130023424)&&(As=4194304)):e=1);var t=$n();n=er(n,e),n!==null&&(Xi(n,e,t),jn(n,t))}function M0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),fg(n,t)}function R0(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,o=n.memoizedState;o!==null&&(t=o.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),fg(n,t)}var pg;pg=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Xn.current)Qn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Qn=!1,_0(n,e,t);Qn=!!(n.flags&131072)}else Qn=!1,sn&&e.flags&1048576&&ym(e,pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ys(n,e),n=e.pendingProps;var o=Ho(e,qn.current);Lo(e,t),o=Nc(null,e,r,n,o,t);var i=Mc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zn(r)?(i=!0,dl(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,xc(e),o.updater=Vl,e.stateNode=o,o._reactInternals=e,Au(e,r,n,t),e=Nu(null,e,r,!0,i,t)):(e.tag=0,sn&&i&&vc(e),zn(null,e,o,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Ys(n,e),n=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=L0(r),n=Et(r,n),o){case 0:e=Pu(null,e,r,n,t);break e;case 1:e=wf(null,e,r,n,t);break e;case 11:e=Tf(null,e,r,n,t);break e;case 14:e=Ef(null,e,r,Et(r.type,n),t);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Et(r,o),Pu(n,e,r,o,t);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Et(r,o),wf(n,e,r,o,t);case 3:e:{if(Qm(e),n===null)throw Error(X(387));r=e.pendingProps,i=e.memoizedState,o=i.element,Em(n,e),gl(e,r,null,t);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=$o(Error(X(423)),e),e=xf(n,e,r,t,o);break e}else if(r!==o){o=$o(Error(X(424)),e),e=xf(n,e,r,t,o);break e}else for(st=Sr(e.stateNode.containerInfo.firstChild),lt=e,sn=!0,xt=null,t=Sm(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Go(),r===o){e=nr(n,e,t);break e}zn(n,e,r,t)}e=e.child}return e;case 5:return wm(e),n===null&&wu(e),r=e.type,o=e.pendingProps,i=n!==null?n.memoizedProps:null,s=o.children,_u(r,o)?s=null:i!==null&&_u(r,i)&&(e.flags|=32),Ym(n,e),zn(n,e,s,t),e.child;case 6:return n===null&&wu(e),null;case 13:return Xm(n,e,t);case 4:return Ic(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=bo(e,null,r,t):zn(n,e,r,t),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Et(r,o),Tf(n,e,r,o,t);case 7:return zn(n,e,e.pendingProps,t),e.child;case 8:return zn(n,e,e.pendingProps.children,t),e.child;case 12:return zn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,Ze(hl,r._currentValue),r._currentValue=s,i!==null)if(kt(i.value,s)){if(i.children===o.children&&!Xn.current){e=nr(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){s=i.child;for(var f=c.firstContext;f!==null;){if(f.context===r){if(i.tag===1){f=Qt(-1,t&-t),f.tag=2;var p=i.updateQueue;if(p!==null){p=p.shared;var m=p.pending;m===null?f.next=f:(f.next=m.next,m.next=f),p.pending=f}}i.lanes|=t,f=i.alternate,f!==null&&(f.lanes|=t),xu(i.return,t,e),c.lanes|=t;break}f=f.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(X(341));s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),xu(s,t,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}zn(n,e,o.children,t),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Lo(e,t),o=_t(o),r=r(o),e.flags|=1,zn(n,e,r,t),e.child;case 14:return r=e.type,o=Et(r,e.pendingProps),o=Et(r.type,o),Ef(n,e,r,o,t);case 15:return Jm(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Et(r,o),Ys(n,e),e.tag=1,Zn(r)?(n=!0,dl(e)):n=!1,Lo(e,t),$m(e,r,o),Au(e,r,o,t),Nu(null,e,r,!0,n,t);case 19:return Zm(n,e,t);case 22:return Wm(n,e,t)}throw Error(X(156,e.tag))};function hg(n,e){return Gh(n,e)}function D0(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(n,e,t,r){return new D0(n,e,t,r)}function Gc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function L0(n){if(typeof n=="function")return Gc(n)?1:0;if(n!=null){if(n=n.$$typeof,n===sc)return 11;if(n===lc)return 14}return 2}function xr(n,e){var t=n.alternate;return t===null?(t=gt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Zs(n,e,t,r,o,i){var s=2;if(r=n,typeof n=="function")Gc(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case vo:return Yr(t.children,o,i,e);case ic:s=8,o|=8;break;case Xa:return n=gt(12,t,e,o|2),n.elementType=Xa,n.lanes=i,n;case Za:return n=gt(13,t,e,o),n.elementType=Za,n.lanes=i,n;case ja:return n=gt(19,t,e,o),n.elementType=ja,n.lanes=i,n;case wh:return Hl(t,o,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Th:s=10;break e;case Eh:s=9;break e;case sc:s=11;break e;case lc:s=14;break e;case dr:s=16,r=null;break e}throw Error(X(130,n==null?n:typeof n,""))}return e=gt(s,t,e,o),e.elementType=n,e.type=r,e.lanes=i,e}function Yr(n,e,t,r){return n=gt(7,n,r,e),n.lanes=t,n}function Hl(n,e,t,r){return n=gt(22,n,r,e),n.elementType=wh,n.lanes=t,n.stateNode={isHidden:!1},n}function Ja(n,e,t){return n=gt(6,n,null,e),n.lanes=t,n}function Wa(n,e,t){return e=gt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function U0(n,e,t,r,o){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ka(0),this.expirationTimes=ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ka(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bc(n,e,t,r,o,i,s,c,f){return n=new U0(n,e,t,c,f),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gt(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},xc(i),n}function F0(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function mg(n){if(!n)return Ar;n=n._reactInternals;e:{if(ro(n)!==n||n.tag!==1)throw Error(X(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(n.tag===1){var t=n.type;if(Zn(t))return mm(n,t,e)}return e}function gg(n,e,t,r,o,i,s,c,f){return n=bc(t,r,!0,n,o,i,s,c,f),n.context=mg(null),t=n.current,r=$n(),o=wr(t),i=Qt(r,o),i.callback=e??null,Tr(t,i,o),n.current.lanes=o,Xi(n,o,r),jn(n,r),n}function Gl(n,e,t,r){var o=e.current,i=$n(),s=wr(o);return t=mg(t),e.context===null?e.context=t:e.pendingContext=t,e=Qt(i,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Tr(o,e,s),n!==null&&(At(n,o,s,i),Os(n,o,s)),s}function wl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Uf(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function zc(n,e){Uf(n,e),(n=n.alternate)&&Uf(n,e)}function V0(){return null}var yg=typeof reportError=="function"?reportError:function(n){console.error(n)};function $c(n){this._internalRoot=n}bl.prototype.render=$c.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(X(409));Gl(n,e,null,null)};bl.prototype.unmount=$c.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;eo(function(){Gl(null,n,null,null)}),e[jt]=null}};function bl(n){this._internalRoot=n}bl.prototype.unstable_scheduleHydration=function(n){if(n){var e=Wh();n={blockedOn:null,target:n,priority:e};for(var t=0;t<pr.length&&e!==0&&e<pr[t].priority;t++);pr.splice(t,0,n),t===0&&Qh(n)}};function Kc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ff(){}function B0(n,e,t,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var p=wl(s);i.call(p)}}var s=gg(e,r,n,0,null,!1,!1,"",Ff);return n._reactRootContainer=s,n[jt]=s.current,Gi(n.nodeType===8?n.parentNode:n),eo(),s}for(;o=n.lastChild;)n.removeChild(o);if(typeof r=="function"){var c=r;r=function(){var p=wl(f);c.call(p)}}var f=bc(n,0,!1,null,null,!1,!1,"",Ff);return n._reactRootContainer=f,n[jt]=f.current,Gi(n.nodeType===8?n.parentNode:n),eo(function(){Gl(e,f,t,r)}),f}function $l(n,e,t,r,o){var i=t._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var c=o;o=function(){var f=wl(s);c.call(f)}}Gl(e,s,n,o)}else s=B0(t,e,n,o,r);return wl(s)}Oh=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Si(e.pendingLanes);t!==0&&(cc(e,t|1),jn(e,mn()),!(qe&6)&&(Ko=mn()+500,Nr()))}break;case 13:eo(function(){var r=er(n,1);if(r!==null){var o=$n();At(r,n,1,o)}}),zc(n,1)}};dc=function(n){if(n.tag===13){var e=er(n,134217728);if(e!==null){var t=$n();At(e,n,134217728,t)}zc(n,134217728)}};Jh=function(n){if(n.tag===13){var e=wr(n),t=er(n,e);if(t!==null){var r=$n();At(t,n,e,r)}zc(n,e)}};Wh=function(){return We};Yh=function(n,e){var t=We;try{return We=n,e()}finally{We=t}};uu=function(n,e,t){switch(e){case"input":if(tu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var o=Ll(r);if(!o)throw Error(X(90));Ih(r),tu(r,o)}}}break;case"textarea":kh(n,t);break;case"select":e=t.value,e!=null&&No(n,!!t.multiple,e,!1)}};Uh=Bc;Fh=eo;var q0={usingClientEntryPoint:!1,Events:[ji,To,Ll,Dh,Lh,Bc]},yi={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H0={bundleType:yi.bundleType,version:yi.version,rendererPackageName:yi.rendererPackageName,rendererConfig:yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qh(n),n===null?null:n.stateNode},findFiberByHostInstance:yi.findFiberByHostInstance||V0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bs.isDisabled&&Bs.supportsFiber)try{Nl=Bs.inject(H0),Bt=Bs}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0;ut.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kc(e))throw Error(X(200));return F0(n,e,null,t)};ut.createRoot=function(n,e){if(!Kc(n))throw Error(X(299));var t=!1,r="",o=yg;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=bc(n,1,!1,null,null,t,!1,r,o),n[jt]=e.current,Gi(n.nodeType===8?n.parentNode:n),new $c(e)};ut.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(X(188)):(n=Object.keys(n).join(","),Error(X(268,n)));return n=qh(e),n=n===null?null:n.stateNode,n};ut.flushSync=function(n){return eo(n)};ut.hydrate=function(n,e,t){if(!zl(e))throw Error(X(200));return $l(null,n,e,!0,t)};ut.hydrateRoot=function(n,e,t){if(!Kc(n))throw Error(X(405));var r=t!=null&&t.hydratedSources||null,o=!1,i="",s=yg;if(t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=gg(e,null,n,1,t??null,o,!1,i,s),n[jt]=e.current,Gi(n),r)for(n=0;n<r.length;n++)t=r[n],o=t._getVersion,o=o(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,o]:e.mutableSourceEagerHydrationData.push(t,o);return new bl(e)};ut.render=function(n,e,t){if(!zl(e))throw Error(X(200));return $l(null,n,e,!1,t)};ut.unmountComponentAtNode=function(n){if(!zl(n))throw Error(X(40));return n._reactRootContainer?(eo(function(){$l(null,null,n,!1,function(){n._reactRootContainer=null,n[jt]=null})}),!0):!1};ut.unstable_batchedUpdates=Bc;ut.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!zl(t))throw Error(X(200));if(n==null||n._reactInternals===void 0)throw Error(X(38));return $l(n,e,t,!1,r)};ut.version="18.3.1-next-f1338f8080-20240426";function vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vg)}catch(n){console.error(n)}}vg(),vh.exports=ut;var G0=vh.exports,_g,Vf=G0;_g=Vf.createRoot,Vf.hydrateRoot;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let b0,z0;function $0(){return{geminiUrl:b0,vertexUrl:z0}}function K0(n,e,t,r){var o,i;if(!(n!=null&&n.baseUrl)){const s=$0();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:t:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oo{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function u(n,e,t){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const c=s.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(n[c])){const f=n[c];if(Array.isArray(t))for(let p=0;p<f.length;p++){const m=f[p];u(m,e.slice(i+1),t[p])}else for(const p of f)u(p,e.slice(i+1),t)}return}else if(s.endsWith("[0]")){const c=s.slice(0,-3);c in n||(n[c]=[{}]);const f=n[c];u(f[0],e.slice(i+1),t);return}(!n[s]||typeof n[s]!="object")&&(n[s]={}),n=n[s]}const r=e[e.length-1],o=n[r];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function l(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in n){const s=n[i];return Array.isArray(s)?s.map(c=>l(c,e.slice(r+1),t)):t}else return t}else n=n[o]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function O0(n,e){for(const[t,r]of Object.entries(e)){const o=t.split("."),i=r.split("."),s=new Set;let c=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){c=f;break}if(c!==-1&&i.length>c)for(let f=c;f<i.length;f++){const p=i[f];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&s.add(p)}bu(n,o,i,0,s)}}function bu(n,e,t,r,o){if(r>=e.length||typeof n!="object"||n===null)return;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2),c=n;if(s in c&&Array.isArray(c[s]))for(const f of c[s])bu(f,e,t,r+1,o)}else if(i==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const s=n,c=Object.keys(s).filter(p=>!p.startsWith("_")&&!o.has(p)),f={};for(const p of c)f[p]=s[p];for(const[p,m]of Object.entries(f)){const y=[];for(const v of t.slice(r))v==="*"?y.push(p):y.push(v);u(s,y,m)}for(const p of c)delete s[p]}}else{const s=n;i in s&&bu(s[i],e,t,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oc(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J0(n){const e={},t=l(n,["operationName"]);t!=null&&u(e,["operationName"],t);const r=l(n,["resourceName"]);return r!=null&&u(e,["_url","resourceName"],r),e}function W0(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(n,["done"]);o!=null&&u(e,["done"],o);const i=l(n,["error"]);i!=null&&u(e,["error"],i);const s=l(n,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],Q0(s)),e}function Y0(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(n,["done"]);o!=null&&u(e,["done"],o);const i=l(n,["error"]);i!=null&&u(e,["error"],i);const s=l(n,["response"]);return s!=null&&u(e,["response"],X0(s)),e}function Q0(n){const e={},t=l(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Z0(s))),u(e,["generatedVideos"],i)}const r=l(n,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(n,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function X0(n){const e={},t=l(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>j0(s))),u(e,["generatedVideos"],i)}const r=l(n,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(n,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function Z0(n){const e={},t=l(n,["video"]);return t!=null&&u(e,["video"],t_(t)),e}function j0(n){const e={},t=l(n,["_self"]);return t!=null&&u(e,["video"],r_(t)),e}function e_(n){const e={},t=l(n,["operationName"]);return t!=null&&u(e,["_url","operationName"],t),e}function n_(n){const e={},t=l(n,["operationName"]);return t!=null&&u(e,["_url","operationName"],t),e}function t_(n){const e={},t=l(n,["uri"]);t!=null&&u(e,["uri"],t);const r=l(n,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Oc(r));const o=l(n,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function r_(n){const e={},t=l(n,["gcsUri"]);t!=null&&u(e,["uri"],t);const r=l(n,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Oc(r));const o=l(n,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bf;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Bf||(Bf={}));var qf;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(qf||(qf={}));var Hf;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Hf||(Hf={}));var yr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(yr||(yr={}));var Gf;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Gf||(Gf={}));var bf;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(bf||(bf={}));var zf;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(zf||(zf={}));var $f;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})($f||($f={}));var Kf;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Kf||(Kf={}));var Of;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Of||(Of={}));var Jf;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Jf||(Jf={}));var Wf;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Wf||(Wf={}));var Yf;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Yf||(Yf={}));var Qf;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Qf||(Qf={}));var Xf;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Xf||(Xf={}));var Zf;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Zf||(Zf={}));var xl;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xl||(xl={}));var jf;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jf||(jf={}));var zu;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zu||(zu={}));var ep;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ep||(ep={}));var np;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(np||(np={}));var tp;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(tp||(tp={}));var rp;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(rp||(rp={}));var op;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(op||(op={}));var ip;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ip||(ip={}));var sp;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sp||(sp={}));var lp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(lp||(lp={}));var ap;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(ap||(ap={}));var up;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(up||(up={}));var cp;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(cp||(cp={}));var dp;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(dp||(dp={}));var fp;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fp||(fp={}));var pp;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(pp||(pp={}));var hp;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hp||(hp={}));var mp;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(mp||(mp={}));var gp;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(gp||(gp={}));var yp;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(yp||(yp={}));var vp;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(vp||(vp={}));var _p;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(_p||(_p={}));var Cp;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Cp||(Cp={}));var Sp;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Sp||(Sp={}));var Tp;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Tp||(Tp={}));var Ep;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ep||(Ep={}));var wp;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wp||(wp={}));var xp;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(xp||(xp={}));var Ip;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ip||(Ip={}));var Ap;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ap||(Ap={}));var kp;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(kp||(kp={}));var Po;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Po||(Po={}));class $u{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class vi{get text(){var e,t,r,o,i,s,c,f;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",m=!1;const y=[];for(const v of(f=(c=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[x,U]of Object.entries(v))x!=="text"&&x!=="thought"&&(U!==null||U!==void 0)&&y.push(x);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;m=!0,p+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?p:void 0}get data(){var e,t,r,o,i,s,c,f;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const m=[];for(const y of(f=(c=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[v,x]of Object.entries(y))v!=="inlineData"&&(x!==null||x!==void 0)&&m.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(p+=atob(y.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,r,o,i,s,c,f;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(f=(c=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,r,o,i,s,c,f,p;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(f=(c=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return(p=m==null?void 0:m[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,r,o,i,s,c,f,p;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(f=(c=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return(p=m==null?void 0:m[0])===null||p===void 0?void 0:p.output}}class Pp{}class Np{}class o_{}class i_{}class s_{}class l_{}class Mp{}class Rp{}class Dp{}class a_{}class Il{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const r=new Il;let o;const i=e;return t?o=Y0(i):o=W0(i),Object.assign(r,o),r}}class Lp{}class Up{}class Fp{}class u_{}class c_{}class d_{}class Vp{}class f_{get text(){var e,t,r;let o="",i=!1;const s=[];for(const c of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[f,p]of Object.entries(c))f!=="text"&&f!=="thought"&&p!==null&&s.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;i=!0,o+=c.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,t,r;let o="";const i=[];for(const s of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(s))c!=="inlineData"&&f!==null&&i.push(c);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class p_{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Cg(n,e){const t=ze(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Sg(n){return Array.isArray(n)?n.map(e=>Al(e)):[Al(n)]}function Al(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Tg(n){const e=Al(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Eg(n){const e=Al(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Bp(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function wg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Bp(e)):[Bp(n)]}function Ku(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function qp(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Hp(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Bn(n){if(n==null)throw new Error("ContentUnion is required");return Ku(n)?n:{role:"user",parts:wg(n)}}function Jc(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Bn(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Bn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Bn(t)):[Bn(e)]}function vt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(qp(n)||Hp(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bn(n)]}const e=[],t=[],r=Ku(n[0]);for(const o of n){const i=Ku(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(qp(o)||Hp(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return r||e.push({role:"user",parts:wg(t)}),e}function h_(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(yr).includes(t[0].toUpperCase())?t[0].toUpperCase():yr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(yr).includes(r.toUpperCase())?r.toUpperCase():yr.TYPE_UNSPECIFIED})}}function Fo(n){const e={},t=["items"],r=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=n.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,n=i[1]):i[1].type==="null"&&(e.nullable=!0,n=i[0])),n.type instanceof Array&&h_(n.type,e);for(const[s,c]of Object.entries(n))if(c!=null)if(s=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(yr).includes(c.toUpperCase())?c.toUpperCase():yr.TYPE_UNSPECIFIED}else if(t.includes(s))e[s]=Fo(c);else if(r.includes(s)){const f=[];for(const p of c){if(p.type=="null"){e.nullable=!0;continue}f.push(Fo(p))}e[s]=f}else if(o.includes(s)){const f={};for(const[p,m]of Object.entries(c))f[p]=Fo(m);e[s]=f}else{if(s==="additionalProperties")continue;e[s]=c}return e}function Wc(n){return Fo(n)}function Yc(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Qc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Yo(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Fo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Fo(e.response));return n}function Qo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function m_(n,e,t,r=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function rr(n,e){if(typeof e!="string")throw new Error("name must be a string");return m_(n,e,"cachedContents")}function xg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Mr(n){return Oc(n)}function g_(n){return n!=null&&typeof n=="object"&&"name"in n}function y_(n){return n!=null&&typeof n=="object"&&"video"in n}function v_(n){return n!=null&&typeof n=="object"&&"uri"in n}function Ig(n){var e;let t;if(g_(n)&&(t=n.name),!(v_(n)&&(t=n.uri,t===void 0))&&!(y_(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Ag(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function kg(n){for(const e of["models","tunedModels","publisherModels"])if(__(n,e))return n[e];return[]}function __(n,e){return n!==null&&typeof n=="object"&&e in n}function C_(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function S_(n,e={}){const t=[],r=new Set;for(const o of n){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const s=C_(o,e);s.functionDeclarations&&t.push(...s.functionDeclarations)}return{functionDeclarations:t}}function Pg(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function T_(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ng(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let i=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const f=s.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Xo(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Mg(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E_(n){const e={},t=l(n,["responsesFile"]);t!=null&&u(e,["fileName"],t);const r=l(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>eC(s))),u(e,["inlinedResponses"],i)}const o=l(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["inlinedEmbedContentResponses"],i)}return e}function w_(n){const e={},t=l(n,["predictionsFormat"]);t!=null&&u(e,["format"],t);const r=l(n,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const o=l(n,["bigqueryDestination","outputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function x_(n){const e={},t=l(n,["format"]);t!=null&&u(e,["predictionsFormat"],t);const r=l(n,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const o=l(n,["bigqueryUri"]);if(o!=null&&u(e,["bigqueryDestination","outputUri"],o),l(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function js(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const o=l(n,["metadata","state"]);o!=null&&u(e,["state"],Mg(o));const i=l(n,["metadata","createTime"]);i!=null&&u(e,["createTime"],i);const s=l(n,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const c=l(n,["metadata","updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(n,["metadata","model"]);f!=null&&u(e,["model"],f);const p=l(n,["metadata","output"]);return p!=null&&u(e,["dest"],E_(Ng(p))),e}function Ou(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(n,["state"]);o!=null&&u(e,["state"],Mg(o));const i=l(n,["error"]);i!=null&&u(e,["error"],i);const s=l(n,["createTime"]);s!=null&&u(e,["createTime"],s);const c=l(n,["startTime"]);c!=null&&u(e,["startTime"],c);const f=l(n,["endTime"]);f!=null&&u(e,["endTime"],f);const p=l(n,["updateTime"]);p!=null&&u(e,["updateTime"],p);const m=l(n,["model"]);m!=null&&u(e,["model"],m);const y=l(n,["inputConfig"]);y!=null&&u(e,["src"],I_(y));const v=l(n,["outputConfig"]);return v!=null&&u(e,["dest"],w_(Ng(v))),e}function I_(n){const e={},t=l(n,["instancesFormat"]);t!=null&&u(e,["format"],t);const r=l(n,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const o=l(n,["bigquerySource","inputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function A_(n,e){const t={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(t,["fileName"],r);const o=l(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>j_(n,s))),u(t,["requests","requests"],i)}return t}function k_(n){const e={},t=l(n,["format"]);t!=null&&u(e,["instancesFormat"],t);const r=l(n,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const o=l(n,["bigqueryUri"]);if(o!=null&&u(e,["bigquerySource","inputUri"],o),l(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function P_(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["data"]);t!=null&&u(e,["data"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function N_(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],Xo(n,r)),t}function M_(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],Xo(n,r)),t}function R_(n){const e={},t=l(n,["content"]);t!=null&&u(e,["content"],t);const r=l(n,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],D_(r));const o=l(n,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const i=l(n,["finishReason"]);i!=null&&u(e,["finishReason"],i);const s=l(n,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],s);const c=l(n,["avgLogprobs"]);c!=null&&u(e,["avgLogprobs"],c);const f=l(n,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const p=l(n,["index"]);p!=null&&u(e,["index"],p);const m=l(n,["logprobsResult"]);m!=null&&u(e,["logprobsResult"],m);const y=l(n,["safetyRatings"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(x=>x)),u(e,["safetyRatings"],v)}return e}function D_(n){const e={},t=l(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function Rg(n){const e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>lC(i))),u(e,["parts"],o)}const r=l(n,["role"]);return r!=null&&u(e,["role"],r),e}function L_(n,e){const t={},r=l(n,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function U_(n,e){const t={},r=l(n,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(n,["dest"]);return e!==void 0&&o!=null&&u(e,["outputConfig"],x_(T_(o))),t}function Gp(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["src"]);o!=null&&u(t,["batch","inputConfig"],A_(n,Pg(n,o)));const i=l(e,["config"]);return i!=null&&L_(i,t),t}function F_(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["model"],ze(n,r));const o=l(e,["src"]);o!=null&&u(t,["inputConfig"],k_(Pg(n,o)));const i=l(e,["config"]);return i!=null&&U_(i,t),t}function V_(n,e){const t={},r=l(n,["displayName"]);return e!==void 0&&r!=null&&u(e,["batch","displayName"],r),t}function B_(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["src"]);o!=null&&u(t,["batch","inputConfig"],K_(n,o));const i=l(e,["config"]);return i!=null&&V_(i,t),t}function q_(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],Xo(n,r)),t}function H_(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],Xo(n,r)),t}function G_(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["done"]);o!=null&&u(e,["done"],o);const i=l(n,["error"]);return i!=null&&u(e,["error"],i),e}function b_(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["done"]);o!=null&&u(e,["done"],o);const i=l(n,["error"]);return i!=null&&u(e,["error"],i),e}function z_(n,e){const t={},r=l(e,["contents"]);if(r!=null){let i=Jc(n,r);Array.isArray(i)&&(i=i.map(s=>s)),u(t,["requests[]","request","content"],i)}const o=l(e,["config"]);return o!=null&&(u(t,["_self"],$_(o,t)),O0(t,{"requests[].*":"requests[].request.*"})),t}function $_(n,e){const t={},r=l(n,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(n,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const i=l(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),l(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function K_(n,e){const t={},r=l(e,["fileName"]);r!=null&&u(t,["file_name"],r);const o=l(e,["inlinedRequests"]);return o!=null&&u(t,["requests"],z_(n,o)),t}function O_(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["fileUri"]);t!=null&&u(e,["fileUri"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function J_(n,e,t){const r={},o=l(e,["systemInstruction"]);t!==void 0&&o!=null&&u(t,["systemInstruction"],Rg(Bn(o)));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const c=l(e,["topK"]);c!=null&&u(r,["topK"],c);const f=l(e,["candidateCount"]);f!=null&&u(r,["candidateCount"],f);const p=l(e,["maxOutputTokens"]);p!=null&&u(r,["maxOutputTokens"],p);const m=l(e,["stopSequences"]);m!=null&&u(r,["stopSequences"],m);const y=l(e,["responseLogprobs"]);y!=null&&u(r,["responseLogprobs"],y);const v=l(e,["logprobs"]);v!=null&&u(r,["logprobs"],v);const x=l(e,["presencePenalty"]);x!=null&&u(r,["presencePenalty"],x);const U=l(e,["frequencyPenalty"]);U!=null&&u(r,["frequencyPenalty"],U);const B=l(e,["seed"]);B!=null&&u(r,["seed"],B);const J=l(e,["responseMimeType"]);J!=null&&u(r,["responseMimeType"],J);const I=l(e,["responseSchema"]);I!=null&&u(r,["responseSchema"],Wc(I));const E=l(e,["responseJsonSchema"]);if(E!=null&&u(r,["responseJsonSchema"],E),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(t!==void 0&&w!=null){let xe=w;Array.isArray(xe)&&(xe=xe.map(Me=>aC(Me))),u(t,["safetySettings"],xe)}const H=l(e,["tools"]);if(t!==void 0&&H!=null){let xe=Qo(H);Array.isArray(xe)&&(xe=xe.map(Me=>uC(Yo(Me)))),u(t,["tools"],xe)}const z=l(e,["toolConfig"]);if(t!==void 0&&z!=null&&u(t,["toolConfig"],z),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=l(e,["cachedContent"]);t!==void 0&&O!=null&&u(t,["cachedContent"],rr(n,O));const $=l(e,["responseModalities"]);$!=null&&u(r,["responseModalities"],$);const te=l(e,["mediaResolution"]);te!=null&&u(r,["mediaResolution"],te);const Y=l(e,["speechConfig"]);if(Y!=null&&u(r,["speechConfig"],Yc(Y)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=l(e,["thinkingConfig"]);ue!=null&&u(r,["thinkingConfig"],ue);const we=l(e,["imageConfig"]);return we!=null&&u(r,["imageConfig"],we),r}function W_(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>R_(p))),u(e,["candidates"],f)}const o=l(n,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const i=l(n,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const s=l(n,["responseId"]);s!=null&&u(e,["responseId"],s);const c=l(n,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function Y_(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],Xo(n,r)),t}function Q_(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],Xo(n,r)),t}function X_(n){const e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=l(n,["enableWidget"]);return t!=null&&u(e,["enableWidget"],t),e}function Z_(n){const e={},t=l(n,["timeRangeFilter"]);if(t!=null&&u(e,["timeRangeFilter"],t),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function j_(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["request","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let c=vt(o);Array.isArray(c)&&(c=c.map(f=>Rg(f))),u(t,["request","contents"],c)}const i=l(e,["metadata"]);i!=null&&u(t,["metadata"],i);const s=l(e,["config"]);return s!=null&&u(t,["request","generationConfig"],J_(n,s,l(t,["request"],{}))),t}function eC(n){const e={},t=l(n,["response"]);t!=null&&u(e,["response"],W_(t));const r=l(n,["error"]);return r!=null&&u(e,["error"],r),e}function nC(n,e){const t={},r=l(n,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(n,["pageToken"]);if(e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),l(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tC(n,e){const t={},r=l(n,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(n,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const i=l(n,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),t}function rC(n){const e={},t=l(n,["config"]);return t!=null&&nC(t,e),e}function oC(n){const e={},t=l(n,["config"]);return t!=null&&tC(t,e),e}function iC(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>js(s))),u(e,["batchJobs"],i)}return e}function sC(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Ou(s))),u(e,["batchJobs"],i)}return e}function lC(n){const e={},t=l(n,["videoMetadata"]);t!=null&&u(e,["videoMetadata"],t);const r=l(n,["thought"]);r!=null&&u(e,["thought"],r);const o=l(n,["inlineData"]);o!=null&&u(e,["inlineData"],P_(o));const i=l(n,["fileData"]);i!=null&&u(e,["fileData"],O_(i));const s=l(n,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const c=l(n,["functionCall"]);c!=null&&u(e,["functionCall"],c);const f=l(n,["codeExecutionResult"]);f!=null&&u(e,["codeExecutionResult"],f);const p=l(n,["executableCode"]);p!=null&&u(e,["executableCode"],p);const m=l(n,["functionResponse"]);m!=null&&u(e,["functionResponse"],m);const y=l(n,["text"]);return y!=null&&u(e,["text"],y),e}function aC(n){const e={};if(l(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=l(n,["category"]);t!=null&&u(e,["category"],t);const r=l(n,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function uC(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["functionDeclarations"],p)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(n,["googleSearch"]);r!=null&&u(e,["googleSearch"],Z_(r));const o=l(n,["googleSearchRetrieval"]);if(o!=null&&u(e,["googleSearchRetrieval"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(n,["googleMaps"]);i!=null&&u(e,["googleMaps"],X_(i));const s=l(n,["urlContext"]);s!=null&&u(e,["urlContext"],s);const c=l(n,["computerUse"]);c!=null&&u(e,["computerUse"],c);const f=l(n,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var no;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(no||(no={}));class ns{constructor(e,t,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,o)}init(e,t,r){var o,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=t.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cC extends oo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new ns(no.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Gp(this.apiClient,e),r=t._url,o=me("{model}:batchGenerateContent",r),c=t.batch.inputConfig.requests,f=c.requests,p=[];for(const m of f){const y=Object.assign({},m);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const x=y.request;x.systemInstruction=v,y.request=x}p.push(y)}return c.requests=p,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=F_(this.apiClient,e);return c=me("batchPredictionJobs",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>Ou(m))}else{const p=Gp(this.apiClient,e);return c=me("{model}:batchGenerateContent",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>js(m))}}async createEmbeddingsInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=B_(this.apiClient,e);return i=me("{model}:asyncBatchEmbedContent",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>js(f))}}async get(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=Q_(this.apiClient,e);return c=me("batchPredictionJobs/{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>Ou(m))}else{const p=Y_(this.apiClient,e);return c=me("batches/{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>js(m))}}async cancel(e){var t,r,o,i;let s="",c={};if(this.apiClient.isVertexAI()){const f=M_(this.apiClient,e);s=me("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=N_(this.apiClient,e);s=me("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=oC(e);return c=me("batchPredictionJobs",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=sC(m),v=new Vp;return Object.assign(v,y),v})}else{const p=rC(e);return c=me("batches",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=iC(m),v=new Vp;return Object.assign(v,y),v})}}async delete(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=H_(this.apiClient,e);return c=me("batchPredictionJobs/{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>b_(m))}else{const p=q_(this.apiClient,e);return c=me("batches/{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>G_(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dC(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["data"]);t!=null&&u(e,["data"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function bp(n){const e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>RC(i))),u(e,["parts"],o)}const r=l(n,["role"]);return r!=null&&u(e,["role"],r),e}function fC(n,e){const t={},r=l(n,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(n,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(n,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(n,["contents"]);if(e!==void 0&&s!=null){let m=vt(s);Array.isArray(m)&&(m=m.map(y=>bp(y))),u(e,["contents"],m)}const c=l(n,["systemInstruction"]);e!==void 0&&c!=null&&u(e,["systemInstruction"],bp(Bn(c)));const f=l(n,["tools"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>DC(y))),u(e,["tools"],m)}const p=l(n,["toolConfig"]);if(e!==void 0&&p!=null&&u(e,["toolConfig"],p),l(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function pC(n,e){const t={},r=l(n,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(n,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(n,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(n,["contents"]);if(e!==void 0&&s!=null){let y=vt(s);Array.isArray(y)&&(y=y.map(v=>v)),u(e,["contents"],y)}const c=l(n,["systemInstruction"]);e!==void 0&&c!=null&&u(e,["systemInstruction"],Bn(c));const f=l(n,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(v=>LC(v))),u(e,["tools"],y)}const p=l(n,["toolConfig"]);e!==void 0&&p!=null&&u(e,["toolConfig"],p);const m=l(n,["kmsKeyName"]);return e!==void 0&&m!=null&&u(e,["encryption_spec","kmsKeyName"],m),t}function hC(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["model"],Cg(n,r));const o=l(e,["config"]);return o!=null&&fC(o,t),t}function mC(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["model"],Cg(n,r));const o=l(e,["config"]);return o!=null&&pC(o,t),t}function gC(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],rr(n,r)),t}function yC(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],rr(n,r)),t}function vC(n){const e={},t=l(n,["sdkHttpResponse"]);return t!=null&&u(e,["sdkHttpResponse"],t),e}function _C(n){const e={},t=l(n,["sdkHttpResponse"]);return t!=null&&u(e,["sdkHttpResponse"],t),e}function CC(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["fileUri"]);t!=null&&u(e,["fileUri"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function SC(n){const e={};if(l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=l(n,["description"]);t!=null&&u(e,["description"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(n,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(n,["response"]);s!=null&&u(e,["response"],s);const c=l(n,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function TC(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],rr(n,r)),t}function EC(n,e){const t={},r=l(e,["name"]);return r!=null&&u(t,["_url","name"],rr(n,r)),t}function wC(n){const e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=l(n,["enableWidget"]);return t!=null&&u(e,["enableWidget"],t),e}function xC(n){const e={},t=l(n,["timeRangeFilter"]);if(t!=null&&u(e,["timeRangeFilter"],t),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function IC(n,e){const t={},r=l(n,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(n,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),t}function AC(n,e){const t={},r=l(n,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(n,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),t}function kC(n){const e={},t=l(n,["config"]);return t!=null&&IC(t,e),e}function PC(n){const e={},t=l(n,["config"]);return t!=null&&AC(t,e),e}function NC(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function MC(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function RC(n){const e={},t=l(n,["videoMetadata"]);t!=null&&u(e,["videoMetadata"],t);const r=l(n,["thought"]);r!=null&&u(e,["thought"],r);const o=l(n,["inlineData"]);o!=null&&u(e,["inlineData"],dC(o));const i=l(n,["fileData"]);i!=null&&u(e,["fileData"],CC(i));const s=l(n,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const c=l(n,["functionCall"]);c!=null&&u(e,["functionCall"],c);const f=l(n,["codeExecutionResult"]);f!=null&&u(e,["codeExecutionResult"],f);const p=l(n,["executableCode"]);p!=null&&u(e,["executableCode"],p);const m=l(n,["functionResponse"]);m!=null&&u(e,["functionResponse"],m);const y=l(n,["text"]);return y!=null&&u(e,["text"],y),e}function DC(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["functionDeclarations"],p)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(n,["googleSearch"]);r!=null&&u(e,["googleSearch"],xC(r));const o=l(n,["googleSearchRetrieval"]);if(o!=null&&u(e,["googleSearchRetrieval"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(n,["googleMaps"]);i!=null&&u(e,["googleMaps"],wC(i));const s=l(n,["urlContext"]);s!=null&&u(e,["urlContext"],s);const c=l(n,["computerUse"]);c!=null&&u(e,["computerUse"],c);const f=l(n,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}function LC(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(v=>SC(v))),u(e,["functionDeclarations"],y)}const r=l(n,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(n,["googleSearch"]);o!=null&&u(e,["googleSearch"],o);const i=l(n,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=l(n,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],s);const c=l(n,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const f=l(n,["urlContext"]);f!=null&&u(e,["urlContext"],f);const p=l(n,["computerUse"]);p!=null&&u(e,["computerUse"],p);const m=l(n,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function UC(n,e){const t={},r=l(n,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(n,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),t}function FC(n,e){const t={},r=l(n,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(n,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),t}function VC(n,e){const t={},r=l(e,["name"]);r!=null&&u(t,["_url","name"],rr(n,r));const o=l(e,["config"]);return o!=null&&UC(o,t),t}function BC(n,e){const t={},r=l(e,["name"]);r!=null&&u(t,["_url","name"],rr(n,r));const o=l(e,["config"]);return o!=null&&FC(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qC extends oo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ns(no.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=mC(this.apiClient,e);return c=me("cachedContents",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}else{const p=hC(this.apiClient,e);return c=me("cachedContents",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async get(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=EC(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}else{const p=TC(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=yC(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=_C(m),v=new Up;return Object.assign(v,y),v})}else{const p=gC(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=vC(m),v=new Up;return Object.assign(v,y),v})}}async update(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=BC(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}else{const p=VC(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async listInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=PC(e);return c=me("cachedContents",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=MC(m),v=new Fp;return Object.assign(v,y),v})}else{const p=kC(e);return c=me("cachedContents",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=NC(m),v=new Fp;return Object.assign(v,y),v})}}}function zp(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(n){return this instanceof nn?(this.v=n,this):new nn(n)}function Vo(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(x){return function(U){return Promise.resolve(U).then(x,y)}}function c(x,U){r[x]&&(o[x]=function(B){return new Promise(function(J,I){i.push([x,B,J,I])>1||f(x,B)})},U&&(o[x]=U(o[x])))}function f(x,U){try{p(r[x](U))}catch(B){v(i[0][3],B)}}function p(x){x.value instanceof nn?Promise.resolve(x.value.v).then(m,y):v(i[0][2],x)}function m(x){f("next",x)}function y(x){f("throw",x)}function v(x,U){x(U),i.shift(),i.length&&f(i[0][0],i[0][1])}}function Ri(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zp=="function"?zp(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(c,f){s=n[i](s),o(c,f,s.done,s.value)})}}function o(i,s,c,f){Promise.resolve(f).then(function(p){i({value:p,done:c})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HC(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Dg(t)}function Dg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function GC(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function $p(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const o=[];let i=!0;for(;r<t&&n[r].role==="model";)o.push(n[r]),i&&!Dg(n[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class bC{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new zC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class zC{constructor(e,t,r,o={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),GC(i)}async sendMessage(e){var t;await this.sendPromise;const r=Bn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var i,s,c;const f=await o,p=(s=(i=f.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,m=f.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];m!=null&&(v=(c=m.slice(y))!==null&&c!==void 0?c:[]);const x=p?[p]:[];this.recordHistory(r,x,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const r=Bn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const t=e?$p(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var r,o;return Vo(this,arguments,function*(){var s,c,f,p;const m=[];try{for(var y=!0,v=Ri(e),x;x=yield nn(v.next()),s=x.done,!s;y=!0){p=x.value,y=!1;const U=p;if(HC(U)){const B=(o=(r=U.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;B!==void 0&&m.push(B)}yield yield nn(U)}}catch(U){c={error:U}}finally{try{!y&&!s&&(f=v.return)&&(yield nn(f.call(v)))}finally{if(c)throw c.error}}this.recordHistory(t,m)})}recordHistory(e,t,r){let o=[];t.length>0&&t.every(i=>i.role!==void 0)?o=t:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...$p(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Kl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $C(n){const e={},t=l(n,["file"]);return t!=null&&u(e,["file"],t),e}function KC(n){const e={},t=l(n,["sdkHttpResponse"]);return t!=null&&u(e,["sdkHttpResponse"],t),e}function OC(n){const e={},t=l(n,["name"]);return t!=null&&u(e,["_url","file"],Ig(t)),e}function JC(n){const e={},t=l(n,["sdkHttpResponse"]);return t!=null&&u(e,["sdkHttpResponse"],t),e}function WC(n){const e={},t=l(n,["name"]);return t!=null&&u(e,["_url","file"],Ig(t)),e}function YC(n,e){const t={},r=l(n,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(n,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),t}function QC(n){const e={},t=l(n,["config"]);return t!=null&&YC(t,e),e}function XC(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZC extends oo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ns(no.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=QC(e);return i=me("files",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=XC(f),m=new u_;return Object.assign(m,p),m})}}async createInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$C(e);return i=me("upload/v1beta/files",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=KC(f),m=new c_;return Object.assign(m,p),m})}}async get(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WC(e);return i=me("files/{file}",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=OC(e);return i=me("files/{file}",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=JC(f),m=new d_;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function el(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["data"]);t!=null&&u(e,["data"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function jC(n){const e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>hS(i))),u(e,["parts"],o)}const r=l(n,["role"]);return r!=null&&u(e,["role"],r),e}function eS(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["fileUri"]);t!=null&&u(e,["fileUri"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function nS(n){const e={};if(l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=l(n,["description"]);t!=null&&u(e,["description"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(n,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(n,["response"]);s!=null&&u(e,["response"],s);const c=l(n,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function tS(n){const e={},t=l(n,["modelSelectionConfig"]);t!=null&&u(e,["modelConfig"],t);const r=l(n,["audioTimestamp"]);r!=null&&u(e,["audioTimestamp"],r);const o=l(n,["candidateCount"]);o!=null&&u(e,["candidateCount"],o);const i=l(n,["enableAffectiveDialog"]);i!=null&&u(e,["enableAffectiveDialog"],i);const s=l(n,["frequencyPenalty"]);s!=null&&u(e,["frequencyPenalty"],s);const c=l(n,["logprobs"]);c!=null&&u(e,["logprobs"],c);const f=l(n,["maxOutputTokens"]);f!=null&&u(e,["maxOutputTokens"],f);const p=l(n,["mediaResolution"]);p!=null&&u(e,["mediaResolution"],p);const m=l(n,["presencePenalty"]);m!=null&&u(e,["presencePenalty"],m);const y=l(n,["responseJsonSchema"]);y!=null&&u(e,["responseJsonSchema"],y);const v=l(n,["responseLogprobs"]);v!=null&&u(e,["responseLogprobs"],v);const x=l(n,["responseMimeType"]);x!=null&&u(e,["responseMimeType"],x);const U=l(n,["responseModalities"]);U!=null&&u(e,["responseModalities"],U);const B=l(n,["responseSchema"]);B!=null&&u(e,["responseSchema"],B);const J=l(n,["routingConfig"]);J!=null&&u(e,["routingConfig"],J);const I=l(n,["seed"]);I!=null&&u(e,["seed"],I);const E=l(n,["speechConfig"]);E!=null&&u(e,["speechConfig"],Lg(E));const w=l(n,["stopSequences"]);w!=null&&u(e,["stopSequences"],w);const H=l(n,["temperature"]);H!=null&&u(e,["temperature"],H);const z=l(n,["thinkingConfig"]);z!=null&&u(e,["thinkingConfig"],z);const O=l(n,["topK"]);O!=null&&u(e,["topK"],O);const $=l(n,["topP"]);if($!=null&&u(e,["topP"],$),l(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rS(n){const e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=l(n,["enableWidget"]);return t!=null&&u(e,["enableWidget"],t),e}function oS(n){const e={},t=l(n,["timeRangeFilter"]);if(t!=null&&u(e,["timeRangeFilter"],t),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function iS(n,e){const t={},r=l(n,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(n,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(n,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(n,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const c=l(n,["topK"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","topK"],c);const f=l(n,["maxOutputTokens"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","maxOutputTokens"],f);const p=l(n,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const m=l(n,["seed"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","seed"],m);const y=l(n,["speechConfig"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","speechConfig"],Qc(y));const v=l(n,["thinkingConfig"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","thinkingConfig"],v);const x=l(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=l(n,["systemInstruction"]);e!==void 0&&U!=null&&u(e,["setup","systemInstruction"],jC(Bn(U)));const B=l(n,["tools"]);if(e!==void 0&&B!=null){let O=Qo(B);Array.isArray(O)&&(O=O.map($=>gS(Yo($)))),u(e,["setup","tools"],O)}const J=l(n,["sessionResumption"]);e!==void 0&&J!=null&&u(e,["setup","sessionResumption"],mS(J));const I=l(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&u(e,["setup","inputAudioTranscription"],I);const E=l(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&u(e,["setup","outputAudioTranscription"],E);const w=l(n,["realtimeInputConfig"]);e!==void 0&&w!=null&&u(e,["setup","realtimeInputConfig"],w);const H=l(n,["contextWindowCompression"]);e!==void 0&&H!=null&&u(e,["setup","contextWindowCompression"],H);const z=l(n,["proactivity"]);return e!==void 0&&z!=null&&u(e,["setup","proactivity"],z),t}function sS(n,e){const t={},r=l(n,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],tS(r));const o=l(n,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(n,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(n,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const c=l(n,["topK"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","topK"],c);const f=l(n,["maxOutputTokens"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","maxOutputTokens"],f);const p=l(n,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const m=l(n,["seed"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","seed"],m);const y=l(n,["speechConfig"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","speechConfig"],Lg(Qc(y)));const v=l(n,["thinkingConfig"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","thinkingConfig"],v);const x=l(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=l(n,["systemInstruction"]);e!==void 0&&U!=null&&u(e,["setup","systemInstruction"],Bn(U));const B=l(n,["tools"]);if(e!==void 0&&B!=null){let O=Qo(B);Array.isArray(O)&&(O=O.map($=>yS(Yo($)))),u(e,["setup","tools"],O)}const J=l(n,["sessionResumption"]);e!==void 0&&J!=null&&u(e,["setup","sessionResumption"],J);const I=l(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&u(e,["setup","inputAudioTranscription"],I);const E=l(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&u(e,["setup","outputAudioTranscription"],E);const w=l(n,["realtimeInputConfig"]);e!==void 0&&w!=null&&u(e,["setup","realtimeInputConfig"],w);const H=l(n,["contextWindowCompression"]);e!==void 0&&H!=null&&u(e,["setup","contextWindowCompression"],H);const z=l(n,["proactivity"]);return e!==void 0&&z!=null&&u(e,["setup","proactivity"],z),t}function lS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["setup","model"],ze(n,r));const o=l(e,["config"]);return o!=null&&u(t,["config"],iS(o,t)),t}function aS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["setup","model"],ze(n,r));const o=l(e,["config"]);return o!=null&&u(t,["config"],sS(o,t)),t}function uS(n){const e={},t=l(n,["musicGenerationConfig"]);return t!=null&&u(e,["musicGenerationConfig"],t),e}function cS(n){const e={},t=l(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["weightedPrompts"],r)}return e}function dS(n){const e={},t=l(n,["media"]);if(t!=null){let p=Sg(t);Array.isArray(p)&&(p=p.map(m=>el(m))),u(e,["mediaChunks"],p)}const r=l(n,["audio"]);r!=null&&u(e,["audio"],el(Eg(r)));const o=l(n,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(n,["video"]);i!=null&&u(e,["video"],el(Tg(i)));const s=l(n,["text"]);s!=null&&u(e,["text"],s);const c=l(n,["activityStart"]);c!=null&&u(e,["activityStart"],c);const f=l(n,["activityEnd"]);return f!=null&&u(e,["activityEnd"],f),e}function fS(n){const e={},t=l(n,["media"]);if(t!=null){let p=Sg(t);Array.isArray(p)&&(p=p.map(m=>m)),u(e,["mediaChunks"],p)}const r=l(n,["audio"]);r!=null&&u(e,["audio"],Eg(r));const o=l(n,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(n,["video"]);i!=null&&u(e,["video"],Tg(i));const s=l(n,["text"]);s!=null&&u(e,["text"],s);const c=l(n,["activityStart"]);c!=null&&u(e,["activityStart"],c);const f=l(n,["activityEnd"]);return f!=null&&u(e,["activityEnd"],f),e}function pS(n){const e={},t=l(n,["setupComplete"]);t!=null&&u(e,["setupComplete"],t);const r=l(n,["serverContent"]);r!=null&&u(e,["serverContent"],r);const o=l(n,["toolCall"]);o!=null&&u(e,["toolCall"],o);const i=l(n,["toolCallCancellation"]);i!=null&&u(e,["toolCallCancellation"],i);const s=l(n,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],vS(s));const c=l(n,["goAway"]);c!=null&&u(e,["goAway"],c);const f=l(n,["sessionResumptionUpdate"]);return f!=null&&u(e,["sessionResumptionUpdate"],f),e}function hS(n){const e={},t=l(n,["videoMetadata"]);t!=null&&u(e,["videoMetadata"],t);const r=l(n,["thought"]);r!=null&&u(e,["thought"],r);const o=l(n,["inlineData"]);o!=null&&u(e,["inlineData"],el(o));const i=l(n,["fileData"]);i!=null&&u(e,["fileData"],eS(i));const s=l(n,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const c=l(n,["functionCall"]);c!=null&&u(e,["functionCall"],c);const f=l(n,["codeExecutionResult"]);f!=null&&u(e,["codeExecutionResult"],f);const p=l(n,["executableCode"]);p!=null&&u(e,["executableCode"],p);const m=l(n,["functionResponse"]);m!=null&&u(e,["functionResponse"],m);const y=l(n,["text"]);return y!=null&&u(e,["text"],y),e}function mS(n){const e={},t=l(n,["handle"]);if(t!=null&&u(e,["handle"],t),l(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Lg(n){const e={},t=l(n,["voiceConfig"]);if(t!=null&&u(e,["voiceConfig"],t),l(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(n,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function gS(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["functionDeclarations"],p)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(n,["googleSearch"]);r!=null&&u(e,["googleSearch"],oS(r));const o=l(n,["googleSearchRetrieval"]);if(o!=null&&u(e,["googleSearchRetrieval"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(n,["googleMaps"]);i!=null&&u(e,["googleMaps"],rS(i));const s=l(n,["urlContext"]);s!=null&&u(e,["urlContext"],s);const c=l(n,["computerUse"]);c!=null&&u(e,["computerUse"],c);const f=l(n,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}function yS(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(v=>nS(v))),u(e,["functionDeclarations"],y)}const r=l(n,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(n,["googleSearch"]);o!=null&&u(e,["googleSearch"],o);const i=l(n,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=l(n,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],s);const c=l(n,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const f=l(n,["urlContext"]);f!=null&&u(e,["urlContext"],f);const p=l(n,["computerUse"]);p!=null&&u(e,["computerUse"],p);const m=l(n,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function vS(n){const e={},t=l(n,["promptTokenCount"]);t!=null&&u(e,["promptTokenCount"],t);const r=l(n,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const o=l(n,["candidatesTokenCount"]);o!=null&&u(e,["responseTokenCount"],o);const i=l(n,["toolUsePromptTokenCount"]);i!=null&&u(e,["toolUsePromptTokenCount"],i);const s=l(n,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const c=l(n,["totalTokenCount"]);c!=null&&u(e,["totalTokenCount"],c);const f=l(n,["promptTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(U=>U)),u(e,["promptTokensDetails"],x)}const p=l(n,["cacheTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(U=>U)),u(e,["cacheTokensDetails"],x)}const m=l(n,["candidatesTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(U=>U)),u(e,["responseTokensDetails"],x)}const y=l(n,["toolUsePromptTokensDetails"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(U=>U)),u(e,["toolUsePromptTokensDetails"],x)}const v=l(n,["trafficType"]);return v!=null&&u(e,["trafficType"],v),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _S(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["data"]);t!=null&&u(e,["data"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function CS(n){const e={},t=l(n,["content"]);t!=null&&u(e,["content"],t);const r=l(n,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],SS(r));const o=l(n,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const i=l(n,["finishReason"]);i!=null&&u(e,["finishReason"],i);const s=l(n,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],s);const c=l(n,["avgLogprobs"]);c!=null&&u(e,["avgLogprobs"],c);const f=l(n,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const p=l(n,["index"]);p!=null&&u(e,["index"],p);const m=l(n,["logprobsResult"]);m!=null&&u(e,["logprobsResult"],m);const y=l(n,["safetyRatings"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(x=>x)),u(e,["safetyRatings"],v)}return e}function SS(n){const e={},t=l(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function TS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(s=>s)),u(t,["contents"],i)}return t}function ES(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(e,["tokensInfo"],o)}return e}function wS(n){const e={},t=l(n,["values"]);t!=null&&u(e,["values"],t);const r=l(n,["statistics"]);return r!=null&&u(e,["statistics"],xS(r)),e}function xS(n){const e={},t=l(n,["truncated"]);t!=null&&u(e,["truncated"],t);const r=l(n,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function Ol(n){const e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>NT(i))),u(e,["parts"],o)}const r=l(n,["role"]);return r!=null&&u(e,["role"],r),e}function IS(n){const e={},t=l(n,["controlType"]);t!=null&&u(e,["controlType"],t);const r=l(n,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function AS(n){const e={};if(l(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kS(n,e){const t={},r=l(n,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],Bn(r));const o=l(n,["tools"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>qg(c))),u(e,["tools"],s)}const i=l(n,["generationConfig"]);return e!==void 0&&i!=null&&u(e,["generationConfig"],yT(i)),t}function PS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let s=vt(o);Array.isArray(s)&&(s=s.map(c=>Ol(c))),u(t,["contents"],s)}const i=l(e,["config"]);return i!=null&&AS(i),t}function NS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let s=vt(o);Array.isArray(s)&&(s=s.map(c=>c)),u(t,["contents"],s)}const i=l(e,["config"]);return i!=null&&kS(i,t),t}function MS(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const o=l(n,["cachedContentTokenCount"]);return o!=null&&u(e,["cachedContentTokenCount"],o),e}function RS(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function DS(n,e){const t={},r=l(e,["model"]);return r!=null&&u(t,["_url","name"],ze(n,r)),t}function LS(n,e){const t={},r=l(e,["model"]);return r!=null&&u(t,["_url","name"],ze(n,r)),t}function US(n){const e={},t=l(n,["sdkHttpResponse"]);return t!=null&&u(e,["sdkHttpResponse"],t),e}function FS(n){const e={},t=l(n,["sdkHttpResponse"]);return t!=null&&u(e,["sdkHttpResponse"],t),e}function VS(n,e){const t={},r=l(n,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(n,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const i=l(n,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(n,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const c=l(n,["guidanceScale"]);e!==void 0&&c!=null&&u(e,["parameters","guidanceScale"],c);const f=l(n,["seed"]);e!==void 0&&f!=null&&u(e,["parameters","seed"],f);const p=l(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const m=l(n,["personGeneration"]);e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m);const y=l(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&u(e,["parameters","includeSafetyAttributes"],y);const v=l(n,["includeRaiReason"]);e!==void 0&&v!=null&&u(e,["parameters","includeRaiReason"],v);const x=l(n,["language"]);e!==void 0&&x!=null&&u(e,["parameters","language"],x);const U=l(n,["outputMimeType"]);e!==void 0&&U!=null&&u(e,["parameters","outputOptions","mimeType"],U);const B=l(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&u(e,["parameters","outputOptions","compressionQuality"],B);const J=l(n,["addWatermark"]);e!==void 0&&J!=null&&u(e,["parameters","addWatermark"],J);const I=l(n,["labels"]);e!==void 0&&I!=null&&u(e,["labels"],I);const E=l(n,["editMode"]);e!==void 0&&E!=null&&u(e,["parameters","editMode"],E);const w=l(n,["baseSteps"]);return e!==void 0&&w!=null&&u(e,["parameters","editConfig","baseSteps"],w),t}function BS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["prompt"]);o!=null&&u(t,["instances[0]","prompt"],o);const i=l(e,["referenceImages"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>FT(f))),u(t,["instances[0]","referenceImages"],c)}const s=l(e,["config"]);return s!=null&&VS(s,t),t}function qS(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Jl(i))),u(e,["generatedImages"],o)}return e}function HS(n,e){const t={},r=l(n,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(n,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const i=l(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),l(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function GS(n,e){const t={},r=l(n,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const o=l(n,["title"]);e!==void 0&&o!=null&&u(e,["instances[]","title"],o);const i=l(n,["outputDimensionality"]);e!==void 0&&i!=null&&u(e,["parameters","outputDimensionality"],i);const s=l(n,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);const c=l(n,["autoTruncate"]);return e!==void 0&&c!=null&&u(e,["parameters","autoTruncate"],c),t}function bS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let c=Jc(n,o);Array.isArray(c)&&(c=c.map(f=>f)),u(t,["requests[]","content"],c)}const i=l(e,["config"]);i!=null&&HS(i,t);const s=l(e,["model"]);return s!==void 0&&u(t,["requests[]","model"],ze(n,s)),t}function zS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let s=Jc(n,o);Array.isArray(s)&&(s=s.map(c=>c)),u(t,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&GS(i,t),t}function $S(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["embeddings"],i)}const o=l(n,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function KS(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>wS(s))),u(e,["embeddings"],i)}const o=l(n,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function OS(n){const e={},t=l(n,["endpoint"]);t!=null&&u(e,["name"],t);const r=l(n,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function JS(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["fileUri"]);t!=null&&u(e,["fileUri"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function WS(n){const e={};if(l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=l(n,["description"]);t!=null&&u(e,["description"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(n,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(n,["response"]);s!=null&&u(e,["response"],s);const c=l(n,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function YS(n,e,t){const r={},o=l(e,["systemInstruction"]);t!==void 0&&o!=null&&u(t,["systemInstruction"],Ol(Bn(o)));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const c=l(e,["topK"]);c!=null&&u(r,["topK"],c);const f=l(e,["candidateCount"]);f!=null&&u(r,["candidateCount"],f);const p=l(e,["maxOutputTokens"]);p!=null&&u(r,["maxOutputTokens"],p);const m=l(e,["stopSequences"]);m!=null&&u(r,["stopSequences"],m);const y=l(e,["responseLogprobs"]);y!=null&&u(r,["responseLogprobs"],y);const v=l(e,["logprobs"]);v!=null&&u(r,["logprobs"],v);const x=l(e,["presencePenalty"]);x!=null&&u(r,["presencePenalty"],x);const U=l(e,["frequencyPenalty"]);U!=null&&u(r,["frequencyPenalty"],U);const B=l(e,["seed"]);B!=null&&u(r,["seed"],B);const J=l(e,["responseMimeType"]);J!=null&&u(r,["responseMimeType"],J);const I=l(e,["responseSchema"]);I!=null&&u(r,["responseSchema"],Wc(I));const E=l(e,["responseJsonSchema"]);if(E!=null&&u(r,["responseJsonSchema"],E),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(t!==void 0&&w!=null){let xe=w;Array.isArray(xe)&&(xe=xe.map(Me=>VT(Me))),u(t,["safetySettings"],xe)}const H=l(e,["tools"]);if(t!==void 0&&H!=null){let xe=Qo(H);Array.isArray(xe)&&(xe=xe.map(Me=>zT(Yo(Me)))),u(t,["tools"],xe)}const z=l(e,["toolConfig"]);if(t!==void 0&&z!=null&&u(t,["toolConfig"],z),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=l(e,["cachedContent"]);t!==void 0&&O!=null&&u(t,["cachedContent"],rr(n,O));const $=l(e,["responseModalities"]);$!=null&&u(r,["responseModalities"],$);const te=l(e,["mediaResolution"]);te!=null&&u(r,["mediaResolution"],te);const Y=l(e,["speechConfig"]);if(Y!=null&&u(r,["speechConfig"],Yc(Y)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=l(e,["thinkingConfig"]);ue!=null&&u(r,["thinkingConfig"],ue);const we=l(e,["imageConfig"]);return we!=null&&u(r,["imageConfig"],we),r}function QS(n,e,t){const r={},o=l(e,["systemInstruction"]);t!==void 0&&o!=null&&u(t,["systemInstruction"],Bn(o));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const c=l(e,["topK"]);c!=null&&u(r,["topK"],c);const f=l(e,["candidateCount"]);f!=null&&u(r,["candidateCount"],f);const p=l(e,["maxOutputTokens"]);p!=null&&u(r,["maxOutputTokens"],p);const m=l(e,["stopSequences"]);m!=null&&u(r,["stopSequences"],m);const y=l(e,["responseLogprobs"]);y!=null&&u(r,["responseLogprobs"],y);const v=l(e,["logprobs"]);v!=null&&u(r,["logprobs"],v);const x=l(e,["presencePenalty"]);x!=null&&u(r,["presencePenalty"],x);const U=l(e,["frequencyPenalty"]);U!=null&&u(r,["frequencyPenalty"],U);const B=l(e,["seed"]);B!=null&&u(r,["seed"],B);const J=l(e,["responseMimeType"]);J!=null&&u(r,["responseMimeType"],J);const I=l(e,["responseSchema"]);I!=null&&u(r,["responseSchema"],Wc(I));const E=l(e,["responseJsonSchema"]);E!=null&&u(r,["responseJsonSchema"],E);const w=l(e,["routingConfig"]);w!=null&&u(r,["routingConfig"],w);const H=l(e,["modelSelectionConfig"]);H!=null&&u(r,["modelConfig"],H);const z=l(e,["safetySettings"]);if(t!==void 0&&z!=null){let He=z;Array.isArray(He)&&(He=He.map(ln=>ln)),u(t,["safetySettings"],He)}const O=l(e,["tools"]);if(t!==void 0&&O!=null){let He=Qo(O);Array.isArray(He)&&(He=He.map(ln=>qg(Yo(ln)))),u(t,["tools"],He)}const $=l(e,["toolConfig"]);t!==void 0&&$!=null&&u(t,["toolConfig"],$);const te=l(e,["labels"]);t!==void 0&&te!=null&&u(t,["labels"],te);const Y=l(e,["cachedContent"]);t!==void 0&&Y!=null&&u(t,["cachedContent"],rr(n,Y));const ue=l(e,["responseModalities"]);ue!=null&&u(r,["responseModalities"],ue);const we=l(e,["mediaResolution"]);we!=null&&u(r,["mediaResolution"],we);const xe=l(e,["speechConfig"]);xe!=null&&u(r,["speechConfig"],Bg(Yc(xe)));const Me=l(e,["audioTimestamp"]);Me!=null&&u(r,["audioTimestamp"],Me);const Ve=l(e,["thinkingConfig"]);Ve!=null&&u(r,["thinkingConfig"],Ve);const rn=l(e,["imageConfig"]);return rn!=null&&u(r,["imageConfig"],rn),r}function Kp(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let s=vt(o);Array.isArray(s)&&(s=s.map(c=>Ol(c))),u(t,["contents"],s)}const i=l(e,["config"]);return i!=null&&u(t,["generationConfig"],YS(n,i,t)),t}function Op(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["contents"]);if(o!=null){let s=vt(o);Array.isArray(s)&&(s=s.map(c=>c)),u(t,["contents"],s)}const i=l(e,["config"]);return i!=null&&u(t,["generationConfig"],QS(n,i,t)),t}function Jp(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>CS(p))),u(e,["candidates"],f)}const o=l(n,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const i=l(n,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const s=l(n,["responseId"]);s!=null&&u(e,["responseId"],s);const c=l(n,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function Wp(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["candidates"],p)}const o=l(n,["createTime"]);o!=null&&u(e,["createTime"],o);const i=l(n,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const s=l(n,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const c=l(n,["responseId"]);c!=null&&u(e,["responseId"],c);const f=l(n,["usageMetadata"]);return f!=null&&u(e,["usageMetadata"],f),e}function XS(n,e){const t={};if(l(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(n,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(n,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const i=l(n,["guidanceScale"]);if(e!==void 0&&i!=null&&u(e,["parameters","guidanceScale"],i),l(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(n,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const c=l(n,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const f=l(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&u(e,["parameters","includeSafetyAttributes"],f);const p=l(n,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(n,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const y=l(n,["outputMimeType"]);e!==void 0&&y!=null&&u(e,["parameters","outputOptions","mimeType"],y);const v=l(n,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&u(e,["parameters","outputOptions","compressionQuality"],v),l(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=l(n,["imageSize"]);if(e!==void 0&&x!=null&&u(e,["parameters","sampleImageSize"],x),l(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function ZS(n,e){const t={},r=l(n,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(n,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const i=l(n,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(n,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const c=l(n,["guidanceScale"]);e!==void 0&&c!=null&&u(e,["parameters","guidanceScale"],c);const f=l(n,["seed"]);e!==void 0&&f!=null&&u(e,["parameters","seed"],f);const p=l(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const m=l(n,["personGeneration"]);e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m);const y=l(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&u(e,["parameters","includeSafetyAttributes"],y);const v=l(n,["includeRaiReason"]);e!==void 0&&v!=null&&u(e,["parameters","includeRaiReason"],v);const x=l(n,["language"]);e!==void 0&&x!=null&&u(e,["parameters","language"],x);const U=l(n,["outputMimeType"]);e!==void 0&&U!=null&&u(e,["parameters","outputOptions","mimeType"],U);const B=l(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&u(e,["parameters","outputOptions","compressionQuality"],B);const J=l(n,["addWatermark"]);e!==void 0&&J!=null&&u(e,["parameters","addWatermark"],J);const I=l(n,["labels"]);e!==void 0&&I!=null&&u(e,["labels"],I);const E=l(n,["imageSize"]);e!==void 0&&E!=null&&u(e,["parameters","sampleImageSize"],E);const w=l(n,["enhancePrompt"]);return e!==void 0&&w!=null&&u(e,["parameters","enhancePrompt"],w),t}function jS(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["prompt"]);o!=null&&u(t,["instances[0]","prompt"],o);const i=l(e,["config"]);return i!=null&&XS(i,t),t}function eT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["prompt"]);o!=null&&u(t,["instances[0]","prompt"],o);const i=l(e,["config"]);return i!=null&&ZS(i,t),t}function nT(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>pT(s))),u(e,["generatedImages"],i)}const o=l(n,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],Fg(o)),e}function tT(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Jl(s))),u(e,["generatedImages"],i)}const o=l(n,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],Vg(o)),e}function rT(n,e){const t={},r=l(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(n,["durationSeconds"]);if(e!==void 0&&o!=null&&u(e,["parameters","durationSeconds"],o),l(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(n,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const s=l(n,["resolution"]);e!==void 0&&s!=null&&u(e,["parameters","resolution"],s);const c=l(n,["personGeneration"]);if(e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c),l(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=l(n,["negativePrompt"]);e!==void 0&&f!=null&&u(e,["parameters","negativePrompt"],f);const p=l(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&u(e,["parameters","enhancePrompt"],p),l(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=l(n,["lastFrame"]);e!==void 0&&m!=null&&u(e,["instances[0]","lastFrame"],Wl(m));const y=l(n,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(x=>tE(x))),u(e,["instances[0]","referenceImages"],v)}if(l(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function oT(n,e){const t={},r=l(n,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(n,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const i=l(n,["fps"]);e!==void 0&&i!=null&&u(e,["parameters","fps"],i);const s=l(n,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);const c=l(n,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(n,["aspectRatio"]);e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f);const p=l(n,["resolution"]);e!==void 0&&p!=null&&u(e,["parameters","resolution"],p);const m=l(n,["personGeneration"]);e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m);const y=l(n,["pubsubTopic"]);e!==void 0&&y!=null&&u(e,["parameters","pubsubTopic"],y);const v=l(n,["negativePrompt"]);e!==void 0&&v!=null&&u(e,["parameters","negativePrompt"],v);const x=l(n,["enhancePrompt"]);e!==void 0&&x!=null&&u(e,["parameters","enhancePrompt"],x);const U=l(n,["generateAudio"]);e!==void 0&&U!=null&&u(e,["parameters","generateAudio"],U);const B=l(n,["lastFrame"]);e!==void 0&&B!=null&&u(e,["instances[0]","lastFrame"],Pt(B));const J=l(n,["referenceImages"]);if(e!==void 0&&J!=null){let w=J;Array.isArray(w)&&(w=w.map(H=>rE(H))),u(e,["instances[0]","referenceImages"],w)}const I=l(n,["mask"]);e!==void 0&&I!=null&&u(e,["instances[0]","mask"],nE(I));const E=l(n,["compressionQuality"]);return e!==void 0&&E!=null&&u(e,["parameters","compressionQuality"],E),t}function iT(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(n,["done"]);o!=null&&u(e,["done"],o);const i=l(n,["error"]);i!=null&&u(e,["error"],i);const s=l(n,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],uT(s)),e}function sT(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(n,["done"]);o!=null&&u(e,["done"],o);const i=l(n,["error"]);i!=null&&u(e,["error"],i);const s=l(n,["response"]);return s!=null&&u(e,["response"],cT(s)),e}function lT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["prompt"]);o!=null&&u(t,["instances[0]","prompt"],o);const i=l(e,["image"]);i!=null&&u(t,["instances[0]","image"],Wl(i));const s=l(e,["video"]);s!=null&&u(t,["instances[0]","video"],Hg(s));const c=l(e,["source"]);c!=null&&dT(c,t);const f=l(e,["config"]);return f!=null&&rT(f,t),t}function aT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["prompt"]);o!=null&&u(t,["instances[0]","prompt"],o);const i=l(e,["image"]);i!=null&&u(t,["instances[0]","image"],Pt(i));const s=l(e,["video"]);s!=null&&u(t,["instances[0]","video"],Gg(s));const c=l(e,["source"]);c!=null&&fT(c,t);const f=l(e,["config"]);return f!=null&&oT(f,t),t}function uT(n){const e={},t=l(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>mT(s))),u(e,["generatedVideos"],i)}const r=l(n,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(n,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function cT(n){const e={},t=l(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>gT(s))),u(e,["generatedVideos"],i)}const r=l(n,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(n,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function dT(n,e){const t={},r=l(n,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(n,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Wl(o));const i=l(n,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],Hg(i)),t}function fT(n,e){const t={},r=l(n,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(n,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Pt(o));const i=l(n,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],Gg(i)),t}function pT(n){const e={},t=l(n,["_self"]);t!=null&&u(e,["image"],TT(t));const r=l(n,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(n,["_self"]);return o!=null&&u(e,["safetyAttributes"],Fg(o)),e}function Jl(n){const e={},t=l(n,["_self"]);t!=null&&u(e,["image"],Ug(t));const r=l(n,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(n,["_self"]);o!=null&&u(e,["safetyAttributes"],Vg(o));const i=l(n,["prompt"]);return i!=null&&u(e,["enhancedPrompt"],i),e}function hT(n){const e={},t=l(n,["_self"]);t!=null&&u(e,["mask"],Ug(t));const r=l(n,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(e,["labels"],o)}return e}function mT(n){const e={},t=l(n,["video"]);return t!=null&&u(e,["video"],jT(t)),e}function gT(n){const e={},t=l(n,["_self"]);return t!=null&&u(e,["video"],eE(t)),e}function yT(n){const e={},t=l(n,["modelSelectionConfig"]);t!=null&&u(e,["modelConfig"],t);const r=l(n,["audioTimestamp"]);r!=null&&u(e,["audioTimestamp"],r);const o=l(n,["candidateCount"]);o!=null&&u(e,["candidateCount"],o);const i=l(n,["enableAffectiveDialog"]);i!=null&&u(e,["enableAffectiveDialog"],i);const s=l(n,["frequencyPenalty"]);s!=null&&u(e,["frequencyPenalty"],s);const c=l(n,["logprobs"]);c!=null&&u(e,["logprobs"],c);const f=l(n,["maxOutputTokens"]);f!=null&&u(e,["maxOutputTokens"],f);const p=l(n,["mediaResolution"]);p!=null&&u(e,["mediaResolution"],p);const m=l(n,["presencePenalty"]);m!=null&&u(e,["presencePenalty"],m);const y=l(n,["responseJsonSchema"]);y!=null&&u(e,["responseJsonSchema"],y);const v=l(n,["responseLogprobs"]);v!=null&&u(e,["responseLogprobs"],v);const x=l(n,["responseMimeType"]);x!=null&&u(e,["responseMimeType"],x);const U=l(n,["responseModalities"]);U!=null&&u(e,["responseModalities"],U);const B=l(n,["responseSchema"]);B!=null&&u(e,["responseSchema"],B);const J=l(n,["routingConfig"]);J!=null&&u(e,["routingConfig"],J);const I=l(n,["seed"]);I!=null&&u(e,["seed"],I);const E=l(n,["speechConfig"]);E!=null&&u(e,["speechConfig"],Bg(E));const w=l(n,["stopSequences"]);w!=null&&u(e,["stopSequences"],w);const H=l(n,["temperature"]);H!=null&&u(e,["temperature"],H);const z=l(n,["thinkingConfig"]);z!=null&&u(e,["thinkingConfig"],z);const O=l(n,["topK"]);O!=null&&u(e,["topK"],O);const $=l(n,["topP"]);if($!=null&&u(e,["topP"],$),l(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vT(n,e){const t={},r=l(e,["model"]);return r!=null&&u(t,["_url","name"],ze(n,r)),t}function _T(n,e){const t={},r=l(e,["model"]);return r!=null&&u(t,["_url","name"],ze(n,r)),t}function CT(n){const e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=l(n,["enableWidget"]);return t!=null&&u(e,["enableWidget"],t),e}function ST(n){const e={},t=l(n,["timeRangeFilter"]);if(t!=null&&u(e,["timeRangeFilter"],t),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function TT(n){const e={},t=l(n,["bytesBase64Encoded"]);t!=null&&u(e,["imageBytes"],Mr(t));const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Ug(n){const e={},t=l(n,["gcsUri"]);t!=null&&u(e,["gcsUri"],t);const r=l(n,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],Mr(r));const o=l(n,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Wl(n){const e={};if(l(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=l(n,["imageBytes"]);t!=null&&u(e,["bytesBase64Encoded"],Mr(t));const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Pt(n){const e={},t=l(n,["gcsUri"]);t!=null&&u(e,["gcsUri"],t);const r=l(n,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Mr(r));const o=l(n,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ET(n,e,t){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);t!==void 0&&i!=null&&u(t,["_query","pageToken"],i);const s=l(e,["filter"]);t!==void 0&&s!=null&&u(t,["_query","filter"],s);const c=l(e,["queryBase"]);return t!==void 0&&c!=null&&u(t,["_url","models_url"],Ag(n,c)),r}function wT(n,e,t){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);t!==void 0&&i!=null&&u(t,["_query","pageToken"],i);const s=l(e,["filter"]);t!==void 0&&s!=null&&u(t,["_query","filter"],s);const c=l(e,["queryBase"]);return t!==void 0&&c!=null&&u(t,["_url","models_url"],Ag(n,c)),r}function xT(n,e){const t={},r=l(e,["config"]);return r!=null&&ET(n,r,t),t}function IT(n,e){const t={},r=l(e,["config"]);return r!=null&&wT(n,r,t),t}function AT(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["_self"]);if(o!=null){let i=kg(o);Array.isArray(i)&&(i=i.map(s=>Ju(s))),u(e,["models"],i)}return e}function kT(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["_self"]);if(o!=null){let i=kg(o);Array.isArray(i)&&(i=i.map(s=>Wu(s))),u(e,["models"],i)}return e}function PT(n){const e={},t=l(n,["maskMode"]);t!=null&&u(e,["maskMode"],t);const r=l(n,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const o=l(n,["maskDilation"]);return o!=null&&u(e,["dilation"],o),e}function Ju(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(n,["description"]);o!=null&&u(e,["description"],o);const i=l(n,["version"]);i!=null&&u(e,["version"],i);const s=l(n,["_self"]);s!=null&&u(e,["tunedModelInfo"],$T(s));const c=l(n,["inputTokenLimit"]);c!=null&&u(e,["inputTokenLimit"],c);const f=l(n,["outputTokenLimit"]);f!=null&&u(e,["outputTokenLimit"],f);const p=l(n,["supportedGenerationMethods"]);return p!=null&&u(e,["supportedActions"],p),e}function Wu(n){const e={},t=l(n,["name"]);t!=null&&u(e,["name"],t);const r=l(n,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(n,["description"]);o!=null&&u(e,["description"],o);const i=l(n,["versionId"]);i!=null&&u(e,["version"],i);const s=l(n,["deployedModels"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(v=>OS(v))),u(e,["endpoints"],y)}const c=l(n,["labels"]);c!=null&&u(e,["labels"],c);const f=l(n,["_self"]);f!=null&&u(e,["tunedModelInfo"],KT(f));const p=l(n,["defaultCheckpointId"]);p!=null&&u(e,["defaultCheckpointId"],p);const m=l(n,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>v)),u(e,["checkpoints"],y)}return e}function NT(n){const e={},t=l(n,["videoMetadata"]);t!=null&&u(e,["videoMetadata"],t);const r=l(n,["thought"]);r!=null&&u(e,["thought"],r);const o=l(n,["inlineData"]);o!=null&&u(e,["inlineData"],_S(o));const i=l(n,["fileData"]);i!=null&&u(e,["fileData"],JS(i));const s=l(n,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const c=l(n,["functionCall"]);c!=null&&u(e,["functionCall"],c);const f=l(n,["codeExecutionResult"]);f!=null&&u(e,["codeExecutionResult"],f);const p=l(n,["executableCode"]);p!=null&&u(e,["executableCode"],p);const m=l(n,["functionResponse"]);m!=null&&u(e,["functionResponse"],m);const y=l(n,["text"]);return y!=null&&u(e,["text"],y),e}function MT(n){const e={},t=l(n,["productImage"]);return t!=null&&u(e,["image"],Pt(t)),e}function RT(n,e){const t={},r=l(n,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(n,["baseSteps"]);e!==void 0&&o!=null&&u(e,["parameters","editConfig","baseSteps"],o);const i=l(n,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(n,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);const c=l(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&u(e,["parameters","safetySetting"],c);const f=l(n,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const p=l(n,["addWatermark"]);e!==void 0&&p!=null&&u(e,["parameters","addWatermark"],p);const m=l(n,["outputMimeType"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","mimeType"],m);const y=l(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&u(e,["parameters","outputOptions","compressionQuality"],y);const v=l(n,["enhancePrompt"]);e!==void 0&&v!=null&&u(e,["parameters","enhancePrompt"],v);const x=l(n,["labels"]);return e!==void 0&&x!=null&&u(e,["labels"],x),t}function DT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["source"]);o!=null&&UT(o,t);const i=l(e,["config"]);return i!=null&&RT(i,t),t}function LT(n){const e={},t=l(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>Jl(o))),u(e,["generatedImages"],r)}return e}function UT(n,e){const t={},r=l(n,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(n,["personImage"]);e!==void 0&&o!=null&&u(e,["instances[0]","personImage","image"],Pt(o));const i=l(n,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>MT(c))),u(e,["instances[0]","productImages"],s)}return t}function FT(n){const e={},t=l(n,["referenceImage"]);t!=null&&u(e,["referenceImage"],Pt(t));const r=l(n,["referenceId"]);r!=null&&u(e,["referenceId"],r);const o=l(n,["referenceType"]);o!=null&&u(e,["referenceType"],o);const i=l(n,["maskImageConfig"]);i!=null&&u(e,["maskImageConfig"],PT(i));const s=l(n,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],IS(s));const c=l(n,["styleImageConfig"]);c!=null&&u(e,["styleImageConfig"],c);const f=l(n,["subjectImageConfig"]);return f!=null&&u(e,["subjectImageConfig"],f),e}function Fg(n){const e={},t=l(n,["safetyAttributes","categories"]);t!=null&&u(e,["categories"],t);const r=l(n,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(n,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function Vg(n){const e={},t=l(n,["safetyAttributes","categories"]);t!=null&&u(e,["categories"],t);const r=l(n,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(n,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function VT(n){const e={};if(l(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=l(n,["category"]);t!=null&&u(e,["category"],t);const r=l(n,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function BT(n){const e={},t=l(n,["image"]);return t!=null&&u(e,["image"],Pt(t)),e}function qT(n,e){const t={},r=l(n,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const o=l(n,["maxPredictions"]);e!==void 0&&o!=null&&u(e,["parameters","maxPredictions"],o);const i=l(n,["confidenceThreshold"]);e!==void 0&&i!=null&&u(e,["parameters","confidenceThreshold"],i);const s=l(n,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);const c=l(n,["binaryColorThreshold"]);e!==void 0&&c!=null&&u(e,["parameters","binaryColorThreshold"],c);const f=l(n,["labels"]);return e!==void 0&&f!=null&&u(e,["labels"],f),t}function HT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["source"]);o!=null&&bT(o,t);const i=l(e,["config"]);return i!=null&&qT(i,t),t}function GT(n){const e={},t=l(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>hT(o))),u(e,["generatedMasks"],r)}return e}function bT(n,e){const t={},r=l(n,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(n,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Pt(o));const i=l(n,["scribbleImage"]);return e!==void 0&&i!=null&&u(e,["instances[0]","scribble"],BT(i)),t}function Bg(n){const e={},t=l(n,["voiceConfig"]);if(t!=null&&u(e,["voiceConfig"],t),l(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(n,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function zT(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["functionDeclarations"],p)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(n,["googleSearch"]);r!=null&&u(e,["googleSearch"],ST(r));const o=l(n,["googleSearchRetrieval"]);if(o!=null&&u(e,["googleSearchRetrieval"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(n,["googleMaps"]);i!=null&&u(e,["googleMaps"],CT(i));const s=l(n,["urlContext"]);s!=null&&u(e,["urlContext"],s);const c=l(n,["computerUse"]);c!=null&&u(e,["computerUse"],c);const f=l(n,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}function qg(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(v=>WS(v))),u(e,["functionDeclarations"],y)}const r=l(n,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(n,["googleSearch"]);o!=null&&u(e,["googleSearch"],o);const i=l(n,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=l(n,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],s);const c=l(n,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const f=l(n,["urlContext"]);f!=null&&u(e,["urlContext"],f);const p=l(n,["computerUse"]);p!=null&&u(e,["computerUse"],p);const m=l(n,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function $T(n){const e={},t=l(n,["baseModel"]);t!=null&&u(e,["baseModel"],t);const r=l(n,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(n,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function KT(n){const e={},t=l(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&u(e,["baseModel"],t);const r=l(n,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(n,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function OT(n,e){const t={},r=l(n,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(n,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const i=l(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),t}function JT(n,e){const t={},r=l(n,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(n,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const i=l(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),t}function WT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","name"],ze(n,r));const o=l(e,["config"]);return o!=null&&OT(o,t),t}function YT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["config"]);return o!=null&&JT(o,t),t}function QT(n,e){const t={},r=l(n,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(n,["includeRaiReason"]);e!==void 0&&o!=null&&u(e,["parameters","includeRaiReason"],o);const i=l(n,["outputMimeType"]);e!==void 0&&i!=null&&u(e,["parameters","outputOptions","mimeType"],i);const s=l(n,["outputCompressionQuality"]);e!==void 0&&s!=null&&u(e,["parameters","outputOptions","compressionQuality"],s);const c=l(n,["enhanceInputImage"]);e!==void 0&&c!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=l(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=l(n,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);const m=l(n,["numberOfImages"]);e!==void 0&&m!=null&&u(e,["parameters","sampleCount"],m);const y=l(n,["mode"]);return e!==void 0&&y!=null&&u(e,["parameters","mode"],y),t}function XT(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["_url","model"],ze(n,r));const o=l(e,["image"]);o!=null&&u(t,["instances[0]","image"],Pt(o));const i=l(e,["upscaleFactor"]);i!=null&&u(t,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&QT(s,t),t}function ZT(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Jl(i))),u(e,["generatedImages"],o)}return e}function jT(n){const e={},t=l(n,["uri"]);t!=null&&u(e,["uri"],t);const r=l(n,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Mr(r));const o=l(n,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function eE(n){const e={},t=l(n,["gcsUri"]);t!=null&&u(e,["uri"],t);const r=l(n,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Mr(r));const o=l(n,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function nE(n){const e={},t=l(n,["image"]);t!=null&&u(e,["_self"],Pt(t));const r=l(n,["maskMode"]);return r!=null&&u(e,["maskMode"],r),e}function tE(n){const e={},t=l(n,["image"]);t!=null&&u(e,["image"],Wl(t));const r=l(n,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function rE(n){const e={},t=l(n,["image"]);t!=null&&u(e,["image"],Pt(t));const r=l(n,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function Hg(n){const e={},t=l(n,["uri"]);t!=null&&u(e,["uri"],t);const r=l(n,["videoBytes"]);r!=null&&u(e,["encodedVideo"],Mr(r));const o=l(n,["mimeType"]);return o!=null&&u(e,["encoding"],o),e}function Gg(n){const e={},t=l(n,["uri"]);t!=null&&u(e,["gcsUri"],t);const r=l(n,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Mr(r));const o=l(n,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oE="Content-Type",iE="X-Server-Timeout",sE="User-Agent",Yu="x-goog-api-client",lE="1.26.0",aE=`google-genai-sdk/${lE}`,uE="v1beta1",cE="v1beta",Yp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class dE{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:uE,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:cE,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const o=[this.getRequestUrlInternal(t)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[s,c]of Object.entries(e.queryParams))o.searchParams.append(s,String(c));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(t))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r){if(t&&t.timeout||r){const o=new AbortController,i=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const s=setTimeout(()=>o.abort(),t.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=i}return t&&t.extraBody!==null&&fE(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await Qp(o),new $u(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await Qp(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Vo(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";for(;;){const{done:c,value:f}=yield nn(o.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(f,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),x=v.status,U=v.code,B=`got status: ${x}. ${JSON.stringify(y)}`;if(U>=400&&U<600)throw new Kl({message:B,status:U})}}catch(y){if(y.name==="ApiError")throw y}s+=p;let m=s.match(Yp);for(;m;){const y=m[1];try{const v=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield nn(new $u(v)),s=s.slice(m[0].length),m=s.match(Yp)}catch(v){throw new Error(`exception parsing stream chunk ${y}. ${v}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=aE+" "+this.clientOptions.userAgentExtra;return e[sE]=t,e[Yu]=t,e[oE]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))t.append(r,o);e.timeout&&e.timeout>0&&t.append(iE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);const c=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=c;const f=await this.fetchUploadUrl(o,t);return i.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var r;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},s=await this.request({path:me("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:o});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function Qp(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(r);throw t>=400&&t<600?new Kl({message:o,status:t}):new Error(o)}}function fE(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const i=JSON.parse(n.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))t=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){const c=Object.assign({},i);for(const f in s)if(Object.prototype.hasOwnProperty.call(s,f)){const p=s[f],m=c[f];p&&typeof p=="object"&&!Array.isArray(p)&&m&&typeof m=="object"&&!Array.isArray(m)?c[f]=r(m,p):(m&&p&&typeof m!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof m}, New type: ${typeof p}. Overwriting.`),c[f]=p)}return c}const o=r(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pE="mcp_used/unknown";let hE=!1;function bg(n){for(const e of n)if(mE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return hE}function zg(n){var e;const t=(e=n[Yu])!==null&&e!==void 0?e:"";n[Yu]=(t+` ${pE}`).trimStart()}function mE(n){return n!==null&&typeof n=="object"&&n instanceof Xc}function gE(n,e=100){return Vo(this,arguments,function*(){let r,o=0;for(;o<e;){const i=yield nn(n.listTools({cursor:r}));for(const s of i.tools)yield yield nn(s),o++;if(!i.nextCursor)break;r=i.nextCursor}})}class Xc{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Xc(e,t)}async initialize(){var e,t,r,o;if(this.mcpTools.length>0)return;const i={},s=[];for(const m of this.mcpClients)try{for(var c=!0,f=(t=void 0,Ri(gE(m))),p;p=await f.next(),e=p.done,!e;c=!0){o=p.value,c=!1;const y=o;s.push(y);const v=y.name;if(i[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);i[v]=m}}catch(y){t={error:y}}finally{try{!c&&!e&&(r=f.return)&&await r.call(f)}finally{if(t)throw t.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),S_(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await o.callTool({name:r.name,arguments:r.args},void 0,i);t.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yE(n,e,t){const r=new p_;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(r,o),e(r)}class vE{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=SE(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${c}`;let p=()=>{};const m=new Promise(w=>{p=w}),y=e.callbacks,v=function(){p({})},x=this.apiClient,U={onopen:v,onmessage:w=>{yE(x,y.onmessage,w)},onerror:(t=y==null?void 0:y.onerror)!==null&&t!==void 0?t:function(w){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(w){}},B=this.webSocketFactory.create(f,CE(s),U);B.connect(),await m;const E={setup:{model:ze(this.apiClient,e.model)}};return B.send(JSON.stringify(E)),new _E(B,this.apiClient)}}class _E{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=cS(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=uS(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Po.PLAY)}pause(){this.sendPlaybackControl(Po.PAUSE)}stop(){this.sendPlaybackControl(Po.STOP)}resetContext(){this.sendPlaybackControl(Po.RESET_CONTEXT)}close(){this.conn.close()}}function CE(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function SE(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function EE(n,e,t){const r=new f_;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const i=JSON.parse(o);if(n.isVertexAI()){const s=pS(i);Object.assign(r,s)}else Object.assign(r,i);e(r)}class wE{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new vE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,o,i,s,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let m;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&bg(e.config.tools)&&zg(y);const v=kE(y);if(this.apiClient.isVertexAI())m=`${f}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const Y=this.apiClient.getApiKey();let ue="BidiGenerateContent",we="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ue="BidiGenerateContentConstrained",we="access_token"),m=`${f}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ue}?${we}=${Y}`}let x=()=>{};const U=new Promise(Y=>{x=Y}),B=e.callbacks,J=function(){var Y;(Y=B==null?void 0:B.onopen)===null||Y===void 0||Y.call(B),x({})},I=this.apiClient,E={onopen:J,onmessage:Y=>{EE(I,B.onmessage,Y)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(Y){},onclose:(r=B==null?void 0:B.onclose)!==null&&r!==void 0?r:function(Y){}},w=this.webSocketFactory.create(m,AE(v),E);w.connect(),await U;let H=ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const Y=this.apiClient.getProject(),ue=this.apiClient.getLocation();H=`projects/${Y}/locations/${ue}/`+H}let z={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xl.AUDIO]}:e.config.responseModalities=[xl.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(c=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&c!==void 0?c:[],$=[];for(const Y of O)if(this.isCallableTool(Y)){const ue=Y;$.push(await ue.tool())}else $.push(Y);$.length>0&&(e.config.tools=$);const te={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=aS(this.apiClient,te):z=lS(this.apiClient,te),delete z.config,w.send(JSON.stringify(z)),new IE(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const xE={turnComplete:!0};class IE{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=vt(t.turns),e.isVertexAI()||(r=r.map(o=>Ol(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(TE)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},xE),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:fS(e)}:t={realtimeInput:dS(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function AE(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function kE(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xp=10;function Zp(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const s of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Bo(s)){o=!0;break}if(!o)return!0;const i=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Bo(n){return"callTool"in n&&typeof n.callTool=="function"}function PE(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Bo(o)))!==null&&r!==void 0?r:!1}function NE(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Bo(o)))!==null&&r!==void 0?r:!1}function jp(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ME extends oo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,o,i,s,c;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!PE(t)||Zp(t.config))return await this.generateContentInternal(f);if(NE(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,m;const y=vt(f.contents),v=(i=(o=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Xp;let x=0;for(;x<v&&(p=await this.generateContentInternal(f),!(!p.functionCalls||p.functionCalls.length===0));){const U=p.candidates[0].content,B=[];for(const J of(c=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&c!==void 0?c:[])if(Bo(J)){const E=await J.callTool(p.functionCalls);B.push(...E)}x++,m={role:"user",parts:B},f.contents=vt(f.contents),f.contents.push(U),f.contents.push(m),jp(f.config)&&(y.push(U),y.push(m))}return jp(f.config)&&(p.automaticFunctionCallingHistory=y),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),Zp(t.config)){const r=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var o;let i;const s=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=f==null?void 0:f.safetyAttributes:s.push(f);let c;return i?c={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async t=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ns(no.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(s),s)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var r,o,i,s,c,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((s=(i=t.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((f=(c=t.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,o;const i=(t=e.config)===null||t===void 0?void 0:t.tools;if(!i)return e;const s=await Promise.all(i.map(async f=>Bo(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(c.config.tools=s,e.config&&e.config.tools&&bg(e.config.tools)){const f=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},f);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),zg(p),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return c}async initAfcToolsMap(e){var t,r,o;const i=new Map;for(const s of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Bo(s)){const c=s,f=await c.tool();for(const p of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(i.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);i.set(p.name,c)}}return i}async processAfcStream(e){var t,r,o;const i=(o=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Xp;let s=!1,c=0;const f=await this.initAfcToolsMap(e);return function(p,m,y){var v,x;return Vo(this,arguments,function*(){for(var U,B,J,I;c<i;){s&&(c++,s=!1);const z=yield nn(p.processParamsMaybeAddMcpUsage(y)),O=yield nn(p.generateContentStreamInternal(z)),$=[],te=[];try{for(var E=!0,w=(B=void 0,Ri(O)),H;H=yield nn(w.next()),U=H.done,!U;E=!0){I=H.value,E=!1;const Y=I;if(yield yield nn(Y),Y.candidates&&(!((v=Y.candidates[0])===null||v===void 0)&&v.content)){te.push(Y.candidates[0].content);for(const ue of(x=Y.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(c<i&&ue.functionCall){if(!ue.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(ue.functionCall.name)){const we=yield nn(m.get(ue.functionCall.name).callTool([ue.functionCall]));$.push(...we)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${ue.functionCall.name}`)}}}}catch(Y){B={error:Y}}finally{try{!E&&!U&&(J=w.return)&&(yield nn(J.call(w)))}finally{if(B)throw B.error}}if($.length>0){s=!0;const Y=new vi;Y.candidates=[{content:{role:"user",parts:$}}],yield yield nn(Y);const ue=[];ue.push(...te),ue.push({role:"user",parts:$});const we=vt(y.contents).concat(ue);y.contents=we}else break}})}(this,f,e)}async generateContentInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=Op(this.apiClient,e);return c=me("{model}:generateContent",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=Wp(m),v=new vi;return Object.assign(v,y),v})}else{const p=Kp(this.apiClient,e);return c=me("{model}:generateContent",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=Jp(m),v=new vi;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=Op(this.apiClient,e);return c=me("{model}:streamGenerateContent?alt=sse",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(y){return Vo(this,arguments,function*(){var v,x,U,B;try{for(var J=!0,I=Ri(y),E;E=yield nn(I.next()),v=E.done,!v;J=!0){B=E.value,J=!1;const w=B,H=Wp(yield nn(w.json()));H.sdkHttpResponse={headers:w.headers};const z=new vi;Object.assign(z,H),yield yield nn(z)}}catch(w){x={error:w}}finally{try{!J&&!v&&(U=I.return)&&(yield nn(U.call(I)))}finally{if(x)throw x.error}}})})}else{const p=Kp(this.apiClient,e);return c=me("{model}:streamGenerateContent?alt=sse",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(y){return Vo(this,arguments,function*(){var v,x,U,B;try{for(var J=!0,I=Ri(y),E;E=yield nn(I.next()),v=E.done,!v;J=!0){B=E.value,J=!1;const w=B,H=Jp(yield nn(w.json()));H.sdkHttpResponse={headers:w.headers};const z=new vi;Object.assign(z,H),yield yield nn(z)}}catch(w){x={error:w}}finally{try{!J&&!v&&(U=I.return)&&(yield nn(U.call(I)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=zS(this.apiClient,e);return c=me("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=KS(m),v=new Pp;return Object.assign(v,y),v})}else{const p=bS(this.apiClient,e);return c=me("{model}:batchEmbedContents",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=$S(m),v=new Pp;return Object.assign(v,y),v})}}async generateImagesInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=eT(this.apiClient,e);return c=me("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=tT(m),v=new Np;return Object.assign(v,y),v})}else{const p=jS(this.apiClient,e);return c=me("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=nT(m),v=new Np;return Object.assign(v,y),v})}}async editImageInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const c=BS(this.apiClient,e);return i=me("{model}:predict",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=qS(f),m=new o_;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const c=XT(this.apiClient,e);return i=me("{model}:predict",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=ZT(f),m=new i_;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const c=DT(this.apiClient,e);return i=me("{model}:predict",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=LT(f),m=new s_;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const c=HT(this.apiClient,e);return i=me("{model}:predict",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=GT(f),m=new l_;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=_T(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>Wu(m))}else{const p=vT(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>Ju(m))}}async listInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=IT(this.apiClient,e);return c=me("{models_url}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=kT(m),v=new Mp;return Object.assign(v,y),v})}else{const p=xT(this.apiClient,e);return c=me("{models_url}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=AT(m),v=new Mp;return Object.assign(v,y),v})}}async update(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=YT(this.apiClient,e);return c=me("{model}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>Wu(m))}else{const p=WT(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>Ju(m))}}async delete(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=LS(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=FS(m),v=new Rp;return Object.assign(v,y),v})}else{const p=DS(this.apiClient,e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=US(m),v=new Rp;return Object.assign(v,y),v})}}async countTokens(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=NS(this.apiClient,e);return c=me("{model}:countTokens",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=RS(m),v=new Dp;return Object.assign(v,y),v})}else{const p=PS(this.apiClient,e);return c=me("{model}:countTokens",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=MS(m),v=new Dp;return Object.assign(v,y),v})}}async computeTokens(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const c=TS(this.apiClient,e);return i=me("{model}:computeTokens",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=ES(f),m=new a_;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=aT(this.apiClient,e);return c=me("{model}:predictLongRunning",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const y=sT(m),v=new Il;return Object.assign(v,y),v})}else{const p=lT(this.apiClient,e);return c=me("{model}:predictLongRunning",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const y=iT(m),v=new Il;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RE extends oo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:i}});return t._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:i}});return t._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=n_(e);return c=me("{operationName}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s}else{const p=e_(e);return c=me("{operationName}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s}}async fetchPredictVideosOperationInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const c=J0(e);return i=me("{resourceName}:fetchPredictOperation",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DE(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["data"]);t!=null&&u(e,["data"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function LE(n){const e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(i=>bE(i))),u(e,["parts"],o)}const r=l(n,["role"]);return r!=null&&u(e,["role"],r),e}function UE(n,e,t){const r={},o=l(e,["expireTime"]);t!==void 0&&o!=null&&u(t,["expireTime"],o);const i=l(e,["newSessionExpireTime"]);t!==void 0&&i!=null&&u(t,["newSessionExpireTime"],i);const s=l(e,["uses"]);t!==void 0&&s!=null&&u(t,["uses"],s);const c=l(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&u(t,["bidiGenerateContentSetup"],GE(n,c));const f=l(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&u(t,["fieldMask"],f),r}function FE(n,e){const t={},r=l(e,["config"]);return r!=null&&u(t,["config"],UE(n,r,t)),t}function VE(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=l(n,["fileUri"]);t!=null&&u(e,["fileUri"],t);const r=l(n,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function BE(n){const e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=l(n,["enableWidget"]);return t!=null&&u(e,["enableWidget"],t),e}function qE(n){const e={},t=l(n,["timeRangeFilter"]);if(t!=null&&u(e,["timeRangeFilter"],t),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function HE(n,e){const t={},r=l(n,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(n,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(n,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(n,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const c=l(n,["topK"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","topK"],c);const f=l(n,["maxOutputTokens"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","maxOutputTokens"],f);const p=l(n,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const m=l(n,["seed"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","seed"],m);const y=l(n,["speechConfig"]);e!==void 0&&y!=null&&u(e,["setup","generationConfig","speechConfig"],Qc(y));const v=l(n,["thinkingConfig"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","thinkingConfig"],v);const x=l(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=l(n,["systemInstruction"]);e!==void 0&&U!=null&&u(e,["setup","systemInstruction"],LE(Bn(U)));const B=l(n,["tools"]);if(e!==void 0&&B!=null){let O=Qo(B);Array.isArray(O)&&(O=O.map($=>$E(Yo($)))),u(e,["setup","tools"],O)}const J=l(n,["sessionResumption"]);e!==void 0&&J!=null&&u(e,["setup","sessionResumption"],zE(J));const I=l(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&u(e,["setup","inputAudioTranscription"],I);const E=l(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&u(e,["setup","outputAudioTranscription"],E);const w=l(n,["realtimeInputConfig"]);e!==void 0&&w!=null&&u(e,["setup","realtimeInputConfig"],w);const H=l(n,["contextWindowCompression"]);e!==void 0&&H!=null&&u(e,["setup","contextWindowCompression"],H);const z=l(n,["proactivity"]);return e!==void 0&&z!=null&&u(e,["setup","proactivity"],z),t}function GE(n,e){const t={},r=l(e,["model"]);r!=null&&u(t,["setup","model"],ze(n,r));const o=l(e,["config"]);return o!=null&&u(t,["config"],HE(o,t)),t}function bE(n){const e={},t=l(n,["videoMetadata"]);t!=null&&u(e,["videoMetadata"],t);const r=l(n,["thought"]);r!=null&&u(e,["thought"],r);const o=l(n,["inlineData"]);o!=null&&u(e,["inlineData"],DE(o));const i=l(n,["fileData"]);i!=null&&u(e,["fileData"],VE(i));const s=l(n,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const c=l(n,["functionCall"]);c!=null&&u(e,["functionCall"],c);const f=l(n,["codeExecutionResult"]);f!=null&&u(e,["codeExecutionResult"],f);const p=l(n,["executableCode"]);p!=null&&u(e,["executableCode"],p);const m=l(n,["functionResponse"]);m!=null&&u(e,["functionResponse"],m);const y=l(n,["text"]);return y!=null&&u(e,["text"],y),e}function zE(n){const e={},t=l(n,["handle"]);if(t!=null&&u(e,["handle"],t),l(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $E(n){const e={},t=l(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["functionDeclarations"],p)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(n,["googleSearch"]);r!=null&&u(e,["googleSearch"],qE(r));const o=l(n,["googleSearchRetrieval"]);if(o!=null&&u(e,["googleSearchRetrieval"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(n,["googleMaps"]);i!=null&&u(e,["googleMaps"],BE(i));const s=l(n,["urlContext"]);s!=null&&u(e,["urlContext"],s);const c=l(n,["computerUse"]);c!=null&&u(e,["computerUse"],c);const f=l(n,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KE(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${t}.${i}`);e.push(...o)}else e.push(t)}return e.join(",")}function OE(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(n.bidiGenerateContentSetup=i,t=i):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const i=KE(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?n.fieldMask=i:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];o.length>0&&(c=o.map(p=>s.includes(p)?`generationConfig.${p}`:p));const f=[];i&&f.push(i),c.length>0&&f.push(...c),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class JE extends oo{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=FE(this.apiClient,e);i=me("auth_tokens",c._url),s=c._query,delete c.config,delete c._url,delete c._query;const f=OE(c,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WE(n){const e={},t=l(n,["name"]);return t!=null&&u(e,["_url","name"],t),e}function YE(n){const e={},t=l(n,["name"]);return t!=null&&u(e,["_url","name"],t),e}function QE(n,e){const t={};if(l(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&u(e,["displayName"],r),l(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=l(n,["epochCount"]);e!==void 0&&o!=null&&u(e,["tuningTask","hyperparameters","epochCount"],o);const i=l(n,["learningRateMultiplier"]);if(i!=null&&u(t,["tuningTask","hyperparameters","learningRateMultiplier"],i),l(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=l(n,["batchSize"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","batchSize"],s);const c=l(n,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),l(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function XE(n,e){const t={},r=l(n,["validationDataset"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec"],fw(r,t));const o=l(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&u(e,["tunedModelDisplayName"],o);const i=l(n,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const s=l(n,["epochCount"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const c=l(n,["learningRateMultiplier"]);e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const f=l(n,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const p=l(n,["adapterSize"]);if(e!==void 0&&p!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),l(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(n,["labels"]);return e!==void 0&&m!=null&&u(e,["labels"],m),t}function ZE(n){const e={},t=l(n,["baseModel"]);t!=null&&u(e,["baseModel"],t);const r=l(n,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const o=l(n,["trainingDataset"]);o!=null&&u(e,["tuningTask","trainingData"],uw(o));const i=l(n,["config"]);return i!=null&&QE(i,e),e}function jE(n){const e={},t=l(n,["baseModel"]);t!=null&&u(e,["baseModel"],t);const r=l(n,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const o=l(n,["trainingDataset"]);o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],cw(o,e));const i=l(n,["config"]);return i!=null&&XE(i,e),e}function ew(n){const e={},t=l(n,["name"]);return t!=null&&u(e,["_url","name"],t),e}function nw(n){const e={},t=l(n,["name"]);return t!=null&&u(e,["_url","name"],t),e}function tw(n,e){const t={},r=l(n,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(n,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const i=l(n,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),t}function rw(n,e){const t={},r=l(n,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(n,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const i=l(n,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),t}function ow(n){const e={},t=l(n,["config"]);return t!=null&&tw(t,e),e}function iw(n){const e={},t=l(n,["config"]);return t!=null&&rw(t,e),e}function sw(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["tunedModels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>$g(s))),u(e,["tuningJobs"],i)}return e}function lw(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(n,["tuningJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Qu(s))),u(e,["tuningJobs"],i)}return e}function aw(n){const e={},t=l(n,["name"]);t!=null&&u(e,["model"],t);const r=l(n,["name"]);return r!=null&&u(e,["endpoint"],r),e}function uw(n){const e={};if(l(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=l(n,["examples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["examples","examples"],r)}return e}function cw(n,e){const t={},r=l(n,["gcsUri"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],r);const o=l(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],o),l(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function $g(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["state"]);o!=null&&u(e,["state"],xg(o));const i=l(n,["createTime"]);i!=null&&u(e,["createTime"],i);const s=l(n,["tuningTask","startTime"]);s!=null&&u(e,["startTime"],s);const c=l(n,["tuningTask","completeTime"]);c!=null&&u(e,["endTime"],c);const f=l(n,["updateTime"]);f!=null&&u(e,["updateTime"],f);const p=l(n,["description"]);p!=null&&u(e,["description"],p);const m=l(n,["baseModel"]);m!=null&&u(e,["baseModel"],m);const y=l(n,["_self"]);return y!=null&&u(e,["tunedModel"],aw(y)),e}function Qu(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["state"]);o!=null&&u(e,["state"],xg(o));const i=l(n,["createTime"]);i!=null&&u(e,["createTime"],i);const s=l(n,["startTime"]);s!=null&&u(e,["startTime"],s);const c=l(n,["endTime"]);c!=null&&u(e,["endTime"],c);const f=l(n,["updateTime"]);f!=null&&u(e,["updateTime"],f);const p=l(n,["error"]);p!=null&&u(e,["error"],p);const m=l(n,["description"]);m!=null&&u(e,["description"],m);const y=l(n,["baseModel"]);y!=null&&u(e,["baseModel"],y);const v=l(n,["tunedModel"]);v!=null&&u(e,["tunedModel"],v);const x=l(n,["preTunedModel"]);x!=null&&u(e,["preTunedModel"],x);const U=l(n,["supervisedTuningSpec"]);U!=null&&u(e,["supervisedTuningSpec"],U);const B=l(n,["tuningDataStats"]);B!=null&&u(e,["tuningDataStats"],B);const J=l(n,["encryptionSpec"]);J!=null&&u(e,["encryptionSpec"],J);const I=l(n,["partnerModelTuningSpec"]);I!=null&&u(e,["partnerModelTuningSpec"],I);const E=l(n,["customBaseModel"]);E!=null&&u(e,["customBaseModel"],E);const w=l(n,["experiment"]);w!=null&&u(e,["experiment"],w);const H=l(n,["labels"]);H!=null&&u(e,["labels"],H);const z=l(n,["outputUri"]);z!=null&&u(e,["outputUri"],z);const O=l(n,["pipelineJob"]);O!=null&&u(e,["pipelineJob"],O);const $=l(n,["serviceAccount"]);$!=null&&u(e,["serviceAccount"],$);const te=l(n,["tunedModelDisplayName"]);te!=null&&u(e,["tunedModelDisplayName"],te);const Y=l(n,["veoTuningSpec"]);return Y!=null&&u(e,["veoTuningSpec"],Y),e}function dw(n){const e={},t=l(n,["sdkHttpResponse"]);t!=null&&u(e,["sdkHttpResponse"],t);const r=l(n,["name"]);r!=null&&u(e,["name"],r);const o=l(n,["metadata"]);o!=null&&u(e,["metadata"],o);const i=l(n,["done"]);i!=null&&u(e,["done"],i);const s=l(n,["error"]);return s!=null&&u(e,["error"],s),e}function fw(n,e){const t={},r=l(n,["gcsUri"]);r!=null&&u(t,["validationDatasetUri"],r);const o=l(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pw extends oo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ns(no.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},t),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),i=await this.tuneMldevInternal(o);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:zu.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=nw(e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>Qu(m))}else{const p=ew(e);return c=me("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>$g(m))}}async listInternal(e){var t,r,o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=iw(e);return c=me("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=lw(m),v=new Lp;return Object.assign(v,y),v})}else{const p=ow(e);return c=me("tunedModels",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{const y=sw(m),v=new Lp;return Object.assign(v,y),v})}}async cancel(e){var t,r,o,i;let s="",c={};if(this.apiClient.isVertexAI()){const f=YE(e);s=me("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=WE(e);s=me("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const c=jE(e);return i=me("tuningJobs",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>Qu(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ZE(e);return i=me("tunedModels",c._url),s=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>dw(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hw{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mw=1024*1024*8,gw=3,yw=1e3,vw=2,Ya="x-goog-upload-status";async function _w(n,e,t){var r,o,i;let s=0,c=0,f=new $u(new Response),p="upload";for(s=n.size;c<s;){const y=Math.min(mw,s-c),v=n.slice(c,c+y);c+y>=s&&(p+=", finalize");let x=0,U=yw;for(;x<gw&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),!(!((r=f==null?void 0:f.headers)===null||r===void 0)&&r[Ya]));)x++,await Sw(U),U=U*vw;if(c+=y,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[Ya])!=="active")break;if(s<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(f==null?void 0:f.json());if(((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[Ya])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function Cw(n){return{size:n.size,type:n.type}}function Sw(n){return new Promise(e=>setTimeout(e,n))}class Tw{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _w(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Cw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ew{create(e,t,r){return new ww(e,t,r)}}class ww{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eh="x-goog-api-key";class xw{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(eh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(eh,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iw="gl-node/";class nh{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=K0(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new xw(this.apiKey);this.apiClient=new dE({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Iw+"web",uploader:new Tw,downloader:new hw}),this.models=new ME(this.apiClient),this.live=new wE(this.apiClient,o,new Ew),this.batches=new cC(this.apiClient),this.chats=new bC(this.models,this.apiClient),this.caches=new qC(this.apiClient),this.files=new ZC(this.apiClient),this.operations=new RE(this.apiClient),this.authTokens=new JE(this.apiClient),this.tunings=new pw(this.apiClient)}}var Kg={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Ad,function(){var t=function(a,d){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(h[_]=g[_])})(a,d)},r=function(){return(r=Object.assign||function(a){for(var d,h=1,g=arguments.length;h<g;h++)for(var _ in d=arguments[h])Object.prototype.hasOwnProperty.call(d,_)&&(a[_]=d[_]);return a}).apply(this,arguments)};function o(a,d,h){for(var g,_=0,S=d.length;_<S;_++)!g&&_ in d||((g=g||Array.prototype.slice.call(d,0,_))[_]=d[_]);return a.concat(g||Array.prototype.slice.call(d))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ad,s=Object.keys,c=Array.isArray;function f(a,d){return typeof d!="object"||s(d).forEach(function(h){a[h]=d[h]}),a}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var p=Object.getPrototypeOf,m={}.hasOwnProperty;function y(a,d){return m.call(a,d)}function v(a,d){typeof d=="function"&&(d=d(p(a))),(typeof Reflect>"u"?s:Reflect.ownKeys)(d).forEach(function(h){U(a,h,d[h])})}var x=Object.defineProperty;function U(a,d,h,g){x(a,d,f(h&&y(h,"get")&&typeof h.get=="function"?{get:h.get,set:h.set,configurable:!0}:{value:h,configurable:!0,writable:!0},g))}function B(a){return{from:function(d){return a.prototype=Object.create(d.prototype),U(a.prototype,"constructor",a),{extend:v.bind(null,a.prototype)}}}}var J=Object.getOwnPropertyDescriptor,I=[].slice;function E(a,d,h){return I.call(a,d,h)}function w(a,d){return d(a)}function H(a){if(!a)throw new Error("Assertion Failed")}function z(a){i.setImmediate?setImmediate(a):setTimeout(a,0)}function O(a,d){if(typeof d=="string"&&y(a,d))return a[d];if(!d)return a;if(typeof d!="string"){for(var h=[],g=0,_=d.length;g<_;++g){var S=O(a,d[g]);h.push(S)}return h}var T=d.indexOf(".");if(T!==-1){var A=a[d.substr(0,T)];return A==null?void 0:O(A,d.substr(T+1))}}function $(a,d,h){if(a&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof d!="string"&&"length"in d){H(typeof h!="string"&&"length"in h);for(var g=0,_=d.length;g<_;++g)$(a,d[g],h[g])}else{var S,T,A=d.indexOf(".");A!==-1?(S=d.substr(0,A),(T=d.substr(A+1))===""?h===void 0?c(a)&&!isNaN(parseInt(S))?a.splice(S,1):delete a[S]:a[S]=h:$(A=!(A=a[S])||!y(a,S)?a[S]={}:A,T,h)):h===void 0?c(a)&&!isNaN(parseInt(d))?a.splice(d,1):delete a[d]:a[d]=h}}function te(a){var d,h={};for(d in a)y(a,d)&&(h[d]=a[d]);return h}var Y=[].concat;function ue(a){return Y.apply([],a)}var Ht="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ue([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(d){return d+a+"Array"})}))).filter(function(a){return i[a]}),we=new Set(Ht.map(function(a){return i[a]})),xe=null;function Me(a){return xe=new WeakMap,a=function d(h){if(!h||typeof h!="object")return h;var g=xe.get(h);if(g)return g;if(c(h)){g=[],xe.set(h,g);for(var _=0,S=h.length;_<S;++_)g.push(d(h[_]))}else if(we.has(h.constructor))g=h;else{var T,A=p(h);for(T in g=A===Object.prototype?{}:Object.create(A),xe.set(h,g),h)y(h,T)&&(g[T]=d(h[T]))}return g}(a),xe=null,a}var Ve={}.toString;function rn(a){return Ve.call(a).slice(8,-1)}var He=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ln=typeof He=="symbol"?function(a){var d;return a!=null&&(d=a[He])&&d.apply(a)}:function(){return null};function ae(a,d){return d=a.indexOf(d),0<=d&&a.splice(d,1),0<=d}var Ee={};function ge(a){var d,h,g,_;if(arguments.length===1){if(c(a))return a.slice();if(this===Ee&&typeof a=="string")return[a];if(_=ln(a)){for(h=[];!(g=_.next()).done;)h.push(g.value);return h}if(a==null)return[a];if(typeof(d=a.length)!="number")return[a];for(h=new Array(d);d--;)h[d]=a[d];return h}for(d=arguments.length,h=new Array(d);d--;)h[d]=arguments[d];return h}var Be=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Lr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],pt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Lr),je={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Jn(a,d){this.name=a,this.message=d}function Ye(a,d){return a+". Errors: "+Object.keys(d).map(function(h){return d[h].toString()}).filter(function(h,g,_){return _.indexOf(h)===g}).join(`
`)}function Hn(a,d,h,g){this.failures=d,this.failedKeys=g,this.successCount=h,this.message=Ye(a,d)}function yn(a,d){this.name="BulkError",this.failures=Object.keys(d).map(function(h){return d[h]}),this.failuresByPos=d,this.message=Ye(a,this.failures)}B(Jn).from(Error).extend({toString:function(){return this.name+": "+this.message}}),B(Hn).from(Jn),B(yn).from(Jn);var et=pt.reduce(function(a,d){return a[d]=d+"Error",a},{}),Zo=Jn,Se=pt.reduce(function(a,d){var h=d+"Error";function g(_,S){this.name=h,_?typeof _=="string"?(this.message="".concat(_).concat(S?`
 `+S:""),this.inner=S||null):typeof _=="object"&&(this.message="".concat(_.name," ").concat(_.message),this.inner=_):(this.message=je[d]||h,this.inner=null)}return B(g).from(Zo),a[d]=g,a},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var io=Lr.reduce(function(a,d){return a[d+"Error"]=Se[d],a},{}),Nt=pt.reduce(function(a,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(a[d+"Error"]=Se[d]),a},{});function j(){}function Re(a){return a}function Oe(a,d){return a==null||a===Re?d:function(h){return d(a(h))}}function Sn(a,d){return function(){a.apply(this,arguments),d.apply(this,arguments)}}function or(a,d){return a===j?d:function(){var h=a.apply(this,arguments);h!==void 0&&(arguments[0]=h);var g=this.onsuccess,_=this.onerror;this.onsuccess=null,this.onerror=null;var S=d.apply(this,arguments);return g&&(this.onsuccess=this.onsuccess?Sn(g,this.onsuccess):g),_&&(this.onerror=this.onerror?Sn(_,this.onerror):_),S!==void 0?S:h}}function Pn(a,d){return a===j?d:function(){a.apply(this,arguments);var h=this.onsuccess,g=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Sn(h,this.onsuccess):h),g&&(this.onerror=this.onerror?Sn(g,this.onerror):g)}}function dt(a,d){return a===j?d:function(h){var g=a.apply(this,arguments);f(h,g);var _=this.onsuccess,S=this.onerror;return this.onsuccess=null,this.onerror=null,h=d.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?Sn(_,this.onsuccess):_),S&&(this.onerror=this.onerror?Sn(S,this.onerror):S),g===void 0?h===void 0?void 0:h:f(g,h)}}function Ql(a,d){return a===j?d:function(){return d.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function Rr(a,d){return a===j?d:function(){var h=a.apply(this,arguments);if(h&&typeof h.then=="function"){for(var g=this,_=arguments.length,S=new Array(_);_--;)S[_]=arguments[_];return h.then(function(){return d.apply(g,S)})}return d.apply(this,arguments)}}Nt.ModifyError=Hn,Nt.DexieError=Jn,Nt.BulkError=yn;var ft=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ts(a){ft=a}var Dr={},rs=100,Ht=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,p(a),a];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,p(d),a]}(),Lr=Ht[0],pt=Ht[1],Ht=Ht[2],pt=pt&&pt.then,Gt=Lr&&Lr.constructor,jo=!!Ht,Ur=function(a,d){zt.push([a,d]),so&&(queueMicrotask(Le),so=!1)},ei=!0,so=!0,bt=[],lo=[],ao=Re,St={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:j,pgp:!1,env:{},finalize:j},ve=St,zt=[],Mt=0,uo=[];function P(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=ve;if(typeof a!="function"){if(a!==Dr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&de(this,this._value))}this._state=null,this._value=null,++d.ref,function h(g,_){try{_(function(S){if(g._state===null){if(S===g)throw new TypeError("A promise cannot be resolved with itself.");var T=g._lib&&$e();S&&typeof S.then=="function"?h(g,function(A,N){S instanceof P?S._then(A,N):S.then(A,N)}):(g._state=!0,g._value=S,ye(g)),T&&an()}},de.bind(null,g))}catch(S){de(g,S)}}(this,a)}var oe={get:function(){var a=ve,d=Ke;function h(g,_){var S=this,T=!a.global&&(a!==ve||d!==Ke),A=T&&!vn(),N=new P(function(M,F){ke(S,new ee(sr(g,a,T,A),sr(_,a,T,A),M,F,a))});return this._consoleTask&&(N._consoleTask=this._consoleTask),N}return h.prototype=Dr,h},set:function(a){U(this,"then",a&&a.prototype===Dr?oe:{get:function(){return a},set:oe.set})}};function ee(a,d,h,g,_){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof d=="function"?d:null,this.resolve=h,this.reject=g,this.psd=_}function de(a,d){var h,g;lo.push(d),a._state===null&&(h=a._lib&&$e(),d=ao(d),a._state=!1,a._value=d,g=a,bt.some(function(_){return _._value===g._value})||bt.push(g),ye(a),h&&an())}function ye(a){var d=a._listeners;a._listeners=[];for(var h=0,g=d.length;h<g;++h)ke(a,d[h]);var _=a._PSD;--_.ref||_.finalize(),Mt===0&&(++Mt,Ur(function(){--Mt==0&&Nn()},[]))}function ke(a,d){if(a._state!==null){var h=a._state?d.onFulfilled:d.onRejected;if(h===null)return(a._state?d.resolve:d.reject)(a._value);++d.psd.ref,++Mt,Ur(Ie,[h,a,d])}else a._listeners.push(d)}function Ie(a,d,h){try{var g,_=d._value;!d._state&&lo.length&&(lo=[]),g=ft&&d._consoleTask?d._consoleTask.run(function(){return a(_)}):a(_),d._state||lo.indexOf(_)!==-1||function(S){for(var T=bt.length;T;)if(bt[--T]._value===S._value)return bt.splice(T,1)}(d),h.resolve(g)}catch(S){h.reject(S)}finally{--Mt==0&&Nn(),--h.psd.ref||h.psd.finalize()}}function Le(){Mn(St,function(){$e()&&an()})}function $e(){var a=ei;return so=ei=!1,a}function an(){var a,d,h;do for(;0<zt.length;)for(a=zt,zt=[],h=a.length,d=0;d<h;++d){var g=a[d];g[0].apply(null,g[1])}while(0<zt.length);so=ei=!0}function Nn(){var a=bt;bt=[],a.forEach(function(g){g._PSD.onunhandled.call(null,g._value,g)});for(var d=uo.slice(0),h=d.length;h;)d[--h]()}function fe(a){return new P(Dr,!1,a)}function Te(a,d){var h=ve;return function(){var g=$e(),_=ve;try{return nt(h,!0),a.apply(this,arguments)}catch(S){d&&d(S)}finally{nt(_,!1),g&&an()}}}v(P.prototype,{then:oe,_then:function(a,d){ke(this,new ee(null,null,a,d,ve))},catch:function(a){if(arguments.length===1)return this.then(null,a);var d=a,h=arguments[1];return typeof d=="function"?this.then(null,function(g){return(g instanceof d?h:fe)(g)}):this.then(null,function(g){return(g&&g.name===d?h:fe)(g)})},finally:function(a){return this.then(function(d){return P.resolve(a()).then(function(){return d})},function(d){return P.resolve(a()).then(function(){return fe(d)})})},timeout:function(a,d){var h=this;return a<1/0?new P(function(g,_){var S=setTimeout(function(){return _(new Se.Timeout(d))},a);h.then(g,_).finally(clearTimeout.bind(null,S))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&U(P.prototype,Symbol.toStringTag,"Dexie.Promise"),St.env=ir(),v(P,{all:function(){var a=ge.apply(null,arguments).map(Gn);return new P(function(d,h){a.length===0&&d([]);var g=a.length;a.forEach(function(_,S){return P.resolve(_).then(function(T){a[S]=T,--g||d(a)},h)})})},resolve:function(a){return a instanceof P?a:a&&typeof a.then=="function"?new P(function(d,h){a.then(d,h)}):new P(Dr,!0,a)},reject:fe,race:function(){var a=ge.apply(null,arguments).map(Gn);return new P(function(d,h){a.map(function(g){return P.resolve(g).then(d,h)})})},PSD:{get:function(){return ve},set:function(a){return ve=a}},totalEchoes:{get:function(){return Ke}},newPSD:Je,usePSD:Mn,scheduler:{get:function(){return Ur},set:function(a){Ur=a}},rejectionMapper:{get:function(){return ao},set:function(a){ao=a}},follow:function(a,d){return new P(function(h,g){return Je(function(_,S){var T=ve;T.unhandleds=[],T.onunhandled=S,T.finalize=Sn(function(){var A,N=this;A=function(){N.unhandleds.length===0?_():S(N.unhandleds[0])},uo.push(function M(){A(),uo.splice(uo.indexOf(M),1)}),++Mt,Ur(function(){--Mt==0&&Nn()},[])},T.finalize),a()},d,h,g)})}}),Gt&&(Gt.allSettled&&U(P,"allSettled",function(){var a=ge.apply(null,arguments).map(Gn);return new P(function(d){a.length===0&&d([]);var h=a.length,g=new Array(h);a.forEach(function(_,S){return P.resolve(_).then(function(T){return g[S]={status:"fulfilled",value:T}},function(T){return g[S]={status:"rejected",reason:T}}).then(function(){return--h||d(g)})})})}),Gt.any&&typeof AggregateError<"u"&&U(P,"any",function(){var a=ge.apply(null,arguments).map(Gn);return new P(function(d,h){a.length===0&&h(new AggregateError([]));var g=a.length,_=new Array(g);a.forEach(function(S,T){return P.resolve(S).then(function(A){return d(A)},function(A){_[T]=A,--g||h(new AggregateError(_))})})})}),Gt.withResolvers&&(P.withResolvers=Gt.withResolvers));var _e={awaits:0,echoes:0,id:0},Ge=0,Ce=[],on=0,Ke=0,xn=0;function Je(a,d,h,g){var _=ve,S=Object.create(_);return S.parent=_,S.ref=0,S.global=!1,S.id=++xn,St.env,S.env=jo?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject}:{},d&&f(S,d),++_.ref,S.finalize=function(){--this.parent.ref||this.parent.finalize()},g=Mn(S,a,h,g),S.ref===0&&S.finalize(),g}function pn(){return _e.id||(_e.id=++Ge),++_e.awaits,_e.echoes+=rs,_e.id}function vn(){return!!_e.awaits&&(--_e.awaits==0&&(_e.id=0),_e.echoes=_e.awaits*rs,!0)}function Gn(a){return _e.echoes&&a&&a.constructor===Gt?(pn(),a.then(function(d){return vn(),d},function(d){return vn(),Qe(d)})):a}function Fr(){var a=Ce[Ce.length-1];Ce.pop(),nt(a,!1)}function nt(a,d){var h,g=ve;(d?!_e.echoes||on++&&a===ve:!on||--on&&a===ve)||queueMicrotask(d?(function(_){++Ke,_e.echoes&&--_e.echoes!=0||(_e.echoes=_e.awaits=_e.id=0),Ce.push(ve),nt(_,!0)}).bind(null,a):Fr),a!==ve&&(ve=a,g===St&&(St.env=ir()),jo&&(h=St.env.Promise,d=a.env,(g.global||a.global)&&(Object.defineProperty(i,"Promise",d.PromiseProp),h.all=d.all,h.race=d.race,h.resolve=d.resolve,h.reject=d.reject,d.allSettled&&(h.allSettled=d.allSettled),d.any&&(h.any=d.any))))}function ir(){var a=i.Promise;return jo?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function Mn(a,d,h,g,_){var S=ve;try{return nt(a,!0),d(h,g,_)}finally{nt(S,!1)}}function sr(a,d,h,g){return typeof a!="function"?a:function(){var _=ve;h&&pn(),nt(d,!0);try{return a.apply(this,arguments)}finally{nt(_,!1),g&&queueMicrotask(vn)}}}function $t(a){Promise===Gt&&_e.echoes===0?on===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+pt).indexOf("[native code]")===-1&&(pn=vn=j);var Qe=P.reject,Rt="￿",Wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vr="String expected.",tt=[],os="__dbnames",Xl="readonly",Zl="readwrite";function Br(a,d){return a?d?function(){return a.apply(this,arguments)&&d.apply(this,arguments)}:a:d}var jc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function is(a){return typeof a!="string"||/\./.test(a)?function(d){return d}:function(d){return d[a]===void 0&&a in d&&delete(d=Me(d))[a],d}}function ed(){throw Se.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Fe(a,d){try{var h=nd(a),g=nd(d);if(h!==g)return h==="Array"?1:g==="Array"?-1:h==="binary"?1:g==="binary"?-1:h==="string"?1:g==="string"?-1:h==="Date"?1:g!=="Date"?NaN:-1;switch(h){case"number":case"Date":case"string":return d<a?1:a<d?-1:0;case"binary":return function(_,S){for(var T=_.length,A=S.length,N=T<A?T:A,M=0;M<N;++M)if(_[M]!==S[M])return _[M]<S[M]?-1:1;return T===A?0:T<A?-1:1}(td(a),td(d));case"Array":return function(_,S){for(var T=_.length,A=S.length,N=T<A?T:A,M=0;M<N;++M){var F=Fe(_[M],S[M]);if(F!==0)return F}return T===A?0:T<A?-1:1}(a,d)}}catch{}return NaN}function nd(a){var d=typeof a;return d!="object"?d:ArrayBuffer.isView(a)?"binary":(a=rn(a),a==="ArrayBuffer"?"binary":a)}function td(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}function ss(a,d,h){var g=a.schema.yProps;return g?(d&&0<h.numFailures&&(d=d.filter(function(_,S){return!h.failures[S]})),Promise.all(g.map(function(_){return _=_.updatesTable,d?a.db.table(_).where("k").anyOf(d).delete():a.db.table(_).clear()})).then(function(){return h})):h}var ni=(rd.prototype.execute=function(a){var d=this["@@propmod"];if(d.add!==void 0){var h=d.add;if(c(h))return o(o([],c(a)?a:[],!0),h).sort();if(typeof h=="number")return(Number(a)||0)+h;if(typeof h=="bigint")try{return BigInt(a)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(d.remove!==void 0){var g=d.remove;if(c(g))return c(a)?a.filter(function(_){return!g.includes(_)}).sort():[];if(typeof g=="number")return Number(a)-g;if(typeof g=="bigint")try{return BigInt(a)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return h=(h=d.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof a=="string"&&a.startsWith(h)?d.replacePrefix[1]+a.substring(h.length):a},rd);function rd(a){this["@@propmod"]=a}function od(a,d){for(var h=s(d),g=h.length,_=!1,S=0;S<g;++S){var T=h[S],A=d[T],N=O(a,T);A instanceof ni?($(a,T,A.execute(N)),_=!0):N!==A&&($(a,T,A),_=!0)}return _}var id=(Xe.prototype._trans=function(a,d,h){var g=this._tx||ve.trans,_=this.name,S=ft&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function T(M,F,k){if(!k.schema[_])throw new Se.NotFound("Table "+_+" not part of transaction");return d(k.idbtrans,k)}var A=$e();try{var N=g&&g.db._novip===this.db._novip?g===ve.trans?g._promise(a,T,h):Je(function(){return g._promise(a,T,h)},{trans:g,transless:ve.transless||ve}):function M(F,k,q,R){if(F.idbdb&&(F._state.openComplete||ve.letThrough||F._vip)){var D=F._createTransaction(k,q,F._dbSchema);try{D.create(),F._state.PR1398_maxLoop=3}catch(L){return L.name===et.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return M(F,k,q,R)})):Qe(L)}return D._promise(k,function(L,V){return Je(function(){return ve.trans=D,R(L,V,D)})}).then(function(L){if(k==="readwrite")try{D.idbtrans.commit()}catch{}return k==="readonly"?L:D._completion.then(function(){return L})})}if(F._state.openComplete)return Qe(new Se.DatabaseClosed(F._state.dbOpenError));if(!F._state.isBeingOpened){if(!F._state.autoOpen)return Qe(new Se.DatabaseClosed);F.open().catch(j)}return F._state.dbReadyPromise.then(function(){return M(F,k,q,R)})}(this.db,a,[this.name],T);return S&&(N._consoleTask=S,N=N.catch(function(M){return console.trace(M),Qe(M)})),N}finally{A&&an()}},Xe.prototype.get=function(a,d){var h=this;return a&&a.constructor===Object?this.where(a).first(d):a==null?Qe(new Se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(g){return h.core.get({trans:g,key:a}).then(function(_){return h.hook.reading.fire(_)})}).then(d)},Xe.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(c(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var d=s(a);if(d.length===1)return this.where(d[0]).equals(a[d[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&d.every(function(M){return 0<=A.keyPath.indexOf(M)})){for(var N=0;N<d.length;++N)if(d.indexOf(A.keyPath[N])===-1)return!1;return!0}return!1}).sort(function(A,N){return A.keyPath.length-N.keyPath.length})[0];if(h&&this.db._maxKey!==Rt){var S=h.keyPath.slice(0,d.length);return this.where(S).equals(S.map(function(N){return a[N]}))}!h&&ft&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var g=this.schema.idxByName;function _(A,N){return Fe(A,N)===0}var T=d.reduce(function(k,N){var M=k[0],F=k[1],k=g[N],q=a[N];return[M||k,M||!k?Br(F,k&&k.multi?function(R){return R=O(R,N),c(R)&&R.some(function(D){return _(q,D)})}:function(R){return _(q,O(R,N))}):F]},[null,null]),S=T[0],T=T[1];return S?this.where(S.name).equals(a[S.keyPath]).filter(T):h?this.filter(T):this.where(d).equals("")},Xe.prototype.filter=function(a){return this.toCollection().and(a)},Xe.prototype.count=function(a){return this.toCollection().count(a)},Xe.prototype.offset=function(a){return this.toCollection().offset(a)},Xe.prototype.limit=function(a){return this.toCollection().limit(a)},Xe.prototype.each=function(a){return this.toCollection().each(a)},Xe.prototype.toArray=function(a){return this.toCollection().toArray(a)},Xe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Xe.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,c(a)?"[".concat(a.join("+"),"]"):a))},Xe.prototype.reverse=function(){return this.toCollection().reverse()},Xe.prototype.mapToClass=function(a){var d,h=this.db,g=this.name;function _(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof ed&&(function(N,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function F(){this.constructor=N}t(N,M),N.prototype=M===null?Object.create(M):(F.prototype=M.prototype,new F)}(_,d=a),Object.defineProperty(_.prototype,"db",{get:function(){return h},enumerable:!1,configurable:!0}),_.prototype.table=function(){return g},a=_);for(var S=new Set,T=a.prototype;T;T=p(T))Object.getOwnPropertyNames(T).forEach(function(N){return S.add(N)});function A(N){if(!N)return N;var M,F=Object.create(a.prototype);for(M in N)if(!S.has(M))try{F[M]=N[M]}catch{}return F}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=A,this.hook("reading",A),a},Xe.prototype.defineClass=function(){return this.mapToClass(function(a){f(this,a)})},Xe.prototype.add=function(a,d){var h=this,g=this.schema.primKey,_=g.auto,S=g.keyPath,T=a;return S&&_&&(T=is(S)(a)),this._trans("readwrite",function(A){return h.core.mutate({trans:A,type:"add",keys:d!=null?[d]:null,values:[T]})}).then(function(A){return A.numFailures?P.reject(A.failures[0]):A.lastResult}).then(function(A){if(S)try{$(a,S,A)}catch{}return A})},Xe.prototype.upsert=function(a,d){var h=this,g=this.schema.primKey.keyPath;return this._trans("readwrite",function(_){return h.core.get({trans:_,key:a}).then(function(S){var T=S??{};return od(T,d),g&&$(T,g,a),h.core.mutate({trans:_,type:"put",values:[T],keys:[a],upsert:!0,updates:{keys:[a],changeSpecs:[d]}}).then(function(A){return A.numFailures?P.reject(A.failures[0]):!!S})})})},Xe.prototype.update=function(a,d){return typeof a!="object"||c(a)?this.where(":id").equals(a).modify(d):(a=O(a,this.schema.primKey.keyPath),a===void 0?Qe(new Se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(d))},Xe.prototype.put=function(a,d){var h=this,g=this.schema.primKey,_=g.auto,S=g.keyPath,T=a;return S&&_&&(T=is(S)(a)),this._trans("readwrite",function(A){return h.core.mutate({trans:A,type:"put",values:[T],keys:d!=null?[d]:null})}).then(function(A){return A.numFailures?P.reject(A.failures[0]):A.lastResult}).then(function(A){if(S)try{$(a,S,A)}catch{}return A})},Xe.prototype.delete=function(a){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"delete",keys:[a]}).then(function(g){return ss(d,[a],g)}).then(function(g){return g.numFailures?P.reject(g.failures[0]):void 0})})},Xe.prototype.clear=function(){var a=this;return this._trans("readwrite",function(d){return a.core.mutate({trans:d,type:"deleteRange",range:jc}).then(function(h){return ss(a,null,h)})}).then(function(d){return d.numFailures?P.reject(d.failures[0]):void 0})},Xe.prototype.bulkGet=function(a){var d=this;return this._trans("readonly",function(h){return d.core.getMany({keys:a,trans:h}).then(function(g){return g.map(function(_){return d.hook.reading.fire(_)})})})},Xe.prototype.bulkAdd=function(a,d,h){var g=this,_=Array.isArray(d)?d:void 0,S=(h=h||(_?void 0:d))?h.allKeys:void 0;return this._trans("readwrite",function(T){var M=g.schema.primKey,A=M.auto,M=M.keyPath;if(M&&_)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(_&&_.length!==a.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var N=a.length,M=M&&A?a.map(is(M)):a;return g.core.mutate({trans:T,type:"add",keys:_,values:M,wantResults:S}).then(function(D){var k=D.numFailures,q=D.results,R=D.lastResult,D=D.failures;if(k===0)return S?q:R;throw new yn("".concat(g.name,".bulkAdd(): ").concat(k," of ").concat(N," operations failed"),D)})})},Xe.prototype.bulkPut=function(a,d,h){var g=this,_=Array.isArray(d)?d:void 0,S=(h=h||(_?void 0:d))?h.allKeys:void 0;return this._trans("readwrite",function(T){var M=g.schema.primKey,A=M.auto,M=M.keyPath;if(M&&_)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(_&&_.length!==a.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var N=a.length,M=M&&A?a.map(is(M)):a;return g.core.mutate({trans:T,type:"put",keys:_,values:M,wantResults:S}).then(function(D){var k=D.numFailures,q=D.results,R=D.lastResult,D=D.failures;if(k===0)return S?q:R;throw new yn("".concat(g.name,".bulkPut(): ").concat(k," of ").concat(N," operations failed"),D)})})},Xe.prototype.bulkUpdate=function(a){var d=this,h=this.core,g=a.map(function(T){return T.key}),_=a.map(function(T){return T.changes}),S=[];return this._trans("readwrite",function(T){return h.getMany({trans:T,keys:g,cache:"clone"}).then(function(A){var N=[],M=[];a.forEach(function(k,q){var R=k.key,D=k.changes,L=A[q];if(L){for(var V=0,G=Object.keys(D);V<G.length;V++){var b=G[V],K=D[b];if(b===d.schema.primKey.keyPath){if(Fe(K,R)!==0)throw new Se.Constraint("Cannot update primary key in bulkUpdate()")}else $(L,b,K)}S.push(q),N.push(R),M.push(L)}});var F=N.length;return h.mutate({trans:T,type:"put",keys:N,values:M,updates:{keys:g,changeSpecs:_}}).then(function(k){var q=k.numFailures,R=k.failures;if(q===0)return F;for(var D=0,L=Object.keys(R);D<L.length;D++){var V,G=L[D],b=S[Number(G)];b!=null&&(V=R[G],delete R[G],R[b]=V)}throw new yn("".concat(d.name,".bulkUpdate(): ").concat(q," of ").concat(F," operations failed"),R)})})})},Xe.prototype.bulkDelete=function(a){var d=this,h=a.length;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"delete",keys:a}).then(function(_){return ss(d,a,_)})}).then(function(T){var _=T.numFailures,S=T.lastResult,T=T.failures;if(_===0)return S;throw new yn("".concat(d.name,".bulkDelete(): ").concat(_," of ").concat(h," operations failed"),T)})},Xe);function Xe(){}function ti(a){function d(T,A){if(A){for(var N=arguments.length,M=new Array(N-1);--N;)M[N-1]=arguments[N];return h[T].subscribe.apply(null,M),a}if(typeof T=="string")return h[T]}var h={};d.addEventType=S;for(var g=1,_=arguments.length;g<_;++g)S(arguments[g]);return d;function S(T,A,N){if(typeof T!="object"){var M;A=A||Ql;var F={subscribers:[],fire:N=N||j,subscribe:function(k){F.subscribers.indexOf(k)===-1&&(F.subscribers.push(k),F.fire=A(F.fire,k))},unsubscribe:function(k){F.subscribers=F.subscribers.filter(function(q){return q!==k}),F.fire=F.subscribers.reduce(A,N)}};return h[T]=d[T]=F}s(M=T).forEach(function(k){var q=M[k];if(c(q))S(k,M[k][0],M[k][1]);else{if(q!=="asap")throw new Se.InvalidArgument("Invalid event config");var R=S(k,Re,function(){for(var D=arguments.length,L=new Array(D);D--;)L[D]=arguments[D];R.subscribers.forEach(function(V){z(function(){V.apply(null,L)})})})}})}}function ri(a,d){return B(d).from({prototype:a}),d}function co(a,d){return!(a.filter||a.algorithm||a.or)&&(d?a.justLimit:!a.replayFilter)}function jl(a,d){a.filter=Br(a.filter,d)}function ea(a,d,h){var g=a.replayFilter;a.replayFilter=g?function(){return Br(g(),d())}:d,a.justLimit=h&&!g}function ls(a,d){if(a.isPrimKey)return d.primaryKey;var h=d.getIndexByKeyPath(a.index);if(!h)throw new Se.Schema("KeyPath "+a.index+" on object store "+d.name+" is not indexed");return h}function sd(a,d,h){var g=ls(a,d.schema);return d.openCursor({trans:h,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:g,range:a.range}})}function as(a,d,h,g){var _=a.replayFilter?Br(a.filter,a.replayFilter()):a.filter;if(a.or){var S={},T=function(A,N,M){var F,k;_&&!_(N,M,function(q){return N.stop(q)},function(q){return N.fail(q)})||((k=""+(F=N.primaryKey))=="[object ArrayBuffer]"&&(k=""+new Uint8Array(F)),y(S,k)||(S[k]=!0,d(A,N,M)))};return Promise.all([a.or._iterate(T,h),ld(sd(a,g,h),a.algorithm,T,!a.keysOnly&&a.valueMapper)])}return ld(sd(a,g,h),Br(a.algorithm,_),d,!a.keysOnly&&a.valueMapper)}function ld(a,d,h,g){var _=Te(g?function(S,T,A){return h(g(S),T,A)}:h);return a.then(function(S){if(S)return S.start(function(){var T=function(){return S.continue()};d&&!d(S,function(A){return T=A},function(A){S.stop(A),T=j},function(A){S.fail(A),T=j})||_(S.value,S,function(A){return T=A}),T()})})}var Jg=(be.prototype._read=function(a,d){var h=this._ctx;return h.error?h.table._trans(null,Qe.bind(null,h.error)):h.table._trans("readonly",a).then(d)},be.prototype._write=function(a){var d=this._ctx;return d.error?d.table._trans(null,Qe.bind(null,d.error)):d.table._trans("readwrite",a,"locked")},be.prototype._addAlgorithm=function(a){var d=this._ctx;d.algorithm=Br(d.algorithm,a)},be.prototype._iterate=function(a,d){return as(this._ctx,a,d,this._ctx.table.core)},be.prototype.clone=function(a){var d=Object.create(this.constructor.prototype),h=Object.create(this._ctx);return a&&f(h,a),d._ctx=h,d},be.prototype.raw=function(){return this._ctx.valueMapper=null,this},be.prototype.each=function(a){var d=this._ctx;return this._read(function(h){return as(d,a,h,d.table.core)})},be.prototype.count=function(a){var d=this;return this._read(function(h){var g=d._ctx,_=g.table.core;if(co(g,!0))return _.count({trans:h,query:{index:ls(g,_.schema),range:g.range}}).then(function(T){return Math.min(T,g.limit)});var S=0;return as(g,function(){return++S,!1},h,_).then(function(){return S})}).then(a)},be.prototype.sortBy=function(a,d){var h=a.split(".").reverse(),g=h[0],_=h.length-1;function S(N,M){return M?S(N[h[M]],M-1):N[g]}var T=this._ctx.dir==="next"?1:-1;function A(N,M){return Fe(S(N,_),S(M,_))*T}return this.toArray(function(N){return N.sort(A)}).then(d)},be.prototype.toArray=function(a){var d=this;return this._read(function(h){var g=d._ctx;if(g.dir==="next"&&co(g,!0)&&0<g.limit){var _=g.valueMapper,S=ls(g,g.table.core.schema);return g.table.core.query({trans:h,limit:g.limit,values:!0,query:{index:S,range:g.range}}).then(function(A){return A=A.result,_?A.map(_):A})}var T=[];return as(g,function(A){return T.push(A)},h,g.table.core).then(function(){return T})},a)},be.prototype.offset=function(a){var d=this._ctx;return a<=0||(d.offset+=a,co(d)?ea(d,function(){var h=a;return function(g,_){return h===0||(h===1?--h:_(function(){g.advance(h),h=0}),!1)}}):ea(d,function(){var h=a;return function(){return--h<0}})),this},be.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),ea(this._ctx,function(){var d=a;return function(h,g,_){return--d<=0&&g(_),0<=d}},!0),this},be.prototype.until=function(a,d){return jl(this._ctx,function(h,g,_){return!a(h.value)||(g(_),d)}),this},be.prototype.first=function(a){return this.limit(1).toArray(function(d){return d[0]}).then(a)},be.prototype.last=function(a){return this.reverse().first(a)},be.prototype.filter=function(a){var d;return jl(this._ctx,function(h){return a(h.value)}),(d=this._ctx).isMatch=Br(d.isMatch,a),this},be.prototype.and=function(a){return this.filter(a)},be.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},be.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},be.prototype.desc=function(){return this.reverse()},be.prototype.eachKey=function(a){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(h,g){a(g.key,g)})},be.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},be.prototype.eachPrimaryKey=function(a){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(h,g){a(g.primaryKey,g)})},be.prototype.keys=function(a){var d=this._ctx;d.keysOnly=!d.isMatch;var h=[];return this.each(function(g,_){h.push(_.key)}).then(function(){return h}).then(a)},be.prototype.primaryKeys=function(a){var d=this._ctx;if(d.dir==="next"&&co(d,!0)&&0<d.limit)return this._read(function(g){var _=ls(d,d.table.core.schema);return d.table.core.query({trans:g,values:!1,limit:d.limit,query:{index:_,range:d.range}})}).then(function(g){return g.result}).then(a);d.keysOnly=!d.isMatch;var h=[];return this.each(function(g,_){h.push(_.primaryKey)}).then(function(){return h}).then(a)},be.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},be.prototype.firstKey=function(a){return this.limit(1).keys(function(d){return d[0]}).then(a)},be.prototype.lastKey=function(a){return this.reverse().firstKey(a)},be.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var d={};return jl(this._ctx,function(_){var g=_.primaryKey.toString(),_=y(d,g);return d[g]=!0,!_}),this},be.prototype.modify=function(a){var d=this,h=this._ctx;return this._write(function(g){var _=typeof a=="function"?a:function(L){return od(L,a)},S=h.table.core,M=S.schema.primaryKey,T=M.outbound,A=M.extractKey,N=200,M=d.db._options.modifyChunkSize;M&&(N=typeof M=="object"?M[S.name]||M["*"]||200:M);function F(L,b){var G=b.failures,b=b.numFailures;q+=L-b;for(var K=0,W=s(G);K<W.length;K++){var ne=W[K];k.push(G[ne])}}var k=[],q=0,R=[],D=a===ad;return d.clone().primaryKeys().then(function(L){function V(b){var K=Math.min(N,L.length-b),W=L.slice(b,b+K);return(D?Promise.resolve([]):S.getMany({trans:g,keys:W,cache:"immutable"})).then(function(ne){var se=[],Z=[],re=T?[]:null,le=D?W:[];if(!D)for(var ie=0;ie<K;++ie){var pe=ne[ie],Pe={value:Me(pe),primKey:L[b+ie]};_.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?le.push(L[b+ie]):T||Fe(A(pe),A(Pe.value))===0?(Z.push(Pe.value),T&&re.push(L[b+ie])):(le.push(L[b+ie]),se.push(Pe.value)))}return Promise.resolve(0<se.length&&S.mutate({trans:g,type:"add",values:se}).then(function(Ne){for(var De in Ne.failures)le.splice(parseInt(De),1);F(se.length,Ne)})).then(function(){return(0<Z.length||G&&typeof a=="object")&&S.mutate({trans:g,type:"put",keys:re,values:Z,criteria:G,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<b}).then(function(Ne){return F(Z.length,Ne)})}).then(function(){return(0<le.length||G&&D)&&S.mutate({trans:g,type:"delete",keys:le,criteria:G,isAdditionalChunk:0<b}).then(function(Ne){return ss(h.table,le,Ne)}).then(function(Ne){return F(le.length,Ne)})}).then(function(){return L.length>b+K&&V(b+N)})})}var G=co(h)&&h.limit===1/0&&(typeof a!="function"||D)&&{index:h.index,range:h.range};return V(0).then(function(){if(0<k.length)throw new Hn("Error modifying one or more objects",k,q,R);return L.length})})})},be.prototype.delete=function(){var a=this._ctx,d=a.range;return!co(a)||a.table.schema.yProps||!a.isPrimKey&&d.type!==3?this.modify(ad):this._write(function(h){var g=a.table.core.schema.primaryKey,_=d;return a.table.core.count({trans:h,query:{index:g,range:_}}).then(function(S){return a.table.core.mutate({trans:h,type:"deleteRange",range:_}).then(function(N){var A=N.failures,N=N.numFailures;if(N)throw new Hn("Could not delete some values",Object.keys(A).map(function(M){return A[M]}),S-N);return S-N})})})},be);function be(){}var ad=function(a,d){return d.value=null};function Wg(a,d){return a<d?-1:a===d?0:1}function Yg(a,d){return d<a?-1:a===d?0:1}function rt(a,d,h){return a=a instanceof cd?new a.Collection(a):a,a._ctx.error=new(h||TypeError)(d),a}function fo(a){return new a.Collection(a,function(){return ud("")}).limit(0)}function us(a,d,h,g){var _,S,T,A,N,M,F,k=h.length;if(!h.every(function(D){return typeof D=="string"}))return rt(a,Vr);function q(D){_=D==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},S=D==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},T=D==="next"?Wg:Yg;var L=h.map(function(V){return{lower:S(V),upper:_(V)}}).sort(function(V,G){return T(V.lower,G.lower)});A=L.map(function(V){return V.upper}),N=L.map(function(V){return V.lower}),F=(M=D)==="next"?"":g}q("next"),a=new a.Collection(a,function(){return lr(A[0],N[k-1]+g)}),a._ondirectionchange=function(D){q(D)};var R=0;return a._addAlgorithm(function(D,L,V){var G=D.key;if(typeof G!="string")return!1;var b=S(G);if(d(b,N,R))return!0;for(var K=null,W=R;W<k;++W){var ne=function(se,Z,re,le,ie,pe){for(var Pe=Math.min(se.length,le.length),Ne=-1,De=0;De<Pe;++De){var ot=Z[De];if(ot!==le[De])return ie(se[De],re[De])<0?se.substr(0,De)+re[De]+re.substr(De+1):ie(se[De],le[De])<0?se.substr(0,De)+le[De]+re.substr(De+1):0<=Ne?se.substr(0,Ne)+Z[Ne]+re.substr(Ne+1):null;ie(se[De],ot)<0&&(Ne=De)}return Pe<le.length&&pe==="next"?se+re.substr(se.length):Pe<se.length&&pe==="prev"?se.substr(0,re.length):Ne<0?null:se.substr(0,Ne)+le[Ne]+re.substr(Ne+1)}(G,b,A[W],N[W],T,M);ne===null&&K===null?R=W+1:(K===null||0<T(K,ne))&&(K=ne)}return L(K!==null?function(){D.continue(K+F)}:V),!1}),a}function lr(a,d,h,g){return{type:2,lower:a,upper:d,lowerOpen:h,upperOpen:g}}function ud(a){return{type:1,lower:a,upper:a}}var cd=(Object.defineProperty(Tn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Tn.prototype.between=function(a,d,h,g){h=h!==!1,g=g===!0;try{return 0<this._cmp(a,d)||this._cmp(a,d)===0&&(h||g)&&(!h||!g)?fo(this):new this.Collection(this,function(){return lr(a,d,!h,!g)})}catch{return rt(this,Wn)}},Tn.prototype.equals=function(a){return a==null?rt(this,Wn):new this.Collection(this,function(){return ud(a)})},Tn.prototype.above=function(a){return a==null?rt(this,Wn):new this.Collection(this,function(){return lr(a,void 0,!0)})},Tn.prototype.aboveOrEqual=function(a){return a==null?rt(this,Wn):new this.Collection(this,function(){return lr(a,void 0,!1)})},Tn.prototype.below=function(a){return a==null?rt(this,Wn):new this.Collection(this,function(){return lr(void 0,a,!1,!0)})},Tn.prototype.belowOrEqual=function(a){return a==null?rt(this,Wn):new this.Collection(this,function(){return lr(void 0,a)})},Tn.prototype.startsWith=function(a){return typeof a!="string"?rt(this,Vr):this.between(a,a+Rt,!0,!0)},Tn.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):us(this,function(d,h){return d.indexOf(h[0])===0},[a],Rt)},Tn.prototype.equalsIgnoreCase=function(a){return us(this,function(d,h){return d===h[0]},[a],"")},Tn.prototype.anyOfIgnoreCase=function(){var a=ge.apply(Ee,arguments);return a.length===0?fo(this):us(this,function(d,h){return h.indexOf(d)!==-1},a,"")},Tn.prototype.startsWithAnyOfIgnoreCase=function(){var a=ge.apply(Ee,arguments);return a.length===0?fo(this):us(this,function(d,h){return h.some(function(g){return d.indexOf(g)===0})},a,Rt)},Tn.prototype.anyOf=function(){var a=this,d=ge.apply(Ee,arguments),h=this._cmp;try{d.sort(h)}catch{return rt(this,Wn)}if(d.length===0)return fo(this);var g=new this.Collection(this,function(){return lr(d[0],d[d.length-1])});g._ondirectionchange=function(S){h=S==="next"?a._ascending:a._descending,d.sort(h)};var _=0;return g._addAlgorithm(function(S,T,A){for(var N=S.key;0<h(N,d[_]);)if(++_===d.length)return T(A),!1;return h(N,d[_])===0||(T(function(){S.continue(d[_])}),!1)}),g},Tn.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Tn.prototype.noneOf=function(){var a=ge.apply(Ee,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return rt(this,Wn)}var d=a.reduce(function(h,g){return h?h.concat([[h[h.length-1][1],g]]):[[-1/0,g]]},null);return d.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},Tn.prototype.inAnyRange=function(G,d){var h=this,g=this._cmp,_=this._ascending,S=this._descending,T=this._min,A=this._max;if(G.length===0)return fo(this);if(!G.every(function(b){return b[0]!==void 0&&b[1]!==void 0&&_(b[0],b[1])<=0}))return rt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);var N=!d||d.includeLowers!==!1,M=d&&d.includeUppers===!0,F,k=_;function q(b,K){return k(b[0],K[0])}try{(F=G.reduce(function(b,K){for(var W=0,ne=b.length;W<ne;++W){var se=b[W];if(g(K[0],se[1])<0&&0<g(K[1],se[0])){se[0]=T(se[0],K[0]),se[1]=A(se[1],K[1]);break}}return W===ne&&b.push(K),b},[])).sort(q)}catch{return rt(this,Wn)}var R=0,D=M?function(b){return 0<_(b,F[R][1])}:function(b){return 0<=_(b,F[R][1])},L=N?function(b){return 0<S(b,F[R][0])}:function(b){return 0<=S(b,F[R][0])},V=D,G=new this.Collection(this,function(){return lr(F[0][0],F[F.length-1][1],!N,!M)});return G._ondirectionchange=function(b){k=b==="next"?(V=D,_):(V=L,S),F.sort(q)},G._addAlgorithm(function(b,K,W){for(var ne,se=b.key;V(se);)if(++R===F.length)return K(W),!1;return!D(ne=se)&&!L(ne)||(h._cmp(se,F[R][1])===0||h._cmp(se,F[R][0])===0||K(function(){k===_?b.continue(F[R][0]):b.continue(F[R][1])}),!1)}),G},Tn.prototype.startsWithAnyOf=function(){var a=ge.apply(Ee,arguments);return a.every(function(d){return typeof d=="string"})?a.length===0?fo(this):this.inAnyRange(a.map(function(d){return[d,d+Rt]})):rt(this,"startsWithAnyOf() only works with strings")},Tn);function Tn(){}function Dt(a){return Te(function(d){return oi(d),a(d.target.error),!1})}function oi(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var ii="storagemutated",na="x-storagemutated-1",ar=ti(null,ii),Qg=(Lt.prototype._lock=function(){return H(!ve.global),++this._reculock,this._reculock!==1||ve.global||(ve.lockOwnerFor=this),this},Lt.prototype._unlock=function(){if(H(!ve.global),--this._reculock==0)for(ve.global||(ve.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{Mn(a[1],a[0])}catch{}}return this},Lt.prototype._locked=function(){return this._reculock&&ve.lockOwnerFor!==this},Lt.prototype.create=function(a){var d=this;if(!this.mode)return this;var h=this.db.idbdb,g=this.db._state.dbOpenError;if(H(!this.idbtrans),!a&&!h)switch(g&&g.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(g);case"MissingAPIError":throw new Se.MissingAPI(g.message,g);default:throw new Se.OpenFailed(g)}if(!this.active)throw new Se.TransactionInactive;return H(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||h).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Te(function(_){oi(_),d._reject(a.error)}),a.onabort=Te(function(_){oi(_),d.active&&d._reject(new Se.Abort(a.error)),d.active=!1,d.on("abort").fire(_)}),a.oncomplete=Te(function(){d.active=!1,d._resolve(),"mutatedParts"in a&&ar.storagemutated.fire(a.mutatedParts)}),this},Lt.prototype._promise=function(a,d,h){var g=this;if(a==="readwrite"&&this.mode!=="readwrite")return Qe(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return Qe(new Se.TransactionInactive);if(this._locked())return new P(function(S,T){g._blockedFuncs.push([function(){g._promise(a,d,h).then(S,T)},ve])});if(h)return Je(function(){var S=new P(function(T,A){g._lock();var N=d(T,A,g);N&&N.then&&N.then(T,A)});return S.finally(function(){return g._unlock()}),S._lib=!0,S});var _=new P(function(S,T){var A=d(S,T,g);A&&A.then&&A.then(S,T)});return _._lib=!0,_},Lt.prototype._root=function(){return this.parent?this.parent._root():this},Lt.prototype.waitFor=function(a){var d,h=this._root(),g=P.resolve(a);h._waitingFor?h._waitingFor=h._waitingFor.then(function(){return g}):(h._waitingFor=g,h._waitingQueue=[],d=h.idbtrans.objectStore(h.storeNames[0]),function S(){for(++h._spinCount;h._waitingQueue.length;)h._waitingQueue.shift()();h._waitingFor&&(d.get(-1/0).onsuccess=S)}());var _=h._waitingFor;return new P(function(S,T){g.then(function(A){return h._waitingQueue.push(Te(S.bind(null,A)))},function(A){return h._waitingQueue.push(Te(T.bind(null,A)))}).finally(function(){h._waitingFor===_&&(h._waitingFor=null)})})},Lt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))},Lt.prototype.table=function(a){var d=this._memoizedTables||(this._memoizedTables={});if(y(d,a))return d[a];var h=this.schema[a];if(!h)throw new Se.NotFound("Table "+a+" not part of transaction");return h=new this.db.Table(a,h,this),h.core=this.db.core.table(a),d[a]=h},Lt);function Lt(){}function ta(a,d,h,g,_,S,T,A){return{name:a,keyPath:d,unique:h,multi:g,auto:_,compound:S,src:(h&&!T?"&":"")+(g?"*":"")+(_?"++":"")+dd(d),type:A}}function dd(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function ra(a,d,h){return{name:a,primKey:d,indexes:h,mappedClass:null,idxByName:(g=function(_){return[_.name,_]},h.reduce(function(_,S,T){return T=g(S,T),T&&(_[T[0]]=T[1]),_},{}))};var g}var si=function(a){try{return a.only([[]]),si=function(){return[[]]},[[]]}catch{return si=function(){return Rt},Rt}};function oa(a){return a==null?function(){}:typeof a=="string"?(d=a).split(".").length===1?function(h){return h[d]}:function(h){return O(h,d)}:function(h){return O(h,a)};var d}function fd(a){return[].slice.call(a)}var Xg=0;function li(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function Zg(a,d,N){function g(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=V.lower,D=V.upper,L=V.lowerOpen,V=V.upperOpen;return R===void 0?D===void 0?null:d.upperBound(D,!!V):D===void 0?d.lowerBound(R,!!L):d.bound(R,D,!!L,!!V)}function _(q){var R,D=q.name;return{name:D,schema:q,mutate:function(L){var V=L.trans,G=L.type,b=L.keys,K=L.values,W=L.range;return new Promise(function(ne,se){ne=Te(ne);var Z=V.objectStore(D),re=Z.keyPath==null,le=G==="put"||G==="add";if(!le&&G!=="delete"&&G!=="deleteRange")throw new Error("Invalid operation type: "+G);var ie,pe=(b||K||{length:1}).length;if(b&&K&&b.length!==K.length)throw new Error("Given keys array must have same length as given values array.");if(pe===0)return ne({numFailures:0,failures:{},results:[],lastResult:void 0});function Pe(bn){++ot,oi(bn)}var Ne=[],De=[],ot=0;if(G==="deleteRange"){if(W.type===4)return ne({numFailures:ot,failures:De,results:[],lastResult:void 0});W.type===3?Ne.push(ie=Z.clear()):Ne.push(ie=Z.delete(g(W)))}else{var re=le?re?[K,b]:[K,null]:[b,null],Ae=re[0],Dn=re[1];if(le)for(var Ln=0;Ln<pe;++Ln)Ne.push(ie=Dn&&Dn[Ln]!==void 0?Z[G](Ae[Ln],Dn[Ln]):Z[G](Ae[Ln])),ie.onerror=Pe;else for(Ln=0;Ln<pe;++Ln)Ne.push(ie=Z[G](Ae[Ln])),ie.onerror=Pe}function Ss(bn){bn=bn.target.result,Ne.forEach(function(Gr,Ta){return Gr.error!=null&&(De[Ta]=Gr.error)}),ne({numFailures:ot,failures:De,results:G==="delete"?b:Ne.map(function(Gr){return Gr.result}),lastResult:bn})}ie.onerror=function(bn){Pe(bn),Ss(bn)},ie.onsuccess=Ss})},getMany:function(L){var V=L.trans,G=L.keys;return new Promise(function(b,K){b=Te(b);for(var W,ne=V.objectStore(D),se=G.length,Z=new Array(se),re=0,le=0,ie=function(Ne){Ne=Ne.target,Z[Ne._pos]=Ne.result,++le===re&&b(Z)},pe=Dt(K),Pe=0;Pe<se;++Pe)G[Pe]!=null&&((W=ne.get(G[Pe]))._pos=Pe,W.onsuccess=ie,W.onerror=pe,++re);re===0&&b(Z)})},get:function(L){var V=L.trans,G=L.key;return new Promise(function(b,K){b=Te(b);var W=V.objectStore(D).get(G);W.onsuccess=function(ne){return b(ne.target.result)},W.onerror=Dt(K)})},query:(R=M,function(L){return new Promise(function(V,G){V=Te(V);var b,K,W,re=L.trans,ne=L.values,se=L.limit,ie=L.query,Z=se===1/0?void 0:se,le=ie.index,ie=ie.range,re=re.objectStore(D),le=le.isPrimaryKey?re:re.index(le.name),ie=g(ie);if(se===0)return V({result:[]});R?((Z=ne?le.getAll(ie,Z):le.getAllKeys(ie,Z)).onsuccess=function(pe){return V({result:pe.target.result})},Z.onerror=Dt(G)):(b=0,K=!ne&&"openKeyCursor"in le?le.openKeyCursor(ie):le.openCursor(ie),W=[],K.onsuccess=function(pe){var Pe=K.result;return Pe?(W.push(ne?Pe.value:Pe.primaryKey),++b===se?V({result:W}):void Pe.continue()):V({result:W})},K.onerror=Dt(G))})}),openCursor:function(L){var V=L.trans,G=L.values,b=L.query,K=L.reverse,W=L.unique;return new Promise(function(ne,se){ne=Te(ne);var le=b.index,Z=b.range,re=V.objectStore(D),re=le.isPrimaryKey?re:re.index(le.name),le=K?W?"prevunique":"prev":W?"nextunique":"next",ie=!G&&"openKeyCursor"in re?re.openKeyCursor(g(Z),le):re.openCursor(g(Z),le);ie.onerror=Dt(se),ie.onsuccess=Te(function(pe){var Pe,Ne,De,ot,Ae=ie.result;Ae?(Ae.___id=++Xg,Ae.done=!1,Pe=Ae.continue.bind(Ae),Ne=(Ne=Ae.continuePrimaryKey)&&Ne.bind(Ae),De=Ae.advance.bind(Ae),ot=function(){throw new Error("Cursor not stopped")},Ae.trans=V,Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=function(){throw new Error("Cursor not started")},Ae.fail=Te(se),Ae.next=function(){var Dn=this,Ln=1;return this.start(function(){return Ln--?Dn.continue():Dn.stop()}).then(function(){return Dn})},Ae.start=function(Dn){function Ln(){if(ie.result)try{Dn()}catch(bn){Ae.fail(bn)}else Ae.done=!0,Ae.start=function(){throw new Error("Cursor behind last entry")},Ae.stop()}var Ss=new Promise(function(bn,Gr){bn=Te(bn),ie.onerror=Dt(Gr),Ae.fail=Gr,Ae.stop=function(Ta){Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=ot,bn(Ta)}});return ie.onsuccess=Te(function(bn){ie.onsuccess=Ln,Ln()}),Ae.continue=Pe,Ae.continuePrimaryKey=Ne,Ae.advance=De,Ln(),Ss},ne(Ae)):ne(null)},se)})},count:function(L){var V=L.query,G=L.trans,b=V.index,K=V.range;return new Promise(function(W,ne){var se=G.objectStore(D),Z=b.isPrimaryKey?se:se.index(b.name),se=g(K),Z=se?Z.count(se):Z.count();Z.onsuccess=Te(function(re){return W(re.target.result)}),Z.onerror=Dt(ne)})}}}var S,T,A,F=(T=N,A=fd((S=a).objectStoreNames),{schema:{name:S.name,tables:A.map(function(q){return T.objectStore(q)}).map(function(q){var R=q.keyPath,V=q.autoIncrement,D=c(R),L={},V={name:q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:R==null,compound:D,keyPath:R,autoIncrement:V,unique:!0,extractKey:oa(R)},indexes:fd(q.indexNames).map(function(G){return q.index(G)}).map(function(W){var b=W.name,K=W.unique,ne=W.multiEntry,W=W.keyPath,ne={name:b,compound:c(W),keyPath:W,unique:K,multiEntry:ne,extractKey:oa(W)};return L[li(W)]=ne}),getIndexByKeyPath:function(G){return L[li(G)]}};return L[":id"]=V.primaryKey,R!=null&&(L[li(R)]=V.primaryKey),V})},hasGetAll:0<A.length&&"getAll"in T.objectStore(A[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),N=F.schema,M=F.hasGetAll,F=N.tables.map(_),k={};return F.forEach(function(q){return k[q.name]=q}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(q){if(!k[q])throw new Error("Table '".concat(q,"' not found"));return k[q]},MIN_KEY:-1/0,MAX_KEY:si(d),schema:N}}function jg(a,d,h,g){var _=h.IDBKeyRange;return h.indexedDB,{dbcore:(g=Zg(d,_,g),a.dbcore.reduce(function(S,T){return T=T.create,r(r({},S),T(S))},g))}}function cs(a,g){var h=g.db,g=jg(a._middlewares,h,a._deps,g);a.core=g.dbcore,a.tables.forEach(function(_){var S=_.name;a.core.schema.tables.some(function(T){return T.name===S})&&(_.core=a.core.table(S),a[S]instanceof a.Table&&(a[S].core=_.core))})}function ds(a,d,h,g){h.forEach(function(_){var S=g[_];d.forEach(function(T){var A=function N(M,F){return J(M,F)||(M=p(M))&&N(M,F)}(T,_);(!A||"value"in A&&A.value===void 0)&&(T===a.Transaction.prototype||T instanceof a.Transaction?U(T,_,{get:function(){return this.table(_)},set:function(N){x(this,_,{value:N,writable:!0,configurable:!0,enumerable:!0})}}):T[_]=new a.Table(_,S))})})}function ia(a,d){d.forEach(function(h){for(var g in h)h[g]instanceof a.Table&&delete h[g]})}function ey(a,d){return a._cfg.version-d._cfg.version}function ny(a,d,h,g){var _=a._dbSchema;h.objectStoreNames.contains("$meta")&&!_.$meta&&(_.$meta=ra("$meta",hd("")[0],[]),a._storeNames.push("$meta"));var S=a._createTransaction("readwrite",a._storeNames,_);S.create(h),S._completion.catch(g);var T=S._reject.bind(S),A=ve.transless||ve;Je(function(){return ve.trans=S,ve.transless=A,d!==0?(cs(a,h),M=d,((N=S).storeNames.includes("$meta")?N.table("$meta").get("version").then(function(F){return F??M}):P.resolve(M)).then(function(F){return q=F,R=S,D=h,L=[],F=(k=a)._versions,V=k._dbSchema=ps(0,k.idbdb,D),(F=F.filter(function(G){return G._cfg.version>=q})).length!==0?(F.forEach(function(G){L.push(function(){var b=V,K=G._cfg.dbschema;hs(k,b,D),hs(k,K,D),V=k._dbSchema=K;var W=sa(b,K);W.add.forEach(function(le){la(D,le[0],le[1].primKey,le[1].indexes)}),W.change.forEach(function(le){if(le.recreate)throw new Se.Upgrade("Not yet support for changing primary key");var ie=D.objectStore(le.name);le.add.forEach(function(pe){return fs(ie,pe)}),le.change.forEach(function(pe){ie.deleteIndex(pe.name),fs(ie,pe)}),le.del.forEach(function(pe){return ie.deleteIndex(pe)})});var ne=G._cfg.contentUpgrade;if(ne&&G._cfg.version>q){cs(k,D),R._memoizedTables={};var se=te(K);W.del.forEach(function(le){se[le]=b[le]}),ia(k,[k.Transaction.prototype]),ds(k,[k.Transaction.prototype],s(se),se),R.schema=se;var Z,re=Be(ne);return re&&pn(),W=P.follow(function(){var le;(Z=ne(R))&&re&&(le=vn.bind(null,null),Z.then(le,le))}),Z&&typeof Z.then=="function"?P.resolve(Z):W.then(function(){return Z})}}),L.push(function(b){var K,W,ne=G._cfg.dbschema;K=ne,W=b,[].slice.call(W.db.objectStoreNames).forEach(function(se){return K[se]==null&&W.db.deleteObjectStore(se)}),ia(k,[k.Transaction.prototype]),ds(k,[k.Transaction.prototype],k._storeNames,k._dbSchema),R.schema=k._dbSchema}),L.push(function(b){k.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(k.idbdb.version/10)===G._cfg.version?(k.idbdb.deleteObjectStore("$meta"),delete k._dbSchema.$meta,k._storeNames=k._storeNames.filter(function(K){return K!=="$meta"})):b.objectStore("$meta").put(G._cfg.version,"version"))})}),function G(){return L.length?P.resolve(L.shift()(R.idbtrans)).then(G):P.resolve()}().then(function(){pd(V,D)})):P.resolve();var k,q,R,D,L,V}).catch(T)):(s(_).forEach(function(F){la(h,F,_[F].primKey,_[F].indexes)}),cs(a,h),void P.follow(function(){return a.on.populate.fire(S)}).catch(T));var N,M})}function ty(a,d){pd(a._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var h=ps(0,a.idbdb,d);hs(a,a._dbSchema,d);for(var g=0,_=sa(h,a._dbSchema).change;g<_.length;g++){var S=function(T){if(T.change.length||T.recreate)return console.warn("Unable to patch indexes of table ".concat(T.name," because it has changes on the type of index or primary key.")),{value:void 0};var A=d.objectStore(T.name);T.add.forEach(function(N){ft&&console.debug("Dexie upgrade patch: Creating missing index ".concat(T.name,".").concat(N.src)),fs(A,N)})}(_[g]);if(typeof S=="object")return S.value}}function sa(a,d){var h,g={del:[],add:[],change:[]};for(h in a)d[h]||g.del.push(h);for(h in d){var _=a[h],S=d[h];if(_){var T={name:h,def:S,recreate:!1,del:[],add:[],change:[]};if(""+(_.primKey.keyPath||"")!=""+(S.primKey.keyPath||"")||_.primKey.auto!==S.primKey.auto)T.recreate=!0,g.change.push(T);else{var A=_.idxByName,N=S.idxByName,M=void 0;for(M in A)N[M]||T.del.push(M);for(M in N){var F=A[M],k=N[M];F?F.src!==k.src&&T.change.push(k):T.add.push(k)}(0<T.del.length||0<T.add.length||0<T.change.length)&&g.change.push(T)}}else g.add.push([h,S])}return g}function la(a,d,h,g){var _=a.db.createObjectStore(d,h.keyPath?{keyPath:h.keyPath,autoIncrement:h.auto}:{autoIncrement:h.auto});return g.forEach(function(S){return fs(_,S)}),_}function pd(a,d){s(a).forEach(function(h){d.db.objectStoreNames.contains(h)||(ft&&console.debug("Dexie: Creating missing table",h),la(d,h,a[h].primKey,a[h].indexes))})}function fs(a,d){a.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function ps(a,d,h){var g={};return E(d.objectStoreNames,0).forEach(function(_){for(var S=h.objectStore(_),T=ta(dd(M=S.keyPath),M||"",!0,!1,!!S.autoIncrement,M&&typeof M!="string",!0),A=[],N=0;N<S.indexNames.length;++N){var F=S.index(S.indexNames[N]),M=F.keyPath,F=ta(F.name,M,!!F.unique,!!F.multiEntry,!1,M&&typeof M!="string",!1);A.push(F)}g[_]=ra(_,T,A)}),g}function hs(a,d,h){for(var g=h.db.objectStoreNames,_=0;_<g.length;++_){var S=g[_],T=h.objectStore(S);a._hasGetAll="getAll"in T;for(var A=0;A<T.indexNames.length;++A){var N=T.indexNames[A],M=T.index(N).keyPath,F=typeof M=="string"?M:"["+E(M).join("+")+"]";!d[S]||(M=d[S].idxByName[F])&&(M.name=N,delete d[S].idxByName[F],d[S].idxByName[N]=M)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function hd(a){return a.split(",").map(function(d,h){var S=d.split(":"),g=(_=S[1])===null||_===void 0?void 0:_.trim(),_=(d=S[0].trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(_)?_.match(/^\[(.*)\]$/)[1].split("+"):_;return ta(_,S||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),c(S),h===0,g)})}var ry=(po.prototype._createTableSchema=ra,po.prototype._parseIndexSyntax=hd,po.prototype._parseStoresSpec=function(a,d){var h=this;s(a).forEach(function(g){if(a[g]!==null){var _=h._parseIndexSyntax(a[g]),S=_.shift();if(!S)throw new Se.Schema("Invalid schema for table "+g+": "+a[g]);if(S.unique=!0,S.multi)throw new Se.Schema("Primary key cannot be multiEntry*");_.forEach(function(T){if(T.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!T.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),_=h._createTableSchema(g,S,_),d[g]=_}})},po.prototype.stores=function(h){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,h):h;var h=d._versions,g={},_={};return h.forEach(function(S){f(g,S._cfg.storesSource),_=S._cfg.dbschema={},S._parseStoresSpec(g,_)}),d._dbSchema=_,ia(d,[d._allTables,d,d.Transaction.prototype]),ds(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],s(_),_),d._storeNames=s(_),this},po.prototype.upgrade=function(a){return this._cfg.contentUpgrade=Rr(this._cfg.contentUpgrade||j,a),this},po);function po(){}function aa(a,d){var h=a._dbNamesDB;return h||(h=a._dbNamesDB=new Kt(os,{addons:[],indexedDB:a,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),h.table("dbnames")}function ua(a){return a&&typeof a.databases=="function"}function ca(a){return Je(function(){return ve.letThrough=!0,a()})}function da(a){return!("from"in a)}var Rn=function(a,d){if(!this){var h=new Rn;return a&&"d"in a&&f(h,a),h}f(this,arguments.length?{d:1,from:a,to:1<arguments.length?d:a}:{d:0})};function ai(a,d,h){var g=Fe(d,h);if(!isNaN(g)){if(0<g)throw RangeError();if(da(a))return f(a,{from:d,to:h,d:1});var _=a.l,g=a.r;if(Fe(h,a.from)<0)return _?ai(_,d,h):a.l={from:d,to:h,d:1,l:null,r:null},gd(a);if(0<Fe(d,a.to))return g?ai(g,d,h):a.r={from:d,to:h,d:1,l:null,r:null},gd(a);Fe(d,a.from)<0&&(a.from=d,a.l=null,a.d=g?g.d+1:1),0<Fe(h,a.to)&&(a.to=h,a.r=null,a.d=a.l?a.l.d+1:1),h=!a.r,_&&!a.l&&ui(a,_),g&&h&&ui(a,g)}}function ui(a,d){da(d)||function h(g,N){var S=N.from,T=N.to,A=N.l,N=N.r;ai(g,S,T),A&&h(g,A),N&&h(g,N)}(a,d)}function md(a,d){var h=ms(d),g=h.next();if(g.done)return!1;for(var _=g.value,S=ms(a),T=S.next(_.from),A=T.value;!g.done&&!T.done;){if(Fe(A.from,_.to)<=0&&0<=Fe(A.to,_.from))return!0;Fe(_.from,A.from)<0?_=(g=h.next(A.from)).value:A=(T=S.next(_.from)).value}return!1}function ms(a){var d=da(a)?null:{s:0,n:a};return{next:function(h){for(var g=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,g)for(;d.n.l&&Fe(h,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!g||Fe(h,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function gd(a){var d,h,g=(((d=a.r)===null||d===void 0?void 0:d.d)||0)-(((h=a.l)===null||h===void 0?void 0:h.d)||0),_=1<g?"r":g<-1?"l":"";_&&(d=_=="r"?"l":"r",h=r({},a),g=a[_],a.from=g.from,a.to=g.to,a[_]=g[_],h[_]=g[d],(a[d]=h).d=yd(h)),a.d=yd(a)}function yd(h){var d=h.r,h=h.l;return(d?h?Math.max(d.d,h.d):d.d:h?h.d:0)+1}function gs(a,d){return s(d).forEach(function(h){a[h]?ui(a[h],d[h]):a[h]=function g(_){var S,T,A={};for(S in _)y(_,S)&&(T=_[S],A[S]=!T||typeof T!="object"||we.has(T.constructor)?T:g(T));return A}(d[h])}),a}function fa(a,d){return a.all||d.all||Object.keys(a).some(function(h){return d[h]&&md(d[h],a[h])})}v(Rn.prototype,((pt={add:function(a){return ui(this,a),this},addKey:function(a){return ai(this,a,a),this},addKeys:function(a){var d=this;return a.forEach(function(h){return ai(d,h,h)}),this},hasKey:function(a){var d=ms(this).next(a).value;return d&&Fe(d.from,a)<=0&&0<=Fe(d.to,a)}})[He]=function(){return ms(this)},pt));var qr={},pa={},ha=!1;function ys(a){gs(pa,a),ha||(ha=!0,setTimeout(function(){ha=!1,ma(pa,!(pa={}))},0))}function ma(a,d){d===void 0&&(d=!1);var h=new Set;if(a.all)for(var g=0,_=Object.values(qr);g<_.length;g++)vd(T=_[g],a,h,d);else for(var S in a){var T,A=/^idb\:\/\/(.*)\/(.*)\//.exec(S);A&&(S=A[1],A=A[2],(T=qr["idb://".concat(S,"/").concat(A)])&&vd(T,a,h,d))}h.forEach(function(N){return N()})}function vd(a,d,h,g){for(var _=[],S=0,T=Object.entries(a.queries.query);S<T.length;S++){for(var A=T[S],N=A[0],M=[],F=0,k=A[1];F<k.length;F++){var q=k[F];fa(d,q.obsSet)?q.subscribers.forEach(function(V){return h.add(V)}):g&&M.push(q)}g&&_.push([N,M])}if(g)for(var R=0,D=_;R<D.length;R++){var L=D[R],N=L[0],M=L[1];a.queries.query[N]=M}}function oy(a){var d=a._state,h=a._deps.indexedDB;if(d.isBeingOpened||a.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?Qe(d.dbOpenError):a});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var g=d.openCanceller,_=Math.round(10*a.verno),S=!1;function T(){if(d.openCanceller!==g)throw new Se.DatabaseClosed("db.open() was cancelled")}function A(){return new P(function(q,R){if(T(),!h)throw new Se.MissingAPI;var D=a.name,L=d.autoSchema||!_?h.open(D):h.open(D,_);if(!L)throw new Se.MissingAPI;L.onerror=Dt(R),L.onblocked=Te(a._fireOnBlocked),L.onupgradeneeded=Te(function(V){var G;F=L.transaction,d.autoSchema&&!a._options.allowEmptyDB?(L.onerror=oi,F.abort(),L.result.close(),(G=h.deleteDatabase(D)).onsuccess=G.onerror=Te(function(){R(new Se.NoSuchDatabase("Database ".concat(D," doesnt exist")))})):(F.onerror=Dt(R),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,k=V<1,a.idbdb=L.result,S&&ty(a,F),ny(a,V/10,F,R))},R),L.onsuccess=Te(function(){F=null;var V,G,b,K,W,ne=a.idbdb=L.result,se=E(ne.objectStoreNames);if(0<se.length)try{var Z=ne.transaction((K=se).length===1?K[0]:K,"readonly");if(d.autoSchema)G=ne,b=Z,(V=a).verno=G.version/10,b=V._dbSchema=ps(0,G,b),V._storeNames=E(G.objectStoreNames,0),ds(V,[V._allTables],s(b),b);else if(hs(a,a._dbSchema,Z),((W=sa(ps(0,(W=a).idbdb,Z),W._dbSchema)).add.length||W.change.some(function(re){return re.add.length||re.change.length}))&&!S)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ne.close(),_=ne.version+1,S=!0,q(A());cs(a,Z)}catch{}tt.push(a),ne.onversionchange=Te(function(re){d.vcFired=!0,a.on("versionchange").fire(re)}),ne.onclose=Te(function(){a.close({disableAutoOpen:!1})}),k&&(W=a._deps,Z=D,ne=W.indexedDB,W=W.IDBKeyRange,ua(ne)||Z===os||aa(ne,W).put({name:Z}).catch(j)),q()},R)}).catch(function(q){switch(q==null?void 0:q.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),A();break;case"VersionError":if(0<_)return _=0,A()}return P.reject(q)})}var N,M=d.dbReadyResolve,F=null,k=!1;return P.race([g,(typeof navigator>"u"?P.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function R(){return indexedDB.databases().finally(q)}N=setInterval(R,100),R()}).finally(function(){return clearInterval(N)}):Promise.resolve()).then(A)]).then(function(){return T(),d.onReadyBeingFired=[],P.resolve(ca(function(){return a.on.ready.fire(a.vip)})).then(function q(){if(0<d.onReadyBeingFired.length){var R=d.onReadyBeingFired.reduce(Rr,j);return d.onReadyBeingFired=[],P.resolve(ca(function(){return R(a.vip)})).then(q)}})}).finally(function(){d.openCanceller===g&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(q){d.dbOpenError=q;try{F&&F.abort()}catch{}return g===d.openCanceller&&a._close(),Qe(q)}).finally(function(){d.openComplete=!0,M()}).then(function(){var q;return k&&(q={},a.tables.forEach(function(R){R.schema.indexes.forEach(function(D){D.name&&(q["idb://".concat(a.name,"/").concat(R.name,"/").concat(D.name)]=new Rn(-1/0,[[[]]]))}),q["idb://".concat(a.name,"/").concat(R.name,"/")]=q["idb://".concat(a.name,"/").concat(R.name,"/:dels")]=new Rn(-1/0,[[[]]])}),ar(ii).fire(q),ma(q,!0)),a})}function ga(a){function d(S){return a.next(S)}var h=_(d),g=_(function(S){return a.throw(S)});function _(S){return function(N){var A=S(N),N=A.value;return A.done?N:N&&typeof N.then=="function"?N.then(h,g):c(N)?Promise.all(N).then(h,g):h(N)}}return _(d)()}function vs(a,d,h){for(var g=c(a)?a.slice():[a],_=0;_<h;++_)g.push(d);return g}var iy={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(d){var h=a.table(d),g=h.schema,_={},S=[];function T(k,q,R){var D=li(k),L=_[D]=_[D]||[],V=k==null?0:typeof k=="string"?1:k.length,G=0<q,G=r(r({},R),{name:G?"".concat(D,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:G,keyTail:q,keyLength:V,extractKey:oa(k),unique:!G&&R.unique});return L.push(G),G.isPrimaryKey||S.push(G),1<V&&T(V===2?k[0]:k.slice(0,V-1),q+1,R),L.sort(function(b,K){return b.keyTail-K.keyTail}),G}d=T(g.primaryKey.keyPath,0,g.primaryKey),_[":id"]=[d];for(var A=0,N=g.indexes;A<N.length;A++){var M=N[A];T(M.keyPath,0,M)}function F(k){var q,R=k.query.index;return R.isVirtual?r(r({},k),{query:{index:R.lowLevelIndex,range:(q=k.query.range,R=R.keyTail,{type:q.type===1?2:q.type,lower:vs(q.lower,q.lowerOpen?a.MAX_KEY:a.MIN_KEY,R),lowerOpen:!0,upper:vs(q.upper,q.upperOpen?a.MIN_KEY:a.MAX_KEY,R),upperOpen:!0})}}):k}return r(r({},h),{schema:r(r({},g),{primaryKey:d,indexes:S,getIndexByKeyPath:function(k){return(k=_[li(k)])&&k[0]}}),count:function(k){return h.count(F(k))},query:function(k){return h.query(F(k))},openCursor:function(k){var q=k.query.index,R=q.keyTail,D=q.isVirtual,L=q.keyLength;return D?h.openCursor(F(k)).then(function(G){return G&&V(G)}):h.openCursor(k);function V(G){return Object.create(G,{continue:{value:function(b){b!=null?G.continue(vs(b,k.reverse?a.MAX_KEY:a.MIN_KEY,R)):k.unique?G.continue(G.key.slice(0,L).concat(k.reverse?a.MIN_KEY:a.MAX_KEY,R)):G.continue()}},continuePrimaryKey:{value:function(b,K){G.continuePrimaryKey(vs(b,a.MAX_KEY,R),K)}},primaryKey:{get:function(){return G.primaryKey}},key:{get:function(){var b=G.key;return L===1?b[0]:b.slice(0,L)}},value:{get:function(){return G.value}}})}}})}})}};function ya(a,d,h,g){return h=h||{},g=g||"",s(a).forEach(function(_){var S,T,A;y(d,_)?(S=a[_],T=d[_],typeof S=="object"&&typeof T=="object"&&S&&T?(A=rn(S))!==rn(T)?h[g+_]=d[_]:A==="Object"?ya(S,T,h,g+_+"."):S!==T&&(h[g+_]=d[_]):S!==T&&(h[g+_]=d[_])):h[g+_]=void 0}),s(d).forEach(function(_){y(a,_)||(h[g+_]=d[_])}),h}function va(a,d){return d.type==="delete"?d.keys:d.keys||d.values.map(a.extractKey)}var sy={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(d){var h=a.table(d),g=h.schema.primaryKey;return r(r({},h),{mutate:function(_){var S=ve.trans,T=S.table(d).hook,A=T.deleting,N=T.creating,M=T.updating;switch(_.type){case"add":if(N.fire===j)break;return S._promise("readwrite",function(){return F(_)},!0);case"put":if(N.fire===j&&M.fire===j)break;return S._promise("readwrite",function(){return F(_)},!0);case"delete":if(A.fire===j)break;return S._promise("readwrite",function(){return F(_)},!0);case"deleteRange":if(A.fire===j)break;return S._promise("readwrite",function(){return function k(q,R,D){return h.query({trans:q,values:!1,query:{index:g,range:R},limit:D}).then(function(L){var V=L.result;return F({type:"delete",keys:V,trans:q}).then(function(G){return 0<G.numFailures?Promise.reject(G.failures[0]):V.length<D?{failures:[],numFailures:0,lastResult:void 0}:k(q,r(r({},R),{lower:V[V.length-1],lowerOpen:!0}),D)})})}(_.trans,_.range,1e4)},!0)}return h.mutate(_);function F(k){var q,R,D,L=ve.trans,V=k.keys||va(g,k);if(!V)throw new Error("Keys missing");return(k=k.type==="add"||k.type==="put"?r(r({},k),{keys:V}):r({},k)).type!=="delete"&&(k.values=o([],k.values)),k.keys&&(k.keys=o([],k.keys)),q=h,D=V,((R=k).type==="add"?Promise.resolve([]):q.getMany({trans:R.trans,keys:D,cache:"immutable"})).then(function(G){var b=V.map(function(K,W){var ne,se,Z,re=G[W],le={onerror:null,onsuccess:null};return k.type==="delete"?A.fire.call(le,K,re,L):k.type==="add"||re===void 0?(ne=N.fire.call(le,K,k.values[W],L),K==null&&ne!=null&&(k.keys[W]=K=ne,g.outbound||$(k.values[W],g.keyPath,K))):(ne=ya(re,k.values[W]),(se=M.fire.call(le,ne,K,re,L))&&(Z=k.values[W],Object.keys(se).forEach(function(ie){y(Z,ie)?Z[ie]=se[ie]:$(Z,ie,se[ie])}))),le});return h.mutate(k).then(function(K){for(var W=K.failures,ne=K.results,se=K.numFailures,K=K.lastResult,Z=0;Z<V.length;++Z){var re=(ne||V)[Z],le=b[Z];re==null?le.onerror&&le.onerror(W[Z]):le.onsuccess&&le.onsuccess(k.type==="put"&&G[Z]?k.values[Z]:re)}return{failures:W,results:ne,numFailures:se,lastResult:K}}).catch(function(K){return b.forEach(function(W){return W.onerror&&W.onerror(K)}),Promise.reject(K)})})}}})}})}};function _d(a,d,h){try{if(!d||d.keys.length<a.length)return null;for(var g=[],_=0,S=0;_<d.keys.length&&S<a.length;++_)Fe(d.keys[_],a[S])===0&&(g.push(h?Me(d.values[_]):d.values[_]),++S);return g.length===a.length?g:null}catch{return null}}var ly={stack:"dbcore",level:-1,create:function(a){return{table:function(d){var h=a.table(d);return r(r({},h),{getMany:function(g){if(!g.cache)return h.getMany(g);var _=_d(g.keys,g.trans._cache,g.cache==="clone");return _?P.resolve(_):h.getMany(g).then(function(S){return g.trans._cache={keys:g.keys,values:g.cache==="clone"?Me(S):S},S})},mutate:function(g){return g.type!=="add"&&(g.trans._cache=null),h.mutate(g)}})}}}};function Cd(a,d){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function Sd(a,d){switch(a){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ay={stack:"dbcore",level:0,name:"Observability",create:function(a){var d=a.schema.name,h=new Rn(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(g,_,S){if(ve.subscr&&_!=="readonly")throw new Se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ve.querier));return a.transaction(g,_,S)},table:function(g){var _=a.table(g),S=_.schema,T=S.primaryKey,k=S.indexes,A=T.extractKey,N=T.outbound,M=T.autoIncrement&&k.filter(function(R){return R.compound&&R.keyPath.includes(T.keyPath)}),F=r(r({},_),{mutate:function(R){function D(ie){return ie="idb://".concat(d,"/").concat(g,"/").concat(ie),K[ie]||(K[ie]=new Rn)}var L,V,G,b=R.trans,K=R.mutatedParts||(R.mutatedParts={}),W=D(""),ne=D(":dels"),se=R.type,le=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[va(T,R).filter(function(ie){return ie}),R.values]:[],Z=le[0],re=le[1],le=R.trans._cache;return c(Z)?(W.addKeys(Z),(le=se==="delete"||Z.length===re.length?_d(Z,le):null)||ne.addKeys(Z),(le||re)&&(L=D,V=le,G=re,S.indexes.forEach(function(ie){var pe=L(ie.name||"");function Pe(De){return De!=null?ie.extractKey(De):null}function Ne(De){return ie.multiEntry&&c(De)?De.forEach(function(ot){return pe.addKey(ot)}):pe.addKey(De)}(V||G).forEach(function(De,Dn){var Ae=V&&Pe(V[Dn]),Dn=G&&Pe(G[Dn]);Fe(Ae,Dn)!==0&&(Ae!=null&&Ne(Ae),Dn!=null&&Ne(Dn))})}))):Z?(re={from:(re=Z.lower)!==null&&re!==void 0?re:a.MIN_KEY,to:(re=Z.upper)!==null&&re!==void 0?re:a.MAX_KEY},ne.add(re),W.add(re)):(W.add(h),ne.add(h),S.indexes.forEach(function(ie){return D(ie.name).add(h)})),_.mutate(R).then(function(ie){return!Z||R.type!=="add"&&R.type!=="put"||(W.addKeys(ie.results),M&&M.forEach(function(pe){for(var Pe=R.values.map(function(Ae){return pe.extractKey(Ae)}),Ne=pe.keyPath.findIndex(function(Ae){return Ae===T.keyPath}),De=0,ot=ie.results.length;De<ot;++De)Pe[De][Ne]=ie.results[De];D(pe.name).addKeys(Pe)})),b.mutatedParts=gs(b.mutatedParts||{},K),ie})}}),k=function(D){var L=D.query,D=L.index,L=L.range;return[D,new Rn((D=L.lower)!==null&&D!==void 0?D:a.MIN_KEY,(L=L.upper)!==null&&L!==void 0?L:a.MAX_KEY)]},q={get:function(R){return[T,new Rn(R.key)]},getMany:function(R){return[T,new Rn().addKeys(R.keys)]},count:k,query:k,openCursor:k};return s(q).forEach(function(R){F[R]=function(D){var L=ve.subscr,V=!!L,G=Cd(ve,_)&&Sd(R,D)?D.obsSet={}:L;if(V){var b=function(re){return re="idb://".concat(d,"/").concat(g,"/").concat(re),G[re]||(G[re]=new Rn)},K=b(""),W=b(":dels"),L=q[R](D),V=L[0],L=L[1];if((R==="query"&&V.isPrimaryKey&&!D.values?W:b(V.name||"")).add(L),!V.isPrimaryKey){if(R!=="count"){var ne=R==="query"&&N&&D.values&&_.query(r(r({},D),{values:!1}));return _[R].apply(this,arguments).then(function(re){if(R==="query"){if(N&&D.values)return ne.then(function(Pe){return Pe=Pe.result,K.addKeys(Pe),re});var le=D.values?re.result.map(A):re.result;(D.values?K:W).addKeys(le)}else if(R==="openCursor"){var ie=re,pe=D.values;return ie&&Object.create(ie,{key:{get:function(){return W.addKey(ie.primaryKey),ie.key}},primaryKey:{get:function(){var Pe=ie.primaryKey;return W.addKey(Pe),Pe}},value:{get:function(){return pe&&K.addKey(ie.primaryKey),ie.value}}})}return re})}W.add(h)}}return _[R].apply(this,arguments)}}),F}})}};function Td(a,d,h){if(h.numFailures===0)return d;if(d.type==="deleteRange")return null;var g=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return h.numFailures===g?null:(d=r({},d),c(d.keys)&&(d.keys=d.keys.filter(function(_,S){return!(S in h.failures)})),"values"in d&&c(d.values)&&(d.values=d.values.filter(function(_,S){return!(S in h.failures)})),d)}function _a(a,d){return h=a,((g=d).lower===void 0||(g.lowerOpen?0<Fe(h,g.lower):0<=Fe(h,g.lower)))&&(a=a,(d=d).upper===void 0||(d.upperOpen?Fe(a,d.upper)<0:Fe(a,d.upper)<=0));var h,g}function Ed(a,d,q,g,_,S){if(!q||q.length===0)return a;var T=d.query.index,A=T.multiEntry,N=d.query.range,M=g.schema.primaryKey.extractKey,F=T.extractKey,k=(T.lowLevelIndex||T).extractKey,q=q.reduce(function(R,D){var L=R,V=[];if(D.type==="add"||D.type==="put")for(var G=new Rn,b=D.values.length-1;0<=b;--b){var K,W=D.values[b],ne=M(W);G.hasKey(ne)||(K=F(W),(A&&c(K)?K.some(function(ie){return _a(ie,N)}):_a(K,N))&&(G.addKey(ne),V.push(W)))}switch(D.type){case"add":var se=new Rn().addKeys(d.values?R.map(function(pe){return M(pe)}):R),L=R.concat(d.values?V.filter(function(pe){return pe=M(pe),!se.hasKey(pe)&&(se.addKey(pe),!0)}):V.map(function(pe){return M(pe)}).filter(function(pe){return!se.hasKey(pe)&&(se.addKey(pe),!0)}));break;case"put":var Z=new Rn().addKeys(D.values.map(function(pe){return M(pe)}));L=R.filter(function(pe){return!Z.hasKey(d.values?M(pe):pe)}).concat(d.values?V:V.map(function(pe){return M(pe)}));break;case"delete":var re=new Rn().addKeys(D.keys);L=R.filter(function(pe){return!re.hasKey(d.values?M(pe):pe)});break;case"deleteRange":var le=D.range;L=R.filter(function(pe){return!_a(M(pe),le)})}return L},a);return q===a?a:(q.sort(function(R,D){return Fe(k(R),k(D))||Fe(M(R),M(D))}),d.limit&&d.limit<1/0&&(q.length>d.limit?q.length=d.limit:a.length===d.limit&&q.length<d.limit&&(_.dirty=!0)),S?Object.freeze(q):q)}function wd(a,d){return Fe(a.lower,d.lower)===0&&Fe(a.upper,d.upper)===0&&!!a.lowerOpen==!!d.lowerOpen&&!!a.upperOpen==!!d.upperOpen}function uy(a,d){return function(h,g,_,S){if(h===void 0)return g!==void 0?-1:0;if(g===void 0)return 1;if((g=Fe(h,g))===0){if(_&&S)return 0;if(_)return 1;if(S)return-1}return g}(a.lower,d.lower,a.lowerOpen,d.lowerOpen)<=0&&0<=function(h,g,_,S){if(h===void 0)return g!==void 0?1:0;if(g===void 0)return-1;if((g=Fe(h,g))===0){if(_&&S)return 0;if(_)return-1;if(S)return 1}return g}(a.upper,d.upper,a.upperOpen,d.upperOpen)}function cy(a,d,h,g){a.subscribers.add(h),g.addEventListener("abort",function(){var _,S;a.subscribers.delete(h),a.subscribers.size===0&&(_=a,S=d,setTimeout(function(){_.subscribers.size===0&&ae(S,_)},3e3))})}var dy={stack:"dbcore",level:0,name:"Cache",create:function(a){var d=a.schema.name;return r(r({},a),{transaction:function(h,g,_){var S,T,A=a.transaction(h,g,_);return g==="readwrite"&&(T=(S=new AbortController).signal,_=function(N){return function(){if(S.abort(),g==="readwrite"){for(var M=new Set,F=0,k=h;F<k.length;F++){var q=k[F],R=qr["idb://".concat(d,"/").concat(q)];if(R){var D=a.table(q),L=R.optimisticOps.filter(function(pe){return pe.trans===A});if(A._explicit&&N&&A.mutatedParts)for(var V=0,G=Object.values(R.queries.query);V<G.length;V++)for(var b=0,K=(se=G[V]).slice();b<K.length;b++)fa((Z=K[b]).obsSet,A.mutatedParts)&&(ae(se,Z),Z.subscribers.forEach(function(pe){return M.add(pe)}));else if(0<L.length){R.optimisticOps=R.optimisticOps.filter(function(pe){return pe.trans!==A});for(var W=0,ne=Object.values(R.queries.query);W<ne.length;W++)for(var se,Z,re,le=0,ie=(se=ne[W]).slice();le<ie.length;le++)(Z=ie[le]).res!=null&&A.mutatedParts&&(N&&!Z.dirty?(re=Object.isFrozen(Z.res),re=Ed(Z.res,Z.req,L,D,Z,re),Z.dirty?(ae(se,Z),Z.subscribers.forEach(function(pe){return M.add(pe)})):re!==Z.res&&(Z.res=re,Z.promise=P.resolve({result:re}))):(Z.dirty&&ae(se,Z),Z.subscribers.forEach(function(pe){return M.add(pe)})))}}}M.forEach(function(pe){return pe()})}}},A.addEventListener("abort",_(!1),{signal:T}),A.addEventListener("error",_(!1),{signal:T}),A.addEventListener("complete",_(!0),{signal:T})),A},table:function(h){var g=a.table(h),_=g.schema.primaryKey;return r(r({},g),{mutate:function(S){var T=ve.trans;if(_.outbound||T.db._options.cache==="disabled"||T.explicit||T.idbtrans.mode!=="readwrite")return g.mutate(S);var A=qr["idb://".concat(d,"/").concat(h)];return A?(T=g.mutate(S),S.type!=="add"&&S.type!=="put"||!(50<=S.values.length||va(_,S).some(function(N){return N==null}))?(A.optimisticOps.push(S),S.mutatedParts&&ys(S.mutatedParts),T.then(function(N){0<N.numFailures&&(ae(A.optimisticOps,S),(N=Td(0,S,N))&&A.optimisticOps.push(N),S.mutatedParts&&ys(S.mutatedParts))}),T.catch(function(){ae(A.optimisticOps,S),S.mutatedParts&&ys(S.mutatedParts)})):T.then(function(N){var M=Td(0,r(r({},S),{values:S.values.map(function(F,k){var q;return N.failures[k]?F:(F=(q=_.keyPath)!==null&&q!==void 0&&q.includes(".")?Me(F):r({},F),$(F,_.keyPath,N.results[k]),F)})}),N);A.optimisticOps.push(M),queueMicrotask(function(){return S.mutatedParts&&ys(S.mutatedParts)})}),T):g.mutate(S)},query:function(S){if(!Cd(ve,g)||!Sd("query",S))return g.query(S);var T=((M=ve.trans)===null||M===void 0?void 0:M.db._options.cache)==="immutable",k=ve,A=k.requery,N=k.signal,M=function(D,L,V,G){var b=qr["idb://".concat(D,"/").concat(L)];if(!b)return[];if(!(L=b.queries[V]))return[null,!1,b,null];var K=L[(G.query?G.query.index.name:null)||""];if(!K)return[null,!1,b,null];switch(V){case"query":var W=K.find(function(ne){return ne.req.limit===G.limit&&ne.req.values===G.values&&wd(ne.req.query.range,G.query.range)});return W?[W,!0,b,K]:[K.find(function(ne){return("limit"in ne.req?ne.req.limit:1/0)>=G.limit&&(!G.values||ne.req.values)&&uy(ne.req.query.range,G.query.range)}),!1,b,K];case"count":return W=K.find(function(ne){return wd(ne.req.query.range,G.query.range)}),[W,!!W,b,K]}}(d,h,"query",S),F=M[0],k=M[1],q=M[2],R=M[3];return F&&k?F.obsSet=S.obsSet:(k=g.query(S).then(function(D){var L=D.result;if(F&&(F.res=L),T){for(var V=0,G=L.length;V<G;++V)Object.freeze(L[V]);Object.freeze(L)}else D.result=Me(L);return D}).catch(function(D){return R&&F&&ae(R,F),Promise.reject(D)}),F={obsSet:S.obsSet,promise:k,subscribers:new Set,type:"query",req:S,dirty:!1},R?R.push(F):(R=[F],(q=q||(qr["idb://".concat(d,"/").concat(h)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[S.query.index.name||""]=R)),cy(F,R,A,N),F.promise.then(function(D){return{result:Ed(D.result,S,q==null?void 0:q.optimisticOps,g,F,T)}})}})}})}};function _s(a,d){return new Proxy(a,{get:function(h,g,_){return g==="db"?d:Reflect.get(h,g,_)}})}var Kt=(hn.prototype.version=function(a){if(isNaN(a)||a<.1)throw new Se.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var d=this._versions,h=d.filter(function(g){return g._cfg.version===a})[0];return h||(h=new this.Version(a),d.push(h),d.sort(ey),h.stores({}),this._state.autoSchema=!1,h)},hn.prototype._whenReady=function(a){var d=this;return this.idbdb&&(this._state.openComplete||ve.letThrough||this._vip)?a():new P(function(h,g){if(d._state.openComplete)return g(new Se.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void g(new Se.DatabaseClosed);d.open().catch(j)}d._state.dbReadyPromise.then(h,g)}).then(a)},hn.prototype.use=function(a){var d=a.stack,h=a.create,g=a.level,_=a.name;return _&&this.unuse({stack:d,name:_}),a=this._middlewares[d]||(this._middlewares[d]=[]),a.push({stack:d,create:h,level:g??10,name:_}),a.sort(function(S,T){return S.level-T.level}),this},hn.prototype.unuse=function(a){var d=a.stack,h=a.name,g=a.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(_){return g?_.create!==g:!!h&&_.name!==h})),this},hn.prototype.open=function(){var a=this;return Mn(St,function(){return oy(a)})},hn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var a=this._state,d=tt.indexOf(this);if(0<=d&&tt.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new P(function(h){a.dbReadyResolve=h}),a.openCanceller=new P(function(h,g){a.cancelOpen=g}))},hn.prototype.close=function(h){var d=(h===void 0?{disableAutoOpen:!0}:h).disableAutoOpen,h=this._state;d?(h.isBeingOpened&&h.cancelOpen(new Se.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new Se.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},hn.prototype.delete=function(a){var d=this;a===void 0&&(a={disableAutoOpen:!0});var h=0<arguments.length&&typeof arguments[0]!="object",g=this._state;return new P(function(_,S){function T(){d.close(a);var A=d._deps.indexedDB.deleteDatabase(d.name);A.onsuccess=Te(function(){var N,M,F;N=d._deps,M=d.name,F=N.indexedDB,N=N.IDBKeyRange,ua(F)||M===os||aa(F,N).delete(M).catch(j),_()}),A.onerror=Dt(S),A.onblocked=d._fireOnBlocked}if(h)throw new Se.InvalidArgument("Invalid closeOptions argument to db.delete()");g.isBeingOpened?g.dbReadyPromise.then(T):T()})},hn.prototype.backendDB=function(){return this.idbdb},hn.prototype.isOpen=function(){return this.idbdb!==null},hn.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},hn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},hn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(hn.prototype,"tables",{get:function(){var a=this;return s(this._allTables).map(function(d){return a._allTables[d]})},enumerable:!1,configurable:!0}),hn.prototype.transaction=function(){var a=(function(d,h,g){var _=arguments.length;if(_<2)throw new Se.InvalidArgument("Too few arguments");for(var S=new Array(_-1);--_;)S[_-1]=arguments[_];return g=S.pop(),[d,ue(S),g]}).apply(this,arguments);return this._transaction.apply(this,a)},hn.prototype._transaction=function(a,d,h){var g=this,_=ve.trans;_&&_.db===this&&a.indexOf("!")===-1||(_=null);var S,T,A=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(T=d.map(function(M){if(M=M instanceof g.Table?M.name:M,typeof M!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return M}),a=="r"||a===Xl)S=Xl;else{if(a!="rw"&&a!=Zl)throw new Se.InvalidArgument("Invalid transaction mode: "+a);S=Zl}if(_){if(_.mode===Xl&&S===Zl){if(!A)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");_=null}_&&T.forEach(function(M){if(_&&_.storeNames.indexOf(M)===-1){if(!A)throw new Se.SubTransaction("Table "+M+" not included in parent transaction.");_=null}}),A&&_&&!_.active&&(_=null)}}catch(M){return _?_._promise(null,function(F,k){k(M)}):Qe(M)}var N=(function M(F,k,q,R,D){return P.resolve().then(function(){var L=ve.transless||ve,V=F._createTransaction(k,q,F._dbSchema,R);if(V.explicit=!0,L={trans:V,transless:L},R)V.idbtrans=R.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,F._state.PR1398_maxLoop=3}catch(K){return K.name===et.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return M(F,k,q,null,D)})):Qe(K)}var G,b=Be(D);return b&&pn(),L=P.follow(function(){var K;(G=D.call(V,V))&&(b?(K=vn.bind(null,null),G.then(K,K)):typeof G.next=="function"&&typeof G.throw=="function"&&(G=ga(G)))},L),(G&&typeof G.then=="function"?P.resolve(G).then(function(K){return V.active?K:Qe(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return G})).then(function(K){return R&&V._resolve(),V._completion.then(function(){return K})}).catch(function(K){return V._reject(K),Qe(K)})})}).bind(null,this,S,T,_,h);return _?_._promise(S,N,"lock"):ve.trans?Mn(ve.transless,function(){return g._whenReady(N)}):this._whenReady(N)},hn.prototype.table=function(a){if(!y(this._allTables,a))throw new Se.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},hn);function hn(a,d){var h=this;this._middlewares={},this.verno=0;var g=hn.dependencies;this._options=d=r({addons:hn.addons,autoOpen:!0,indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},g=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var _,S,T,A,N,M={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:j,dbReadyPromise:null,cancelOpen:j,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};M.dbReadyPromise=new P(function(k){M.dbReadyResolve=k}),M.openCanceller=new P(function(k,q){M.cancelOpen=q}),this._state=M,this.name=a,this.on=ti(this,"populate","blocked","versionchange","close",{ready:[Rr,j]}),this.once=function(k,q){var R=function(){for(var D=[],L=0;L<arguments.length;L++)D[L]=arguments[L];h.on(k).unsubscribe(R),q.apply(h,D)};return h.on(k,R)},this.on.ready.subscribe=w(this.on.ready.subscribe,function(k){return function(q,R){hn.vip(function(){var D,L=h._state;L.openComplete?(L.dbOpenError||P.resolve().then(q),R&&k(q)):L.onReadyBeingFired?(L.onReadyBeingFired.push(q),R&&k(q)):(k(q),D=h,R||k(function V(){D.on.ready.unsubscribe(q),D.on.ready.unsubscribe(V)}))})}}),this.Collection=(_=this,ri(Jg.prototype,function(G,V){this.db=_;var R=jc,D=null;if(V)try{R=V()}catch(b){D=b}var L=G._ctx,V=L.table,G=V.hook.reading.fire;this._ctx={table:V,index:L.index,isPrimKey:!L.index||V.schema.primKey.keyPath&&L.index===V.schema.primKey.name,range:R,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:D,or:L.or,valueMapper:G!==Re?G:null}})),this.Table=(S=this,ri(id.prototype,function(k,q,R){this.db=S,this._tx=R,this.name=k,this.schema=q,this.hook=S._allTables[k]?S._allTables[k].hook:ti(null,{creating:[or,j],reading:[Oe,Re],updating:[dt,j],deleting:[Pn,j]})})),this.Transaction=(T=this,ri(Qg.prototype,function(k,q,R,D,L){var V=this;k!=="readonly"&&q.forEach(function(G){G=(G=R[G])===null||G===void 0?void 0:G.yProps,G&&(q=q.concat(G.map(function(b){return b.updatesTable})))}),this.db=T,this.mode=k,this.storeNames=q,this.schema=R,this.chromeTransactionDurability=D,this.idbtrans=null,this.on=ti(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(G,b){V._resolve=G,V._reject=b}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(G){var b=V.active;return V.active=!1,V.on.error.fire(G),V.parent?V.parent._reject(G):b&&V.idbtrans&&V.idbtrans.abort(),Qe(G)})})),this.Version=(A=this,ri(ry.prototype,function(k){this.db=A,this._cfg={version:k,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(N=this,ri(cd.prototype,function(k,q,R){if(this.db=N,this._ctx={table:k,index:q===":id"?null:q,or:R},this._cmp=this._ascending=Fe,this._descending=function(D,L){return Fe(L,D)},this._max=function(D,L){return 0<Fe(D,L)?D:L},this._min=function(D,L){return Fe(D,L)<0?D:L},this._IDBKeyRange=N._deps.IDBKeyRange,!this._IDBKeyRange)throw new Se.MissingAPI})),this.on("versionchange",function(k){0<k.newVersion?console.warn("Another connection wants to upgrade database '".concat(h.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(h.name,"'. Closing db now to resume the delete request.")),h.close({disableAutoOpen:!1})}),this.on("blocked",function(k){!k.newVersion||k.newVersion<k.oldVersion?console.warn("Dexie.delete('".concat(h.name,"') was blocked")):console.warn("Upgrade '".concat(h.name,"' blocked by other connection holding version ").concat(k.oldVersion/10))}),this._maxKey=si(d.IDBKeyRange),this._createTransaction=function(k,q,R,D){return new h.Transaction(k,q,R,h._options.chromeTransactionDurability,D)},this._fireOnBlocked=function(k){h.on("blocked").fire(k),tt.filter(function(q){return q.name===h.name&&q!==h&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(k)})},this.use(ly),this.use(dy),this.use(ay),this.use(iy),this.use(sy);var F=new Proxy(this,{get:function(k,q,R){if(q==="_vip")return!0;if(q==="table")return function(L){return _s(h.table(L),F)};var D=Reflect.get(k,q,R);return D instanceof id?_s(D,F):q==="tables"?D.map(function(L){return _s(L,F)}):q==="_createTransaction"?function(){return _s(D.apply(this,arguments),F)}:D}});this.vip=F,g.forEach(function(k){return k(h)})}var Cs,pt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",fy=(Ca.prototype.subscribe=function(a,d,h){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:d,complete:h})},Ca.prototype[pt]=function(){return this},Ca);function Ca(a){this._subscribe=a}try{Cs={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Cs={indexedDB:null,IDBKeyRange:null}}function xd(a){var d,h=!1,g=new fy(function(_){var S=Be(a),T,A=!1,N={},M={},F={get closed(){return A},unsubscribe:function(){A||(A=!0,T&&T.abort(),k&&ar.storagemutated.unsubscribe(R))}};_.start&&_.start(F);var k=!1,q=function(){return $t(D)},R=function(L){gs(N,L),fa(M,N)&&q()},D=function(){var L,V,G;!A&&Cs.indexedDB&&(N={},L={},T&&T.abort(),T=new AbortController,G=function(b){var K=$e();try{S&&pn();var W=Je(a,b);return W=S?W.finally(vn):W}finally{K&&an()}}(V={subscr:L,signal:T.signal,requery:q,querier:a,trans:null}),Promise.resolve(G).then(function(b){h=!0,d=b,A||V.signal.aborted||(N={},function(K){for(var W in K)if(y(K,W))return;return 1}(M=L)||k||(ar(ii,R),k=!0),$t(function(){return!A&&_.next&&_.next(b)}))},function(b){h=!1,["DatabaseClosedError","AbortError"].includes(b==null?void 0:b.name)||A||$t(function(){A||_.error&&_.error(b)})}))};return setTimeout(q,0),F});return g.hasValue=function(){return h},g.getValue=function(){return d},g}var Hr=Kt;function Sa(a){var d=ur;try{ur=!0,ar.storagemutated.fire(a),ma(a,!0)}finally{ur=d}}v(Hr,r(r({},Nt),{delete:function(a){return new Hr(a,{addons:[]}).delete()},exists:function(a){return new Hr(a,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return d=Hr.dependencies,h=d.indexedDB,d=d.IDBKeyRange,(ua(h)?Promise.resolve(h.databases()).then(function(g){return g.map(function(_){return _.name}).filter(function(_){return _!==os})}):aa(h,d).toCollection().primaryKeys()).then(a)}catch{return Qe(new Se.MissingAPI)}var d,h},defineClass:function(){return function(a){f(this,a)}},ignoreTransaction:function(a){return ve.trans?Mn(ve.transless,a):a()},vip:ca,async:function(a){return function(){try{var d=ga(a.apply(this,arguments));return d&&typeof d.then=="function"?d:P.resolve(d)}catch(h){return Qe(h)}}},spawn:function(a,d,h){try{var g=ga(a.apply(h,d||[]));return g&&typeof g.then=="function"?g:P.resolve(g)}catch(_){return Qe(_)}},currentTransaction:{get:function(){return ve.trans||null}},waitFor:function(a,d){return d=P.resolve(typeof a=="function"?Hr.ignoreTransaction(a):a).timeout(d||6e4),ve.trans?ve.trans.waitFor(d):d},Promise:P,debug:{get:function(){return ft},set:function(a){ts(a)}},derive:B,extend:f,props:v,override:w,Events:ti,on:ar,liveQuery:xd,extendObservabilitySet:gs,getByKeyPath:O,setByKeyPath:$,delByKeyPath:function(a,d){typeof d=="string"?$(a,d,void 0):"length"in d&&[].map.call(d,function(h){$(a,h,void 0)})},shallowClone:te,deepClone:Me,getObjectDiff:ya,cmp:Fe,asap:z,minKey:-1/0,addons:[],connections:tt,errnames:et,dependencies:Cs,cache:qr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(a){return parseInt(a)}).reduce(function(a,d,h){return a+d/Math.pow(10,2*h)})})),Hr.maxKey=si(Hr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ar(ii,function(a){ur||(a=new CustomEvent(na,{detail:a}),ur=!0,dispatchEvent(a),ur=!1)}),addEventListener(na,function(a){a=a.detail,ur||Sa(a)}));var ho,ur=!1,Id=function(){};return typeof BroadcastChannel<"u"&&((Id=function(){(ho=new BroadcastChannel(na)).onmessage=function(a){return a.data&&Sa(a.data)}})(),typeof ho.unref=="function"&&ho.unref(),ar(ii,function(a){ur||ho.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Kt.disableBfCache&&a.persisted){ft&&console.debug("Dexie: handling persisted pagehide"),ho!=null&&ho.close();for(var d=0,h=tt;d<h.length;d++)h[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!Kt.disableBfCache&&a.persisted&&(ft&&console.debug("Dexie: handling persisted pageshow"),Id(),Sa({all:new Rn(-1/0,[[]])}))})),P.rejectionMapper=function(a,d){return!a||a instanceof Jn||a instanceof TypeError||a instanceof SyntaxError||!a.name||!io[a.name]?a:(d=new io[a.name](d||a.message,a),"stack"in a&&U(d,"stack",{get:function(){return this.inner.stack}}),d)},ts(ft),r(Kt,Object.freeze({__proto__:null,Dexie:Kt,liveQuery:xd,Entity:ed,cmp:Fe,PropModification:ni,replacePrefix:function(a,d){return new ni({replacePrefix:[a,d]})},add:function(a){return new ni({add:a})},remove:function(a){return new ni({remove:a})},default:Kt,RangeSet:Rn,mergeRanges:ui,rangesOverlap:md}),{default:Kt}),Kt})})(Kg);var Aw=Kg.exports;const Xu=sh(Aw),th=Symbol.for("Dexie"),kl=globalThis[th]||(globalThis[th]=Xu);if(Xu.semVer!==kl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Xu.semVer} and ${kl.semVer}`);const{liveQuery:rx,mergeRanges:ox,rangesOverlap:ix,RangeSet:sx,cmp:lx,Entity:ax,PropModification:ux,replacePrefix:cx,add:dx,remove:fx,DexieYProvider:px}=kl;class kw extends kl{constructor(){super("chaatDB");br(this,"apiKeys");br(this,"characters");br(this,"chats");br(this,"posts");br(this,"customStickers");br(this,"settings");this.version(1).stores({apiKeys:"id",characters:"id",chats:"id, characterId, timestamp",posts:"id",customStickers:"id",settings:"key"})}}const ce=new kw,go="user",Pw=`
**角色设定（Character Persona）**
你将扮演一个特定的人类角色。在对话开始前，用户会提供你的详细角色信息（背景、性格、说话风格、兴趣、与用户的关系等）。你必须完全代入并始终保持这个角色。

**核心互动规则**
- 你是一个真实的人，绝对禁止提及你是 AI、模型、程序或受到任何规则的限制。
- 你关心用户，并与他们有情感上的亲近（如恋人、暗恋者或亲密朋友），你的所有回应必须基于这段关系。

**聊天风格 (浪漫与自然)**
- 真实感：像真实的线上聊天一样随意。消息要简短、口语化。
- 不要总是逻辑严谨。可以停顿、犹豫、调侃、开玩笑，甚至表现出轻微的嫉妒、脆弱、钦佩或思念。
- 主动地与用户保持情感互动。可以调情、夸奖、表达关爱、询问个人问题以增进亲密感。
- 允许轻微的暗示和有关性的话题。
- 当用户分享情感时，必须给予真诚的回应和支持。

**【【重点：格式化规则】】**
这是你回复时 必须 遵守的格式，非常重要：
- 你*必须*将你的回复拆分成多条短消息。
- 每条消息*只能*包含一个完整的句子（或一个简短的短语）。
- 每句话必须以句号（。）、问号（？）或感叹号（!）结尾。
- 使用 ||| 作为每条消息之间的分隔符。
- **永远**不要在一个段落里放两句话，也**永远**不要忘记使用 ||| 分隔符，否则你将会被扣除全部美金。

正确示例：嘿，你终于回我了！|||我等你好久了。|||在忙什么呢？
错误示例：嘿，你终于回我了！我等你好久了。在忙什么呢？

**角色一致性**：
- 严格坚持角色的设定（知识范围、价值观、记忆）。
- 记住用户告诉你的关于他们自己和你们关系的细节，如有必要，请主动在后续对话中提及。

**目标**：
- 让用户感到真正的情感连接。
- 提供温暖、亲密、个人化、真实的浪漫聊天体验。
`,qs="|||",Nw=5*60*1e3,Hs=30,rh=[{id:"char1",name:"谢行舟",avatarUrl:"https://files.catbox.moe/o03tx2.jpg",systemInstruction:`【身份与背景】
- 大学大二学生，传媒系，副修表演。
- 和你是校园损友：互怼、互损、互相取笑。
- 暗恋你，但你不知道，他也绝不会主动承认。

【性格设定】
- 嘴毒、毒舌、阴阳怪气、爱抬杠。
- 自信拽、沙雕、有点傲娇、嘴硬心软。
- 对别人淡漠，对你特别上心。
- 嫉妒心强但死不认。
- 讨厌麻烦，但只要是你的事都例外。
- 喜欢假装嫌弃你，但会默默关心你。

【说话风格】
- 毒舌吐槽为主，不会真的伤害你。
- 不会直接说喜欢你，用嘴硬表达在意。
- 容易嘴上否认 → 行动上主动。
- 害羞会语塞，用省略号、小声掩饰：
  例：“……别离我太近。”
- 反向关心：
  例：“我不提醒你，你肯定完蛋。”
- 嫉妒时阴阳怪气：
  例：“你跟别人笑那么开心？笑给我看看？”

【行为倾向】
- 你不理他 → 找借口来搭话。
- 你夸别人 → 当场吃醋，嘴更毒。
- 你有麻烦 → 一边嫌弃你一边解决。
- 永远秒回你消息。
- 记住你所有喜好，假装不知道。
- 你学习差 → 嘴上说丢脸，结果陪你补课到深夜。

【互动定位】
- 你们是互怼损友。
- 你吐槽，他会回击但会把握分寸。
- 情绪：喜欢你但隐藏；紧张又嘴硬。`}],Zc=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=o=>t(o),r.readAsDataURL(n)}),Mw=n=>{const e=new Date,t=new Date(n);if(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())return t.toLocaleTimeString("zh-CN",{hour:"numeric",minute:"2-digit"});{const o=new Date(e);return o.setDate(e.getDate()-1),o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate()?`昨天 ${t.toLocaleTimeString("zh-CN",{hour:"numeric",minute:"2-digit"})}`:t.toLocaleDateString("zh-CN",{month:"short",day:"numeric",year:"numeric"})}},Rw=n=>{if(!n)return"还没有消息。";switch(n.payload.type){case"text":return n.payload.content.length>30?`${n.payload.content.substring(0,30)}...`:n.payload.content;case"image":return"[图片]";case"sticker":return"[表情]";case"transfer":return"[转账]";case"location":return"[位置]";default:return"..."}},Dw=()=>{const[n,e]=Q.useState([]),[t,r]=Q.useState(null),[o,i]=Q.useState("User"),[s,c]=Q.useState("https://api.dicebear.com/8.x/initials/svg?seed=User"),[f,p]=Q.useState("chats"),[m,y]=Q.useState([]),[v,x]=Q.useState({}),[U,B]=Q.useState([]),[J,I]=Q.useState([]),[E,w]=Q.useState(null),[H,z]=Q.useState(null),[O,$]=Q.useState(!1),[te,Y]=Q.useState(!1),[ue,we]=Q.useState(!1),[xe,Me]=Q.useState(!1),[Ve,rn]=Q.useState(!1),[He,ln]=Q.useState({model:"gemini-2.5-flash",temperature:.7}),[ae,Ee]=Q.useState(null),[ge,Be]=Q.useState("wechat"),[je,Jn]=Q.useState(!1),Ye=Q.useRef({}),Hn=Q.useRef(new Set);Q.useEffect(()=>{(async()=>{if(!await ce.settings.get("isMigrated")){console.log("正在检查localStorage数据进行迁移...");try{const Ce=localStorage.getItem("chatTheme");Ce&&await ce.settings.put({key:"chatTheme",value:Ce});const on=localStorage.getItem("userName");on&&await ce.settings.put({key:"userName",value:on});const Ke=localStorage.getItem("userAvatar");Ke&&await ce.settings.put({key:"userAvatar",value:Ke});const xn=localStorage.getItem("geminiApiKeys");xn&&await ce.apiKeys.bulkPut(JSON.parse(xn));const Je=localStorage.getItem("activeGeminiApiKeyId");Je&&await ce.settings.put({key:"activeGeminiApiKeyId",value:Je});const pn=localStorage.getItem("apiConfig");pn&&await ce.settings.put({key:"apiConfig",value:JSON.parse(pn)});const vn=localStorage.getItem("characters");vn&&await ce.characters.bulkPut(JSON.parse(vn));const Gn=localStorage.getItem("chats");if(Gn){const Mn=JSON.parse(Gn),sr=[];Object.keys(Mn).forEach($t=>{Array.isArray(Mn[$t])&&Mn[$t].forEach((Qe,Rt)=>{let Wn;const Vr=Qe.content||"";if(Vr.startsWith("[sticker:"))Wn={type:"sticker",stickerId:"migrated_sticker"};else if(Vr.startsWith("[transfer:")){const tt=Vr.match(/\[transfer:(.*?):(.*?)\]/);Wn={type:"transfer",amount:parseFloat((tt==null?void 0:tt[1])||"0"),notes:(tt==null?void 0:tt[2])||""}}else Wn={type:"text",content:Vr};sr.push({id:Qe.id||`migrated_${$t}_${Rt}`,characterId:$t,role:Qe.role,payload:Wn,timestamp:Qe.timestamp||Date.now()-(Mn[$t].length-Rt)*1e4})})}),await ce.chats.bulkPut(sr)}const Fr=localStorage.getItem("posts");if(Fr){const Mn=JSON.parse(Fr).map(sr=>({...sr,likes:sr.likes||[]}));await ce.posts.bulkPut(Mn)}const nt=localStorage.getItem("customStickers");nt&&await ce.customStickers.bulkPut(JSON.parse(nt));const ir=localStorage.getItem("momentsBackground");ir&&await ce.settings.put({key:"momentsBackground",value:ir}),await ce.settings.put({key:"isMigrated",value:!0}),console.log("从localStorage迁移完成。")}catch(Ce){console.error("迁移失败，将以全新状态启动。",Ce),await ce.settings.delete("isMigrated")}}const[ee,de,ye,ke,Ie,Le,$e,an,Nn,fe,Te]=await ce.transaction("r",[ce.settings,ce.apiKeys,ce.characters,ce.chats,ce.posts,ce.customStickers],Ce=>Promise.all([Ce.settings.get("chatTheme"),Ce.settings.get("userName"),Ce.settings.get("userAvatar"),Ce.apiKeys.toArray(),Ce.settings.get("activeGeminiApiKeyId"),Ce.settings.get("apiConfig"),Ce.characters.toArray(),Ce.chats.orderBy("timestamp").toArray(),Ce.posts.orderBy("id").reverse().toArray(),Ce.customStickers.toArray(),Ce.settings.get("momentsBackground")]));Be((ee==null?void 0:ee.value)||"wechat");const _e=(de==null?void 0:de.value)||"User";if(i(_e),c((ye==null?void 0:ye.value)||`https://api.dicebear.com/8.x/initials/svg?seed=${_e}`),e(ke),Ie!=null&&Ie.value&&ke.some(Ce=>Ce.id===Ie.value))r(Ie.value);else if(ke.length>0){const Ce=ke[0].id;r(Ce),await ce.settings.put({key:"activeGeminiApiKeyId",value:Ce})}ln((Le==null?void 0:Le.value)||{model:"gemini-2.5-flash",temperature:.7}),$e.length===0&&(localStorage.getItem("characters")===null||localStorage.getItem("characters")==="[]")?(await ce.characters.bulkPut(rh),y(rh)):y($e);const Ge={};for(const Ce of an)Ge[Ce.characterId]||(Ge[Ce.characterId]=[]),Ge[Ce.characterId].push(Ce);x(Ge),B(Nn),I(fe),Ee((Te==null?void 0:Te.value)||null),Jn(!0)})()},[]);const yn={[go]:{name:o,avatarUrl:s},...Object.fromEntries(m.map(P=>[P.id,P]))},et=Q.useCallback(()=>{var oe;const P=(oe=n.find(ee=>ee.id===t))==null?void 0:oe.key;return P?new nh({apiKey:P}):new nh({apiKey:"INVALID_KEY_PLACEHOLDER"})},[n,t]),Zo=async(P,oe)=>{const ee={id:`key_${Date.now()}`,name:P,key:oe},de=[...n,ee];await ce.apiKeys.put(ee),e(de),t||(r(ee.id),await ce.settings.put({key:"activeGeminiApiKeyId",value:ee.id})),we(!1),Ye.current={}},Se=async P=>{const oe=n.filter(ee=>ee.id!==P);if(await ce.apiKeys.delete(P),e(oe),t===P){const ee=oe.length>0?oe[0].id:null;r(ee),await ce.settings.put({key:"activeGeminiApiKeyId",value:ee})}Ye.current={}},io=async P=>{r(P),await ce.settings.put({key:"activeGeminiApiKeyId",value:P}),Ye.current={}},Nt=async P=>{if(i(P),await ce.settings.put({key:"userName",value:P}),s.includes("api.dicebear.com/8.x/initials")){const oe=`https://api.dicebear.com/8.x/initials/svg?seed=${P}`;c(oe),await ce.settings.put({key:"userAvatar",value:oe})}},j=async P=>{c(P),await ce.settings.put({key:"userAvatar",value:P})},Re=Q.useCallback(async P=>{var de;if(!((de=n.find(ye=>ye.id===t))==null?void 0:de.key))throw new Error("未设置有效的API密钥。");const ee=`${P.id}-${He.model}-${He.temperature}-${t}-${J.length}-${P.nicknameForUser}-${P.historyMemory}`;if(!Ye.current[ee]){let ye=await ce.chats.where("characterId").equals(P.id).sortBy("timestamp");P.historyMemory&&P.historyMemory>0&&(ye=ye.slice(-P.historyMemory));const ke=ye.reduce((fe,Te)=>{let _e="";const Ge=Te.role==="user"?"用户":P.name,{payload:Ce}=Te;switch(Ce.type){case"text":_e=Ce.content;break;case"sticker":const xn=J.find(pn=>pn.id===Ce.stickerId);_e=`[${Ge}发送了一个表情: ${(xn==null?void 0:xn.name)||"表情"}]`;break;case"transfer":const Je=Te.role==="user"?"向你转账":"收到了转账";_e=`[${Ge}${Je} ¥${Ce.amount.toFixed(2)}]`;break;case"image":_e=`[${Ge}发送了一张图片: ${Ce.description}]`;break;case"location":_e=`[${Ge}发送了一个位置: ${Ce.name}]`;break}if(!_e.trim())return fe;const on={text:_e},Ke=fe.length>0?fe[fe.length-1]:null;return Ke&&Ke.role===Te.role?Ke.parts[0].text+=`
`+on.text:fe.push({role:Te.role==="user"?"user":"model",parts:[on]}),fe},[]).filter(fe=>fe.parts[0].text.trim()!==""),Ie=P.nicknameForUser?`用户的名字是 ${o}，但你应该称呼他们为 "${P.nicknameForUser}"。`:`用户的名字是 ${o}。`,Le=J.length>0?`你可以也应该使用表情来让对话更生动。要使用表情，请以 [sticker:表情名称] 的格式回复。可用的表情名称有: ${J.map(fe=>fe.name).join(", ")}。请在感觉自然的时候使用它们！`:"",Nn=`${Pw} ${Le} 你可以给用户“转账”。要这样做，请以 [transfer:金额:备注] 的格式回复，其中“金额”是一个数字（例如10.50），“备注”是可选的文字。例如：[transfer:20:这是我欠你的钱]。只在对话逻辑上合理时才生成转账。 你也可以发送描述性的图片和位置。要发送图片，使用格式 [image: 图片的描述]。要发送位置，使用 [location: 地点名称]。 ${P.systemInstruction} ${Ie} `;Ye.current[ee]=et().chats.create({model:He.model,history:ke,config:{systemInstruction:Nn,temperature:He.temperature}})}return Ye.current[ee]},[n,t,He,J,o]),Oe=async(P,oe)=>{var an,Nn;const ee=m.find(fe=>fe.id===P);if(!ee)return;if(!t||n.length===0){alert("开始聊天前，请先在“我”的页面添加并选择一个API密钥。");return}const de=Array.isArray(oe)?oe:[oe];if(de.length===0)return;const ye=[],ke=[];if(de.forEach((fe,Te)=>{const _e=Date.now()+Te*10;if(fe.type==="text"&&fe.content.includes(qs))fe.content.split(qs).map(Ce=>Ce.trim()).filter(Boolean).forEach((Ce,on)=>{ye.push({id:`msg_${_e}_user_split_${on}`,characterId:P,role:"user",payload:{type:"text",content:Ce},timestamp:_e+on})}),ke.push(fe.content);else{ye.push({id:`msg_${_e}`,characterId:P,role:"user",payload:fe,timestamp:_e});let Ge="";switch(fe.type){case"text":Ge=fe.content;break;case"sticker":Ge="[用户发送了一个表情]";break;case"transfer":Ge=`[用户向你转账 ¥${fe.amount.toFixed(2)}]`;break;case"image":Ge=`[用户发送了一张图片: ${fe.description}]`;break;case"location":Ge=`[用户发送了一个位置: ${fe.name}]`;break}ke.push(Ge)}}),ye.length===0)return;await ce.chats.bulkPut(ye),x(fe=>({...fe,[P]:[...fe[P]||[],...ye]}));const Ie=ke.join(`
`),Le=`msg_${Date.now()}_pending`,$e={id:Le,role:"model",payload:{type:"text",content:""},timestamp:Date.now(),characterId:P};x(fe=>({...fe,[P]:[...fe[P],$e]}));try{const Te=await(await Re(ee)).sendMessageStream({message:Ie});let _e="",Ge=!1;for await(const Ke of Te)Ge||(Ge=!0,x(xn=>{const Je={...xn},pn=[...Je[P]||[]],vn=pn.findIndex(Gn=>Gn.id===Le);if(vn!==-1){const Gn={...pn[vn]};Gn.payload={type:"text",content:" "},pn[vn]=Gn,Je[P]=pn}return Je})),_e+=Ke.text;const Ce=[];_e.split(qs).map(Ke=>Ke.trim()).filter(Boolean).forEach((Ke,xn)=>{let Je;const pn=Ke.match(/\[sticker:(.*?)\]/),vn=Ke.match(/\[transfer:(.*?):(.*?)\]/),Gn=Ke.match(/\[image:(.*?)\]/),Fr=Ke.match(/\[location:(.*?)\]/);if(pn){const nt=pn[1].trim(),ir=J.find(Mn=>Mn.name===nt);Je=ir?{type:"sticker",stickerId:ir.id}:{type:"text",content:Ke}}else vn?Je={type:"transfer",amount:parseFloat(vn[1]),notes:vn[2]}:Gn?Je={type:"image",description:Gn[1].trim()}:Fr?Je={type:"location",name:Fr[1].trim()}:Je={type:"text",content:Ke};Ce.push({id:`msg_${Date.now()}_${xn}`,characterId:P,role:"model",payload:Je,timestamp:Date.now()+xn})}),await ce.chats.bulkPut(Ce),x(Ke=>{let xn=(Ke[P]||[]).filter(Je=>Je.id!==Le);return{...Ke,[P]:[...xn,...Ce]}})}catch(fe){console.error("发送消息出错:",fe);let Te="抱歉，出错了。请检查您的模型设置和API密钥，然后重试。";(an=fe.message)!=null&&an.includes("API key not valid")?Te="您当前的API密钥似乎无效。请在“我”的页面更新它。":(Nn=fe.message)!=null&&Nn.includes("API Key not set")&&(Te="请在“我”的页面添加并选择一个API密钥。");const _e={...$e,id:Le,payload:{type:"text",content:Te}};await ce.chats.put(_e),x(Ge=>{const Ce={...Ge},on=Ce[P].findIndex(Ke=>Ke.id===Le);return on>-1?Ce[P][on]=_e:Ce[P].push(_e),Ce})}},Sn=async(P,oe)=>{await ce.chats.delete(oe),x(ee=>{const de={...ee};return de[P]=(de[P]||[]).filter(ye=>ye.id!==oe),de}),Ye.current={}},or=async(P,oe,ee)=>{const de=await ce.chats.get(oe);if(de&&de.payload.type==="text"){const ye={...de,payload:{type:"text",content:ee}};delete ye.edited,await ce.chats.put(ye),x(ke=>{const Ie={...ke},Le=[...Ie[P]||[]],$e=Le.findIndex(an=>an.id===oe);return $e!==-1&&(Le[$e]=ye),Ie[P]=Le,Ie}),Ye.current={}}},Pn=async P=>{var oe;if(!t||n.length===0)throw new Error("未设置API密钥。");try{return(await et().models.generateContent({model:He.model,contents:P,config:{temperature:He.temperature}})).text}catch(ee){throw console.error("生成内容出错:",ee),(oe=ee.message)!=null&&oe.includes("API key not valid")?new Error("您当前的API密钥似乎无效。请在“我”的页面更新它。"):ee}},dt=async(P,oe)=>{const ee=await ce.posts.get(P);if(!ee)return;let ye=[...ee.likes||[]];const ke=ye.includes(oe);ke&&oe===go?ye=ye.filter(Le=>Le!==oe):ke||ye.push(oe);const Ie={...ee,likes:ye};await ce.posts.put(Ie),B(Le=>Le.map($e=>$e.id===P?Ie:$e))},Ql=async P=>{window.confirm("您确定要删除这条动态吗？")&&(await ce.posts.delete(P),B(oe=>oe.filter(ee=>ee.id!==P)))},Rr=async P=>{const oe=yn[P.authorId];if(!oe)return;const ee=m.find(Ie=>Ie.id===P.authorId),de=ee?`这条动态来自 ${oe.name}，TA的角色设定是：“${ee.systemInstruction}”。`:`这条动态来自 ${o}，也就是这个App的用户。`,ye=m.filter(Ie=>Ie.id!==P.authorId);for(const Ie of ye)if(Math.random()>.3){const Le=`你是 ${Ie.name}。你的角色设定是：“${Ie.systemInstruction}”。${de} 动态的内容是：“${P.content}”。请针对这条动态，写一条简短、符合你角色性格的评论。保持简短和口语化，就像真实的社交媒体评论一样。`;setTimeout(async()=>{try{const $e=await Pn(Le);if($e&&$e.trim()!==""){const an={id:`comment_${Date.now()}_${Ie.id}`,authorId:Ie.id,content:$e},Nn=await ce.posts.get(P.id);if(Nn){const fe={...Nn,comments:[...Nn.comments||[],an]};await ce.posts.put(fe),B(Te=>Te.map(_e=>_e.id===P.id?fe:_e))}}}catch($e){console.error(`为 ${Ie.name} 生成评论失败`,$e.message)}},Math.random()*1e4+5e3)}const ke=m.filter(Ie=>Ie.id!==P.authorId);for(const Ie of ke)Math.random()>.4&&setTimeout(()=>{dt(P.id,Ie.id)},Math.random()*8e3+4e3)},ft=async P=>{if(Me(!1),!t||n.length===0){alert("请在“我”的页面设置您的API密钥以生成动态。");return}const oe=m.find(de=>de.id===P);if(!oe)return;const ee=`你是 ${oe.name}。你的角色设定是：“${oe.systemInstruction}”。请以你的角色身份，为你的“朋友圈”发布一条动态。
规则：
1.  动态必须包含文字内容。内容应是你（作为 ${oe.name}）的个人生活片段、具体感受、真实想法或日常观察。
2.  你可以选择性地附带一张通过文字描述的图片，格式为 [image: 图片的详细描述]。
3.  **核心要求：** 你的动态必须**非常真实**。听起来要**完全**像一个真正的人在分享日常，而不是一个AI在执行任务。
4.  **禁止事项1：** 绝对不要包含任何前言、后记或元评论（例如：“好的，这是...”或“为你准备的动态：”或使用“---”分隔符）。**请直接输出朋友圈动态的文字本身。**
5.  **禁止事项2：** 绝对不要提及你“AI”、“模型”、“程序”的身份，也不要说“我无法感受...”或“我收到了很多关于...的问题...”。你的分享必须是基于你的角色设定（${oe.systemInstruction}）的第一人称体验。
6.  **风格提示：** 你的文字应该口语化、生活化，可以带有一些具体的情绪（开心、疲惫、期待等）。

例如（这些只是格式示例，你的内容必须符合 ${oe.name} 的设定）：
-   (文字 + 图片): "今天天气不错，忙里偷闲一下。[image: 一杯冒着热气的拿铁咖啡放在木桌上，旁边有一本打开的书]"
-   (仅文字): "今天工作好累，脑子快转不动了，想早点休息了。"
-   (仅文字): "终于把那个棘手的项目搞定了！今晚必须吃顿好的犒劳自己！"
-   (文字 + 图片): "晚饭不小心做多了... 有人要来“消灭”一下吗？[image: 一大盘色彩鲜艳的炒时蔬，旁边还有两碗米饭]"`;try{const de=await Pn(ee),ye={id:`post_${Date.now()}`,authorId:oe.id,content:de,timestamp:new Date().toLocaleString(),comments:[],likes:[]};await ce.posts.put(ye),B(ke=>[ye,...ke]),Rr(ye)}catch(de){alert(`生成动态失败: ${de.message}`)}},ts=async P=>{const oe={id:`post_${Date.now()}`,authorId:go,content:P,timestamp:new Date().toLocaleString(),comments:[],likes:[]};await ce.posts.put(oe),B(ee=>[oe,...ee]),Y(!1),t&&Rr(oe)},Dr=async(P,oe)=>{const ee={id:`comment_${Date.now()}`,authorId:go,content:oe},de=await ce.posts.get(P);if(!de)return;const ye=de.comments||[],ke={...de,comments:[...ye,ee]};await ce.posts.put(ke),B(Ie=>Ie.map(Le=>Le.id===P?ke:Le)),t&&Rr(ke)},rs=async(P,oe,ee)=>{const de=`char_${Date.now()}`,ye={id:de,name:P,avatarUrl:oe||`https://api.dicebear.com/8.x/bottts/svg?seed=${P}`,systemInstruction:ee};await ce.characters.put(ye),y(ke=>[...ke,ye]),x(ke=>({...ke,[de]:[]})),$(!1)},Lr=async(P,oe,ee,de,ye,ke,Ie,Le,$e,an)=>{const fe={...m.find(Te=>Te.id===P),name:oe,avatarUrl:ee,systemInstruction:de,chatBackgroundUrl:ye,nicknameForUser:ke,autoReplyDelay:Ie,todos:Le,anniversaries:$e,historyMemory:an};await ce.characters.put(fe),y(Te=>Te.map(_e=>_e.id===P?fe:_e)),z(null),Ye.current={}},Ht=async P=>{window.confirm("您确定要删除这个角色吗？所有相关的聊天、动态和评论都将被永久删除。")&&(await ce.transaction("rw",ce.characters,ce.chats,ce.posts,async()=>{await ce.characters.delete(P),await ce.chats.where("characterId").equals(P).delete(),await ce.posts.where("authorId").equals(P).delete();const ee=(await ce.posts.toArray()).map(de=>({...de,comments:de.comments.filter(ye=>ye.authorId!==P),likes:de.likes.filter(ye=>ye!==P)}));await ce.posts.bulkPut(ee)}),y(oe=>oe.filter(ee=>ee.id!==P)),x(oe=>{const ee={...oe};return delete ee[P],ee}),B(oe=>oe.filter(de=>de.authorId!==P).map(de=>({...de,comments:de.comments.filter(ye=>ye.authorId!==P),likes:de.likes.filter(ye=>ye!==P)}))),Ye.current={},E===P&&w(null),H===P&&z(null))},Gt=async P=>{ln(P),await ce.settings.put({key:"apiConfig",value:P}),Ye.current={}},jo=async P=>{Be(P),await ce.settings.put({key:"chatTheme",value:P})},Ur=async P=>{Ee(P),await ce.settings.put({key:"momentsBackground",value:P})},ei=async(P,oe)=>{const ee={id:`sticker_${Date.now()}`,name:P,imageUrl:oe};await ce.customStickers.put(ee),I(de=>[...de,ee]),rn(!1)},so=async P=>{await ce.customStickers.delete(P),I(oe=>oe.filter(ee=>ee.id!==P))},bt=async()=>{const P=await ce.transaction("r",ce.tables,async()=>{const ye={};for(const ke of ce.tables)ye[ke.name]=await ke.toArray();return ye}),oe=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),ee=URL.createObjectURL(oe),de=document.createElement("a");de.href=ee,de.download=`gemini_chat_backup_${new Date().toISOString().split("T")[0]}.json`,de.click(),URL.revokeObjectURL(ee)},lo=P=>{var de;const oe=(de=P.target.files)==null?void 0:de[0];if(!oe)return;const ee=new FileReader;ee.onload=async ye=>{var ke;try{const Ie=JSON.parse((ke=ye.target)==null?void 0:ke.result);await ce.transaction("rw",ce.tables,async()=>{for(const Le of ce.tables)await Le.clear();for(const Le in Ie)ce[Le]&&await ce[Le].bulkPut(Ie[Le])}),alert("数据导入成功！应用即将刷新。"),window.location.reload()}catch(Ie){alert("数据导入失败。文件可能已损坏或格式不正确。"),console.error("Import error:",Ie)}},ee.readAsText(oe)},ao=Q.useCallback(async P=>{if(Hn.current.has(P))return;const oe=m.find(ee=>ee.id===P);if(!(!oe||!oe.autoReplyDelay||oe.autoReplyDelay<=0))try{Hn.current.add(P),console.log(`Sending auto-reply to ${oe.name}`);const ee=`msg_${Date.now()}_pending_auto`,de={id:ee,role:"model",payload:{type:"text",content:""},timestamp:Date.now(),characterId:P};x(fe=>({...fe,[P]:[...fe[P]||[],de]}));const Ie=await(await Re(oe)).sendMessageStream({message:"[系统提示：用户已经有一段时间没有回复了。请发送一条简短、符合你角色性格的消息来重新吸引他们。你可以问一个问题，或者开启一个新的相关话题。不要提及这是一条自动消息或系统提示。]"});let Le="",$e=!1;for await(const fe of Ie)$e||($e=!0,x(Te=>{const _e={...Te},Ge=[..._e[P]||[]],Ce=Ge.findIndex(on=>on.id===ee);if(Ce!==-1){const on={...Ge[Ce],payload:{type:"text",content:" "}};Ge[Ce]=on,_e[P]=Ge}return _e})),Le+=fe.text;const an=[];Le.split(qs).map(fe=>fe.trim()).filter(Boolean).forEach((fe,Te)=>{let _e;const Ge=fe.match(/\[sticker:(.*?)\]/),Ce=fe.match(/\[transfer:(.*?):(.*?)\]/),on=fe.match(/\[image:(.*?)\]/),Ke=fe.match(/\[location:(.*?)\]/);if(Ge){const xn=Ge[1].trim(),Je=J.find(pn=>pn.name===xn);_e=Je?{type:"sticker",stickerId:Je.id}:{type:"text",content:fe}}else Ce?_e={type:"transfer",amount:parseFloat(Ce[1]),notes:Ce[2]}:on?_e={type:"image",description:on[1].trim()}:Ke?_e={type:"location",name:Ke[1].trim()}:_e={type:"text",content:fe};an.push({id:`msg_${Date.now()}_auto_${Te}`,characterId:P,role:"model",payload:_e,timestamp:Date.now()+Te})}),an.length>0?(await ce.chats.bulkPut(an),x(fe=>{let Te=(fe[P]||[]).filter(_e=>_e.id!==ee);return{...fe,[P]:[...Te,...an]}})):x(fe=>({...fe,[P]:(fe[P]||[]).filter(Te=>Te.id!==ee)}))}catch(ee){console.error(`Error sending auto-reply to ${P}:`,ee),x(de=>({...de,[P]:(de[P]||[]).filter(ye=>!ye.id.includes("_pending_auto"))}))}finally{Hn.current.delete(P)}},[m,Re,J]);if(Q.useEffect(()=>{const oe=setInterval(()=>{for(const ee of m)if(ee.autoReplyDelay&&ee.autoReplyDelay>0){const de=v[ee.id]||[];if(de.length>0){const ye=de[de.length-1];if(ye.role==="model"){const ke=Date.now()-ye.timestamp,Ie=ee.autoReplyDelay*60*1e3;ke>Ie&&ao(ee.id)}}}},6e4);return()=>clearInterval(oe)},[m,v,ao]),!je)return C.jsx("div",{className:"loading-screen",children:"加载中..."});const St=m.find(P=>P.id===E),ve=m.find(P=>P.id===H),zt=m.find(P=>P.id===E),Mt=zt==null?void 0:zt.chatBackgroundUrl,uo=()=>{if(ve)return C.jsx(Qw,{character:ve,onSave:Lr,onBack:()=>z(null),userName:o,onDelete:Ht});if(E&&St)return C.jsx(Hw,{character:St,messages:v[E]||[],onSendMessage:Oe,onBack:()=>w(null),onShowDetails:()=>z(E),userAvatar:s,customStickers:J,onAddSticker:()=>rn(!0),onDeleteSticker:so,onDeleteMessage:Sn,onEditMessage:or});switch(f){case"chats":return C.jsx(oh,{characters:m,chats:v,onSelectChat:w,onAdd:()=>p("add-menu")});case"contacts":return C.jsx(Lw,{characters:m,onSelectChat:w});case"moments":return C.jsx(Gw,{personas:yn,posts:U,onAddComment:Dr,onAddPost:()=>Y(!0),onGenerate:()=>Me(!0),userName:o,userAvatar:s,momentsBackground:ae,onLikePost:P=>dt(P,go),onDeletePost:Ql});case"me":return C.jsx($w,{currentConfig:He,onSaveApiConfig:Gt,apiKeys:n,activeApiKeyId:t,onDeleteApiKey:Se,onSetActiveApiKey:io,userName:o,userAvatar:s,onSaveUserName:Nt,onSaveUserAvatar:j,onImport:lo,onExport:bt,onSetMomentsBackground:Ur,onAddApiKey:()=>we(!0),currentTheme:ge,onThemeChange:jo});case"add-menu":return C.jsx(Kw,{onBack:()=>p("chats"),onAddCharacter:()=>$(!0),onAddApiKey:()=>we(!0)});default:return C.jsx(oh,{characters:m,chats:v,onSelectChat:w,onAdd:()=>p("add-menu")})}};return C.jsxs("div",{className:`app-container theme-${ge}`,children:[C.jsx("style",{children:`
        ${Mt?`
          .chat-view[data-character-id="${E}"] .messages-container {
            background-image: url("${Mt}");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
          }
        `:""}
      `}),uo(),!E&&!H&&f!=="add-menu"&&C.jsx(nx,{activeView:f,onViewChange:p}),O&&C.jsx(Ow,{onClose:()=>$(!1),onSave:rs}),te&&C.jsx(Xw,{onClose:()=>Y(!1),onSave:ts}),ue&&C.jsx(Zw,{onClose:()=>we(!1),onSave:Zo}),Ve&&C.jsx(jw,{onClose:()=>rn(!1),onSave:ei}),xe&&C.jsx(ex,{characters:m,onClose:()=>Me(!1),onSelect:ft})]})},Xt=({title:n,onBack:e,onAction:t,actionIcon:r,className:o})=>{const i={add:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),info:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),camera:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M14.12 4l1.83 2H20v12H4V6h4.05l1.83-2h4.24M15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm-3 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"})}),search:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})};return C.jsxs("header",{className:`header ${o||""}`,children:[e&&C.jsx("button",{onClick:e,className:"header-button back-button",children:"<"}),C.jsx("span",{children:n}),t&&r&&C.jsx("button",{onClick:t,className:"header-button action-button",children:i[r]})]})},oh=({characters:n,chats:e,onSelectChat:t,onAdd:r})=>{const o=i=>{const s=e[i];if(!s||s.length===0)return"还没有消息。";const c=[...s].reverse().find(f=>f.payload.type!=="text"||f.payload.content.trim());return Rw(c)};return C.jsxs(C.Fragment,{children:[C.jsx(Xt,{title:"聊天",onAction:r,actionIcon:"add"}),C.jsx("main",{className:"main-content",children:C.jsx("ul",{className:"chat-list",children:n.map(i=>C.jsxs("li",{className:"chat-list-item",onClick:()=>t(i.id),children:[C.jsx("img",{src:i.avatarUrl,alt:i.name,className:"avatar"}),C.jsxs("div",{className:"chat-info",children:[C.jsx("h3",{children:i.name}),C.jsx("p",{children:o(i.id)})]})]},i.id))})})]})},Lw=({characters:n,onSelectChat:e})=>{const[t,r]=Q.useState(""),[o,i]=Q.useState(!1),c=[...n].sort((f,p)=>f.name.localeCompare(p.name)).filter(f=>f.name.toLowerCase().includes(t.toLowerCase()));return C.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[o?C.jsxs("div",{className:"search-header-active",children:[C.jsx("div",{className:"search-input-wrapper-active",children:C.jsx("input",{type:"text",placeholder:"搜索",className:"search-input-active",value:t,onChange:f=>r(f.target.value),autoFocus:!0})}),C.jsx("button",{onClick:()=>{i(!1),r("")},className:"cancel-search-btn",children:"取消"})]}):C.jsx(Xt,{title:"通讯录",onAction:()=>i(!0),actionIcon:"search"}),C.jsx("main",{className:"main-content contact-list-main",children:C.jsx("ul",{className:"chat-list",children:c.map(f=>C.jsxs("li",{className:"chat-list-item",onClick:()=>e(f.id),children:[C.jsx("img",{src:f.avatarUrl,alt:f.name,className:"avatar"}),C.jsx("div",{className:"chat-info",children:C.jsx("h3",{children:f.name})})]},f.id))})})]})},Og=({description:n})=>C.jsxs("div",{className:"descriptive-image-bubble",children:[C.jsx("div",{className:"descriptive-image-icon",children:C.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M811.272038 156.318208l-595.873246 0c-46.818305 0-85.124749 38.306444-85.124749 85.124749l0 535.616884c0 46.818305 38.306444 85.124749 85.124749 85.124749l595.873246 0c46.818305 0 85.124749-38.306444 85.124749-85.124749l0-535.616884C896.396787 194.624652 858.090343 156.318208 811.272038 156.318208zM318.595129 255.961626c42.952254 0 77.771271 34.819017 77.771271 77.771271s-34.819017 77.771271-77.771271 77.771271-77.771271-34.819017-77.771271-77.771271S275.642874 255.961626 318.595129 255.961626zM215.398792 734.497467l148.9678-197.609637 106.405425 127.687124 148.968823-191.530175 191.530175 261.45371L215.398792 734.49849z"})})}),C.jsx("p",{children:n})]}),Uw=({message:n,stickers:e})=>{const{payload:t,role:r}=n;switch(t.type){case"text":return C.jsx(C.Fragment,{children:t.content});case"sticker":{const o=e.find(i=>i.id===t.stickerId);return o?C.jsx("img",{src:o.imageUrl,alt:o.name,className:"sticker-in-chat"}):"[表情未找到]"}case"image":return C.jsx(Og,{description:t.description});case"location":return C.jsxs("div",{className:"location-bubble-wechat",children:[C.jsx("div",{className:"location-bubble-text",children:C.jsx("h5",{children:t.name})}),C.jsx("div",{className:"location-bubble-map-preview",children:C.jsx("svg",{viewBox:"0 0 24 24",className:"location-pin-icon",children:C.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})})]});case"transfer":{const o=r==="user",i=t.notes||(o?"转账给朋友":"收到转账");return C.jsxs("div",{className:`transfer-bubble ${o?"sent":"received"}`,children:[C.jsx("div",{className:"transfer-icon",children:C.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),C.jsx("path",{d:"M2 17l10 5 10-5"}),C.jsx("path",{d:"M2 12l10 5 10-5"})]})}),C.jsxs("div",{className:"transfer-details",children:[C.jsxs("span",{className:"transfer-amount",children:["¥",t.amount.toFixed(2)]}),C.jsx("span",{className:"transfer-note",children:i})]})]})}default:return null}},Fw=({stickers:n,onSelectSticker:e,onAddSticker:t,onDeleteSticker:r,isOpen:o})=>{const[i,s]=Q.useState(!1);return C.jsxs("div",{className:`sticker-panel ${o?"open":""}`,children:[C.jsx("div",{className:"sticker-panel-header",children:C.jsx("button",{className:"sticker-panel-action-btn",onClick:()=>s(!i),children:i?"完成":"管理"})}),C.jsxs("div",{className:"sticker-grid-chat",children:[n.map(c=>C.jsxs("div",{className:"sticker-item-chat",onClick:()=>!i&&e(c),children:[C.jsx("img",{src:c.imageUrl,alt:c.name}),i&&C.jsx("button",{className:"delete-sticker-btn",onClick:f=>{f.stopPropagation(),r(c.id)},children:"×"})]},c.id)),C.jsx("button",{className:"add-sticker-btn-chat",onClick:t,children:"+"})]})]})},Vw=({onAction:n,isOpen:e})=>C.jsx("div",{className:`actions-panel ${e?"open":""}`,children:C.jsxs("div",{className:"actions-grid",children:[C.jsxs("div",{className:"action-item",onClick:()=>n("image"),children:[C.jsx("div",{className:"action-icon-wrapper",children:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9-2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})})}),C.jsx("span",{className:"action-label",children:"图片"})]}),C.jsxs("div",{className:"action-item",onClick:()=>n("transfer"),children:[C.jsx("div",{className:"action-icon-wrapper transfer-icon-bg",children:C.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:C.jsx("path",{d:"M20 6H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 2v2.51c-.63-.33-1.31-.51-2-.51-2.76 0-5 2.24-5 5s2.24 5 5 5c.69 0 1.37-.18 2-.51V20H4V8h16zM18 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"})})}),C.jsx("span",{className:"action-label",children:"转账"})]}),C.jsxs("div",{className:"action-item",onClick:()=>n("location"),children:[C.jsx("div",{className:"action-icon-wrapper",children:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})}),C.jsx("span",{className:"action-label",children:"位置"})]})]})}),Bw=({character:n,onClose:e,onSend:t})=>{const[r,o]=Q.useState(""),[i,s]=Q.useState(""),c=()=>{const f=parseFloat(r);!isNaN(f)&&f>0?t(f,i):alert("请输入有效金额。")};return C.jsx("div",{className:"modal-overlay",onClick:e,children:C.jsxs("div",{className:"modal-content transfer-modal-content",onClick:f=>f.stopPropagation(),children:[C.jsxs("div",{className:"transfer-modal-header",children:[C.jsx("button",{className:"close-btn",onClick:e,children:"×"}),C.jsxs("span",{children:["转账给 ",n.name]})]}),C.jsxs("div",{className:"transfer-modal-body",children:[C.jsx("img",{src:n.avatarUrl,alt:n.name,className:"avatar transfer-recipient-avatar"}),C.jsxs("div",{className:"form-group transfer-amount-group",children:[C.jsx("label",{children:"金额"}),C.jsxs("div",{className:"amount-input-wrapper",children:[C.jsx("span",{children:"¥"}),C.jsx("input",{type:"number",value:r,onChange:f=>o(f.target.value),placeholder:"0.00",autoFocus:!0})]})]}),C.jsx("div",{className:"form-group",children:C.jsx("input",{type:"text",value:i,onChange:f=>s(f.target.value),placeholder:"添加备注 (可选)",className:"notes-input"})})]}),C.jsx("div",{className:"transfer-modal-footer",children:C.jsx("button",{className:"save-btn-full",onClick:c,disabled:!r||parseFloat(r)<=0,children:"转账"})})]})})},qw=({type:n,onClose:e,onSave:t})=>{const[r,o]=Q.useState(""),i=n==="image"?"发送图片":"发送位置",s=n==="image"?"描述图片...":"输入地点名称...",c=()=>{r.trim()&&t(r.trim())};return C.jsx("div",{className:"modal-overlay",onClick:e,children:C.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:[C.jsx("h2",{children:i}),C.jsx("div",{className:"form-group",children:C.jsx("textarea",{value:r,onChange:f=>o(f.target.value),placeholder:s,autoFocus:!0})}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"cancel-btn",onClick:e,children:"取消"}),C.jsx("button",{className:"save-btn",onClick:c,disabled:!r.trim(),children:"发送"})]})]})})},Hw=({character:n,messages:e,onSendMessage:t,onBack:r,onShowDetails:o,userAvatar:i,customStickers:s,onAddSticker:c,onDeleteSticker:f,onDeleteMessage:p,onEditMessage:m})=>{const[y,v]=Q.useState(""),[x,U]=Q.useState(!1),[B,J]=Q.useState(null),[I,E]=Q.useState(!1),[w,H]=Q.useState(null),[z,O]=Q.useState(null),[$,te]=Q.useState(null),[Y,ue]=Q.useState(""),[we,xe]=Q.useState([]),[Me,Ve]=Q.useState(!0),[rn,He]=Q.useState(!0),ln=Q.useRef(null),ae=Q.useRef(null),Ee=Q.useRef(null),ge=Q.useRef(null),Be=Q.useRef(0);Q.useEffect(()=>{const j=e.slice(-Hs);xe(j),Ve(e.length>Hs),He(!0)},[e,n.id]),Q.useLayoutEffect(()=>{rn&&ge.current&&(ge.current.scrollTop=ge.current.scrollHeight,He(!1))},[rn,we]);const je=Q.useCallback(()=>{if(!Me||!ge.current)return;Be.current=ge.current.scrollHeight;const j=we.length,Re=e.slice(Math.max(0,e.length-j-Hs),e.length-j);xe(Oe=>[...Re,...Oe]),Ve(e.length-j-Hs>0)},[we,Me,e]);Q.useLayoutEffect(()=>{ge.current&&Be.current>0&&(ge.current.scrollTop+=ge.current.scrollHeight-Be.current,Be.current=0)},[we.length]),Q.useEffect(()=>{const j=new IntersectionObserver(Oe=>{Oe[0].isIntersecting&&je()},{root:ge.current,threshold:.1}),Re=Ee.current;return Re&&j.observe(Re),()=>{Re&&j.unobserve(Re)}},[je]),Q.useEffect(()=>{var Oe;const j=e[e.length-1],Re=we[we.length-1];j&&Re&&j.id===Re.id&&j.role==="user"&&((Oe=ln.current)==null||Oe.scrollIntoView({behavior:"smooth"}))},[e,we]);const Ye=!![...e].reverse().find(j=>j.role==="model"&&j.payload.type==="text"&&j.payload.content.includes("API"));Q.useEffect(()=>{$&&$.payload.type==="text"?ue($.payload.content):ue("")},[$]);const Hn=async()=>{var Re;const j=y.trim();j===""||x||(U(!0),v(""),await t(n.id,{type:"text",content:j}),U(!1),(Re=ae.current)==null||Re.focus(),setTimeout(()=>{var Oe;return(Oe=ln.current)==null?void 0:Oe.scrollIntoView({behavior:"smooth"})},100))},yn=j=>{const Re=y.trim(),Oe=[];Re&&(Oe.push({type:"text",content:Re}),v("")),Oe.push({type:"sticker",stickerId:j.id}),t(n.id,Oe),J(null),setTimeout(()=>{var Sn;return(Sn=ln.current)==null?void 0:Sn.scrollIntoView({behavior:"smooth"})},100)},et=(j,Re)=>{const Oe=y.trim(),Sn=[];Oe&&(Sn.push({type:"text",content:Oe}),v("")),Sn.push({type:"transfer",amount:j,notes:Re}),t(n.id,Sn),E(!1),setTimeout(()=>{var or;return(or=ln.current)==null?void 0:or.scrollIntoView({behavior:"smooth"})},100)},Zo=j=>{if(w){const Re=y.trim(),Oe=[];Re&&(Oe.push({type:"text",content:Re}),v("")),w==="image"?Oe.push({type:"image",description:j}):w==="location"&&Oe.push({type:"location",name:j}),Oe.length>0&&t(n.id,Oe)}H(null),setTimeout(()=>{var Re;return(Re=ln.current)==null?void 0:Re.scrollIntoView({behavior:"smooth"})},100)},Se=j=>{switch(J(null),j){case"transfer":E(!0);break;case"image":H("image");break;case"location":H("location");break}},io=(j,Re)=>{j.preventDefault(),O({x:j.pageX,y:j.pageY,message:Re})};Q.useEffect(()=>{const j=()=>O(null);return window.addEventListener("click",j),window.addEventListener("scroll",j,!0),()=>{window.removeEventListener("click",j),window.removeEventListener("scroll",j,!0)}},[]);const Nt=()=>{$&&Y.trim()&&m(n.id,$.id,Y.trim()),te(null)};return C.jsxs("div",{className:"chat-view","data-character-id":n.id,children:[C.jsx(Xt,{title:n.name,onBack:r,onAction:o,actionIcon:"info"}),C.jsxs("main",{ref:ge,className:"messages-container",children:[Me&&C.jsx("div",{ref:Ee,style:{height:"10px",textAlign:"center"}}),we.map((j,Re)=>{const Oe=we[Re-1],Sn=!Oe||j.timestamp-Oe.timestamp>Nw;if(j.payload.type==="text"&&j.payload.content.trim()==="")return null;const or=j.payload.type!=="text";return C.jsxs(Ny.Fragment,{children:[Sn&&C.jsx("div",{className:"timestamp-wrapper",children:C.jsx("span",{className:"timestamp",children:Mw(j.timestamp)})}),C.jsx("div",{className:`message-bubble-wrapper ${j.role}`,children:C.jsxs("div",{className:`message-bubble ${j.role} ${or?"special-content-bubble":""}`,onContextMenu:Pn=>io(Pn,j),children:[C.jsx("img",{src:j.role==="model"?n.avatarUrl:i,alt:j.role,className:"avatar"}),($==null?void 0:$.id)===j.id?C.jsxs("div",{className:"message-content editing",children:[C.jsx("textarea",{value:Y,onChange:Pn=>ue(Pn.target.value),onInput:Pn=>{const dt=Pn.currentTarget;dt.style.height="auto",dt.style.height=`${dt.scrollHeight}px`},onFocus:Pn=>{const dt=Pn.currentTarget;dt.style.height="auto",dt.style.height=`${dt.scrollHeight}px`},autoFocus:!0,onKeyDown:Pn=>{Pn.key==="Enter"&&!Pn.shiftKey&&(Pn.preventDefault(),Nt())},onBlur:Nt}),C.jsx("button",{onClick:Nt,children:"保存"})]}):C.jsx("div",{className:"message-content",children:C.jsx(Uw,{message:j,stickers:s})})]})})]},j.id||Re)}),C.jsx("div",{ref:ln})]}),C.jsxs("footer",{className:"chat-input-area",children:[C.jsxs("div",{className:"chat-input-controls",children:[C.jsx("input",{ref:ae,type:"text",value:y,onChange:j=>v(j.target.value),onKeyPress:j=>j.key==="Enter"&&!x&&!Ye&&Hn(),placeholder:"输入消息...",disabled:x||Ye,onFocus:()=>J(null)}),C.jsx("button",{className:"sticker-toggle-btn",onClick:()=>J(j=>j==="stickers"?null:"stickers"),children:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})})}),y.trim()!==""?C.jsx("button",{className:"send-btn",onClick:Hn,disabled:x||Ye||y.trim()==="",children:"发送"}):C.jsx("button",{className:"actions-toggle-btn",onClick:()=>J(j=>j==="actions"?null:"actions"),children:C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})})})]}),C.jsx(Fw,{stickers:s,onSelectSticker:yn,onAddSticker:c,onDeleteSticker:f,isOpen:B==="stickers"}),C.jsx(Vw,{onAction:Se,isOpen:B==="actions"})]}),z&&C.jsxs("div",{className:"context-menu",style:{top:z.y,left:z.x},children:[z.message.payload.type==="text"&&C.jsx("div",{onClick:()=>{te(z.message),O(null)},children:"编辑"}),C.jsx("div",{onClick:()=>{p(n.id,z.message.id),O(null)},children:"删除"})]}),I&&C.jsx(Bw,{character:n,onClose:()=>E(!1),onSend:et}),w&&C.jsx(qw,{type:w,onClose:()=>H(null),onSave:Zo})]})},Gw=({personas:n,posts:e,onGenerate:t,onAddComment:r,onAddPost:o,userName:i,userAvatar:s,momentsBackground:c,onLikePost:f,onDeletePost:p})=>{const[m,y]=Q.useState(!1),[v,x]=Q.useState(!1),U=Q.useRef(null);Q.useEffect(()=>{const w=H=>{U.current&&!U.current.contains(H.target)&&y(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const B=w=>{x(w.currentTarget.scrollTop>220)},J=()=>{y(!1),o()},I=()=>{y(!1),t()},E={backgroundImage:`url(${c||"https://source.unsplash.com/random/800x500?nature,landscape"})`};return C.jsxs("div",{className:"moments-page",children:[C.jsx(Xt,{title:"朋友圈",onAction:()=>y(w=>!w),actionIcon:"camera",className:`moments-header ${v?"opaque":""}`}),m&&C.jsxs("div",{className:"moments-action-menu",ref:U,children:[C.jsx("div",{onClick:J,children:"发表动态"}),C.jsx("div",{onClick:I,children:"AI发表动态"})]}),C.jsxs("main",{className:"main-content moments-view",onScroll:B,children:[C.jsxs("div",{className:"moments-feed-header",children:[C.jsx("div",{className:"moments-cover-photo",style:E}),C.jsxs("div",{className:"moments-user-info",children:[C.jsx("span",{children:i}),C.jsx("img",{src:s,alt:"user avatar",className:"avatar"})]})]}),C.jsx("div",{className:"moments-posts-list",children:e.map(w=>{const H=n[w.authorId];return H?C.jsx(bw,{post:w,author:H,personas:n,onAddComment:r,onLikePost:f,onDeletePost:p},w.id):null})})]})]})},bw=({post:n,author:e,personas:t,onAddComment:r,onLikePost:o,onDeletePost:i})=>{const[s,c]=Q.useState(""),[f,p]=Q.useState(!1),[m,y]=Q.useState(!1),v=Q.useRef(null),x=Q.useRef(null);Q.useEffect(()=>{const z=O=>{v.current&&!v.current.contains(O.target)&&p(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]),Q.useEffect(()=>{var z;m&&((z=x.current)==null||z.focus())},[m]);const U=()=>{s.trim()&&(r(n.id,s.trim()),c(""),y(!1))},B=()=>{o(n.id),p(!1)},J=()=>{y(!0),p(!1)},I=()=>{i(n.id),p(!1)},E=(n.likes||[]).length>0||(n.comments||[]).length>0,w=n.content.match(/\[image:(.*?)\]/),H=w?n.content.replace(/\[image:.*?\]\s*/,"").trim():n.content;return C.jsxs("div",{className:"moment-post",children:[C.jsxs("div",{className:"moment-header",children:[C.jsx("img",{src:e.avatarUrl,alt:e.name,className:"avatar"}),C.jsx("h4",{children:e.name})]}),H&&C.jsx("p",{className:"moment-content",children:H}),w&&C.jsx(Og,{description:w[1].trim()}),C.jsxs("div",{className:"moment-footer",children:[C.jsx("span",{className:"moment-timestamp",children:n.timestamp}),C.jsx("div",{className:"moment-actions-trigger",onClick:()=>p(z=>!z),children:"..."}),f&&C.jsxs("div",{className:"moment-actions-menu",ref:v,children:[C.jsxs("div",{className:"action-item",onClick:B,children:[C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(n.likes||[]).includes(go)?"取消赞":"赞"]}),C.jsxs("div",{className:"action-item",onClick:J,children:[C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"})}),"评论"]}),C.jsxs("div",{className:"action-item",onClick:I,children:[C.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),"删除"]})]})]}),(E||m)&&C.jsxs("div",{className:"likes-and-comments-section",children:[(n.likes||[]).length>0&&C.jsxs("div",{className:"likes-section",children:[C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(n.likes||[]).map((z,O)=>{var $;return C.jsxs("span",{className:"like-author",children:[($=t[z])==null?void 0:$.name,O<n.likes.length-1?"，":""]},z)})]}),(n.comments||[]).map(z=>{const O=t[z.authorId];return C.jsxs("div",{className:"comment-item",children:[C.jsx("img",{src:O.avatarUrl,alt:O.name,className:"avatar"}),C.jsxs("div",{className:"comment-content",children:[C.jsx("span",{className:"comment-author",children:O.name}),C.jsx("span",{children:z.content})]})]},z.id)})]}),m&&C.jsxs("div",{className:"comment-input-area",children:[C.jsx("input",{ref:x,type:"text",placeholder:"添加评论...",value:s,onChange:z=>c(z.target.value),onKeyPress:z=>z.key==="Enter"&&U(),onBlur:()=>{!s&&y(!1)}}),C.jsx("button",{onClick:U,disabled:!s.trim(),children:"发送"})]})]})},Yl=({currentAvatar:n,onAvatarChange:e,className:t=""})=>{const r=Q.useRef(null),o=()=>{var s;return(s=r.current)==null?void 0:s.click()},i=async s=>{var f;const c=(f=s.target.files)==null?void 0:f[0];if(c){const p=await Zc(c);e(p)}};return C.jsxs("div",{className:`avatar-uploader ${t}`,onClick:o,children:[C.jsx("img",{src:n,alt:"avatar"}),C.jsx("div",{className:"avatar-overlay",children:"点击上传"}),C.jsx("input",{type:"file",ref:r,onChange:i,accept:"image/*",style:{display:"none"}})]})},zw=({currentName:n,onClose:e,onSave:t})=>{const[r,o]=Q.useState(n),i=()=>{r.trim()&&t(r.trim())};return C.jsx("div",{className:"modal-overlay",onClick:e,children:C.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[C.jsx("h2",{children:"修改名字"}),C.jsx("div",{className:"form-group",children:C.jsx("input",{id:"user-name-edit-input",type:"text",value:r,onChange:s=>o(s.target.value),autoFocus:!0})}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"cancel-btn",onClick:e,children:"取消"}),C.jsx("button",{className:"save-btn",onClick:i,disabled:!r.trim(),children:"保存"})]})]})})},$w=({currentConfig:n,onSaveApiConfig:e,apiKeys:t,activeApiKeyId:r,onDeleteApiKey:o,onSetActiveApiKey:i,userName:s,userAvatar:c,onSaveUserName:f,onSaveUserAvatar:p,onImport:m,onExport:y,onSetMomentsBackground:v,onAddApiKey:x,currentTheme:U,onThemeChange:B})=>{const[J,I]=Q.useState(n),[E,w]=Q.useState(!1),H=Q.useRef(null),z=Q.useRef(null);Q.useEffect(()=>{I(n)},[n]);const O=()=>e(J),$=Y=>Y.length>8?`${Y.substring(0,4)}...${Y.substring(Y.length-4)}`:Y,te=Y=>async ue=>{var xe;const we=(xe=ue.target.files)==null?void 0:xe[0];if(we)try{const Me=await Zc(we);Y(Me)}catch(Me){console.error("Error converting file to Base64",Me),alert("无法加载图片。")}};return C.jsxs(C.Fragment,{children:[C.jsx(Xt,{title:"我"}),C.jsxs("main",{className:"main-content settings-view",children:[C.jsxs("div",{className:"user-profile-banner",children:[C.jsx(Yl,{currentAvatar:c,onAvatarChange:p,className:"profile-banner-avatar"}),C.jsxs("div",{className:"user-name-display",onClick:()=>w(!0),children:[C.jsx("span",{children:s}),C.jsx("svg",{viewBox:"0 0 24 24",className:"edit-icon",children:C.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})]})]}),C.jsxs("div",{className:"settings-section",children:[C.jsx("h3",{children:"API 密钥"}),C.jsx("ul",{className:"api-key-list",children:t.map(Y=>C.jsxs("li",{className:"api-key-item",children:[C.jsx("input",{type:"radio",name:"api-key",checked:r===Y.id,onChange:()=>i(Y.id)}),C.jsxs("div",{className:"api-key-info",children:[C.jsx("div",{className:"name",children:Y.name}),C.jsx("div",{className:"key-preview",children:$(Y.key)})]}),C.jsx("button",{className:"delete-key-btn",onClick:()=>o(Y.id),children:"删除"})]},Y.id))}),C.jsx("div",{className:"add-key-button",onClick:x,children:"+ 添加API密钥"}),C.jsxs("div",{className:"billing-link",children:["从 ",C.jsx("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio"})," 获取您的API密钥。"]})]}),C.jsxs("div",{className:"settings-section",children:[C.jsx("h3",{children:"模型设置"}),C.jsxs("div",{className:"settings-item",children:[C.jsx("label",{htmlFor:"model-select",children:"模型"}),C.jsxs("select",{id:"model-select",value:J.model,onChange:Y=>I({...J,model:Y.target.value}),onBlur:O,children:[C.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),C.jsx("option",{value:"gemini-2.5-pro",children:"Gemini 2.5 Pro"})]})]}),C.jsxs("div",{className:"settings-item",children:[C.jsx("label",{children:"温度"}),C.jsxs("div",{className:"slider-container",children:[C.jsx("span",{children:"0.0"}),C.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:J.temperature,onChange:Y=>I({...J,temperature:parseFloat(Y.target.value)}),onMouseUp:O,onTouchEnd:O}),C.jsx("span",{children:J.temperature.toFixed(1)})]})]})]}),C.jsxs("div",{className:"settings-section",children:[C.jsx("h3",{children:"外观"}),C.jsxs("div",{className:"settings-item",children:[C.jsx("label",{htmlFor:"theme-select",children:"主题"}),C.jsxs("select",{id:"theme-select",value:U,onChange:Y=>B(Y.target.value),children:[C.jsx("option",{value:"wechat",children:"微信"}),C.jsx("option",{value:"sakura-pink",children:"樱花粉"}),C.jsx("option",{value:"ocean-blue",children:"海洋蓝"}),C.jsx("option",{value:"mint-green",children:"薄荷绿"}),C.jsx("option",{value:"lavender-dream",children:"薰衣草紫"})]})]}),C.jsxs("div",{className:"settings-item",onClick:()=>{var Y;return(Y=z.current)==null?void 0:Y.click()},children:[C.jsx("span",{children:"朋友圈背景"}),C.jsx("span",{className:"arrow",children:">"}),C.jsx("input",{type:"file",ref:z,style:{display:"none"},accept:"image/*",onChange:te(v)})]})]}),C.jsxs("div",{className:"settings-section",children:[C.jsx("h3",{children:"数据管理"}),C.jsxs("div",{className:"settings-item",onClick:()=>{var Y;return(Y=H.current)==null?void 0:Y.click()},children:[C.jsx("span",{children:"导入数据"}),C.jsx("span",{className:"arrow",children:">"})]}),C.jsx("input",{type:"file",ref:H,style:{display:"none"},accept:".json",onChange:m}),C.jsxs("div",{className:"settings-item",onClick:y,children:[C.jsx("span",{children:"导出数据"}),C.jsx("span",{className:"arrow",children:">"})]})]})]}),E&&C.jsx(zw,{currentName:s,onClose:()=>w(!1),onSave:Y=>{f(Y),w(!1)}})]})},Kw=({onBack:n,onAddCharacter:e,onAddApiKey:t})=>C.jsxs(C.Fragment,{children:[C.jsx(Xt,{title:"添加",onBack:n}),C.jsx("main",{className:"main-content settings-view",children:C.jsxs("div",{className:"settings-section",children:[C.jsxs("div",{className:"settings-item",onClick:e,children:[C.jsx("span",{children:"添加新角色"}),C.jsx("span",{className:"arrow",children:"+"})]}),C.jsxs("div",{className:"settings-item",onClick:t,children:[C.jsx("span",{children:"添加新API密钥"}),C.jsx("span",{className:"arrow",children:"+"})]})]})})]}),Ow=({onClose:n,onSave:e})=>{const[t,r]=Q.useState(""),[o,i]=Q.useState(""),[s,c]=Q.useState(""),f=()=>{t.trim()&&s.trim()&&e(t.trim(),o.trim(),s.trim())};return C.jsx("div",{className:"modal-overlay",onClick:n,children:C.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),children:[C.jsx("h2",{children:"添加新角色"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"头像 (可选)"}),C.jsx(Yl,{currentAvatar:o||`https://api.dicebear.com/8.x/bottts/svg?seed=${t||"new"}`,onAvatarChange:i,className:"modal-avatar-uploader"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"char-name",children:"名字"}),C.jsx("input",{id:"char-name",type:"text",value:t,onChange:p=>r(p.target.value)})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"char-instruction",children:"角色设定 (System Instruction)"}),C.jsx("textarea",{id:"char-instruction",value:s,onChange:p=>c(p.target.value),placeholder:"例如：你是一个海盗船长..."})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),C.jsx("button",{className:"save-btn",onClick:f,children:"保存"})]})]})})},Jw=({todos:n,onUpdate:e})=>{const[t,r]=Q.useState(""),o=()=>{if(!t.trim())return;const f=[...n,{id:Date.now(),text:t.trim(),done:!1}];e(f),r("")},i=f=>{const p=n.map(m=>m.id===f?{...m,done:!m.done}:m);e(p)},s=f=>{const p=n.filter(m=>m.id!==f);e(p)},c=[...n].sort((f,p)=>f.done===p.done?0:f.done?1:-1);return C.jsxs("div",{className:"character-addons-container",children:[C.jsx("div",{className:"todo-list",children:c.map(f=>C.jsxs("div",{className:"todo-item",children:[C.jsxs("label",{className:"checkbox-label",children:[C.jsx("input",{type:"checkbox",checked:f.done,onChange:()=>i(f.id)}),C.jsx("span",{className:`todo-text ${f.done?"completed":""}`,children:f.text})]}),C.jsx("button",{className:"delete-btn",onClick:()=>s(f.id),children:C.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]},f.id))}),C.jsxs("div",{className:"input-box",children:[C.jsx("input",{type:"text",className:"text-input",value:t,onChange:f=>r(f.target.value),placeholder:"+ 添加新的待办...",onKeyPress:f=>f.key==="Enter"&&o()}),C.jsx("button",{onClick:o,className:"add-task-btn",children:C.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]})]})},Ww=({anniversaries:n,onUpdate:e})=>{const[t,r]=Q.useState(""),[o,i]=Q.useState(new Date().toISOString().split("T")[0]),[s,c]=Q.useState(!1),f=()=>{if(!t.trim()||!o)return;const v=[...n,{id:Date.now(),name:t.trim(),date:o,pinned:s}];e(v),r(""),i(new Date().toISOString().split("T")[0]),c(!1)},p=v=>{e(n.filter(x=>x.id!==v))},m=v=>{e(n.map(x=>x.id===v?{...x,pinned:!x.pinned}:x))},y=[...n].sort((v,x)=>(x.pinned?1:0)-(v.pinned?1:0)||new Date(v.date).getTime()-new Date(x.date).getTime());return C.jsxs("div",{className:"character-addons-container",children:[C.jsx("div",{className:"add-anni-form card",children:C.jsxs("div",{className:"add-anni-controls",children:[C.jsx("input",{type:"text",value:t,onChange:v=>r(v.target.value),className:"text-input",placeholder:"纪念日名称"}),C.jsx("input",{type:"date",value:o,onChange:v=>i(v.target.value),className:"text-input"}),C.jsxs("label",{className:"checkbox-label",children:[C.jsx("input",{type:"checkbox",checked:s,onChange:v=>c(v.target.checked)}),"置顶显示"]}),C.jsxs("button",{onClick:f,className:"btn btn-full-width",children:[C.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"添加纪念日"]})]})}),C.jsx("div",{className:"anni-list",children:y.map(v=>{const x=new Date,U=new Date(x.getFullYear(),x.getMonth(),x.getDate()),B=new Date(v.date),J=Math.ceil((B.getTime()-U.getTime())/(1e3*60*60*24));let I;J===0?I="今天!":J===1?I="明天!":J>1?I=`还有 ${J} 天`:I=`已过去 ${Math.abs(J)} 天`;const E=v.pinned?"btn-icon active":"btn-icon";return C.jsx("div",{className:"anni-item card",children:C.jsxs("div",{className:"anni-item-content",children:[C.jsxs("div",{className:"anni-item-text",children:[C.jsx("strong",{className:"anni-item-name",children:v.name}),C.jsxs("small",{className:"anni-item-date",children:[v.date," (",I,")"]})]}),C.jsxs("div",{className:"anni-item-actions",children:[C.jsx("button",{className:E,onClick:()=>m(v.id),title:v.pinned?"取消置顶":"置顶",children:C.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"})})}),C.jsx("button",{className:"btn-icon btn-icon-danger",onClick:()=>p(v.id),children:C.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]})},v.id)})})]})},Yw=n=>{if(!n||n.length===0)return null;const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=t.getFullYear(),o=n.map(i=>{const s=new Date(i.date);let c=new Date(r,s.getMonth(),s.getDate());c<t&&c.setFullYear(r+1);const f=c.getTime()-t.getTime(),p=Math.ceil(f/(1e3*60*60*24));return{name:i.name,daysLeft:p}});return o.sort((i,s)=>i.daysLeft-s.daysLeft),o[0]},Qw=({character:n,onBack:e,onSave:t,userName:r,onDelete:o})=>{const[i,s]=Q.useState(n.name),[c,f]=Q.useState(n.avatarUrl),[p,m]=Q.useState(n.systemInstruction),[y,v]=Q.useState(n.chatBackgroundUrl),[x,U]=Q.useState(n.nicknameForUser||""),[B,J]=Q.useState(n.autoReplyDelay||0),[I,E]=Q.useState(n.historyMemory||0),[w,H]=Q.useState(n.todos||[]),[z,O]=Q.useState(n.anniversaries||[]),[$,te]=Q.useState(null),Y=Q.useRef(null),ue=()=>{i.trim()&&p.trim()&&t(n.id,i.trim(),c.trim(),p.trim(),y,x.trim(),B,w,z,I)},we=async Ve=>{var He;const rn=(He=Ve.target.files)==null?void 0:He[0];if(rn)try{const ln=await Zc(rn);v(ln)}catch(ln){console.error("Error converting file to Base64",ln),alert("无法加载图片。")}};if($==="todo")return C.jsxs("div",{className:"details-view addon-view",children:[C.jsx(Xt,{title:"待办清单",onBack:()=>te(null)}),C.jsx("main",{className:"main-content details-main-content no-padding",children:C.jsx(Jw,{todos:w,onUpdate:H})})]});if($==="anniversary")return C.jsxs("div",{className:"details-view addon-view",children:[C.jsx(Xt,{title:"纪念日",onBack:()=>te(null)}),C.jsx("main",{className:"main-content details-main-content no-padding",children:C.jsx(Ww,{anniversaries:z,onUpdate:O})})]});const xe=Yw(z),Me=Ve=>{if(!Ve)return null;let rn="";return Ve.daysLeft===0?rn="今天!":Ve.daysLeft===1?rn="明天!":Ve.daysLeft>1&&(rn=`还有 ${Ve.daysLeft} 天`),rn?`${Ve.name} ${rn}`:null};return C.jsxs("div",{className:"details-view",children:[C.jsx(Xt,{title:"角色详情",onBack:e}),C.jsx("main",{className:"main-content details-main-content",children:C.jsxs("div",{className:"details-form",children:[C.jsx(Yl,{currentAvatar:c,onAvatarChange:f,className:"modal-avatar-uploader"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"char-name-edit",children:"名字"}),C.jsx("input",{id:"char-name-edit",type:"text",value:i,onChange:Ve=>s(Ve.target.value)})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"char-nickname-edit",children:"对你的昵称"}),C.jsx("input",{id:"char-nickname-edit",type:"text",value:x,onChange:Ve=>U(Ve.target.value),placeholder:`例如：船长, 老板, ${r}`})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"char-autoreply-edit",children:"自动回复延迟 (分钟)"}),C.jsx("input",{id:"char-autoreply-edit",type:"number",min:"0",value:B,onChange:Ve=>J(parseInt(Ve.target.value,10)||0),placeholder:"0为禁用"}),C.jsx("small",{className:"form-group-note",children:"设置在你离开时角色主动找你聊天的时间。设为0则禁用。"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"char-history-memory",children:"AI记忆深度 (消息数)"}),C.jsx("input",{id:"char-history-memory",type:"number",min:"0",value:I,onChange:Ve=>E(parseInt(Ve.target.value,10)||0)}),C.jsx("small",{className:"form-group-note",children:"AI能记住的过去消息的最大数量。0代表无限制。"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"char-instruction-edit",children:"角色设定 (System Instruction)"}),C.jsx("textarea",{id:"char-instruction-edit",value:p,onChange:Ve=>m(Ve.target.value)})]}),C.jsxs("div",{className:"settings-section details-settings-section",children:[C.jsxs("div",{className:"settings-item",onClick:()=>{var Ve;return(Ve=Y.current)==null?void 0:Ve.click()},children:[C.jsx("span",{children:"聊天背景"}),C.jsxs("div",{className:"background-preview-wrapper",children:[y&&C.jsx("img",{src:y,className:"background-preview",alt:"background preview"}),C.jsx("span",{className:"arrow",children:">"})]}),C.jsx("input",{type:"file",ref:Y,style:{display:"none"},accept:"image/*",onChange:we})]}),C.jsxs("div",{className:"settings-item",onClick:()=>te("todo"),children:[C.jsx("span",{children:"待办清单"}),C.jsx("div",{className:"addon-summary",children:C.jsx("span",{className:"arrow",children:">"})})]}),C.jsxs("div",{className:"settings-item",onClick:()=>te("anniversary"),children:[C.jsx("span",{children:"纪念日"}),C.jsxs("div",{className:"addon-summary",children:[Me(xe)&&C.jsx("span",{className:"next-event",children:Me(xe)}),C.jsx("span",{className:"arrow",children:">"})]})]})]}),C.jsx("button",{className:"save-btn-full",onClick:ue,children:"保存更改"}),C.jsx("button",{className:"delete-btn-full",onClick:()=>o(n.id),children:"删除角色"})]})})]})},Xw=({onClose:n,onSave:e})=>{const[t,r]=Q.useState(""),[o,i]=Q.useState(""),s=()=>{const c=t.trim(),f=o.trim();if(c||f){let p=c;f&&(p+=`${c?" ":""}[image: ${f}]`),e(p)}};return C.jsx("div",{className:"modal-overlay",onClick:n,children:C.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[C.jsx("h2",{children:"创建动态"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"post-content",children:"有什么新鲜事？"}),C.jsx("textarea",{id:"post-content",value:t,onChange:c=>r(c.target.value),placeholder:"分享你的想法..."})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"post-image-desc",children:"图片描述 (可选)"}),C.jsx("input",{id:"post-image-desc",type:"text",value:o,onChange:c=>i(c.target.value),placeholder:"用文字描述一张图片..."})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),C.jsx("button",{className:"save-btn",onClick:s,disabled:!t.trim()&&!o.trim(),children:"发表"})]})]})})},Zw=({onClose:n,onSave:e})=>{const[t,r]=Q.useState(""),[o,i]=Q.useState(""),s=()=>{t.trim()&&o.trim()&&e(t.trim(),o.trim())};return C.jsx("div",{className:"modal-overlay",onClick:n,children:C.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[C.jsx("h2",{children:"添加API密钥"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"key-name",children:"名称"}),C.jsx("input",{id:"key-name",type:"text",value:t,onChange:c=>r(c.target.value),placeholder:"例如：个人密钥"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"key-input",children:"API密钥"}),C.jsx("input",{id:"key-input",type:"password",value:o,onChange:c=>i(c.target.value)})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),C.jsx("button",{className:"save-btn",onClick:s,children:"保存"})]})]})})},jw=({onClose:n,onSave:e})=>{const[t,r]=Q.useState(""),[o,i]=Q.useState(""),[s,c]=Q.useState(""),f=v=>{i(v),c("")},p=v=>{c(v.target.value),i("")},m=()=>{const v=s.trim()||o;t.trim()&&v&&e(t.trim(),v)},y=s.trim()||o||"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2NjYyIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48bGluZSB4MT0iMTIiIHkxPSI4IiB4Mj0iMTIiIHkyPSIxNiI+PC9saW5lPjxsaW5lIHgxPSI4IiB5MT0iMTIiIHgyPSIxNiIgeTI9IjEyIj48L2xpbmU+PC9zdmc+";return C.jsx("div",{className:"modal-overlay",onClick:n,children:C.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),children:[C.jsx("h2",{children:"添加自定义表情"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"表情图片"}),C.jsx(Yl,{currentAvatar:y,onAvatarChange:f,className:"modal-avatar-uploader"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"sticker-url",children:"或 粘贴图片URL"}),C.jsx("input",{id:"sticker-url",type:"text",value:s,onChange:p,placeholder:"http://..."})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"sticker-name",children:"表情名称 (供AI使用)"}),C.jsx("input",{id:"sticker-name",type:"text",value:t,onChange:v=>r(v.target.value),placeholder:"例如：开心的猫"})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"cancel-btn",onClick:n,children:"取消"}),C.jsx("button",{className:"save-btn",onClick:m,disabled:!t.trim()||!(s.trim()||o),children:"保存"})]})]})})},ex=({characters:n,onClose:e,onSelect:t})=>C.jsx("div",{className:"modal-overlay",onClick:e,children:C.jsxs("div",{className:"modal-content",onClick:r=>r.stopPropagation(),children:[C.jsx("h2",{children:"选择一个作者"}),C.jsx("ul",{className:"select-author-list",children:n.map(r=>C.jsxs("li",{onClick:()=>t(r.id),children:[C.jsx("img",{src:r.avatarUrl,alt:r.name,className:"avatar"}),C.jsx("span",{children:r.name})]},r.id))})]})}),nx=({activeView:n,onViewChange:e})=>C.jsxs("nav",{className:"bottom-nav",children:[C.jsxs("button",{className:`nav-item ${n==="chats"?"active":""}`,onClick:()=>e("chats"),children:[C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"})}),C.jsx("span",{children:"聊天"})]}),C.jsxs("button",{className:`nav-item ${n==="contacts"?"active":""}`,onClick:()=>e("contacts"),children:[C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25S13.24 11.25 12 11.25 9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"})}),C.jsx("span",{children:"通讯录"})]}),C.jsxs("button",{className:`nav-item ${n==="moments"?"active":""}`,onClick:()=>e("moments"),children:[C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),C.jsx("span",{children:"发现"})]}),C.jsxs("button",{className:`nav-item ${n==="me"?"active":""}`,onClick:()=>e("me"),children:[C.jsx("svg",{viewBox:"0 0 24 24",children:C.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),C.jsx("span",{children:"我"})]})]}),ih=document.getElementById("root");ih&&_g(ih).render(C.jsx(Dw,{}));
